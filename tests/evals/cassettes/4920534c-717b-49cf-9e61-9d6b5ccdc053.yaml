interactions:
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "UserMemory", "description": "", "parameters": {"properties":
      {"age": {"description": "The user''s age", "title": "Age", "type": "integer"},
      "name": {"description": "The user''s name", "title": "Name", "type": "string"},
      "interests": {"description": "The user''s interests", "items": {"type": "string"},
      "title": "Interests", "type": "array"}, "relationships": {"description": "The
      user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions"],
      "title": "UserMemory", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSXWvcMBB8968Q+2wXn+3Ujd9aSCjXa2lJAiHRYXTy2qeLLBlJDjXH/fdi3Yed
        o3oQy45mdrS7+4AQEBUUBPiWOd52Mrrd3b1k78nDQ7Z6fkwe42UyfP/yvql+PH8b7iEcGXqzQ+7O
        rE9ct51EJ7Q6wtwgcziqLvIkvvmc53nmgVZXKEda07ko01ESJ1kU30SL9ETcasHRQkFeA0II2ft7
        tKgq/AsFicNzpkVrWYNQXB4RAkbLMQPMWmEdUw7CCeRaOVSja9VLOQOc1rLkTMqp8PHsZ/HUJyZl
        +bv68zWXycuv5bDaua22XPfqafU2q3eUHjpvqO4Vv/Rnhl/yxVUxQkCx1nOfLJqf2GozXLEJAWaa
        vkXlRuewp8AapFBkcUg9nUJBYamRQkhBKIcGrbMUilcKldEKLYV1SIGJUijrTO/N+AfrA3wodgj+
        F69P0eEyF6mbzuiNvWoz1EIJuy0NMuu/O+96cBZd+y3oPwwWOqPbzpVOv6EaZZPF4qgK095NaHpa
        EXDaMTljZYvg5BPsYB22ZS1Ug6Yzwi8F1F3JMc5v0zSNawgOwT8AAAD//wMA6BeuNB0DAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cb0a65f953-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:34 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=F4riUVOJJ3yL81JIQejxXHuHDJdxjdMp6Z9Gy1I79sU-1720567774-1.0.1.1-nOxfFy8KBFCfjMwqEKghOJMErrZ92qrkqq59AD2b8vIS1pGcA2hp5cSIwziVCU15NiaEPxpXuT707l_kjnpngA;
        path=/; expires=Tue, 09-Jul-24 23:59:34 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=d1dEPDtr.POAGhlW7BgLz20Mo696.PKvwwx5akskE8s-1720567774530-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '489'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9994'
      x-ratelimit-remaining-tokens:
      - '21999865'
      x-ratelimit-reset-requests:
      - 33ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_8346a46040ce04ef6aef0b255dfe74a1
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools":
      [{"type": "function", "function": {"name": "UserProfile", "description": "",
      "parameters": {"properties": {"age": {"description": "The user''s age", "title":
      "Age", "type": "integer"}, "name": {"description": "The user''s name", "title":
      "Name", "type": "string"}, "interests": {"description": "The user''s interests",
      "items": {"type": "string"}, "title": "Interests", "type": "array"}, "relationships":
      {"description": "The user''s friends, family, pets,and other relationships.",
      "title": "Relationships", "type": "object"}, "ai_instructions": {"description":
      "Prompt instructions that you as the AI assistant should always retain in subsequent
      conversations.", "items": {"type": "string"}, "title": "Ai Instructions", "type":
      "array"}, "other_useful_info": {"description": "Any other details you would
      like to know about the user.", "items": {"type": "string"}, "title": "Other
      Useful Info", "type": "array"}}, "required": ["age", "name", "interests", "relationships",
      "ai_instructions", "other_useful_info"], "title": "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xS22rjMBB991eIeXaKc2uI30rbLbRkuxe6NK2CUeWxra48MpLc3RDy74uVmxvW
        D2I4x+fMYWY2EWOgckgZyEp4WTd6MH+/fZn8+qB2uRjX9Hz1o8p/3i6dv142LxLiTmHe3lH6g+pC
        mrrR6JWhHS0tCo+d63A2SqaXs9lsEoja5Kg7Wdn4wcQMRsloMkimg+F4L6yMkuggZa8RY4xtwttF
        pBz/QsqS+IDU6JwoEdLjT4yBNbpDQDinnBfkIT6R0pBH6lJTq3WP8MboTAqtT41336ZXn+YktM6+
        J+rmurhZfH00i+nj3fP0YUH3ar7o9dtZr5sQqGhJHufT4494etaMMSBRB+2TQ/vNmkJpPJMzBsKW
        bY3ku+iw4SBK5JAmMQ9yDimHB/xQxCHmoMijRecdh/R1FXMQKlPkvG1DiABzuNJ/xNqx0iJ6FsRM
        EftikWR1waHTGV+hzVqHRaszRYUJhlv4lG4b/a9e7avtcZPalI01b+5sMVAoUq7KLAoXBtTfU3Qw
        XYW7aT+dAjTW1I3PvPmN1NmOLoc7Vzhd6okdz/ekN17oHp4k0T4nuLXzWGeFohJtY1U4IyiaLM/n
        45EU03wI0Tb6BwAA//8DAONvhpFPAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cb0d347e21-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:34 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=TguZki7qYB3VqdcDpSWiXA5Bu2lX8uTA0QLkOg1XLJ8-1720567774-1.0.1.1-6A4lJv8.KOQv8HuDrkQe7E4fN1w5foH55l5A8TMNmpUBBz868UCoP8GDtdH2Z4evSgxo7y1XUuNPHPpYZbF6pQ;
        path=/; expires=Tue, 09-Jul-24 23:59:34 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=DJW9FcvIQQLcXHQLjzcUhHdcgWaseonbkjYILl3hhoo-1720567774657-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '519'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '21999779'
      x-ratelimit-reset-requests:
      - 40ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_63334e781fb82349b602119319f74246
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2ySTW/bMAyG7/4VAs9O4cbO3Pg27CNdhg27dGhXBYYq07YSWXIkOVsX5L8PVj7s
        BvPBIPjqIV+Q3AeEgCggI8Br5njTysl8/elXEn/fbB82j8tvpXGmeV/z9VMhl2wLYU/olzVyd6Zu
        uG5aiU5odZS5Qeawr3qbTqPZuzRNEy80ukDZY1XrJomeTKNpMolmk9v4BNZacLSQkeeAEEL2/t9b
        VAX+gYxE4TnToLWsQsgujwgBo2WfAWatsI4pB+Egcq0cqt616qQcCU5rmXMm5dD4+O1H8TAnJmVe
        /d3tFumX7cffHx6VXjwV99Hy/ucdH/U7ln5tvaGyU/wyn5F+yWdXzQgBxRrPPlg0P4wuhcQrnBBg
        puoaVK63DnsKrEIKWRRSj1PIKHzFnVAUQgpCOTRonaWQPa9CCkzkQllnOm/CpyksDKIjniJCkc8G
        Fa9vKPSAdjWavLNYdjIXqtRH5PTYEonMKKGqEXWAN54Pwf/i1Sk6XPYrddUa/WKv1gWlUMLWuUFm
        /djG2wvORVf+mro3BwKt0U3rcqc3qPqy0+TuWBWG+x3UZHYSnXZMjqh5HJx8gn21Dpu8FKpC0xrh
        jwvKNucYpfM4jqMSgkPwDwAA//8DAOhVd8VlAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cadfd16807-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:34 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=LMX3VbodgpRjYl_P0xcAiZ.LRpLokst1Ly5F5YI9.NA-1720567774-1.0.1.1-nibFvy0DGi8S.MRD0dWRH93MR0BiEnZNaHiU9_T2alXplVJ1yz9C1_zk4.7WgupKuNaKOO8euNKk07uU3Ws0Uw;
        path=/; expires=Tue, 09-Jul-24 23:59:34 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=8luZweqPGhb7ZnuXv03IPKSACzYEcL2noO8Fj40Iw5Q-1720567774884-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '869'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '21997417'
      x-ratelimit-reset-requests:
      - 29ms
      x-ratelimit-reset-tokens:
      - 7ms
      x-request-id:
      - req_6cd0e43f778ce070ae59bbbb7cb5f083
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n\nGenerate a JSONPatch to update the existing schema instances.\n\n<schema
      id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'', ''grade'': ''8th'',
      ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}},
      "tools": [{"type": "function", "function": {"name": "PatchFunctionParameters",
      "description": "Respond with all JSONPatch operations required to update the
      previous function call.\n\nUse to correct all validation errors in non-compliant
      function calls,\nor to extend or update existing structured data in the presence
      of new information.", "parameters": {"type": "object", "properties": {"schema_id":
      {"description": "The ID of the function you are patching.", "type": "string"},
      "reasoning": {"description": "Think step-by-step, listing each validation error
      and the JSONPatch operation needed to correct it. Cite the fields in the JSONSchema
      you referenced in developing this plan.", "type": "string"}, "patches": {"description":
      "A list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT227bMAx9z1cQfE4KN3Xi1m8F1mLYUCBbN6BLExiKTNvqdJskp+2C/PsgO7cG
        84NA8JCHR0f0ZgCAosQckDcscGXl6Oblbp7OHydvXD54cTufrZ/+1vPJF1u5qcBh7DCrF+Jh33XB
        jbKSgjC6h7kjFiiyXmbjZDLNsiztAGVKkrGttmGUmtE4GaejZDK6vNo1NkZw8pjD8wAAYNOdUaIu
        6Q1zSIb7jCLvWU2YH4oA0BkZM8i8Fz4wHXB4BLnRgXRUrVspT4BgjCw4k/I4uP82J/HRJyZlcW/V
        Lwqfv319lI+f7lr7kP3889o8mZN5PfW77QRVreYHf07wQz4/GwaAmqmud8YCb+53hTPmmKJAzp9R
        ASBzdatIh3gN3CzQ84YUK0S5wHyBt5yVpAT/3q6c4AscLtAR80YLXXcFPxqC1pODhnnQJoB1Zi1K
        KoHpd9D0CtZRRY40Jw+OZHxjCAZCQ0Bvwgeha+iHXkBk40avyXkWhYPwwFamDbG0q1wLNYTXRvAm
        Yq0+Y2Q7veA6wXviTriNlpBfYP683OIHH7aD/8XLXbQ97I80tXVm5c/WASuhhW+K3ppopA/G9iMi
        3bLb0/bD6qF1RtlQBPObdCScXqc9Hx7/jCOaTnZgMIHJYz4b3wx2CtG/+0CqqISuyVknurXFyhZp
        klzT1Sq7vMHBdvAPAAD//wMAnIf6Pb8DAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cb0931227e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=R26PRjXrNKxaHuH6hO50wfftlYdYzg7XDR6Y1lUm.9A-1720567775-1.0.1.1-RXqa_poz222OPPI36dV3Q3JA97uEupYBxEYGLykUZF7M08sdHwmmv10bbC083IGV3mul0Br.eqSp7W.e.uxbxg;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=nfIY23tJUrCL_vCeBPcDfk8Xrybes3ezpEUNWpFdVlM-1720567775168-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1115'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '21999713'
      x-ratelimit-reset-requests:
      - 39ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_0932873ad3bd120f2f2b069961dbd275
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT227bMAx991cIek4GJ3WSJm+7YgWKotiAdthSCIpM20plUZPorm3gfx9kO7du
        fjBEHp7DI4LaJYxxnfMV46qSpGpnxsvt559ZdXP34f7+Xmav3y9zf02X5fyq+FPd8lFk4GYLivas
        dwprZ4A02h5WHiRBVJ0spulsvlgssg6oMQcTaaWjcYbjaTrNxulsPLkYiBVqBYGv2K+EMcZ23T9a
        tDk88xVLR/tMDSHIEvjqUMQY92hihssQdCBpiY+OoEJLYKNr2xhzAhCiEUoac2zcf7uT83FO0hhR
        frz98uNRv7+i7O7m69P19WZ7efPt0++Tfr30i+sMFY1Vh/mc4If86k0zxriVdceFZ/JSkWgCeOE8
        FODBKgjiafJGjjEufdnUYClehe/W3IEnbcH+S1/z1W7NPTakbdkHTvrHPkhHp1CMyMui0EpImwuF
        NtfRdhRJ29GaK6wL9CQCUOQM4sroWhLEevJoBiWjyyoWdVKy3uhoZy/kUFsKAguhLYGHQINPCCQb
        L22MJ6M1L7QHEUhGG4NwLq2KuufZ0qMC/yJChc4N94mdIOqT1DaOq/NSQ65l365uglb7OchcY1fg
        MFeyc5S2bcvPZt8m/zs/DKf2sLcGS+dxE96sIS+01aESHmTo1uF0K5O96EP3SpqzxefOY+1IED6C
        jbKz6bJX5cd3eUSXswEkJGmO+fk0SwafPLwEgloU2pbgndfdo+GFE/lsMb9IF8Uy5Umb/AUAAP//
        AwBcvlVcPQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cadef99867-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=8Y1Amj9iT2nWBo_Ddq.XK.JJCb73uiHA2uqHoVg8bjQ-1720567775-1.0.1.1-La7D103NI5rpyFMbWOrQyA9nBYA1Q.24NyAGy0_AYfIXaD80_zPGU2SXhl6p3YGwKbRgqzIC3ueJhrUYCJ4XSA;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=AGqHbcwWfjICxooufL7r7.eJh0rhnvYvqt5tWh9mF_E-1720567775316-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1093'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '21999681'
      x-ratelimit-reset-requests:
      - 12ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_58184cb6256681aa9596f6f9794460ba
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools":
      [{"type": "function", "function": {"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties":
      {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTy27bMBC86ysInu1CjuU49jk59BD0EQQFWgfEmlrJdPgquSrsGvr3gpL8THUQ
        ljs7s8PF8pAxxlXJl4zLDZA0Xo8X26efxROum+/b10d8rGGy8+Z94V+ep6rgo8Rw6y1KOrI+SWe8
        RlLO9rAMCIRJdTK/y2f38/m86ADjStSJVnsaF258l98V43w2nkwH4sYpiZEv2a+MMcYO3T9ZtCXu
        +JLlo2PGYIxQI1+eihjjwemU4RCjigSW+OgMSmcJbXJtG60vAHJOCwlanxv33+EiPs8JtBazOjbP
        L18X90/ycfH67ceW5JfPv7d/L/r10nvfGaoaK0/zucBP+eVNM8a4BdNxcUcBJIkmYhA+YIUBrcQo
        /kxu5BjjEOrGoKV0FX5YcY+BlEX7kb7iy8OKB9eQsnV/8BDe+0M+uoQmoxWnAFWlpABbCulsqZLt
        JJK3oxWXzlQukIhIiTOIS60MEKZ6Ck4PulrVm1TUSYFZq2TnKOSdshSFq4SyhAEjDT4xEjQBLA1+
        KhVQRIJkYxAuwcqke52tg5MY9iJunPfD7VInTPoEyqZxdV4Mlgr6dqaJSh7nAKVyXYF3pYTOUd62
        Lb+afZv9L34bova0t9rVPrh1vFlDXimr4kYEhNitw+VWZkfRt+6VNFeLz31wxpMg9442yU5n016V
        n9/lGV3MBpAcgT7ni+IhG3zyuI+ERlTK1hh8UN2j4ZUXRZ4/4HQ9nyx41mb/AAAA//8DAA6H0T09
        BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cb08186429-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=wzB0TnSOx2ZIQVIxDqfWzEQiioC0A2EVNcCrt2CO_r4-1720567775-1.0.1.1-0ZGC1u6mUdUxRx_.FGICbZZDg_TE0fjJ9B_f7HVCHg_KD34S1ULDzn13gwo8z61k3gEQe5ZTDlLhz6rhetK9rg;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=1gqBAJflH2lEBnIJn0t0..macbhavP_yGLx91Hztw8g-1720567775349-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1162'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9992'
      x-ratelimit-remaining-tokens:
      - '21999844'
      x-ratelimit-reset-requests:
      - 44ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_675efa231c1b61ae9dfa62d005305ceb
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT227bMAx991cIek4Gp3Hqxq9tsaFrt6EDulsKQZFpR60sahI9NAj874Ns59Ju
        fjBEHp7DI4LaJYxxXfKCcbWRpBpnpsun65/Zl4/5xeft+e3dzfv79PIpv9K/vyHk13wSGbh+AkV7
        1juFjTNAGu0AKw+SIKrO8rN0cZ7nedYDDZZgIq12NM1wepaeZdN0MZ3NR+IGtYLAC/YrYYyxXf+P
        Fm0JL7xg6WSfaSAEWQMvDkWMcY8mZrgMQQeSlvjkCCq0BDa6tq0xJwAhGqGkMcfGw7c7OR/nJI0R
        3x+utLv+sLzx9+ru66cf2VxdBnV3e9JvkN663lDVWnWYzwl+yBdvmjHGrWx6LryQl4pEG8AL56EC
        D1ZBEH9mb+QY49LXbQOW4lX4bsUdeNIW7L/0FS92K+6xJW3rIXDSPw9BOjmFYkReVpVWQtpSKLSl
        jrajSNpNVlxhU6EnEYAiZxRXRjeSINaTRzMqGV1vYlEvJZu1jnZWvJhFIYfaUhBYCW0JPAQafUIg
        2XppaVSptAcRSEYbY6qUVkXd19naowK/FWGDzo33iZ0g6pPUNo6r99JAqeXQrmmDVvs5yFJjX+Cw
        VLJ3lHZdx1/Nvkv+d34cT91hbw3WzuM6vFlDXmmrw0Z4kKFfh9OtTPaij/0raV8tPnceG0eC8Bls
        lJ0vzgdVfnyXR3S5GEFCkuaYzxazZPTJwzYQNKLStgbvvO4fDa+cyNL0AubrfLbkSZf8BQAA//8D
        AJrtBvY9BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cadbca96e3-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=K29kDsXU9eVeFUSA7XtfxSjywxXM79vLWCrTWCfZKhE-1720567775-1.0.1.1-3hRkoKaAPqjV5D8s9byCf119LVgwovLBMnBizgWA7jW5aesyjA7XKA7U2KU50S3kbCXftN__PrJr.7ZHWisb2A;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=7iH042FUIsjFfcOEr2s_WTE73lyABh6gyPLBQyOSwjo-1720567775519-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1513'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999835'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_b24676ea3458afd6137b856df81d7b19
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT227bMAx991cIek4GJ3EbxK+7IAg2DMOw7pZCUGTaUSuJgkR37QL/eyHbubSb
        HwyRh+fwiKAOGWNcV7xkXO0lKevNdHX3/lfxkDfrD2v8E2x8eGy/0c+bzerz3cfvfJIYuLsDRUfW
        G4XWGyCNboBVAEmQVGfLeX51vVwuix6wWIFJtMbTtMDpPJ8X0/xqOluMxD1qBZGX7HfGGGOH/p8s
        ugoeecnyyTFjIUbZAC9PRYzxgCZluIxRR5KO+OQMKnQELrl2rTEXACEaoaQx58bDd7g4n+ckjRH0
        xfy1b8On9jreqOL63Wb99YfcbNYX/QbpJ98bqlunTvO5wE/58lUzxriTtufCIwWpSLQRgvABagjg
        FETxMHslxxiXoWktOEpX4Yct9xBIO3D/0re8PGx5wJa0a4bAy3A/BPnkEkoRBVnXWgnpKqHQVTrZ
        TiJ5N9lyhbbGQCICJc4oroy2kiDVU0AzKhnd7FNRLyXtTic7W17OkpBH7SgKrIV2BAEijT4hkmyD
        dDSq1DqAiCSTjTFVSaeS7stsE1BBeBJxj96P90mdIOmT1C6Nq/diodJyaGfbqNVxDrLS2Bd4rJTs
        HeVd1/EXs++y/51vx1N32luDjQ+4i6/WkNfa6bgXAWTs1+FyK7Oj6G3/StoXi899QOtJEN6DS7KL
        ohhU+fldntHV1QgSkjTnfLFYZaNPHp8igRW1dg0EH3T/aHjtRbVY1MtdMV8Bz7rsGQAA//8DACeb
        x6E9BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cadd0b96a8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=oI01LAq_430GpL3X1HUXxbphjgY.04SG6ZxqC0JUGJk-1720567775-1.0.1.1-UhMbjl3E4BcnptmFqQs0XB.0T6M2i58_vev11kX_pJzdHZS4Wd9B_RqRmyzAsouM.FY4KnZWRaKZC45wyXSTxQ;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=L4EWlPhYaOrtD8VVQEtxmkWMMnBvZcOsQwRC35wgtzA-1720567775529-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1526'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999849'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_7bf039067007e2ead2740965356673d7
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTY/TMBC951dYPrco/chGmxsHEAIhhKgQLF1ZXmeSemt7jD1ZtlvlvyOn6ddC
        DpE9b96b59HMPmOM65pXjKuNJGW9md4+vrtb5u3TQq++6Q87k+vPX1bvt+EZbfGdTxIDHx5B0ZH1
        RqH1BkijO8AqgCRIqrNynhc3ZVkuB8BiDSbRWk/TJU7n+Xw5zYvpbDESN6gVRF6xXxljjO2Hf7Lo
        anjmFcsnx4iFGGULvDolMcYDmhThMkYdSTrikzOo0BG45Np1xlwAhGiEksacCx++/cX53CdpjCg/
        /mm+vi1+vvz+9GO1vWtfinzVmeXqot5BeucHQ03n1Kk/F/gpXr0qxhh30g5ceKYgFYkuQhA+QAMB
        nIIonmav5BjjMrSdBUfpKXy/5h4CaQfuX/qaV/s1D9iRdu3h4mXYHi755BJKNwqyabQS0tVCoat1
        sp1E8n6y5gptg4FEBEqcUVwZbSVByqeAZlQyut2kpEFK2ged7Kx5NUtCHrWjKLAR2hEEiDT6hEiy
        C9LRqNLoACKSTDbGUC2dSrrX0TaggrATcYPej+9JlSDpk9QutWvwYqHW8lDOdlGrYx9krXFI8Fgr
        OTjK+77nV73vs/+d78dTf5pbg60P+BBfjSFvtNNxIwLIOIzD5VRmR9H7YUu6q8HnPqD1JAi34JJs
        sRi3hJ/38ozeFiNISNKc4zfzIht98riLBFY02rUQfNDD0vDGi7oobxZ52dzmPOuzvwAAAP//AwAq
        ePwdPQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cafde196d8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=tmzVyUlXxYYseZH1P5Vy6eMOslWT3KuaqiBybLAQm4c-1720567775-1.0.1.1-4nFtSVyOw..CLKzHB3.C8Ec0RSWZudWPf16CNKws_OrKg8mwQQQuq0q6b8Lnu0OwLtGsl3hCXCMcgg3LX5_nFw;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=erDYCfYYH8Hc66c74reU9k3MlvRxkpG642CAbredzeA-1720567775549-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1424'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '21999707'
      x-ratelimit-reset-requests:
      - 19ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_78a77f46bf97a505378dca5aaa867d44
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieD8zUvuXVANmCXAkXRYV0KQZEpR60kahK9NQj83wc5zke7
        +WCIfHyPTwR1KBjjpuYrxtVOknLBjpfP68f5J1p/eVmvf/y6v7mZuIe7aL/d61vzmY8yA7fPoOjE
        +qDQBQtk0B9hFUESZNVJNS0XH6uqmveAwxpspjWBxnMcT8vpfFwuxpPZQNyhUZD4iv0sGGPs0P+z
        RV/DK1+xcnTKOEhJNsBX5yLGeESbM1ymZBJJT3x0ARV6Ap9d+9baK4AQrVDS2kvj43e4Ol/mJK0V
        D7v5n+1z62ZfH7W/A3W7b/Tt99fqqt9Reh96Q7r16jyfK/ycX71rxhj30vVceKUoFYk2QRQhgoYI
        XkESvyfv5BjjMjatA0/5Kvyw4QEiGQ/+X/qGrw4bHrEl45tjEGR8OQbl6Bqa5JCi1NooIX0tFPra
        ZN9ZpexGG67QaYwkElAmDerKGicJcj1FtIOwNc0uF/VS0m1N9nMSCmg8JYFaGE8QIdFgFBLJNkpP
        J0PaRBCJZPYxKNfSqyz8NttEVBD3Iu0whOF+uRXkBiSNzwPrzTiojTz2c20y6jQJWRvsCwLWSvaW
        yq7r+Jvpd8X/zk/DqTtvrsUmRNymd4vItfEm7UQEmfqFuN7L4iT61L+T9s3q8xDRBRKEL+Cz7Hw2
        Paryy8u8oMvFABKStJf8YloVg0+e9onACW18AzFE0z8broNQUFbL2WxWal50xV8AAAD//wMAvubC
        QD8EAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cb0c9fceb5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=fRcqeD9rnnP3GFhliBtGLAVCi1Z3jZR5FqhEb11WMM0-1720567775-1.0.1.1-peXVmY0vXPIfFVjTZYvmxBZar_eiXO0P.V8uSpfnCpZONTszZr8s_pz32AWiagaqrEFslASy.rgHOCQY5bQrgQ;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=9h0qv3gAorESh3Xjvizjusx4NGsxS66J0H5mJHl_8Pg-1720567775598-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1483'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9990'
      x-ratelimit-remaining-tokens:
      - '21990933'
      x-ratelimit-reset-requests:
      - 55ms
      x-ratelimit-reset-tokens:
      - 24ms
      x-request-id:
      - req_59a9bc6bf13d38ecce5c7c8912371ad6
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}], "model": "gpt-4o",
      "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieD8+F4yW1dt8uwAm3QHroUgiLTjlpZVCW6aBH4vw+yna9u
        PhgiH9/jE0HtE8a4LviKcbWTpGpnxsvnH4/zh+tvi6/rt8f5+mF9e33lbp1/uPk++8VHkYHbZ1B0
        YH1RWDsDpNH2sPIgCaLqJJ+m2SLP83kH1FiAibTK0XiO42k6nY/TbDyZDcQdagWBr9ifhDHG9t0/
        WrQFvPMVS0eHTA0hyAr46ljEGPdoYobLEHQgaYmPTqBCS2Cja9sYcwYQohFKGnNq3H/7s/NpTtIY
        8brdXU3vq5syd/7ewPru5fHu56v7fdavl/5wnaGyseo4nzP8mF99asYYt7LuuPBOXioSTQAvnIcS
        PFgFQbxNPskxxqWvmhosxavw/YY78KQt2H/pG77ab7jHhrSt+sBJ/9IH6egcihF5WZZaCWkLodAW
        OtqOImk72nCFdYmeRACKnEFcGV1LglhPHs2gZHS1i0WdlKy3Oto5CDnUloLAUmhL4CHQ4BMCycZL
        S4NKqT2IQDLaGFKFtCrqXmYrjwr8hwg7dK6/zyR2gqhPUts4rs5LDYWWfbu6CVod5iALjV2Bw0LJ
        zlHati2/mH2b/O/8NJza494arJzHbfi0hrzUVoed8CBDtw7nW5kcRJ+6V9JcLD53HmtHgvAFbJTN
        smWvyk/v8oQuswEkJGlO+UU2TwafPHwEglqU2lbgndfdo+GlE0WWL2ZpXi5TnrTJXwAAAP//AwDx
        K8AnPQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cb0fe47af7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=2oNzcbykzSY7eK4xTtPofEkaWayPOaxbSuBXXYwaleI-1720567775-1.0.1.1-YTMVHarVHLdyNtE3XJJ9BtQvqxkWnjHW1pmxnAd3cuqIMHISAc64NnAYzhCq4KaCDH4gy_GLh_bUV4_h1317dQ;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=G1GhcQBttNW1.qGCsDDaHWPFN4I5xyexjBxtuUudY8s-1720567775607-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1362'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9992'
      x-ratelimit-remaining-tokens:
      - '21999681'
      x-ratelimit-reset-requests:
      - 43ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_3a038b0f80f47d5abbbf7b7e3d0324ec
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTy27bMBC86ysInu1CdvyofStap2mBFkUvRVwHxJpayXT4ArlKYxj694KS/Eqr
        g8Dd2ZkdLpbHjDGuCr5kXO6ApPF6uNiv1pM/k+AfHj7UMDv8rL9+vl+vf6we68MXPkgMt92jpBPr
        nXTGayTlbAfLgECYVEfzcT6dzefzSQsYV6BOtMrTcOKG43w8GebT4eiuJ+6ckhj5kv3OGGPs2P6T
        RVvgK1+yfHDKGIwRKuTLcxFjPDidMhxiVJHAEh9cQOksoU2uba31FUDOaSFB60vj7jtenS9zAq3F
        4/rXfaH3BGaO+FJ//7bfflzFT+VVv0764FtDZW3leT5X+Dm/fNOMMW7BtFx8pQCSRB0xCB+wxIBW
        YhQvozdyjHEIVW3QUroKP264x0DKov2XvuHL44YHV5OyVRd4CM9dkA+uoRRRgLJUUoAthHS2UMl2
        Ehk1gw2XzpQukIhIidOLS60MEKZ6Ck6n4sGGa1XtUlErBWarkp3UJQl5pyxF4UqhLGHASL1PjAR1
        AEu9SqkCikiQbPQWC7Ay6d5mq+AkhoOIO+d9f5/UCZM+gbJpXK0Xg4WCrp2po5J9pwCFcm2Bd4WE
        1lHeNA2/mX2T/e/81J+a895qV/ngtvHNGvJSWRV3IiDEdh2utzI7iT61r6S+WXzugzOeBLlntEl2
        ms86VX55lxd0Me1BcgT6kp/lo6z3yeMhEhpRKlth8EG1j4aXXkzy/D3ebeejBc+a7C8AAAD//wMA
        tOr7Wj0EAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cad9f715f5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=3YQ3VzWdphVlMoLc4167PVZEhFm7OQSssNDFC.57Dn0-1720567775-1.0.1.1-hHweBzxb0ojd1o3B.sOvzBo.N_EWdpZ7hC2Wcs9gV_.EWmTxHzRFzPKeLJCvuihQS3rNEhGLSSVpKfcYYJwQCA;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=.qu.wvVoAAij6xs8MnRLQAw7dRyiKHHniMhRQKvfPiQ-1720567775732-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1629'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '21999373'
      x-ratelimit-reset-requests:
      - 12ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_2f4ef4cafcc854fb78f5cb456229ec1f
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4RUTW/bMAy951cQvOzidE6a1IlvPbSHDRk6oEXb1YGhyIytRpY0Sc6WBvnvg+w0
        H8WA+iAIfHyPTwTpbQ8ARYEpIK+Y57WR/enrza8Rn43/fN8k7mmsfl6v1j/uH5Lnq5vZAKPA0ItX
        4v6ddcF1bSR5oVUHc0vMU1AdJMN4fJUkyagFal2QDLTS+P5I94fxcNSPx/3B5Z5YacHJYQovPQCA
        bXsGi6qgv5hCHL1HanKOlYTpIQkArZYhgsw54TxTHqMjyLXypIJr1Uh5AnitZc6ZlMfC3bc9uR/7
        xKTMRZOM6en36pmbxdvbQL+Wk2s2uX08qddJb0xraNkofujPCX6Ipx+KAaBidcu9Y55Xt/vEO2ZZ
        TZ6s+yAFgMyWTU3Kh2fgNkPHK6pZLooM0wwfHNkZ1dpuMowytMScVkKVLXhfETSO7BcHoWwErKQI
        hPJkyXkXAVMFWJIseHCVMA4qtiZYECkwVq9FQcUF3FfkCBRRAV7DgqAxRZgEEAp8RXD0AJ25i9aL
        CS8kl2H6ss1Qm9aSJSMZp/eEqg1+ZWUXWTPZUIbpMNlFn3HCi85IGX4jS7VgVYaf0w9dONN4CSnO
        M6jZqu3i/HOlswaeqW0z5CxUSDOcaVsy1cKFLrvYTdUUezHn80PqI/NOqwx3u/kOz8Zh1/vffb6/
        7Q5rJHVprF64D1uBS6GEq/JuSsI8Oa9NVyLIzdt1bc42EI3VtfG51ytSQXASJ50eHn8QR3QwGO5R
        rz2TR2A6mPb2FtFtnKc6XwpVkjVWtOuLS5MX4+TqMk6W0xh7u94/AAAA//8DAL+effLHBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cb0d6c15e9-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=.iBNofiVR1Q4H.yIJpRmutxu9_6Ag29FtEPJ4.eAxhc-1720567775-1.0.1.1-wjNTiePnkduBuHDZJ1SrIfVSsQEEAJlj16o.h.sYV00Qg4vsXx2RwtP940XV5qdgmw67Wj_jzaXxoz89XehoBg;
        path=/; expires=Tue, 09-Jul-24 23:59:35 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=bFl..mCYsI.TSyiMberqfaRRqTGx1UgDa8tbSc40mNM-1720567775839-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1675'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9994'
      x-ratelimit-remaining-tokens:
      - '21999563'
      x-ratelimit-reset-requests:
      - 35ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_e17ce1d3cf45ac330205d929cd55002f
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_PdQA7l2ZNJyLjthoscounULk",
      "function": {"name": "UserMemory", "arguments": "{\"age\": 40, \"name\": \"Joe\",
      \"interests\": [\"drones\"], \"ai_instructions\": []}"}}]}, {"content": "Error:\n\n```\n1
      validation error for UserMemory\nrelationships\n  Field required [type=missing,
      input_value={''age'': 40, ''name'': ''Joe''..., ''ai_instructions'': []}, input_type=dict]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}}, ''required'': [''age'', ''name'', ''interests'', ''relationships'',
      ''ai_instructions''], ''title'': ''UserMemory'', ''type'': ''object''}\n```\nPlease
      respond with a JSONPatch to correct the error for schema_id=[call_PdQA7l2ZNJyLjthoscounULk].",
      "role": "tool", "tool_call_id": "call_PdQA7l2ZNJyLjthoscounULk"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3RTTU/bQBC951eM5sIloSYfmPhGJapCUwoC1AocRcvu2F5Y7y67a0QU5b9Xa4ck
        oNYHazxv5r03o/GqB4BSYAbIKxZ4bdVg+nR2P54lNnn5mlxOxPDl7PX8z4/Tt+cLzmrsxw7z+EQ8
        vHcdclNbRUEa3cHcEQsUWY/SYTI5TtN03AK1EaRiW2nDYGwGw2Q4HiSTwdFo01gZycljBg89AIBV
        +44WtaA3zCDpv2dq8p6VhNm2CACdUTGDzHvpA9MB+zuQGx1IR9e6UWoPCMaoBWdK7YS7Z7UX7/bE
        lFr8KmpxwlM6v737flNVF8eqTG6ms9meXke9tK2hotF8u589fJvPPokBoGZ123vFAq++bQqvmGM1
        BXL+ExUAMlc2NekQx8BVjp5XVLOFFDlmeef7Slyfpmp4f3mxnD2FynhuGn03e86xn6Mj5o2Wumzr
        byuCA0eKRVlfSesPoJCkBEgPtfRe6hKYbj8dvTTSkTiE3wSaSEAwwISAUBE0ntyBB0vBx3T4H+9h
        a8LGacnnmD2scjS29cKEeAerNvHlA0GLvTLVUI7ZKscoFQlyvKnIKcO7+X4uuTNFyHG+Xs/X+GF9
        696/4vkmWm/PTpnSOvPoP10RFlJLXy26Fcb9+2BsJxHp5u15Nx8uFq0ztQ2LYJ5JR8KT0aTjw90P
        tUPT0QYMJjC1y0+Tk97GIfqlD1QvCqlLctbJ9tqxsAsxSY9HSVpME+yte38BAAD//wMAHDnS9/YD
        AAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cfdf11f953-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:35 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '958'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999572'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_136a8675336d299ef1bce14cfcaa88a4
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_gzvvG7IqDwCXnoGYdH0JHV8c", "function": {"name": "UserProfile",
      "arguments": "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\":
      [\"Greet Kevin in French.\"], \"other_useful_info\": [\"Kevin is learning French.\"]}"}}]},
      {"content": "Error:\n\n```\n1 validation error for UserProfile\nrelationships\n  Field
      required [type=missing, input_value={''age'': 0, ''name'': ''Kevin...n is learning
      French.'']}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_gzvvG7IqDwCXnoGYdH0JHV8c].",
      "role": "tool", "tool_call_id": "call_gzvvG7IqDwCXnoGYdH0JHV8c"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTU/bQBC951eM5sIloU7AOPGtAkraIjWqCm3ByNrYY3thv9hdQ0OU/17Zzhdp
        fViN5s28eTN6XvYAkOcYA2YV85k0YjB5vLwL56ogH3yXi4vbu9thZm7C1/OLKqyw33To+SNlftN1
        nGlpBHmuVQdnlpinhnUYjYLwLIqisAWkzkk0baXxg1M9GAWj00EQDoYn68ZK84wcxnDfAwBYtm8j
        UeX0B2MI+puMJOdYSRhviwDQatFkkDnHnWfKY38HZlp5Uo1qVQuxB3itRZoxIXaDu2+5F+/uxIRI
        p/r66edrOC7f3r6OLr89zU5vptduEe7N66gXphVU1Crb3mcP3+bjg2EAqJhse2fMZ9WndeGMWSbJ
        k3UHVADIbFlLUr5ZA5cJuqwiyVKeJxgnne7y7eXlKvr8fPF6/kvpq9/5NPgyvR1nCfYTtMScVlyV
        bf2PiuDIkmDNWFdx446g4CRy4A4sPdfcUg7z2oPkznFVHsPHPOeqBKaApPEL6GwChbb/MHkNksiD
        rwg6nRvOdoPjVpBpNieXYHy/TFCbVhfL8w1YtYkP76hb7IWJmhKMl6vVwwrf3WnV+1/8sI5WW38J
        XRqr5+7ALlhwxV2VdrdqDu28Nt2Ihu6h9XH9zpporJbGp14/kWoIJ8Ow48Pdn7NDz8Zr0GvPxF7X
        +KS3Vohu4TzJtOCqJGssb22NhUnzMDo7CaJiEmBv1fsLAAD//wMAbF0ANN8DAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d14d1b6807-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:36 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '988'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999513'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_563c1264ec129d49fbc08f7474234a44
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieD0yT16ts67LB1w4Zu3YAthaDKtK1WEgWJXlME/u+FHOdz
        88Gg+PgeP0BuMsa4rnjJuGolKevN9Orxw+/F+vqLW3x/jubnZ/Xt+RLWxae2+fFL80li4MMjKNqx
        3ii03gBpdFtYBZAESXVWXOTLy6IoFgNgsQKTaI2n6QKnF/nFYpovp7P5SGxRK4i8ZH8yxhjbDP9U
        oqtgzUuWT3YeCzHKBni5D2KMBzTJw2WMOpJ0xCcHUKEjcKlq1xlzBBCiEUoac0i8/TZH9mFO0hjx
        8fa9+3qnrufNPL9Ff9PCu/auvbFH+bbSL34oqO6c2s/nCN/7y7NkjHEn7cCFNQWpSHQRgvABagjg
        FETxd3YmxxiXoeksOEqt8M2KewikHbh/6SteJhy1oyiwFtoRBIi09SdLdkG69J5NVrzWAUQkmapd
        8TKfrHglndKuOfM2ARWEFxFb9F67Jrn7yYoH7Gj7TGlleBqxEyi9KMi61kpIVwmFrtJJPO5kFNoa
        A4kIlDhjG8poKwlSPAU0o5LRTZuCBilpH3RqfCcEqV+S2qVxDREWKi23eraLWu2qk5XGIcBjpeQw
        obzve34y+z77n30/Wv1+bw02PuBDPFtDXmunYysCyDisw/FWZjvR++FKupPF5z6g9SQIn8Al2fnb
        8Ur44S4P6NVyBAlJmoN/USyzsU4eXyKBFbV2DQQf9HA0vPaiWhaX87yor3Ke9dkrAAAA//8DAAVV
        EDU9BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18caedc4cea8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:36 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=SrnvWFPOWzEr2lHNX8pztjJpCHu0x23nhY6TEBiVb8c-1720567776-1.0.1.1-3R154GzSszRSZwcwWhqdRT3E8oSs8ls1yaKFkCI7E2wPUGRFuWtiQUSmGMFWDvVP8MmHz5OHGGGGiT8AtBudTA;
        path=/; expires=Tue, 09-Jul-24 23:59:36 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=0K86rbK765Lmb5kGaONFuiuDxnlsyHkGEjiqCYcDkck-1720567776154-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1393'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '21999670'
      x-ratelimit-reset-requests:
      - 24ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_f68e643dd69b75c4fb5c2fc97e61d643
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_Q0iDCfDMNOoM5OGX5KMnJi9M", "function": {"name": "UserProfile", "arguments":
      "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\": [\"Always
      greet Kevin in French.\"], \"other_useful_info\": []}"}}]}, {"content": "Error:\n\n```\n1
      validation error for UserProfile\nrelationships\n  Field required [type=missing,
      input_value={''age'': 0, ''name'': ''Kevin...''other_useful_info'': []}, input_type=dict]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_Q0iDCfDMNOoM5OGX5KMnJi9M].",
      "role": "tool", "tool_call_id": "call_Q0iDCfDMNOoM5OGX5KMnJi9M"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT3U/bMBB/719xuhdeWpa2hKh53BhITC2gMQEjKHKdS2JwbC92+FjV/32yU9qC
        lgfLut/9Pny6rAYAKApMAXnNHG+MHM0ev/+Of06Wt+xcFL/mHZ9Pb/TdYvGkxsdXOPQMvXwk7t5Z
        h1w3RpITWvUwb4k58qrjZBLFx0mSxAFodEHS0yrjRkd6NIkmR6MoHo2nG2KtBSeLKdwPAABW4fQR
        VUGvmEI0fK80ZC2rCNNtEwC2WvoKMmuFdUw5HO5ArpUj5VOrTso9wGktc86k3Bn332rvvpsTkzKn
        MX+9Pvv69+z0PHqO+aK+S55EMzF7fr30mwmByk7x7Xz28G09/WQGgIo1gXvJHK9PN42XrGUNOWrt
        JykAZG3VNaScfwauMrS8poblosgwzfrcV5E4+VaezBcXeh5fnN3GP+bqXMzmGQ4zbIlZrYSqQv91
        TXDQkmTe1tbC2AMoBckChIWW/nSipQKWnYNGWCtUBUKBqwmEEk4wCd7wEG4IFFEBTgMrCnC1sBsZ
        pyEszhu8CFcHap/4MKQx/tlkM0zvVxlqE0KxongH61D48iFhwJ6Z7CjDdLVeP6zxw5DWg//dHza3
        9Xa5pK5Mq5f2065gKZSwdd4Pyk/ZOm16Cy/3EJa4+7CXaFrdGJc7/UTKC84m014Pd7/NDk3GG9Bp
        x+Qea3Y02CRE+2YdNXkpVEWtaUXYaSxNzilKZtPpNCpxsB78AwAA//8DAPcjNTvcAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cfe9c67e21-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:36 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '996'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999505'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_fd73fb79bea49c59e195dfa297c64e23
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT32+bMBB+56+w/JxMkNCmyesWLesmbdKkqd1aWY45iFvjs+yjaxTxv1cmBNJs
        PCD7vvt+YHyHhDGuC75iXO0kqdqZ6fJp/Tv/nofwdfP3F94BmuWX27v1y2yv9Q8+iQzcPoGiE+uD
        wtoZII32CCsPkiCqZotZenW9WCzyDqixABNplaNpjtNZOsun6dU0m/fEHWoFga/Yn4Qxxg7dO0a0
        BbzyFUsnp0oNIcgK+GpoYox7NLHCZQg6kLTEJyOo0BLYmNo2xpwBhGiEksaMxsfncLYez0kaIzY/
        v718yub3sHH34eazzbW5vV9/XJ/5HaX3rgtUNlYN53OGD/XVhRlj3Mq648IrealINAG8cB5K8GAV
        BPGSXcgxxqWvmhosxU/hhwfuwJO2YP+lP0TPB+6xIW2rfuekf+536YS9Q7s9eVmWWglpC6HQFjqG
        76TSNuIK6xI9iQAUeScTZXQtCSKFPJpYzWK70dUu9nV6st7qmGxUc6gtBYGl0JbAQ6BTaAgkGy8t
        DVKl9iACyRhoiFtIq6L8Zb3yqMDvRdihc6fv6ywhGpHUNh5iF6uGQsvet26CVoOll4XGrsdhoeQx
        Xdq2LX/3V9rkf+vHftUON9pg5Txuw8UF5aW2OuyEBxm6i3J+X5OT6GM3P827keDOY+1IED6DjbJX
        i+VRlY8TO6JZlvUoIUkzAtfLNOmD8rAPBLUota3AO6+7eeKlE3ma3sB8u8iWPGmTNwAAAP//AwAO
        KluvWAQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cad89d230c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:36 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=GmYolAQIs63qGVEVwLFOEjpZSZJAw53Gh3KOMsiLH8Q-1720567776-1.0.1.1-Dk.AcOKGRv2B04CkW9Mnqkqx5_GMXPzJMZDUgePCdqYeElXkucJR5O6Dl6EufO93Q2nWAaSkpntM.7YHWa47wQ;
        path=/; expires=Tue, 09-Jul-24 23:59:36 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=3sbSq7EPyBN2bb.JaBJU504VFgl011fko1EkRmO7PF4-1720567776366-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2345'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '21999644'
      x-ratelimit-reset-requests:
      - 17ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_c2db5103b5f5d8f17e160a372fe947d5
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTS3PbIBC+61cwnO2O5EeU+NiZ3lp3Os0lbTIMRisJB7EUVmlSj/57ByzLjlsf
        NLAf3wO8e8gY47riG8ZVK0l1zszv9p9+rNb7pdovPpe/236r+sa11NwvH+gLn0UG7vag6MT6oLBz
        BkijPcLKgySIqkW5yNc3ZVmuEtBhBSbSGkfzFc4X+WI1z9fzYjkSW9QKAt+wnxljjB3SN0a0Fbzy
        Dctnp0oHIcgG+GY6xBj3aGKFyxB0IGmJz86gQktgY2rbG3MBEKIRShpzNj7+Dhfr8ztJY8TX7fbj
        92/qV7GtFw8VLnHbyfrPy/2F31H6zaVAdW/V9D4X+FTfXJkxxq3sEhdeyUtFog/ghfNQgwerIIiX
        4kqOMS5903dgKV6FHx65A0/agv2X/hg9H7nHnrRtxp2T/nnc5TP2Dk178rKutRLSVkKhrXQMn6SK
        IeIKuxo9iQAUeScTZXQnCSKFPJpJzuimjeeSnux2OiZLaFJzqC0FgbXQlsBDoFNoCCR7Ly1NUrX2
        IALJGGgqVtKqKH9dbzwq8G8itOjc6X7JEqIRSW3jI6ZYHVRajr5dH7RKt02PIyuN6YzDSsljunwY
        Bv7uXxmy/62fxtUwdbTBxnnchasG5bW2OrTCgwypUS77NTuJPqX56d+NBHceO0eC8BlslF2vyqMq
        P0/sGS2KYkQJSZozcLO+zcagPLwFgk7U2jbgnddpnnjtxCrPb2G5K4s7ng3ZXwAAAP//AwDezBLx
        WAQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18cafa6c9440-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:36 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=tL67g.M_fTZjte37gzJk2BBgg6PCVF5Al3vclpU0zZs-1720567776-1.0.1.1-PtF4miE8mGS7K.pzIkNTZxyp_Y5mmfpQPoUv.Amba.2KQWC2SjtPke4cC0S79u5LD6VGBoDQiMoF2LuTKKb9tQ;
        path=/; expires=Tue, 09-Jul-24 23:59:36 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=.A3E6fpUi5HZ4MrSOdTRt5uBkeqta9DhOVPvmaXAnY0-1720567776428-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2295'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '21999684'
      x-ratelimit-reset-requests:
      - 26ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_7898695e3b3f4e2db0af9fc2ece5652a
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_Vh4wbjum3GZfnRecOygfOWx7",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 10, \"traffic_and_conditions\":
      0}, \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\":
      0}, \"points_of_interest\": {\"restaurant\": 10, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 0}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=10,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=10,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Vh4wbjum3GZfnRecOygfOWx7].", "role": "tool", "tool_call_id":
      "call_Vh4wbjum3GZfnRecOygfOWx7"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTXW/bMAx8z68g9Jxkab68+K3Dlq7AgLbDsBapA0OVaVupLKkS3SUL/N8H2WmS
        FvODQfN4x6Ms7nsATGYsBiZKTqKyarDYfFvNluXubvG8WV1ez6Mvl/fzzVcxXs3Gn1k/MMzTBgW9
        sYbCVFYhSaM7WDjkhEH1IhqPZvMoimYtUJkMVaAVlgZTMxiPxtPBaDa4mByIpZECPYvhsQcAsG/f
        waLOcMtiGPXfMhV6zwtk8bEIgDmjQoZx76Unron1T6AwmlAH17pW6gwgY1QquFKnxt2zP4tP58SV
        Su+Km+9y+bydZsu/26uXHy8P9aUpRw9n/TrpnW0N5bUWx/M5w4/5+EMzAKZ51XJvOYlyeSi85Y5X
        SOj8BykAxl1RV6gpjMH2CfOixIqnMktYnHS+f5fTP0+buppcrXL9E8XNrshv7rdRwvoJc8i90VIX
        bf2vEkFqSZIr4ERYWQIygFtyXBDUHh1Yhzk61AJ9SGQgtTDOoSDIOHEI4/shBKnODODWoiAP3Q3y
        8EdSCd6ikLkUYJ2x6EiiB8epRAdUcg1SExbo/BDuETRiFoxYZ15lhkAlwltTT64WVDuE3DhALsoz
        iyA4YWHcbthOa8Oxok9Y/LhPmLHt0A6t4gLfCso2+an1pFFTGqZOz6ZuC1+5qjFh8T5h1khNPjV5
        Gjw79NTlQ8Rrx/XhO+evpnaSMBW19FIH+mPCrokryXXC1k3TNOuGvfvFTe9/8foQNcfVUKawzjz5
        Dzed5VJLX6bdbw53xJOxXYsgt25XsH63Vcw6U1lKyTyjDoLT8WzcCbLT1p/gxfQAkiGuzmiT6bx3
        8Mj8zhNWaS51gc462e4ky22azaL5ZBTlixHrNb1/AAAA//8DAF9gmkucBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d5fdb0ceb5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:37 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1576'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996467'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_4e1a6d0794bcb2f9e28fe63859f566a4
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_gCPFXkiAIt4VNHvLLbj8NRDq", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_gCPFXkiAIt4VNHvLLbj8NRDq].", "role": "tool", "tool_call_id":
      "call_gCPFXkiAIt4VNHvLLbj8NRDq"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUTW8bOQy9+1cQOttZ27HXjW9F26ABskU2CNptO8GAljgzSjSSInHSuob/+0Ia
        fyXtHAYSH/n4SEncDACEVmIJQjbIsvVmdPHw4dt81nS1bn98eLy6dP7qSk3o89svX8deDFOEWz2Q
        5H3UmXStN8Ta2R6WgZApsU4W0/H878ViMc9A6xSZFFZ7Hs3caDqezkbj+WhyvgtsnJYUxRK+DwAA
        NvmfJFpFP8USxsO9paUYsSaxPDgBiOBMsgiMUUdGy2J4BKWzTDaptp0xJwA7Z0qJxhwT99/mZH3s
        ExpTvrmUd/b668/JaqKfb2/vGrP459e/2J3k66nXPguqOisP/TnBD/blq2QAwmKbY2+QZXO5c7zB
        gC0xhfiKCkBgqLuWLKcyxKYQUTbUYqlVIZZFr7t+d3P536N+e8Wzz58+Pl9frx7efLp9/1SIYSEC
        YXRW2zr73zUE2mrWaEBb3zF0kRRoy1RTiKBtZEIFrgJuCAI9dTqQgv5uQOTQSe4CRahcAELZgA9U
        USArCSQy1S6sz+ALgSVSwA4CeYOSEl8k+KG5ydTShZAof2MeAj2TBZ0VrAEDAbWe18NEli/l+sjS
        d+MsV+pTSykWYvl9Uwjnc8G77HuHJhv/8hRYW7JcdpFCeSwhZsdnNB0VYrkpRHAd983bJILwuNts
        hy+wtOWAVaVliVaV0lml09HGjCZYurZygctInKJiTymNbpEpBXBwZs9ldN0kr0yG7UoncQcq77Tl
        WLqqTAcXKPJOLEXGLqDd7fu6AqnyiJTp9qYeFeKp08TQn07uKEKgSltSgNy66BsKVIj7lLLSgcrI
        mGrai1RoZdL4ylwHJymsy9g47/f9SQAlsYzapvucK2tJaey1tl3U8tBZVNplD++UxL6+7Xa7vd+K
        Fw9kO/jT+n632h4Gi3G1D24VX80JUWmrY1P2jyS9sMjO9ykS3X0eYN2LmSR8cK3nkt0j2UQ4O59d
        9ITiODOP8GQx26HsGM1J3Hx6PtiJFHEdmdqy0ram4IPOI01UvlTq4nwqca4mYrAd/A8AAP//AwCf
        9aR92wUAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d41c5c9867-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:37 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2196'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996380'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_57684fb0468d550d068c4526af8d1699
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_5gsuMSP96EcD9UQWjtcOIqjz", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_5gsuMSP96EcD9UQWjtcOIqjz].", "role": "tool", "tool_call_id":
      "call_5gsuMSP96EcD9UQWjtcOIqjz"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xU227bOBB991cQfLZT52Jr7bdik7RF0Tbd7SJo60AYUyOJCcVhhqPdeg3/e0HJ
        t3r3rdWDQM3lnMNDcdYDpbQt9FxpU4OYJrjR7PHmy+RLuXwPq/j+s79Z3r6Vl5PJb9/evH6+18PU
        QctHNLLrOjPUBIdiyfdpwwiCCfU8uxhPplmWTbpEQwW61FYFGV3R6GJ8cTUaT0bnl9vGmqzBqOfq
        60AppdbdO0n0BX7TczUe7iINxggV6vm+SCnN5FJEQ4w2CnjRw0PSkBf0SbVvnTtKCJHLDTh3IO6f
        9dH64BM4l3/4/fqVfQtPtPz80VzPGuCXf0wnt/URXw+9Cp2gsvVm789Rfh+fn5AppT00Xe8diKlv
        t4V3wNCgIMcTKKU0cNU26CVtQ68XOpoaG8htsdDzRa97UsX23Z93s+mNuZ799fH+UcyHN8+P/y70
        cKEZIZK3vurqP9WorLdiwSnrQyuqjVgo6wUr5Kisj4JQKCqV1KgYn1vLWKj+31BRuDXSMkZVEisE
        U6vAWCKjN6gMCFbEqzN1j8ojFkpIMQYHBhNexAPTP1bqjgNCYApsQfC/NGfdHkIyC+NCz7+uF5pC
        t5Ut7q6g7oIvArJYj17yNiLnB3HxBVMrnQ/Dhf4bXIsLPV+nXn7q7Vlvkl+7qv5TGMrSmhx8kRvy
        hU3nFbvsZjP8CTWGmpJY8oiS+OKpLONsA4KJVJjcTo+zVZ3qO0HQLG1C+wVyAlkvMacyTyfEGOVU
        UIpBy+Blp6W0jHkUSJbsYgV4k+SdhCsmg7zKY00h7Oz9OcWYdApYn25HZ0eDhYVT2U0brdkfLhSW
        utpAhYEoWx0PG/3DvdsM/m/9sF1t9vPKURWYlvFk/OjSehvrvL976eJGodBTJLiHbi62P4w6HZia
        ILnQE/oEeHWeTXtAfRjFh/T5LNtmhQTcUd9ldjnYitRxFQWbvLS+Qg5su0mpy5AXk2x6Oc7K2VgP
        NoPvAAAA//8DAGM6dcEyBgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d44ef46429-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:38 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2453'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996546'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_894442535a6dad76502466347bbd6fb5
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_qbhB2UgNf7prUleSRkZRFqpM",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 0, \"traffic_and_conditions\": 0},
      \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\": 0},
      \"points_of_interest\": {\"restaurant\": 0, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 1}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_qbhB2UgNf7prUleSRkZRFqpM].", "role": "tool", "tool_call_id":
      "call_qbhB2UgNf7prUleSRkZRFqpM"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xU224bNxB911cM+Cy7smxZjd4aIGlRt7nYcVIkaxAUd3aXMW8ezqpVBf17QK5u
        Noruw4KcM3PmzJCczQhAmFosQOhOsXbRnr36/ubr7OaP961788tv74y//72v6fPdx9Xs35tejHNE
        WH5Hzfuocx1ctMgm+AHWhIoxs17Mp5PZ9Xw+nxXAhRptDmsjn12Fs+lkenU2mZ1dXO4Cu2A0JrGA
        byMAgE35Z4m+xn/EAibjvcVhSqpFsTg4AQgKNluESskkVp7F+Ajq4Bl9Vu17a08ADsFKraw9Jh6+
        zcn62CdlrVx+4vfx/vLOTV7Pbm+mHz/fdOHX5V+rk3wD9ToWQU3v9aE/J/jBvniRDEB45UrsB8W6
        e7tz/KBIOWSk9IIKQChqe4eecxliU4mkO3RKmroSi2rQ/bTsXk/v23fNPNK9xbvbx6+3b5/in5UY
        V4JQpeCNb4v/pw7BeMNGWTA+9gx9whqMZ2yREhifGFUNoQHuEAifekNYw3A3IDH1mnvCBE0gQKU7
        iIQNEnqNoBVjG2h9Dl8QPGINHCBSWJkaC58ORJnnf+j2HGPAFXowRcgaFCGgi7weZ85yN9fwt+Gu
        8A5NOS8Fx9xZTJVYfNtUIsRSN2G0SuPeoSvGnyISG4+eZZ+Q5LGSVBxXyvZYicWmEhR6Hnq4yQT0
        uNtsx8+wvGVSTWO0VL6WOvja5BNOBc2wDq4JxDIh56g0UGprnGLMAUzB7rmsabvsVciUW5os7kAV
        g/GcZGhkPj/CxDuxmFj1pDzveRpDKBOrLGVvq5XXmfqFuaWgkdYydSHGY8mH1sgmkLRBKyudokfk
        JBtFLslAMvURabDm9lei+MFggfx261SJhyIes2RWxufLXepzWBs1pHN9MvrQX1WbUDxiqLUaqtxu
        t9uHrXj2Wraj/1o/7Fbbw5SxoY0UlunF0BCN8SZ1cngx+bklDnFIkekeyjTrnw0oESm4yJLDI/pM
        eHX5826cieMAPcIXB5QDK3sSN7uejHYiRVonRicb41ukSKbMN9FEWc/m15eTefNqIkbb0Q8AAAD/
        /wMA/6qAJugFAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d5f8c17af7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:38 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2321'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21994962'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 13ms
      x-request-id:
      - req_d1dae99e0ac60192ece9cb98e1ee838e
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_7JwfQA5YzqKXTkZgz50Tul4T", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_7JwfQA5YzqKXTkZgz50Tul4T].", "role": "tool", "tool_call_id":
      "call_7JwfQA5YzqKXTkZgz50Tul4T"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUTXPbNhC961fs4NKL7CqyaTu6NWmaOu2kzozayYc8HBhckrBBLLxYylE0+u8d
        gPqyWx004O6+tw8PwK5HAMpWagbKtFpMF9zJ6/t3X4vm/ppo/s+ftHzzeLOMrik+r/z19EGNE4Lu
        7tHIDnVqqAsOxZIf0oZRCybWV5fTSXFxeXlZ5ERHFboEa4KcnNPJdDI9P5kUJ6/OtsCWrMGoZvBt
        BACwzv9Joq/wu5rBZLyLdBijblDN9kUAismliNIx2ijaixofkoa8oE+qfe/cUUKIXGm0c4fGw299
        tD74pJ0r3315+PThr6v27d/Xv/+K5/XH9131/vFte9RvoF6FLKjuvdn7c5Tfx2cvmgEor7uMvdFi
        2t+2hTeadYeCHF9QASjNTd+hl7QNtV6oaFrsdGmrhZotBt2XH57qT78UX348/vF5/vC1+VFM5r07
        ny/UeKEYdSRvfZPr5y2C9VasdmB96AX6iBVYL9ggR7A+CuoKqAZpERgfe8tYwXA3IAr3RnrGCDUx
        oDYtBMYaGb1BMFqwIV6dwpzAEHPCSGvjGJ4QPGIFQhCYlrbC3ECHwBTYasH/9Di02PGOAZfowWZx
        K9CMgF2QFP9uMEhGJFpnm1asb0D7CnR3Z7O8I6VPrTUtxJZ6VwFj7QalmOzgn+JxaeJ09AR3nEg9
        xniajQ3pBDEu1OzbeqEoZH8Zg9MGdwVtDv4ckMV69FIm+vJAHnPhUrseF2q2XiimXoazWicCfth+
        bMbPculTWNe1NaX2VWnIVzbdpJizKW2oq4mljCgJFQdK42ynBRNAmNyOa+dXJtv5NSDS1WBLXO5r
        DkY830n24RDJW3f0lLcYMT1Tg0eIknGJ2uFwkd/sSccQUcBKMv10oTa3eTuBrJdYUl1mQRhlaxhG
        0T1rL7u91JaxjKKTHbtYpb1J0l+EGyaDvCpjSyHsrE2JpJZFW59eXjalw8rqoWXXR2v2h6IrS7ki
        UGX0IGuz2WxuN+rZU96M/m99u11t9iPQUROY7uKLiaZq621sy+E5p1kQhcLQItHd5lHbP5ueKjB1
        QUqhB/SJ8PysmA6E6jDdD+np5GqbFRLtjnDFxWS0FaniKgp2ZW19gxzY5uGr6lBOX1+9mhYXZ0Wt
        RpvRvwAAAP//AwCDI6MxhQYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d59beb96d8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:38 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2423'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996407'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_00b3f47d2d7c519441649c6e03572adb
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_tQlzmCrMu6sVc46DJHSXaJJH", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_tQlzmCrMu6sVc46DJHSXaJJH].", "role": "tool", "tool_call_id":
      "call_tQlzmCrMu6sVc46DJHSXaJJH"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUTW8bNxC961cQvPgiu5ItS7WuSQvFhlGnLVLXkbGgubO7jLkceji0owj73wty
        9WU1OgjcefMeZx7JWQ+EkKaUcyF1o1i33p5effvt4XJ69fKxbR4+PdzFm6d/Fs3L/Z/tl8XLmxwm
        Bj59A81b1pnG1ltgg66HNYFiSKrj2fnocjqbzS4z0GIJNtFqz6cTPD0fnU9OR5en44sNsUGjIci5
        +DoQQoh1/k8luhK+y7kYDbeRFkJQNcj5LkkISWhTRKoQTGDlWA73oEbH4FLVLlp7ADCiLbSydr9x
        /1sfrPc+KWuLye3inn58Gv0R/y0/zOq4iDefr95uLg7266VXPhdURad3/hzgu/j8aDMhpFNt5t4p
        1s3vm8Q7RaoFBgpHUkJIRXVswXFqQ66XMugGWlWYcinny75u/mx/tB/oNk7DFz2Zfrxe/HWvrq8X
        SzlcSgIV0BlX5/y/GxDGGTbKCuN8ZBEDlMI4hhooCOMCgyoFVoIbEAQv0RCUor8bIjBFzZEgiApJ
        gNKN0IqhRlqdiSSukShlKu8JE2yCYBSe8NWUIJTbSv2PPxTwCk6YShhOLGg9p+B3Db5PTxWdWFM3
        bFxdKFcWqn0y4DSciLfG6EaEBqNN7WgbS8iEGIBOgvAEFVDKzVIrsBbfxFbsLFvl05lAWMr51/VS
        os+OEXirNGwTmhz8xQOxceC4SPrFXj3kxFdlIyzlfL2UhJF799dJgJ43H93wHZY+mVRVGZ070+hK
        k+5GyGiCNbYVEhcBOLFCL6mtaRVDIjCh3Wr91KaekQ6bDFKxy9Fo8aiJbME+krvuTcsNBkjPTsMB
        qSB4BWWhv5i36rn3P28StoYbF0wJS9k95pY8GsehwKrIRUHgjWkQWEVSjrf9VIagCKySJdtYqZxO
        5R+Fa0INtCpCg95v7U1AqplYGZfeUzamhdKofss2BqN3B6NKgznDY6lVX1bXdd1jJ9890G7ws/Xj
        ZtXtBpvF2hM+haM5JSvjTGiK/pGmFx4Yfb9FknvMAzS+m4nSE7aeC8ZncElwMp6e94JyP7P38Plo
        vEEZWdkD3sX0YrApUoZVYGiLyrgayJPJI1VWvpiMRr/CxdNsfCUH3eA/AAAA//8DAAJP3O5bBgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d58c0b96a8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:38 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2713'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21994096'
      x-ratelimit-reset-requests:
      - 8ms
      x-ratelimit-reset-tokens:
      - 16ms
      x-request-id:
      - req_4b1ca015feeef231edf3e0535a509a8b
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_YZWFdljtam7eevuNMjbCEsDf", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_YZWFdljtam7eevuNMjbCEsDf].", "role": "tool", "tool_call_id":
      "call_YZWFdljtam7eevuNMjbCEsDf"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6yVTXPbNhCG7/oVOzhLjj5sq9FNdexJD03TtBmPHXk4K3BJwgYBZLFMrGr03zsg
        RUnR9JbqoIH2492Hu8RqOwBQJlcLULpC0XWwo7fPt4/Xk89/LJfFy+N0ff/b7N58Wn6+kYc/30c1
        TBl+/Uxa+qwL7etgSYx3nVszoVBSncyn46vr+Xx+3Tpqn5NNaWWQ0aUfTcfTy9H4ajSZ7RMrbzRF
        tYAvAwCAbfudEF1Or2oB42FvqSlGLEktDkEAir1NFoUxmijoRA2PTu2dkEvUrrH2xCHe20yjtcfC
        3Wd7cj72Ca3Nrqu7968Pf/36yxr/+frhZtlUj/W72yWd1OukN6EFKhqnD/058R/si7NiAMph3eZ+
        RNHV3T7wIzLWJMTxTApAIZdNTU7SY6jtSkVdUY2ZyVdqseq4Hx7v73L7LFjPib41H35/Xt/cxnfF
        Sg1Xigmjd8aVbfzfFYFxRgxaQBGqg4B4oFdh1AJNJIbAVBCT0xSTIQfjhEriCMZFIczBFyAVAdPX
        xjDl0L05EIUbLQ1TvIBb1NWJEmgUKj1vIFa+sTmsU3pgiuSEclhvAF2v891IBTGQNoXRENgHYjFJ
        NeGH1Dn4bqwF7ZlTglQmJgmmYFEbV7Z4e2z4hrah2KliSHJsUAjSw2/2NSMUnoESdE960bavrUZx
        pRZftivlQ9vFrg71AVVrfNNSOnKSpTZmJ218w76RdgTDlWpxVmqxTbn80k1mu0uj6qO6n8JYFEZn
        6PJMe5eb9KrE1rvbDX+CRvu68CxZJEn14jmWtqZGoVRU2Nuex5qySvEtENZrk9T+B5zgjZOY+SJL
        E2OKcg6UbNgwOulZCsOURcHUkt6Wo0uzPzeX7DXxJouVD6Fv788Rp3eWBY1LF7NtR025wXPsuolG
        H4aLufFtbPC5xih7jqed+uHK7wb/dX7an3aHVWl9Gdiv49nmU4VxJlZZd+3TzojiQ1ciyT21K7n5
        YcuqwL4Okol/IZcEL2fTy05QHf8Fju7pZLL3ihe0J3lXs6vBHlLFTRSqs8K4kjiwaZe0KkKmaTx/
        O5vNxoUa7Ab/AgAA//8DACTeY9utBgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d6aae915f5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:38 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2637'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996442'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_832546d02f38cae8d5e956faa44f72d6
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_XVDipEH9JrRcMSNY43cCscML", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_XVDipEH9JrRcMSNY43cCscML].", "role": "tool", "tool_call_id":
      "call_XVDipEH9JrRcMSNY43cCscML"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xVTXPbNhC961fs4NKL5MqWbdU6tvlom6bJ2J5M08jDgcElCQfEooulHVWj/54B
        KEqyYh004L59+/aDWK5HAMqWagHKNFpMG9zk6uH1vxf6VXX7zU6v3t1fvpPKX39+stc37ZtLNU4M
        un9AIwPrxFAbHIol38OGUQumqKfzs+nF5Xw+v8hASyW6RKuDTM5pcjY9O59MLyansy2xIWswqgV8
        GQEArPN/StGX+E0tYDoeLC3GqGtUi50TgGJyyaJ0jDaK9qLGe9CQF/Qpa985dwAIkSuMdm4v3P/W
        B+d9n7Rzxew2liuht29//WVaxw/X1/r/h9VD8+FArw+9CjmhqvNm158DfGdfHIkBKK/bzP2oxTRv
        to4fNesWBTkehQJQmuuuRS+pDLVeqmgabHVhy6VaLPu8//n0yobXv1/9ydfm/c3fn89n5rdo3v+1
        VOOlYtSRvPV19r9tEKy3YrUD60Mn0EUswXrBGjmC9VFQl0AVSIPA+F9nGUvo3w2Iwp2RjjFCRQyo
        TQOBsUJGbxCMFqyJVydwS2CIOXGksXEMTwgesQQhCEyPtsQsoENgCmy14A8ae4kh7hjwET3YnNwK
        NCNgG2R1kisNqaUYl2rxZb1UFHLBjMFpg4NDk40/B2SxHr0UXUQu9iXE7PioXYdLtVgvFVMnffPW
        KQB/3T5sxs+w9Cisq8qaQvuyMORLm0YbM5pgQ21FLEVESazYhzTOtlowEYTJDbGcrZvklYPp9t6m
        5HpGmhVb4mLnY8jRURG5BXtLrvpJc5vLi5jujMEDSsH4iNph/1bdoOTpDFIwSKXxRWpRmvSQAo7h
        DzDa/5Tmpn2ZaBHBEDkQ8hhB+1VLjCdLtbkbv5R9X50c5/+y8z2nk8cYf/DPTQ5kvcSCqiJzMcp2
        jBhFd6y9DB2uLGMRRachDbZSe5NUjsw1k0FeFbGhEIaBJyD1kUVbny5oHlWLpdW9ZNtFa3avii4t
        ZY9ApdF9WpvNZnO3Uc9u/Gb00vlue9rsNqWjOjDdx6PFpyrrbWyK/tanlRGFQi+Rwt3ljdw9W7Iq
        MLVBCqGv6FPA89N+s+f1OnwE9vDZ6YAKiXYHvNnVdLRNUsVVFGyLyvoaObDNO1pVoSgv5pez6by6
        mqrRZvQdAAD//wMA1D9GLqwGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18d5598a96e3-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:39 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3264'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996535'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_5fdd9ec3f247fdf786ce2a78a64f1afe
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_qbhB2UgNf7prUleSRkZRFqpM",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": {}, \"routing\": {}, \"traffic_and_conditions\":
      {}}, \"comfort_settings\": {\"climate_control\": {}, \"lighting_and_ambience\":
      {}}, \"points_of_interest\": {\"restaurant\": {}, \"fire_station\": {}, \"dancing_station\":
      {}, \"grocery_shopping\": {\"preference_for_local_markets_farms_or_supermarket\":
      [\"local market stands\"]}}, \"entertainment_and_media\": {\"music\": {}, \"radio_and_podcast\":
      {}}}}"}}]}, {"content": "Error:\n\n```\n1 validation error for PreferencesFunctionOutput\npertinent_user_preferences.points_of_interest.grocery_shopping.preference_for_local_markets_farms_or_supermarket.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''local
      market stands'', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_qbhB2UgNf7prUleSRkZRFqpM].", "role": "tool", "tool_call_id":
      "call_qbhB2UgNf7prUleSRkZRFqpM"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5RUTW/iMBC98ytGvnCBEiiQwq2720o9bFXRT7UgyziTxMWxXdtpixD/vYpDIa2q
        lTaHyJo3783zZCabFgARCZkC4TnzvDCyO3k+ezwZs9nkYcRu317k2dWf8n42erjw9u6MdCqGXj4j
        95+sI64LI9ELrWqYW2QeK9V+PIhG4ziOTwJQ6ARlRcuM7w51dxANht1o1O0f74i5FhwdmcJTCwBg
        E96VRZXgO5lC1PmMFOgcy5BM90kAxGpZRQhzTjjPlCedA8i18qgq16qUsgF4rSXlTMpD4frZNM6H
        PjEp6e/rIhreJXdj8X55/nBa3rDl/WPfnzbq1dJrEwylpeL7/jTwfXz6rRgAUawI3CvmeX6+S7xi
        lhXo0bpvUgCE2awsUPnqGmQzJ47nWDAqkjmZzmvfL8v81+A2u0xjY28lXs9Wj7PzF/N3TjpzYpE5
        rYTKQv5NjvDKZImQagttYzFFi4ojTbWlUnMmacHsCr2jKbOFo9pSVxq0dbQNLtelTGCJwCARwT6z
        a3gTPm/qtYGpBNoOq8/DkTYqWXxFJjFpwwrX7ii4NFU70M3J9GkzJ9oEsxaNZBw/E/IQ7Bm0XihU
        npYObUPY9YwWyjuqUyqUR4vO9zKrOdo1dbk2Rqis999XDuVDz3buDgrBUFCAOheq+UxcoPzr6oF4
        ATUCPyiAfkULDRdVn7aL7WJLvgzItvXTebE7bfeLJXVmrF66b3tCUqGEy2k9JNWEOa9NXaKSW4QF
        Lr/sJDFWF8ZTr1eoKsHjk2FcC5LDP+MA9wejHeq1Z7LBm8SD1s4kcWvnsaCpUBlaY0VYaZIamozi
        8XEUp5OItLatDwAAAP//AwC4wk2b2wQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18e8a92b7af7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:40 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1705'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996990'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 8ms
      x-request-id:
      - req_f2621cd45949acd108619123fecf5dbb
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_gCPFXkiAIt4VNHvLLbj8NRDq", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": {},
      \"routing\": {}, \"traffic_and_conditions\": {}}, \"comfort_settings\": {\"climate_control\":
      {}, \"lighting_and_ambience\": {}}, \"points_of_interest\": {\"restaurant\":
      {\"preferred_restaurant_type\": [\"quiet place with a refined atmosphere\"]},
      \"fire_station\": {}, \"dancing_station\": {}, \"grocery_shopping\": {}}, \"entertainment_and_media\":
      {\"music\": {}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n1
      validation error for PreferencesFunctionOutput\npertinent_user_preferences.points_of_interest.restaurant.preferred_restaurant_type.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''quiet
      place with a refined atmosphere'', input_type=str]\n    For further information
      visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected Parameter
      Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'': {''fan_speed_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Fan Speed Preferences''}, ''preferred_temperature'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Temperature''}, ''seat_heating_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Seat Heating Preferences''}, ''airflow_direction_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Airflow Direction Preferences''}}, ''title'':
      ''ClimateControl'', ''type'': ''object''}, ''DanceHall'': {''properties'': {''preferred_dancing_network'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_gCPFXkiAIt4VNHvLLbj8NRDq].", "role": "tool", "tool_call_id":
      "call_gCPFXkiAIt4VNHvLLbj8NRDq"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xUTU8bMRC951eMfOGSkJBAArm1lC/x0VBVbYGg1eCd3TV4bWPPBmiU/155N5CA
        Wql7WFnzZt6bGc943gIQKhVjELJAlqXTnb37g+vd7Oq6f3k5uj46Ghz3j8vh5PPzcP9keC/aMcLe
        3ZPk16hNaUuniZU1DSw9IVNk3Rr1ezvD0Wi0WwOlTUnHsNxxZ9t2+r3+dqe309kaLAMLqyQFMYab
        FgDAvP7HFE1Kz2IMvfarpaQQMCcxfnMCEN7qaBEYggqMhkV7BUprmEzM2lRarwFsrU4kar0Sbr75
        2nnVJ9Q6qQ5OZyeTx/7e1bB/fjbLXX56nv5+Ol3Ta6hfXJ1QVhn51p81/M0+/iAGIAyWdewEWRaH
        S8cJeiyJyYcPVAACfV6VZDiWIeZTEWRBJSYqnYrxtMk7358c/npQn054+8fF8ezs7O5+9+Lbl8ep
        aE+FJwzWKJPX/t8LAvLeelAmVRKZAnCBDFwQbDhPGXlPaeIpMFYeDSex2g0Iha10CncECKmqs0b/
        AtYDGlAm3osksBl8rdhVfGh9idwGYxkQAntl8k34SWCIUmALTx5dLdpgoEwkWg+GZh436ypcbBeF
        qRjfzKfCuroYT06jpFeHojZ2HXlWhgwnVSCfNDWRkRS6zirDIbFZogxTrLG7KrT7z+prgRnqipb6
        K85a8rFSxFDnAk+KC0DwlClDKSCXNriCfEMSKE6rpLWsEk8zQk3NfZ5szAhQP+FLgALT2BN0zpNU
        GFsOWWw4/Kfg4nZxuxDvBmrR+tv5dnlavC2itrnz9i582CuRKaNCkTRDFScysHWNRKS7rRe+erfD
        wnlbOk7YPpCJhIPd3qghFKs3ZgVv9YdLlC2jXovbGwxayyRFeAlMZZIpk5N3XtVPgMhcku6MhoPe
        KNvridai9QcAAP//AwBrqvApCwUAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18e8a9669867-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:40 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1704'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '21988122'
      x-ratelimit-reset-requests:
      - 20ms
      x-ratelimit-reset-tokens:
      - 32ms
      x-request-id:
      - req_f571fccc1cef0eea340d060098c7947d
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_HSLvD13YeHpYs8Gn4ilJYECE", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_HSLvD13YeHpYs8Gn4ilJYECE].", "role": "tool", "tool_call_id":
      "call_HSLvD13YeHpYs8Gn4ilJYECE"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6yUTXPbNhCG7/oVGJwlR7Isy9KxtV1PJp16kqatG3o4K3BJIgax6GIZR9Xov3dA
        6itqbykPHHA/H7wgdjNQSttCL5U2NYhpghstPt/9ebO+fXj58PP1bH17d/nH/X31W/nwfv64eK+H
        KYNWn9HIPuvCUBMciiXfuw0jCKaqk/nleHY9n89vOkdDBbqUVgUZXdHocnx5NRrPRpPpLrEmazDq
        pfo0UEqpTfdOiL7Ar3qpxsO9pcEYoUK9PAQppZlcsmiI0UYBL3p4dBrygj5R+9a5E4cQudyAc8fG
        /bM5WR91Aufyd28/Ln6R+9fVD4ZuzePqtQwf/140ryf9+tLr0AGVrTcHfU78B/vyrJlS2kPT5T6C
        mPp+F/gIDA0KcjwrpZQGrtoGvaRt6E2mo6mxgdwWmV5mPffDh3dfbifTJ3wIT/HmJ39l3dunux/v
        Mj3MNCNE8tZXXfyvNSrrrVhwyvrQimojFsp6wQo5KuujIBSKSiU1Ksa/WstYqP7fUFG4NdIyRlUS
        KwRTq8BYIqM3qAwIVsTrC/U7Ko9YKCHFGBwY7IN3jdSrlbrrACEwBbYg+K8mF90GQlIKY6aXnzaZ
        ptDtY1d0H1B3xjcBWaxHL3kbkfMjWXzD1EonwjDTX8C1mOnlJuXyS6/NZpvE2kf1n8JQltbk4Ivc
        kC9sOqzYebfb4XfQGGpKYskjSuoXz7GMsw0IpqbC5PY8zlZ1iu+AoFnZVO1/wAlkvcScyjydD2OU
        c6Bkg5bBy56ltIx5FEiS7G0FeJPwzswVk0Fe57GmEPbyfh8xJk4B69PV6ORosLBwjt200ZrD4UJh
        qYsNVBiIsuN43upvLt128F/r591qexhWjqrAtIpns0eX1ttY5/3FS7c2CoW+RSr33A3F9ps5pwNT
        EyQXekGfCl5NFzd9QX2cw0f3ZDHdeYUE3EnebDEZ7CB1XEfBJi+tr5AD225M6jLkxWx+PR3Py8VY
        D7aDfwAAAP//AwD07GfpLwYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18e8afdd230c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:41 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2455'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '21988936'
      x-ratelimit-reset-requests:
      - 20ms
      x-ratelimit-reset-tokens:
      - 30ms
      x-request-id:
      - req_201c0554e01d8da219dc56ab0afb16e1
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_IRCnOUcB3g30RopKheAhUhKm", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"points_of_interest\": {\"restaurant\":
      1, \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"routing\":
      {\"parking\": 0, \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\":
      {\"climate_control\": 0, \"lighting_and_ambience\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_IRCnOUcB3g30RopKheAhUhKm].", "role": "tool", "tool_call_id":
      "call_IRCnOUcB3g30RopKheAhUhKm"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUTW/kNgy9z68gdMllkjqfk8wt6W7RbVDsNs1isbsODEambSWyqEp0JoPB/PdC
        tucjaX0wJJLv8ZGSuJoAKFOqOSjdoOjW28Orp48/Lu/a6+8fbi5P+Nsfz7+35q/FzWP28fnPOzVN
        CH58Ii0b1JHm1lsSw25w60AolFiPZyfZ+cVsNrvsHS2XZBOs9nJ4xocn2cnZYXZ+eHw6Ahs2mqKa
        w88JAMCq/yeJrqRXNYdsurG0FCPWpObbIAAV2CaLwhhNFHSipjunZifkkmrXWbvnEGZbaLR2l3j4
        VnvrXZ/Q2qK7/7zwP64vq39O69ur22V8es4+VMh7+Qbqpe8FVZ3T2/7s+bf2+btkAMph22O/oOjm
        tzHwCwZsSSjEd1QACkPdteQklaFWuYq6oRYLU+Zqng+6P9396j5/1Ten9Wl2x/62oevma3Pb5mqa
        q0AY2RlX9/H3DYFxRgxaQBFqvYAw0KsE1AJdpAA+UEWBnKYIFRpLJTySxi4SSA/3ncAL2o4iLCgQ
        OBaIEjotXaASUGsOpXF1Yk4IevWkhUoYtB/B3560qUwSv5z2ISNdxQEIdQMahWoOS4gNdzYJgOF6
        RlgYaSCODOADewpiKEJAaSiANOjAOKGaQjyCewbNIZAWkMbEKSwIHFGZxPnAL6YcytoEbQv5r5gp
        0As5MFUCLAEDQWrgciNtCvSqyUuPTJwHgaJgF9DJwR7LojG62VRmnLbdqCG1/yDuHUDP9EnQGnSg
        OxONo6P+WH26PxRzNf+5yhX7/nQDeYuaNgFNb/yl748jJ0XiL/aOtw/sW5+r+SpXno2TWHBVpP4l
        8YN9V8awr/CFu2CEilFTkpGrUWiuHtbTXFUmUBEF0wVPsGQr0Wnj6vfmOrCmsCxiw94PV3W1To7A
        nYz7VFF43jjf+tJWAlaV0QW6stDsSpMSxC2T5rbiIEUkSag4UGprWkxlsJPAdsNlTd2kqJ4M20eT
        urWlotQbQePSs+xDWioNDoxtF43eSsTScB/hudQ4tHO9Xq8f1urNO19P/m/9MK7W2/loufaBH+O7
        cacq40xsiuGtp0ERhf2QItE99HO4ezNalQ/ceimEn8klwrPjq6uBUO1G/859ks1Gr7Cg3cOdZReT
        UaSKyyjUFpVxNQUfTD+ZVeWL8nx2cZrNqqtMTdaTfwEAAP//AwD+NFdJogYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18e89ea1cea8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:41 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2405'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996512'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_654d104ce28680636931610e968b984c
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_ONNBSQcq1Nf2Ydo3oNmafzvT", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_ONNBSQcq1Nf2Ydo3oNmafzvT].", "role": "tool", "tool_call_id":
      "call_ONNBSQcq1Nf2Ydo3oNmafzvT"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RVTW8bOQy951cQOjupHeej8S0FdlFgu2myKfajdSAwGs6MEo2kUhynruH/vtCM
        7XHd3uKDIZB85OOjRlwdAShbqBkoU6OYJrrjq6ffPr9t/iiuP9z+vfj3/f2HQC7+ubyaXN3xtRpl
        RHh8IiNb1IkJTXQkNvjebZhQKGedXJ6Ozy8uLy/fdo4mFOQyrIpyfBaOT8enZ8fj8+PJdAOsgzWU
        1Ay+HAEArLr/TNEX9E3NYDzaWhpKCStSs10QgOLgskVhSjYJelGjwWmCF/KZtW+d23NICE4bdG4o
        3P9We+dBJ3ROYzTvy79uPz89js/Pnot0f/393cfJXbVXr0+9jB2hsvVmp8+ef2efHRQDUB6bDnuL
        YurfN4G3yNiQEKeDVAAKuWob8pLbUKu5SqamBrUt5mo273l/vLl5d39nvk5uytP/ijANNw2W3xef
        5mo0V0yYgre+6uI/1QTWW7HowPrYCrSJCrBeqCJOYH0SwgJCCVITMH1tLVMB/d2AJNwaaZkSlIGB
        0NQQmUpi8obAoFAVeHkC/xB4ogIkAFN0aKgP3hSCFyt1VwFj5BDZotBPRUZAC/JgS7ACDaFPkEjE
        +ipDm5w8Dx0ykybKEpAZlwleamKCFMnY0hooSNC6BMgEPghEDgtbUHHS6RPzICjN1ezLaq5C7GTa
        cN4G1J3xTSQW68mLbhOxHhpPbzi00mk8mqsFupbmarbKWH7upe9u51zt4rYGYSxLazT6QpvgC5vv
        Q+rRW5/1ZeAGs0en0LKh/dpDrhfrnPWVp5S0BC34TNoFXxHrXJeyERfBFnqTeQNdr9ejV/RuQlMG
        Fr2ZTToUwTjboFBuTzi4ga+zVZ0RXfPYPNqcb8fpNZRisF6SDqXOF44pySGpbMOW0cvAp7RMOkkn
        9GAt0JtM8idHxcEQL3WqQ4zDUF/HnDJfQevzN98J01Bh8ZB+06ZufKu5KnER2ArpFDrxd91s7RV5
        pl85kMWmLBPrR/TFXkjPiKnQXSGdhAmbTgXihR2mlK80FjZ0TGMoDCbZ6fCwVj+8ZuujX50fNqf1
        bgu4UEUOj+ngUVel9TbVun/R8nOYJMS+RE730G2b9ocFoiKHJoqW8Ew+JzybXlz1CdWw4Ab36cVk
        45Ug6PZwF9Px0YakSssk1OjS5m8rsu32jyqjNjS+vJpOp+NSHa2P/gcAAP//AwBcBawDiAcAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18e8a99a9440-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:42 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3429'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21993455'
      x-ratelimit-reset-requests:
      - 11ms
      x-ratelimit-reset-tokens:
      - 17ms
      x-request-id:
      - req_69f54f4a320e5807cdbd1d8c1e8573c3
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_Vh4wbjum3GZfnRecOygfOWx7",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"points_of_interest\": {\"restaurant\": {\"favourite_cuisine\": [\"Italian\"]}}}}"}}]},
      {"content": "Error:\n\n```\n7 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...cuisine'':
      [''Italian'']}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...cuisine'':
      [''Italian'']}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.restaurant.favourite_cuisine.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''Italian'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourite_cuisine'':
      [''Italian'']}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourite_cuisine'':
      [''Italian'']}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Field
      required [type=missing, input_value={''restaurant'': {''favourite_cuisine'':
      [''Italian'']}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...cuisine'':
      [''Italian'']}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Vh4wbjum3GZfnRecOygfOWx7].", "role": "tool", "tool_call_id":
      "call_Vh4wbjum3GZfnRecOygfOWx7"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RVS2/bRhC+61cM9sKLbEuWbNm6Ba2b+mS3SWsgoUGMdofkyvtgd5dSBEH/Pdil
        XlacoghSHojlzHwz3zyWs+4BMCnYFBivMXDdqLPb+d2nm3dyfv37rMaB+evXMF9efXi8frr3d7+w
        fkTY2Zx42KHOudWNoiCt6dTcEQaKXoeTy8HV9WQyuUkKbQWpCKuacDa2Z5eDy/HZ4OpsONoCays5
        eTaFzz0AgHV6R4pG0Bc2hUF/J9HkPVbEpnsjAOasihKG3ksf0ATWPyi5NYFMZG1apY4UwVpVcFTq
        ELh71kfnQ51QqeJhsnhRH/T9fNzcf3y8mz/dLZ+G7+s/juJ1rldNIlS2hu/rc6Tfy6cnwQCYQZ2w
        jxh4/dvW8BEdagrk/IkrAIauajWZENNg65x5XpPGQoqcTfOO99/1eDmbt3r0/lNp/iT+sKrKh6cv
        k5z1c+YIvTXSVMn+Y00gjQwSFfh2pqX30hpYood0NhV4WpBDBY7+aaUjAaUkJTygESANt84RD2oF
        pXUaQyABoSbISlzY1slABW+ll4ayDngOMeYWBj64lofWUYS/CfK1bZWAGQEaQOdwBbaEbjZ9Hwh5
        DbHpKGNSkDWOSnJkOGWJYuYpTgSn4qApHC0IFYnsHN4JIWPNUalVP1E/TTRztg3SVFkfMm51aV0o
        PIUo8lFWSkeFDxi9xG+BhktTHYsqZzm5VeFr2zSdq8QtUnOReuxogUYUmoTEDJbkaNeB89S3Jg4I
        +ZxNP69zZpvUPhRip6yT4KIhF6SJ3lpP7ihnf7FNIwEWqFrK2XQdse6lG4d0Y3K2t9sJgsOylDzx
        49Z09fJb/WbT/0E+p7U8JcaV1BhHwZrgrDrwUbKqIyIRQj2T0d9bdBw1CqPqv1JqrDTBF7YsZOwM
        +XARX9g6NOHim+l8xTi25eArhboPqCSaZPZvY9gZZwuCGZEB7nCRbp7VBJW1AraOoIwfCgOpVc42
        zz9c+jfyPJ7iV3mlqv7EQCfX43+NdXrvfl6w79zc0xnWrZf86GqhkDZZN1Zw9GE/tc8b9upPv+m9
        dX7enjb7Dals1Tg78ycLj5XSSF8X3d8+rgofbNOFiO6e0yZuXy1X1jirm1AE+0ImOhzdTkadQ3ZY
        /kfq0XCrDTagOijGo8G4tyXJ/MoH0kUpTUWucTLtZlY2xXgwuKHRbDK8Zb1N7ysAAAD//wMAEpj0
        MaQIAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c18e8af46ceb5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:29:43 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '4577'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9994'
      x-ratelimit-remaining-tokens:
      - '21982133'
      x-ratelimit-reset-requests:
      - 33ms
      x-ratelimit-reset-tokens:
      - 48ms
      x-request-id:
      - req_4d7efdee77bc5a5089c596210b989529
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_IRCnOUcB3g30RopKheAhUhKm", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"points_of_interest\": {\"restaurant\":
      {\"favourite_cuisine\": [\"Italian\"]}, \"fire_station\": {}, \"dancing_station\":
      {}, \"grocery_shopping\": {}}, \"routing\": {\"parking\": {}, \"routing\": {},
      \"traffic_and_conditions\": {}}, \"comfort_settings\": {\"climate_control\":
      {}, \"lighting_and_ambience\": {}}, \"entertainment_and_media\": {\"music\":
      {}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n1 validation
      error for PreferencesFunctionOutput\npertinent_user_preferences.points_of_interest.restaurant.favourite_cuisine.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''Italian'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_IRCnOUcB3g30RopKheAhUhKm].", "role": "tool", "tool_call_id":
      "call_IRCnOUcB3g30RopKheAhUhKm"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xU308iMRB+56+Y9IUXkQUElLf7mXh66qGcxoNsaneWVrtt085ycoT//bJdBPQu
        7kMzmW/mm29mO101AJjK2AiYkJxE4XTr5PHL/eRyMTi/ToZyeff523NH/7i5us6fb1yfHVQZ9uER
        Bb1kHQpbOI2krKlh4ZETVqydYTfpD4bHSRKBwmaoq7S5o9aRbXWT7lEr6bc6vU2itEpgYCP41QAA
        WMWzkmgyfGYjiDTRU2AIfI5stA0CYN7qysN4CCoQN8QOdqCwhtBUqk2p9R5A1upUcK13hetvtWfv
        5sS1Tk9+Lv25HX6/uBxre7/sj+8ubvXgz2SvXk29dFFQXhqxnc8evvWP3hQDYIYXMfeKk5BfN4FX
        3PMCCX14QwXAuJ+XBRqq2mCrKQtCYsFTlU3ZaFrrPh1/MpcT8bE37yVj684kfpATeVZM2cGUeeTB
        GmXmMf5GIqD31oMymRKcMABJTkASoZnzhS29IkxFqYIy2IRcoc4gSFvqDB4QOGQqauZ+Cb8VSWg6
        jzl6NAKbwE0GzYDVPxGY7pDU4wK5xqwJT7gMh3CLYBAzIAvCeo+ilhDIl4JKj2Dz9zUdxu5cNUYM
        Uzb6tZoy62KTHp3mAl8CZHS2HXpSBg2lZUC/py20nVWGQmrzVBlCj4Ha1cFLzw21/1EQiRdcl7ip
        u+OKpU6Ja8VNDHtvFnUwPJaBQNsFguOBqgEHieFwytaz9WzNXl2IdeN/9mxjrbeLpO3cefsQ3uwF
        y5VRQab1pahuVCDr6hIV3SwubPlqB5nztnCUkn1CUxH2BkeDmpDt3ogd3Ol2NyhZ4novbzg4bmxE
        srAMhEWaKzNH77yKK8xylwpMhie9Xi/JWWPd+AsAAP//AwBIEd7BywQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c19714a94679e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:30:02 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1838'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21997132'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 7ms
      x-request-id:
      - req_077530178b944bdaee75853fcbb94389
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_ONNBSQcq1Nf2Ydo3oNmafzvT", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": null,
      \"routing\": null, \"traffic_and_conditions\": {\"traffic_information_source_preferences\":
      null, \"willingness_to_take_longer_route_to_avoid_traffic\": null}}, \"comfort_settings\":
      {\"climate_control\": null, \"lighting_and_ambience\": null}, \"points_of_interest\":
      {\"restaurant\": null, \"fire_station\": null, \"dancing_station\": null, \"grocery_shopping\":
      null}, \"entertainment_and_media\": {\"music\": {\"favorite_songs\": null, \"favorite_genres\":
      null, \"favorite_artists_or_bands\": null, \"preferred_music_streaming_service\":
      null}, \"radio_and_podcast\": null}}}"}}]}, {"content": "Error:\n\n```\n9 validation
      errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=None,
      input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=None,
      input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=None,
      input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=None,
      input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=None,
      input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_ONNBSQcq1Nf2Ydo3oNmafzvT].", "role": "tool", "tool_call_id":
      "call_ONNBSQcq1Nf2Ydo3oNmafzvT"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3RUTW8jNwy9+1cIuuTipP7IR+PbtthFsSjSbZMFulkHA1nDmeGuRlQojrOp4f9e
        SLIdJ2jnMNDwkY+PFIebkVIaa71Q2nZGbB/c6fW39/ef3eB//xz+fnfe3N9yf/PjLyS5e/fbFz1O
        EbT6Blb2UWeW+uBAkHyBLYMRSKzTq9nk4vLq58kkAz3V4FJYG+T0nE5nk9n56eTidDrfBXaEFqJe
        qK8jpZTa5HeS6Gv4oRcq02RLDzGaFvTi4KSUZnLJok2MGMV40eMX0JIX8Em1H5w7AoTIVdY495K4
        PJuj80ufjHOVW8/j/OPk/eWEf31+/Njef+hvu+sYjvIV6ueQBTWDt4f+HOEH++JNMqW0N32O/WTE
        dh92jp8Mmx4EOL6hUkobbocevKQy9Gapo+2gNxXWS71YFt1/3Nz8cvunfZzeNLMvNc3ppjfNP+u7
        pR4vNYOJ5NG32f+uA4UeBY1TDI8DRFHorRtqqHMH1dq4AaJqiJVxTjUIro5j9dSh7ZRhUJ4kOWGt
        jLXENfpWCSnpQBVtZ+rucM5JkCGqGMBig1aVMVNReLAy8C4XGNuVZGfqFr2FTDhEYBUYGmDwFqJK
        nUDyUCv02cOSXwNHk6xZHoNLY5ok9UNEO1ZPoJ4wlUJ2iIpK3Al4ARaDPlFWxtdVDzWakyJifNBr
        nHsuEZnuRMVhVXTm9oZ0jxCXevF1s9QUcpcZgjMW9g5dNv4UgAV9ypbKqo7Kyo658Uu92Cz1/2gr
        YJZRjo1ZE6NA1YLnImKpQxLxMD5CI/k2g6+shgWjxIq4WhlfHxyKLoa6ypmqKAymR99WEXiNqaxF
        mpRtGi5TI2WBgWproiRd24zQIGXoNqkH/H338QZLn8KmadBmGku+xnSX8cBkqW+IpYogKSoWSuuw
        NwIpQJjcnsth2yWvTGb6Fab+HqgCoU8VNxWmDkPRm+4rihnYeNnzNMhQRcljtbfVxtvchtfmlskC
        P1exoxD2ZW2324etfvUvb0f/dX7YnbaHHeioDUyr+Gal6QY9xq4q/3NaBlEolBSJ7iHv2uHV+tSB
        qQ9SCX0HnwjP55OLQqhf1vsLPJte7lAhMe4o7mI2He1E6vgcBfqqQd8CB8a8fXUTqvri6nI+uWqu
        J3q0Hf0LAAD//wMAmpmZLoYGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c19714fbbfa86-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:30:06 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '5293'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996493'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_6fa48fa99e19d806750574098394a9ee
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type":
      "function", "function": {"name": "UserMemory", "description": "", "parameters":
      {"properties": {"age": {"description": "The user''s age", "title": "Age", "type":
      "integer"}, "name": {"description": "The user''s name", "title": "Name", "type":
      "string"}, "interests": {"description": "The user''s interests", "items": {"type":
      "string"}, "title": "Interests", "type": "array"}, "relationships": {"description":
      "The user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions"],
      "title": "UserMemory", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSUW/aMBB+z6+w7jlUAcpY87aplbau7aRNQ0g1ikw4gpnt8+yLNoT471UChBTN
        D9bpPn/ffb67fSIE6BXkAsqN4tJ6M7jbPiynnz89v9js+3xS/c1mj09+7cO9/2MNpA2Dllss+cy6
        Kcl6g6zJHeEyoGJsVIfTUTb5ML3Lhi1gaYWmoVWeB+ObyYDrsKRBNhxNTswN6RIj5OI1EUKIfXs3
        Ht0K/0EusvScsRijqhDy7pEQEMg0GVAx6sjKMaQXsCTH6BrbrjamBzCRKUplzKXw8ex78aVRypji
        YX47m/2ov9yPN0/jl+2c1M9vKn7d9eodpXe+NbSuXdk1qId3+fyqmBDglG25vyKGZ7QUrtWFABWq
        2qLjxjnsJagKJeS3WSpbuoRcwiOhhFSCdowBI0cJ+auEVSCHUcIilaB0oV3kULdm2geLA7wrdkj+
        Fy9O0aGbi6HKB1rGqzbDWjsdN0VAFdvv9ruenEUX7RbU7wYLPpD1XDD9RtfIjkbjoypcFq+HfjyB
        TKxMLz8ZJiefEHeR0RZr7SoMPuhuKZJD8gYAAP//AwCotCmmEwMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70ffacebd-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:41 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=KMVej8Nf859E4rAvossSrVsKbI6A2mb.MAErgwC80Dc-1720567901-1.0.1.1-mhom_FPS0YHQPoxPOOqL.g3FZtUFkOB_8Eh93z.u0ju0utrSFTlPzmmayQYVWfBgU6Qr_CuFuRQTjg3unWCSkA;
        path=/; expires=Wed, 10-Jul-24 00:01:41 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=09tDuSzvGGb0dcJfAHf7tfn4INksbe501DZFBdDnmRA-1720567901840-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '449'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999864'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_d963803ab14dd7593a5ab97653272c23
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSXW/aQBB8969Y7TMgY0JQ/BiVqglVFSWifYiRdT7W9sH5zrpbp0GI/17ZfJig
        +sFazXhmx7u7DwBQrTEGlKVgWdV6+LCZZzM3ffygeis+H3+5etn8+cvzp+hHs8RBq7DZhiSfVSNp
        q1oTK2uOtHQkmFrX8SwKp/ezh3DcEZVdk25lRc3DyWg65MZldhiOo+lJWVolyWMM7wEAwL57txnN
        mj4xhnBwRiryXhSE8eUjAHRWtwgK75VnYRgHPSmtYTJtbNNofUWwtTqVQuu+8fHZX9X9oITWaRS9
        RU9u86wW4e/t/evkbf7t5efi2V31O1rv6i5Q3hh5GdAVf8Hjm2YAaETVaZee3IuzudJ0IwdA4Yqm
        IsNtdNwnKApKMA4HSSdPME5wQR/KJDhIUBkmR559gvH7apCgUKkynl3ThejgBF+poiojB1wKhk4N
        ykNGyhQgvCfvaQ25dVAqD98dGVlC3QaUiozcjRJsvS2X5NLGU97oVJncdk0P+OUPDsH/6tWpOly2
        rW1RO5v5m+VhrozyZepI+G6I17sMzqar7raaL+eCtbNVzSnbLZnWNprdHV2xP+eevZucSLYsdI9P
        xrPglBP9zjNVaa5MQa526nJqwSH4BwAA//8DAFQZg6ppAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be709541694-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=HQtXCakO40hR5_GFQTtoJ_Vpu9A0aEuF6NQtErtoAew-1720567901-1.0.1.1-DESw5Czl8FEfSC6Y8jmOZN2o6dcc.VLDO6s6ZXRg.q8031jQnKHUPHzqkE1KUqSDajsDtXqLlSrLnhlRQ594.w;
        path=/; expires=Wed, 10-Jul-24 00:01:41 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=PlkoKbqI52tbBMe9mC0z3ZqQhx6VjvV3cRmlPUmOYBk-1720567902000-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '613'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '14999622'
      x-ratelimit-reset-requests:
      - 16ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_7c74e7704bb6b9448d4a0ac6a4882915
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSwW6bQBC98xWrufSCLUzikHBsZbWS1bRK60uzFlrwAJssu2h3SGtZ/veItQ3E
        KofV6D3em6eZOQSMgdxByqCoBRVNq2YPL6s8Md+qJFrd7tf6flNtqvbHrnqM86/3EPYKk79gQRfV
        vDBNq5Ck0Se6sCgIe9dFEkfLu+QhWniiMTtUvaxqaXYzX86os7mZRYt4eVbWRhboIGXPAWOMHfzb
        Z9Q7/Acpi8IL0qBzokJIh58YA2tUj4BwTjoSmiAcycJoQt3H1p1SE4KMUVkhlBobn77DpB4HJZTK
        Xhfr5GnZ7f7QF7Myv7+/0WPy91f5edLvZL1vfaCy08UwoAk/4OlVM8ZAi8ZrNw7tT2tKqfBKzhgI
        W3UNauqjw4GDqJBDGoXcyzmkHNb4JjWHkIPUhBYdOQ7p8zbkIGQmtSPb+RAe5vCEDTY5Wka1IEY1
        ss6h/eRY78ikY95wzqF3MFSjzTqHZacyqUvjrY/wIecx+F+9PVfHYafKVK01ubtaEZRSS1dnFoXz
        o5puLLiYbv0FdR+OAlprmpYyMq+oe9v4bnFyhfFoR/b2QpIhoUb8JoqDc05we0fYZKXUFdrWyuGg
        gmPwDgAA//8DAPzaT+ZPAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70da667df-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=4Ormsa47TeKwvPGkIJkjRLYcj6rq7NJbLbpNI4oDGD0-1720567902-1.0.1.1-8_35JUIiqj4KMVmozwOskOuamdwiQyaUKKaH.yI47CJX8M_Th6FXo9_LeERJl.ANhR72Cz7wY24RlKUvpgvK0Q;
        path=/; expires=Wed, 10-Jul-24 00:01:42 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=2JZAYFsE1ynYwKDSV85cEOiYQ7WUQNPsvlpOu.3862U-1720567902155-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '762'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '14999854'
      x-ratelimit-reset-requests:
      - 28ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_425aa37f1d673c333c5a80df60b62077
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n\nGenerate a JSONPatch to update the existing schema instances.\n\n<schema
      id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'', ''grade'': ''8th'',
      ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}},
      "tools": [{"type": "function", "function": {"name": "PatchFunctionParameters",
      "description": "Respond with all JSONPatch operations required to update the
      previous function call.\n\nUse to correct all validation errors in non-compliant
      function calls,\nor to extend or update existing structured data in the presence
      of new information.", "parameters": {"type": "object", "properties": {"schema_id":
      {"description": "The ID of the function you are patching.", "type": "string"},
      "reasoning": {"description": "Think step-by-step, listing each validation error
      and the JSONPatch operation needed to correct it. Cite the fields in the JSONSchema
      you referenced in developing this plan.", "type": "string"}, "patches": {"description":
      "A list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT22obMRB991cM89IWfDeO631roU1IKTWhTVyyZpG14105uiFpmxjjfy/a9Z3o
        QQxz5pw5GkbbFgCKHBNAXrLAlZWd6frbcqLFm/7xed7/E5a3M//r8evd4O/snn5iOzLMck08HFhd
        bpSVFITRDcwdsUBRdTAZ9sc3k2l/UAPK5CQjrbChM+qOO6FyS9PpD4bjPbM0gpPHBJ5bAADb+o4e
        dU5vmEC/fcgo8p4VhMmxCACdkTGDzHvhA9MB2yeQGx1IR9u6kvIMCMbIjDMpT42bsz2LT4NiUmZP
        94/Dp4ehoOHdy8wWajTfzEf69fasXyO9sbWhVaX5cUBn+DGfXDUDQM1UzZ2xwMvv+8IZc0xRIOev
        pACQuaJSpEN8Bm5T9LwkxTKRp5ik+IWznJTgD9XSCZ5iO0VHzBstdFEX/C4JKk8OrKMVOQ8MOPMV
        k8B0DkKvjFNMQjCaQGjgRqlKC86irW6tZ6NT8ikmz9sUja1lHVnJOB0KyjrZW3ujs8ZgzzpjyQVB
        vhff3MvJcyds1K1Z/5is6MLiBw+xEj6+Y/BTirvFDi+Gs2u9Fy/20e64VNIU1pmlv9oRXAktfJk1
        84rT9cHYpkWUW9TLW13sI1pnlA1ZMC+ko+CkP2308PRfTuh4tAeDCUyesW6Grb1D9BsfSGUroQty
        1onjLrd2rf8AAAD//wMAHdk2Z8oDAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be67ccd2522-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=azgogkWfD5yKemN8aAgqr2QTj83129DdEytHCw.SnrI-1720567902-1.0.1.1-Zifv5GI3W7GI_eZNigEfTHCdyzg8FeamrmrT3BamyNBL1p.kxW1Vq6uGLNjV2LAcP2I4k4HS3OePyT4tFGzxdQ;
        path=/; expires=Wed, 10-Jul-24 00:01:42 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=UZRXrSLcOqEohIYLecex91gLa0Kndt4VgWN2sEwOJxY-1720567902244-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '820'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14999713'
      x-ratelimit-reset-requests:
      - 11ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_b2115d281c678b2f2bf16f8a826066f2
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour
      Kevin! Let''s start with some basic questions to assess your French proficiency.
      \n\n**Fill in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA)
      soif  \nB) faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "UserProfile", "description": "", "parameters": {"properties": {"age": {"description":
      "The user''s age", "title": "Age", "type": "integer"}, "name": {"description":
      "The user''s name", "title": "Name", "type": "string"}, "interests": {"description":
      "The user''s interests", "items": {"type": "string"}, "title": "Interests",
      "type": "array"}, "relationships": {"description": "The user''s friends, family,
      pets,and other relationships.", "title": "Relationships", "type": "object"},
      "ai_instructions": {"description": "Prompt instructions that you as the AI assistant
      should always retain in subsequent conversations.", "items": {"type": "string"},
      "title": "Ai Instructions", "type": "array"}, "other_useful_info": {"description":
      "Any other details you would like to know about the user.", "items": {"type":
      "string"}, "title": "Other Useful Info", "type": "array"}}, "required": ["age",
      "name", "interests", "relationships", "ai_instructions", "other_useful_info"],
      "title": "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA1yST2/cIBDFvwqaSy84sbfZ9S73HqIobS9VpcYrC+OxTReDxYyTVJa/e4Wj/FFu
        8HvDzOPBArYFBYh53pg2z0rTtNnNqdhnzb44ZKj1TmN5LJqTBgmh+YuGQYEZNF+ZME4O2QYPEkxE
        zdiCKspdvj+Up7yQMIYWHSjQxoTZM113NuJTiBe63qQX0M3epC7Z4y41GoI1SKAeFrC+xWdQuYQR
        iXSPoBaIwWHqSWSJted0JnhGn4zdCo/YCg7i4sOTGENEoZsws+ABxUwYv5CYInYY0RukK5DAIbja
        aOc+D92iSUJ9a+/7nsvjt+JwGX50f37n7fj92Qzp9L8p2Xm9BMj3pVrA6zGpvwjjzxg66xAk6NjP
        I3omULBUoHusQIlcimqrT5sK7vDR+goStJ4xIjEl5eGcUESn0wwa7LThZU1Y29p64jhvBj7UBx4w
        1jNhN7va+i68SCus63mV0Flvaagjakq+P0ayniXMr9lPMYwT1xwu6AlUefM1xcfavaFjevf3n/HG
        98d1/Q8AAP//AwCTHLQCbQIAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be66bba9444-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '1.113'
      x-request-id:
      - db959de2-7ed1-48a1-b3cd-4901e7b5f765
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTXWvjMBB8968Q+5wUJyHN1Y8HzcEV2lA4KD0XochrRz19Ia17DcH//ZDjfPb8
        YMTM7sxovd5ljIGqoGAgN4Kk8Xp8936/XoSP5+ViKdXT469V+7jcoHhaLae0hlHqcOt3lHToupHO
        eI2knN3TMqAgTKqTxTSf3y7u8klPGFehTm2Np/HsZj6mNqzdOJ9M50PnximJEQr2O2OMsV3/Thlt
        hZ9QsHx0QAzGKBqE4ljEGASnEwIiRhVJWILRiZTOEtoU27ZanxHknOZSaH0y3j+7s/NpUEJrvorb
        B/3y4/scZ+3zz4e/evXy+npvZmd+e+mt7wPVrZXHAZ3xR7y4MmMMrDB9L35SEJJ4GzFwH7DGgFZi
        5B+TKznGQISmNWgpXQV2JXgMpCzar+0lFLsSgmtJ2aaEYjIqQTpTu0A8IiV0qJFaGUHI0wCD0yUU
        +agErZpNKuLCVlyYtUqqSacbleCdshS5q7myhAEjDXYYSbRBWBocaxWQRxJpCINwJaxMupdoE5zE
        sOVx47zfJ86TEyZ9EsqmW/dZDFZK7O1MG5UcBIKolOsLvKuk6BPlXdfBxQi77H/nt+HUHddPu8YH
        t45X2wS1sipueEAR+696vlzZQfStX/b2Yn/BB2c8cXJ/0CbZ+exurwqn/+vEfpsMJDkS+oTfTvNs
        yAlxGwkNr5VtMPigjrufddk/AAAA//8DAGfoa6r6AwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be67ac81679-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=VDpj_9R69CYRJERtHr.8JpENP1nVDRMQegSOkUvd1Bg-1720567902-1.0.1.1-9T2D2C.AoXS9JIP.E3W1ccb9nPN1Y50w68abtzG.ktnSvegb9NHXOigpuJcGr7_rDoFkRqnbWuZec4DEG6Fgkg;
        path=/; expires=Wed, 10-Jul-24 00:01:42 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=uE2ViB9aNiL6IhUj8CFtfNJDKoUBHbSr8MWB327QRSk-1720567902754-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1305'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '14995276'
      x-ratelimit-reset-requests:
      - 28ms
      x-ratelimit-reset-tokens:
      - 18ms
      x-request-id:
      - req_0ada60cc0cd7be9dcef305168530b801
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}], "model": "gpt-3.5-turbo",
      "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOidFkiVpk+PaDiuwYc2AYYelEBSZdtTIokbRQ7rA/72Q7Xy0
        mw8Gxcf3+ERQh0wIaXO5FNJsNZsquOHi+X5zvZ99rFerPe2Kx8fbuwdc/P4cvi7iVA4SAzfPYPjI
        ujJYBQds0XewIdAMSXV8PRnN5teL0bgFKszBJVoZePjhajbkmjY4HI0ns565RWsgyqX4lQkhxKH9
        J48+h71citHgmKkgRl2CXJ6KhJCELmWkjtFG1p7l4Awa9Aw+2fa1cxcAIzpltHPnxt13uIjPg9LO
        qZ9/H6ZkSvt9t/hy/+Mmrj6tbr8V8e6iXyf9ElpDRe3NaUAX+Cm/fNdMCOl11XJhz6QNqzoCqUBQ
        AIE3ENWf8Ts5IaSmsq7Ac7qKPKxlAGLrwf9LX8vlYS0Ja7a+7A5B0647jAaX0Hiwlky6KKxR2ufK
        oM9tsp1Exs1gLQ1WBRKrCJw4vbhxttIMqZ4JXa/rbLlNRa2UrjY22UlYEgpoPUeFhbKegSBy7xMi
        65q0516lsAQqsk42+lSuvUm6b7MloQF6UXGLIfT3SZ0g6bO2Po2r9VJBbnXXrqqjNcc56NxiWxAw
        N7p1NGqaRr6ZfZP9L37qo+a0tw7LQLiJ79ZQFtbbuFUEOrbrcLmV2VH0qX0l9ZvFl4GwCqwYd+CT
        7Gx+06nK88M8o4tpDzKyduf8fD7Jep8yvkSGShXWl0CB7OnRZE32CgAA//8DAK8lG7gzBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be67c7216f9-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=uQsPfRUghsdTNXSD24JEe1b0.virs1HbPceEc4HN1Q0-1720567902-1.0.1.1-OYNff6zR1mHhPs8NzUe._dEVZGDN3NrnGqXBYUsh.aR1bKibO5zSofNHTN8GledUQxCUXjNnj1oA2hNIqOUGDg;
        path=/; expires=Wed, 10-Jul-24 00:01:42 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=1GKH2HTV7T7LEdMK2IufcnhCZy.x8qObEpXA34RLfnE-1720567902757-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1334'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999680'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_c8dfc22e5284d93f8f34352475bdc014
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4RUTU/cMBC976+w5tJLlv1AsJBbW4FEEXRboEjFq8jrTBIvjm3ZzpZllf9e2dlP
        VKk5RNZ7M2/eTDxZ9wgBkUNKgFfM89rI/uXiaj55uy1+TZ6X37/8fpv+vP5sHkfPN7V/n0ISMvR8
        gdxvs064ro1EL7TqaG6ReQyqo8l4eHY+uRyOIlHrHGVIK43vn56c9X1j57o/HI3PNpmVFhwdpOSl
        Rwgh6/gOHlWOb5CSYbJFanSOlQjpLogQsFoGBJhzwnmmPCR7kmvlUQXbqpHygPBay4wzKfeFu2d9
        cN4PikmZ/XhYvX69f6/G909ucbv8M7oZFg8LdXFQr5NemWioaBTfDeiA3+Hph2KEgGJ1zJ0yz6vr
        TeCUWVajR+s+SBECzJZNjcqHNmBNwfEKa5aJnEJK4cmhvcNa2xWFhIJF5rQSquxIkzOPpHFoibFY
        oEXF0ZE5c5gTrYivkHCtlmgdCz5OoogJ1tBRSF/WFLSJWhaNZBy3AVUEB0KFD7KBl0w2SCFdU2Bl
        OIwnCY0Nx+BvaLEWrIqxQnm06HysEhSdZ6Rmr9H6LHYioyVXCeM6Uc5iOIU7bUumok6uyw67qpq8
        Q5Bj6C/bhL9QeGbeaUVh1iYUmMiCa9vEyceIWdsm/+t04bTKutkPjNUGrRfoBkc2Bzk6boUJwNFE
        KDxW3Xf45EhhBarcJaRgtZCrhBj0LiFM5UT7Ci050kyIUFw2uVAl2bYWM04otLMWjq5L2/vXebY5
        tbs1k7o0Vs/dh62BQijhqqy7ReG+Oa9NVyLIzeI6N0cbCsbq2vjM61dUQfBifN7pwf4PsmdHw8mG
        9dozuScuT097G4vgVs5jnRVClWiNFbv17rW9vwAAAP//AwBthUDF3QQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70eac944a-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=7tNbfRyu5HNg3f2hZDwJc4GuDIaB.8haBYPGz5Z4zUo-1720567902-1.0.1.1-WXsy8cnyJr6wk8atEMqfcWQkHkQ8_DJUvV3WVulHGoHys49V8O18.FR1CN4va70q2eN4pGxnmJyrmINs03Zrjg;
        path=/; expires=Wed, 10-Jul-24 00:01:42 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=S.QLggB.KIfdQDrjpgXJEypJ0nIMa7RzXWwfhrjZGiQ-1720567902770-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1252'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '14999564'
      x-ratelimit-reset-requests:
      - 25ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_1f584b21ee525c809a32512bae0b7d2d
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>"}], "n": 1, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserMemory", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}}, "required": ["age", "name", "interests",
      "relationships", "ai_instructions"], "title": "UserMemory", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//XFHRbpwwEPyVaJ5NAykcOr/3pVLUh2ukpgEhn1kO98BGXpP0ivj3ypxy
        qfrmnZmd3R0vMC0kWqJj8VlTkpHaJXmhsuRYtmlC+32Xd217pLSEgDv+Ih0goXsVPmk3TgMF4ywE
        tCcVqIXMyoe02JX7NBMYXUsDJJTWbraB7zvj6c35M99v1BXoZqujS/L6EI16ZzQx5MsCY1v6DZkK
        jMSsTgS5wLuBoiez4aBsgEBwbmi0Gob/27bjItE88+GNvuTfSj78eTqq7/5H99o/Fz9j92WKhu9r
        QHw85QKrxsg+MflHGp2/QED50zySDQyJpYI6UQV5l6firtr0sarw1VGFCBkbyBMHjvhLhdY7S1yh
        jqSnQcVZ3JtpEywVJrppDz35wenz1enxor3rQoV6jaUyjbEc/Lxte22pV6xrvQp0xhruG0+K4yX/
        hrTWAvN7npN34xSa4M5kGXJX5DHQoIYbVGaZwMdv3/CiXNe/AAAA//8DAHNcz3FBAgAA
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be66f196435-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '1.421'
      x-request-id:
      - a8f988cc-b0e3-4a81-a708-d7ba2665b7ec
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour
      Kevin! Let''s begin with a simple question to gauge your understanding of French.
      Please fill in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc)
      parle</ai>\n</conversation>\n</conversations>"}], "n": 1, "temperature": 0.0,
      "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//XJLLbtswEEV/hZi1nMh0ZdXcZhX0gRhokUVkCAw1slhTHJVDOW0E/XtB
        GU6C7shz53E5wwlsAwq2hSz1VpcrWcpi9akoN6vPRS5Xm2azWedmLZt8BxnQ8y80ERSYTscbQ/3g
        MFrykIEJqCM2oNalzIttucvXGfTUoAMF2hgafeTb1gZ8oXDi20W6gHb0JlVZnWUq1JE1yKCeJrC+
        wT+g8gx6ZNZHBDVBIIepJrPlqH1MOeQj+mTsXnjERkQSJ08voqeAQj/TGEXsUIyMIWlDoLNtUOhL
        wICByWtnX7ERAXkgz3gDGUQiVxvt3P92lqEloT7u778b+Xj6dvf196PXd8eHH/tivX9N2X+HZPT6
        PMjej2oCr/uk/mQMD4Fa6xAy0OE49ugjg4KpAn3ECpTIM1Et8elSwRc8W19BgtZHDMiRk/J0SCig
        06kHd3ZY8DQnrG1tPccwLgY+xFPsMNQjYzu62vqWLtIM83yYM2itt9zVATUn3x9HMh8yGK9bGQL1
        Q6wjndAzqHKTp/FF7d7RTqZNXf/MG9/Kef4HAAD//wMAB0SxCYcCAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be67e4e15ff-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '1.276'
      x-request-id:
      - ea55ba2d-ce95-47c3-bc35-0c408b561329
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTwW7bMAy9+ysEnZPCTpd2zW3oCgzbOnQodiiWQmBk2lEriapEF82C/Psg203S
        bj4YEh/f4yNBbQshpKnlQki9BtYu2OnFw9Xq/Kb7cv1wG8Ln0j19vTy99dc/qu+XFchJZtDqATW/
        sk40uWCRDfkB1hGBMatW57NyfnZ+UVY94KhGm2lt4OnpyXzKXVzRtKxm85G5JqMxyYX4XQghxLb/
        Z4++xhe5EOXkNeIwJWhRLvZJQshINkckpGQSg2c5OYCaPKPPtn1n7RHARFZpsPZQePi2R+fDoMBa
        dXd6dVfxrw3crZ7/zD7p25tq8/Tt48+jeoP0JvSGms7r/YCO8H188a6YENKD67n4whE0qy5hVCFi
        gxG9xqSeq3dyQkiIbefQc25FbpcyYGTj0f9LX8rFdikjdWx8O1wCxMfhUk6OoWqylByhaYxW4Gul
        ydcm284i1W6ylJpcQ5FVQs6cUVxb44Ax53MkO+pa065zUi8FbmWynYxloUDGc1LUKOMZIyYefWJi
        6CJ4HlUaE1ElhmxjDNXgddZ9G20jaYwbldYUwthdroRZn8H4PK7ei8PawFDOdcnosfMItaE+IVCt
        oXdU7nY7+Wb2u+J/5/vxtNvvraU2RFqld2soG+NNWquIkPp1ON7K4lX0vn8l3ZvFlyGSC6yYHtFn
        2fn846AqDw/zgF58GEEmBnuIn81nxehTpk1idKoxvsUYotk/mmJX/AUAAP//AwDPdOADMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be7096f96c6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=pmVQAk7qr1UobhV_TT8l1nuJE0M7N5E0ycS1PrhK8Qo-1720567902-1.0.1.1-.ZNfZSAZV3j225Oq7nbI4z2SukJ9.EgBDesX6clv8ww1AF2FzvhE9YpYsOfKjMS4Ys6VWa4HdHz.ynfpiapjlg;
        path=/; expires=Wed, 10-Jul-24 00:01:42 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=clzR.NXD0eWP9S8ujw9EUe.YZzgg7NJFmLE1noV9.y0-1720567902903-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1502'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9992'
      x-ratelimit-remaining-tokens:
      - '14999684'
      x-ratelimit-reset-requests:
      - 43ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_75a6c75ae1e2d0932e0d29ce9e8c2fbc
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT227bMAx991cIek4Kp2mbJW+7PQzFhmEXDMVSCIxMO2olUZDoLkXgfx9kO5d2
        84NB8fAcHhHUvhBCmkquhNRbYO2CnS4fPm4WzA+7+bvd7u5n+PDtS/32q1l8xl/1Tk4ygzYPqPnA
        utDkgkU25AdYRwTGrDpbXJbXN4tlOesBRxXaTGsCT+cX11Nu44am5ezyemRuyWhMciV+F0IIse//
        2aOvcCdXopwcMg5Tggbl6lgkhIxkc0ZCSiYxeJaTE6jJM/ps27fWngFMZJUGa0+Nh29/Fp8GBdaq
        2z9hU73/dOdm359+6JtbvArbdDm/O+s3SD+H3lDden0c0Bl+zK9eNRNCenA9F3ccQbNqE0YVItYY
        0WtM6mn2Sk4ICbFpHXrOV5H7tQwY2Xj0/9LXcrVfy0gtG98MhwDxcTiUk3NoNllLjlDXRivwldLk
        K5NtZ5Gym6ylJldTZJWQM2cU19Y4YMz1HMmOutY021zUS4HbmGznIBTIeE6KamU8Y8TEo09MDG0E
        z6Of2kRUiSHbGIUr8Drrvsw2kTTGZ5W2FMJ4u9wJsz6D8XlcvReHlYGhnWuT0Yc5QGWoLwhUaegd
        lV3XyRez74r/xfdj1B331lITIm3SqzWUtfEmbVVESP06nG9lcRC9719J+2LxZYjkAiumR/RZdv5m
        OajK08M8ocurEWRisKf81Zt5MfqU6TkxOlUb32AM0RwfTdEVfwEAAP//AwBQyKbHMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70f7367f6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:42 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=LO849e9QdQ0Ol05zsHt8VT4BLJeBDqXY39UpPLCbSYM-1720567902-1.0.1.1-e9mqtrFQJmF3rel.xCo9M0LGrHov4y66VJjMEM2iaohKKgD8cR8jqza0SjMo4BQEI28f7_ZKcWuIjGhNkHR6xA;
        path=/; expires=Wed, 10-Jul-24 00:01:42 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=ueUkQocAWAyRUhzvGtWoEN7ih5BbeX_26v8zHKKxBIE-1720567902924-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1422'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9990'
      x-ratelimit-remaining-tokens:
      - '14998408'
      x-ratelimit-reset-requests:
      - 58ms
      x-ratelimit-reset-tokens:
      - 6ms
      x-request-id:
      - req_084e1b39e0991754c8a42c9525ab04cb
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieFnS3NkmPXYdgGDMMO6z5SCLJM22olUZDorUng/z7Idj7a
        zQeD4uN7fCKoQ8YY1xXfMK5aScp6M18/vCtX35pPPxZvP/75Yp1q72787ff1TanLHZ8lBpYPoOjI
        ulJovQHS6EZYBZAESbVYLfLl9WqdFwNgsQKTaI2n+aur5Zy6UOI8LxbLidmiVhD5hv3KGGPsMPyT
        R1fBE9+wfHbMWIhRNsA3pyLGeECTMlzGqCNJR3x2BhU6Apdsu86YC4AQjVDSmHPj8TtcxOdBSWNE
        9Tnf76tVt873T+3i64ef+9u7av/+st8ovfODobpz6jSgC/yU37xoxhh30g5ceKIgFYkuQhA+QA0B
        nIIofhcv5BjjMjSdBUfpKvyw5R4CaQfuX/qWbw5bHrAj7Zrx4GV4HA/57BIqZltOQda1VkK6Sih0
        lU62k0jRz7Zcoa0xkIhAiTOJK6OtJEj1FNBMSkY3bSoapKQtdbKTeiYhj9pRFFgL7QgCRJp8QiTZ
        BeloclfrACKSTDamVCWdSrrPs01ABWEnYoveT7dLnSDpk9QujWvwYqHScmxnu6jV5DfISuNQ4LFS
        cnCU933Pn82+z/4X309Rf9pbg40PWMYXa8hr7XRsRQAZh3W43MrsKHo/vJLu2eJzH9B6EoSP4JLs
        sng9qvLzwzyj6yNISNKc89f5m2zyyeMuElhRa9dA8EGfHk3WZ38BAAD//wMAh9CBCDMEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70f5567fe-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:43 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=kpP.vrdU_kbe5HW6M4jSpcqoVM9oueCCrWbvhAaXzgk-1720567903-1.0.1.1-vdPrxbbNZuJYe19oa3bZBCz9ca2936URqb5Z8BvNawvcd71Qst5bPoETVE.S7dR4YTv46m_KQkMB70omQBX_mg;
        path=/; expires=Wed, 10-Jul-24 00:01:43 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=SXYRc3z4if7hBldoJiygU8GmuV5wbxM7cawDB6F6zHo-1720567903003-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1604'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9991'
      x-ratelimit-remaining-tokens:
      - '14999385'
      x-ratelimit-reset-requests:
      - 49ms
      x-ratelimit-reset-tokens:
      - 2ms
      x-request-id:
      - req_088ba72fa4e9bd43fb7bcb5a8f466eb2
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieF0zYN4tuADNsabGiBnLoUgiLTjhJJ1CS6axb4vw9ynI9m
        88GQ+PgenwhynzHGdckLxtVakrLeDKebz6vJ98fF/M2+zGeLL49P4+fFj6fty3Tz7Q8fJAauNqDo
        yLpRaL0B0ugOsAogCZLqaHKbjx8m03zUARZLMIlWexre3YyH1IQVDvPR7bhnrlEriLxgPzPGGNt3
        /+TRlfDOC5YPjhELMcoaeHFKYowHNCnCZYw6knTEB2dQoSNwybZrjLkACNEIJY05Fz58+4vzuVHS
        GGG3m3zyMnva5M0nmP/+NXfu+evbDC7qHaR3vjNUNU6dGnSBn+LFVTHGuJO248I7BalINBGC8AEq
        COAURPE2upJjjMtQNxYcpafw/ZJ7CKQduH/pS17slzxgQ9rVh4uXYXu45INLKN0oyKrSSkhXCoWu
        1Ml2EsnbwZIrtBUGEhEocXpxZbSVBCmfAppeyeh6nZI6KWlXOtlZ8mKUhDxqR1FgJbQjCBCp9wmR
        ZBOko16l0gFEJJls9KFSOpV0P0brgArCTsQ1et+/J1WCpE9Su9SuzouFUstDOdtErY59kKXGLsFj
        qWTnKG/bln/ofZv97/zan9rT3BqsfcBVvBpDXmmn41oEkLEbh8upzI6ir92WNB8Gn/uA1pMg3IJL
        suP7fkv4eTHP6PS+BwlJmnP84e4+633yuIsEVlTa1RB80KelydrsLwAAAP//AwCpXdObMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be678a97ad9-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:43 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=2t0Wz6pStIiwGdLOXndB_Gw2LiQB.gUUpqOEp1MQxdc-1720567903-1.0.1.1-9EYJeeuPIzGb6ctpMbp3q8J.t638uVrLZbjqXO9wLTrSrPXDpMp5yoCNTEE3BaRQFSGUb5532.ga_FUbDzm6MQ;
        path=/; expires=Wed, 10-Jul-24 00:01:43 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=ANRQeUNTiRZkfYuq8rw1jwJ663taedvoR4Nmd5MxYxk-1720567903008-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1431'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '14999706'
      x-ratelimit-reset-requests:
      - 12ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_f5ba372d94f71d24a9d5bf13292301a7
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieF0zTN4uOwddih26HbYVkKQZFpR40sChRdtAv83wfZzke7
        +WCIfHyPTwR1yISQtpSFkGan2TTBTVdPn7fL9bO+v/uS39Xrer3fB77/eLt+iB9+yEli4PYJDB9Z
        Vwab4IAt+gE2BJohqc6W1/nidrnKZz3QYAku0erA0/nVYsotbXGaz64XI3OH1kCUhfidCSHEof8n
        j76EF1mIfHLMNBCjrkEWpyIhJKFLGaljtJG1Zzk5gwY9g0+2fevcBcCIThnt3Lnx8B0uzudBaefU
        n/uvC3qYP8Q2p++//Mvq06K9/fZzf9FvkH4NvaGq9eY0oAv8lC/eNRNCet30XHhh0oZVG4FUIKiA
        wBuI6nn2Tk4IqaluG/CcriIPGxmA2Hrw/9I3sjhsJGHL1tdDEDTthyCfXEIpYtJVZY3SvlQGfWmT
        7SSSd5ONNNhUSKwicOKM4sbZRjOkeiZ0o5Kz9S4V9VK62dpkZyOLWRIKaD1HhZWynoEg8ugTIuuW
        tOdRpbIEKrJONsZUqb1Jum+zNaEBelVxhyGM90mdIOmztj6Nq/fSQGn10K5pozXHOejSYl8QsDS6
        d5R3XSffzL7L/nd+HE/daW8d1oFwG9+toayst3GnCHTs1+FyK7Oj6GP/Sto3iy8DYRNYMe7BJ9n5
        Yj6oyvPDPKOrmxFkZO3O+ZubZTb6lPE1MjSqsr4GCmRPjybrsr8AAAD//wMAkyaymjMEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70b1d7ada-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:43 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=NTCkuPUHEARizxynDoyoT.nF8bdvxZumpWJ3Ro2KasQ-1720567903-1.0.1.1-KGlRN.gifiXmxoAo5h7aAvPawF5oyKmH.3EAz_TTglnyRRQLnu89Wek1J5x02TDXD6kNha5MORMEP9.kTr40Nw;
        path=/; expires=Wed, 10-Jul-24 00:01:43 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=YN6rWMREOUfGkFV1zThTGQXoWe3JJlIwYh3H3ZEr1CE-1720567903095-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1708'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14999849'
      x-ratelimit-reset-requests:
      - 10ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_bf09781eef33d856daa2ebfb54abbcfc
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieFkzbJmluHDeiAYu1lKNClEBiZtpXKoiDRRbvA/32Q7Xy0
        mw8Gxcf3+ERQ+0wIaQq5FlLXwLrxdnq9+75d3dwtv/y8eljudnerm1vnb/GhrX/8qeUkMWi7Q80H
        1oWmxltkQ26AdUBgTKqz1TxfLFfX+awHGirQJlrleXp5sZhyG7Y0zWfzxcisyWiMci1+Z0IIse//
        yaMr8E2uRT45ZBqMESqU62OREDKQTRkJMZrI4FhOTqAmx+iSbddaewYwkVUarD01Hr79WXwaFFir
        7h+fHuf3X3N/q/kXLJ/mr0+wdd/8Wb9B+t33hsrW6eOAzvBjfv2pmRDSQdNz8Y0DaFZtxKB8wBID
        Oo1Rvc4+yQkhIVRtg47TVeR+Iz0GNg7dv/SNXO83MlDLxlXDwUN4GQ755ByaTTaSA5Sl0QpcoTS5
        wiTbSWTWTTZSU1NSYBWRE2cU19Y0wJjqOZAdda2p6lTUS0GzNclOwpKQJ+M4KiqVcYwBI48+MTK0
        ARyPfkoTUEWGZGMULsDppPsxWwXSGN5VrMn78XapEyZ9BuPSuHovDRYGhnZNG40+zAEKQ32Bp0JD
        7yjvuk5+mH2X/S9+HqPuuLeWKh9oGz+toSyNM7FWASH263C+ldlB9Ll/Je2HxZc+UONZMb2gS7KX
        y/mgKk8P84ReX40gE4M95a8Wy2z0KeN7ZGxUaVyFwQdzfDRZl/0FAAD//wMApSbc2zMEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70b1c7ada-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:43 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=avvPVjT_OedOxyrA_2jRtcgfglGFRYehvmVABzd2mjI-1720567903-1.0.1.1-bIKy24x3tjN2NELQwATSNlviy27Ktu6ALWzx.QHLzszMtZrpUu9oQ1FHLhGi.jXGKDDwVYu62yGEbHFkqy868g;
        path=/; expires=Wed, 10-Jul-24 00:01:43 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=K1puO7PIfnkIWkbZOkoLc843MHQsNAQTXvG8lAvPm5k-1720567903153-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1659'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '14998346'
      x-ratelimit-reset-requests:
      - 26ms
      x-ratelimit-reset-tokens:
      - 6ms
      x-request-id:
      - req_1949c370065fae3a179b4a91a71b47e2
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>"}], "n": 1, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "PatchFunctionParameters",
      "description": "Respond with all JSONPatch operations required to update the
      previous function call.\n\nUse to correct all validation errors in non-compliant
      function calls,\nor to extend or update existing structured data in the presence
      of new information.", "parameters": {"type": "object", "properties": {"schema_id":
      {"description": "The ID of the function you are patching.", "type": "string"},
      "reasoning": {"description": "Think step-by-step, listing each validation error
      and the JSONPatch operation needed to correct it. Cite the fields in the JSONSchema
      you referenced in developing this plan.", "type": "string"}, "patches": {"description":
      "A list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}], "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}}}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4RTTU/jMBD9K9Zc9uICCaWlue9qP4TEAVTtElRN7EniJbEjj1NAUf77yk1pVr1w
        saz35j2/sccDGA0ZJJu0KMuiWCTlMl0sr5PNoqBSL5YRT6/1Kr3RIMEVf0kFyEDVGC6Ua7uGgnEW
        JChPGEhDlqzTq5vVenOVSGidpgYyQKVcbwNflsbTq/MvfHmgJqDsrYoui30ajWpnFDFkTwMYq+kN
        sisJLTFjRZAN4F1D0ZPZcEAbQEJwrtkpbJpz2aG5SOz4dbt+ax9/8e+HH7jl1ffiz82S+mVUv3fR
        8CMGyHmbDWCxjew9BlV/O+L36LGlQJ5BAvqqb8kGhgyGHFjV1OLO6BwykcMjk7+j1vn3HKTIwROy
        s8ZWE/1Qk+iZvOi82xtNWoSajBfxVCmwiovVwthAnjjwhTgpsGEn4sHG2ZOuo8BSGKuaXhtbCRSa
        FCGTFgrDrP7Cs+exnESHHFC0+GJsdTHF7WLbxDHs05CD66bYqPWJryfoMkaewD02PU3oT/LUGqxz
        GKX4xACrc326/lx1auNM+xSr5n5yeP7cy1OD8Tq5Nt2535CDwsBT5Z3zFdqpQrvqiH6t+6Pn6dLj
        e0zkFgM7m8M4Po+HRUJprOF6N40EZP+P8fgsof+Y+M67tgu74F7IMmTJbXIdZz5gM2Ob9VLC/CNn
        YpWM4z8AAAD//wMAj+7jHuYDAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be6785aaab5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:43 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '1.883'
      x-request-id:
      - 51e3b3a1-b81a-42a4-9de1-5d185d964faf
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type":
      "function", "function": {"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties":
      {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieFnSZLk9s2bECHAuthxQYshaDItKNUEhWJHhoE/u+DbOdz
        88Gg+PgenwjqkDHGdcmXjKuNJGW9GS+2X9bzH4/5i6y+QjmFybPyn8PuZxHmDzUfJQaut6DoyLpT
        aL0B0uh6WAWQBEm1mE/y2Yf5Ii86wGIJJtFqT+P7u9mYmrDGcV5MZgNzg1pB5Ev2O2OMsUP3Tx5d
        Ce98yfLRMWMhRlkDX56KGOMBTcpwGaOOJB3x0RlU6Ahcsu0aYy4AQjRCSWPOjfvvcBGfByWNEbtn
        KLcTu0HE3a9Pj4unl29P24/F94t+vfTed4aqxqnTgC7wU35504wx7qTtuPBOQSoSTYQgfIAKAjgF
        UfwpbuQY4zLUjQVH6Sr8sOIeAmkH7l/6ii8PKx6wIe3q/uBleOsP+egSKkYrTkFWlVZCulIodKVO
        tpNI3o5WXKGtMJCIQIkziCujrSRI9RTQDLpG15tU1ElJu9bJzlHIo3YUBVZCO4IAkQafEEk2QToa
        /FQ6gIgkk41BuJROJd3rbB1QQdiLuEHvh9ulTpD0SWqXxtV5sVBq2bezTdTqOAdZauwKPJZKdo7y
        tm351ezb7H/x6xC1p701WPuA63izhrzSTseNCCBjtw6XW5kdRV+7V9JcLT73Aa0nQfgGLslOp9Ne
        lZ8f5hldHEFCkuacn90/ZINPHveRwIpKuxqCD/r0aLI2+wsAAP//AwCNfMpbMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70863fa12-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:43 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=NLcVuVT0gFl2T2AwLStNQdw3M7dvLu1lgRi80ZFPjgo-1720567903-1.0.1.1-DzdLPWthw8yoIroPclrRagJwQ0Y97ylPocAVbaFxlpfjBmsRMuS2qAnYR8ZNru7Lp.tzv_U7xs.J_EeiBIYnZw;
        path=/; expires=Wed, 10-Jul-24 00:01:43 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=1bEkv8BHEfOsOgRvX3.Ashi0ODAZBieFXxr7zP_pwUs-1720567903383-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1887'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '14999755'
      x-ratelimit-reset-requests:
      - 38ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_487d1676c0cf68b7426cdbf7b55ea9b5
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieFk7TJ4nuxw9J1aA/DthSCItOOUknUJLpIEfi/D7Kdr3Y+
        GCIf3+MTQR0yxrguecG42kpS1pvxcne/WfyMv2err38fH3ez+MPuH/bPi/tm5XZ8lBi42YGiI+tG
        ofUGSKPrYRVAEiTVyWKa380Xy3zSARZLMIlWexrPbu7G1IQNjvPJ9G5gblEriLxgfzLGGDt0/+TR
        lbDnBctHx4yFGGUNvDgVMcYDmpThMkYdSTriozOo0BG4ZNs1xlwAhGiEksacG/ff4eJ8HpQ0Rjzl
        i+f4oOvpypjl2/eJfbq//fbl1+NFv1763XeGqsap04Au8FO++NCMMe6k7biwpyAViSZCED5ABQGc
        gijeJh/kGOMy1I0FR+kq/LDmHgJpB+4zfc2Lw5oHbEi7ug+8DK99kI8uoRRRkFWllZCuFApdqZPt
        JJK3ozVXaCsMJCJQ4gziymgrCVI9BTSDktH1NhV1UtJudLKz5sUkCXnUjqLASmhHECDS4BMiySZI
        R4NKpQOISDLZGFKldCrpXmfrgArCu4hb9H64T+oESZ+kdmlcnRcLpZZ9O9tErY5zkKXGrsBjqWTn
        KG/bll/Nvs3+d34ZTu1pbw3WPuAmflhDXmmn41YEkLFbh8utzI6iL90raa4Wn/uA1pMgfAWXZGfz
        ea/Kzw/zjC5vB5CQpDnnb+d5Nvjk8T0SWFFpV0PwQZ8eTdZm/wAAAP//AwDSHCt7MwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70e57230e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:44 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=l.j3EkBJC9wPLKcllpTkyalIZgOeCzJ0erkxQawK7.8-1720567904-1.0.1.1-5PzNC5.BiBmwr0N0s2UjiDUKDfvgiK7Vqc.cM3ayA3tzZQTGC5mVS_7o6TyLYRc84RKnqdFuVqKA2t2kQ3IBxg;
        path=/; expires=Wed, 10-Jul-24 00:01:44 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=nV2ik3wiCe4r2FzuJ_rdUEgnKf8PjnXL4YmURikCDO0-1720567904159-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2761'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '14998433'
      x-ratelimit-reset-requests:
      - 39ms
      x-ratelimit-reset-tokens:
      - 6ms
      x-request-id:
      - req_aca1498e46f23e0dbe9c56a90462ca27
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<system>You are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nRemember that this schema must
      be useful for prompt engineering an AI assistant.\n</instructions>", "temperature":
      0.0, "tools": [{"name": "UserMemory", "description": "", "input_schema": {"properties":
      {"age": {"description": "The user''s age", "title": "Age", "type": "integer"},
      "name": {"description": "The user''s name", "title": "Name", "type": "string"},
      "interests": {"description": "The user''s interests", "items": {"type": "string"},
      "title": "Interests", "type": "array"}, "relationships": {"description": "The
      user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions"],
      "title": "UserMemory", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA1RSwW7bMAz9FY6XXpTCcdMA8bXD0BXrUCToMKwIAtVmYjWy6InUOjfIvw9yFnQ7
        EeR7JB+fdEDXYIWd7DbFtBx+TL99Wtr2q7tdDPOrZXz9qG9oUIeeMotE7I7QYGSfC1bEidqgaLDj
        hjxWWHubGppcTa4nwiGQTsqinBXzskCDNQeloFg9Hc5DlX7n9jFUeENRrQt++ACfLxp4Jmht3w+g
        DC35HgZOIMqRQFsn4MKWY2fVcYAkLuxAW4JHoXhPHccBtinUGb2EL6QXAklopPSRf7mGGlBmn6fX
        ttcUKS+I0JBa5+USj+ZdJ7PfJMnXj5blPG2K6eP2oVy9lA/f4+L2Jaz2bzfbx1iiwWC73PcuJneG
        PilWhzN4x3le9rSaFRlWiiQqWD1hEzmQ4NpgJD+eKK3rJXf3pGOs7Ym6ail6rvdo8H6oI28V18ej
        Qes2LojGNHowUpfUUfdMEbS1CndM4ARmBQxkowD7xkBrBfQ1W6ICWWgD5wVgQwN/V5gxGR/hpJoa
        cAFOsi+zgLVBUe43kaxw+N/DERD6mSjUhFVI3htM4/eqDiefNsp7yqrn1wuDnPTfWvlHBsa1tQAA
        AAD//wMA8G8U8r4CAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be8293767f2-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:44 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '364000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01EzWnsVogefd9Fn2tcH4BQx
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 1b99074234d50f1e8ea7bd342ea9eaf4
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieFnS5Nk9uALes2bB3aU7EUAiPTjlJ9VaL7Ffi/F7LdJO3m
        g0Hx8T0+EdQuY4yrki8Ylxsgabwez7df17Obellf/5pcze8my8fP20u6+n5/+fDtlI8Sw623KOmN
        dSKd8RpJOdvDMiAQJtViNsmnZ7N5XnSAcSXqRKs9jU9PpmNqwtqN82IyHZgbpyRGvmB/M8YY23X/
        5NGW+MQXLB+9ZQzGCDXyxb6IMR6cThkOMapIYImPDqB0ltAm27bR+ggg57SQoPWhcf/tjuLDoEBr
        AcX05+PF9fnVffz9Ry1vflx/ebl4wfyoXy/97DtDVWPlfkBH+D6/+NCMMW7BdFx8ogCSRBMxCB+w
        woBWYhQPxQc5xjiEujFoKV2F71bcYyBl0f5LX/HFbsWDa0jZuj94CHf9IR8dQ8VoxSlAVSkpwJZC
        OluqZDuJFO1oxaUzlQskIlLiDOJSKwOEqZ6C04OSVvUmFXVSYNYq2Uk9k5B3ylIUrhLKEgaMNPjE
        SNAEsDSoVCqgiATJxmC4BCuT7vtsHZzE8Czixnk/3C51wqRPoGwaV+fFYKmgb2eaqOTQKUCpXFfg
        XSmhc5S3bcvfzb7N/hffDlG731vtah/cOn5YQ14pq+JGBITYrcPxVmZvorfdK2neLT73wRlPgtwd
        2iQ7PZ/1qvzwMA/o/NMAkiPQh/zZeZENPnl8joRGVMrWGHxQ+0eTtdkrAAAA//8DAPg8vdYzBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be70a866450-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:44 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=Gsc_N3FG9TIDQiU908JkWeqYjltkUIYMlwVQwAWEVTo-1720567904-1.0.1.1-pYtLL2zYgpwMN5PZiZ9HGGv.zHIeJokuopa2IzuZNKC8RMpicz2hx81iKN.pbSNVkaJf0VwBj63jDNV.JbWuKA;
        path=/; expires=Wed, 10-Jul-24 00:01:44 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=gZHzqn0msxmq2gtKJFc1z7E09YQO61pP1uNHCGvEQ7U-1720567904595-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3194'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9990'
      x-ratelimit-remaining-tokens:
      - '14999646'
      x-ratelimit-reset-requests:
      - 56ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_32805b8b44feefb05831edb2b4e3838b
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow
      inside</user>\n<ai>Certainly, changing the interior lighting to yellow now for
      a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>"}], "model":
      "claude-3-5-sonnet-20240620", "system": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xSXW/bMAz8KwJf+qIETpqmhd+2YQ/7yLChXbGuLQTNZlytMuWJlJsgyH8f5DRL
        igH1iyDyeOLdeQOuhhJabkwxuX6a2e/py01zdtkTL9Zdy7/5J2iQdYcZhcy2QdAQg88Fy+xYLAlo
        aEONHkqovE01jk5HZyMORCijaTGdFfNpARqqQIIkUN5u9qSCqzw+HCW8tYy1CqTkAVVijCesIv5J
        yKIkqDtY2Eccmt41D8Jqjd6HJ+WIXY36DtQHVVlSuJJoK1FWdRGXGJEqVMsQh1FHgtGFuONw1Kgq
        +BDH6jPKCednB9gzh8lrmAMNm36ilokqcXnPoCrbSYp5xvHRc2PY6oPKEHwmAr0zPN+TKSY/3r3H
        xbf+6uZy1X+NPP/YvjmffwINZNs898oOmYq6JFBuoMMojpD+B+ZuFdpliGIYJasdanvpxlJtbPvL
        ZXRu7M0x/xCDOS85bzdwuEMJuxRAA2MOuMIjuInYo/WYZV89p7rPFOtsYPtapmPY3m/zd6+BJXQm
        ouVALz0dGpw5h30oea8hDT/rIKlLYiQ8IjGUpxfnMw0hyXFxcjHfbv8CAAD//wMAbLv53g0DAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be82a8a15d0-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:44 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '368000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01DssBjJvP9hYYq2AHRmEdcQ
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 4ab08d436938991de1685a897bd5a5bb
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour
      Kevin! Let''s start with some basic questions to assess your French proficiency.
      \n\n**Fill in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA)
      soif  \nB) faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "UserProfile", "description": "", "input_schema":
      {"properties": {"age": {"description": "The user''s age", "title": "Age", "type":
      "integer"}, "name": {"description": "The user''s name", "title": "Name", "type":
      "string"}, "interests": {"description": "The user''s interests", "items": {"type":
      "string"}, "title": "Interests", "type": "array"}, "relationships": {"description":
      "The user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}, "other_useful_info":
      {"description": "Any other details you would like to know about the user.",
      "items": {"type": "string"}, "title": "Other Useful Info", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions",
      "other_useful_info"], "title": "UserProfile", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUXW/TQBD8K6t7CUhu1JYU1Lz0AQmRFoTEh3ggqFrba/vU86653UsIVf87uktb
        JYgn69a745nZOd8737qlG7W/PT1792GIb79tLr58ub78/uFmW198frO4dpWz3US5i1SxJ1e5KCEX
        UNWrIZur3CgtBbd0TcDU0smrk4sTFWayk/PT88Xp6/NTV7lG2IjNLX/cP4Ea/c7j5bF0K8BJgvT+
        D1VQJ4MVtMIzgwE3BMSS+gE8dxJHNC8MJtBEQiNASEoRpiidDwQ1KrWQOwav0AhvKOp+BoMwzeHr
        QP/Up4kwasasCWwgqKn3zJ57kA4Q3kXiZoCA3CfsCVCVVEdi25P1Bq2QZr5TlI1vCXSixne+gZYM
        fVDAWpIV8Ex3pjBF6igDk1bg2SiSmlYgESaKKozhUPF8zWv+eqy6S+FIfAUr2EoKLTBRC6NEOjLt
        mMMcPuIOVoB6BztJoDIS/Eqkube40aMNFMsAU5NTEHdPgq4yn7M5fB/QwGtGiMA40hW8WHXgbabA
        YnBDG88VTIFQs+8xUmMw0ss1n8/hvWxBQgsYKSNcrfnVI2SuFEbS7bGfLcoODVLXnjKJxRzeIhcB
        RiHASI8ykXfgx0liDipECsUDHfyk4HmPGXxH8KLD0YddBV30xK1WMJHpy6s1X8xhpVl+pAL3vNQt
        7jLArIXg7yh/02RPEBuDrbehEJJYxg42Xcol051EyBQOk7g39RM3xYznLJUkH+yxgtUshJxVrAMd
        XYWycmyaFMuZ2//FZO4eflZOTabbSKjCbumI21tLkd3jC6VfKTN2S04hVC6VP8Dy3nmekt2a3BGr
        W75ZvK6cJDusnV0uHh7+AgAA//8DANP2aLFhBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be83f23d009-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:45 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '369000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01Cmmy6H9srh5aRPQYND63jW
      via:
      - 1.1 google
      x-cloud-trace-context:
      - bb6afceca7c0342097248ae609c8f679
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xSTW/bMAz9KwIvuyiF87EE8LFAiw77ANbtMhSFoNi0I8wmXZFK0wX574PcZUmw
        obpIJB8f+UjtIdRQQi+tK6bX6em+7m/mP+4+f1uHSHe6Wd1/BAv6MmBGoYhvESxE7rLDiwRRTwoW
        eq6xgxKqzqcaJ/PJ+4kwEepkVswWxXJWgIWKSZEUyof9kVRxl9PHq4RrL1gbJqMbNBXTFqN4DUzW
        fDCVJ4M7jb5SI9yjSYLRDBEbjEgVionY+lgHak0gxRg4mi60Gw3UXplPqO8k54zkf4hc5nBnHG47
        NU2iKhc1yqbyg6aYc4KYQA3HfmzoCg72JIK5y0xgX+eZ7eSK6RK/fP01pJfFrq5vvWzW6+3N0IIF
        8n3Oe6OJTEVDUij3MGDUQEj/AnO04r7hqE5Qs9DRd1TtPNXO9+uQ0TlwnIv7i1jH/CIUuSR+2MPJ
        hhI6fgYLgnmDFZ5hXcQt+g6z8O+bi62I6fjZnCqYhuN/VgOHx0M+jxZEeXARvTBdznUMCD6l13Yo
        dZ2FNP7HUdaQ1Cn/RBIoF8VqboGTnjunq+Xh8BsAAP//AwC/YYrl8AIAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be83a1767d3-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:45 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '369000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_011wYVP1awEsvdAhtAAsDJci
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 5138853a8fdaad253db060373c12ea8f
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<system>You are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n\nGenerate a JSONPatch to update the existing
      schema instances.\n\n<schema id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'',
      ''grade'': ''8th'', ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3STX27TQBDGrzLal4DkWknaQvFbhVQJCqhqA1JpqmhqT+xV17POzm6oFeUEHIBL
        8MSdENdAu05b8sCbvX+++b7fzG6UrlShWqkX48mMq/N+5a/sOZ9NZqfTTl+9/vpRZcr3HcVTJII1
        qUw5a+ICimjxyF5lqrUVGVWo0mCo6ODw4PhALDP5g+l4ejR+NR2rTJWWPbFXxc3mUdRbaxZBomqy
        Ev/DYjx5+6k9en+hS+nefKgvTz4313523apMMbbx3gX6sjkLXHpt+QIdtuTJSZThLnhVbJSUDbW4
        SLKnJVbU6vIy3DldxgiEYllzrQo1awiCkBsJrAK5HipLAmw9dM6udUWA3IPmpXUtxnrgyNAa2YO3
        4BuCfXkYKucQhelBi9dcg+bIqiRA4wirHiIN1CywRhNIYGkdoDHgaBW0owqWmkwl8CJGzqB2WFEG
        yBXUzpbk+oXR4l+mMo6W1lEGbCF0FXoSQEfAVMamuR7uUKgCy+AbLbH0mpykMDm8GxkD9NAZ1Axt
        D76xoW5S+ng9GSMsm8FQMec5T3KIrooU8Rkajzy0xIlRZDY4FwvfCO6JugTriUjKDXP15+f3379+
        zFU+52k+5CyGUKPYhj3yeGeDBxxOgaE1GdCcdJONx2ot6kQX5urEN0n7MN8D9+RdkrCWnTY96OTu
        i24T7AbTLDRxzVuoLHzTvtlJaZL/54tV8kjrSse+s4WyQa53vXlsczbwfx41oLbzfboNdgldnHSS
        XGVq96mKm9vt9jZT4m23GCZ5/ymlDaFVIC5JFRyMyVRIr7fYDC9k4e09sahicnw8zZQN/t/F6eFk
        u/0LAAD//wMA6UT0SB4EAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be828432716-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:45 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '374000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01KRmVoyTnvGvr7bJLzogAh1
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 57177390b13ef86a004fb6fca072be00
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour
      Kevin! Let''s begin with a simple question to gauge your understanding of French.
      Please fill in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc)
      parle</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nRemember that this schema must
      be useful for prompt engineering an AI assistant.\n</instructions>", "temperature":
      0.0, "tools": [{"name": "UserProfile", "description": "", "input_schema": {"properties":
      {"age": {"description": "The user''s age", "title": "Age", "type": "integer"},
      "name": {"description": "The user''s name", "title": "Name", "type": "string"},
      "interests": {"description": "The user''s interests", "items": {"type": "string"},
      "title": "Interests", "type": "array"}, "relationships": {"description": "The
      user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}, "other_useful_info":
      {"description": "Any other details you would like to know about the user.",
      "items": {"type": "string"}, "title": "Other Useful Info", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions",
      "other_useful_info"], "title": "UserProfile", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2RTXU8bMRD8K6t94cVByfHV3lvTqiIqSFRVEQVFJ3O3uXPx7R72OgGi/PfKRxHQ
        Pln2zox3Z+wtugZL7GNbTWeX0s/nRV+cf/w5uzq8v7uO3+fXDg3q40AZRTHaltBgEJ8PbIwuqmVF
        g7005LHE2tvU0ORgcjSJwkw6KabF4fS4mKLBWliJFcub7Yuo0kOmj0uJC7CDeGndExm4TQoLaIT3
        FDq7JiCW1HbgeCWht+qEQQXqQFYJLNTSD56UIEUKMARZOU9wayM1kKGdi1ALrynEZ7L1wrQPp7Kh
        NQUDC6gtZ3kKYGFFG2hIrfMRtLMKvWs7hdtRf5U8rCSAdgQ/I4WLv7etEtdZex/OSKEnaK12FGCT
        BTYEdywbsNxkImehUUFF/LtRBhvUWf8yxD7uzKtjIr5KMecwhpf3qZrOfgSdD1ddOzs6PSme7K/L
        zZd0do4G2faZ96bNTOUhKZbbl+o3WjtGgzng8mCaAUqBokYsb/BrIK478JbblBFLg4H86GLs3BCx
        3O4MWlc5jhrSaMFI/Cx9n9jVeSzH2dXgiBv/CL1lpoAm9wX/6AN56ok1Zk6gOAhHimjwIsjaNf/j
        PdnAjlugBwq1y+ClQcnWV89pVfnV5I6yDeDiK+VZCw1+WkDsJPlmzGVvLvxbUtgDG8FCG4jUcYvL
        3W5pMKoMVSAbhd9HMhYi3SfimrDk5L3BNP6bcvvseqVyR9mek+LYoCR9e1Ycftjt/gAAAP//AwAT
        M4ZElwMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be82dea67f1-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:45 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '375000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01WkV8oF75uh7saY9Em8Mrb2
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 42b2c4f542034d5e7c32e3a6481fe93b
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a
      place to eat, but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3RSTW8TMRD9K8NcuGyqpE0qusfyIYLgAERVJVStht3ZxtTxuJ5xlFWU/468DTQI
        1RdrPvzmzXveo+uwxo3eN9PZp9XX9Hh983Az3F+t3r3vJQ2LX4YV2hC5dLEq3TNWmMSXBKk6NQql
        ZyMde6yx9ZQ7nlxMFhOVENgm59Pz+fTyfIoVthKMg2H9Y/8H1Hg3jihXjW85Gbngh1ewfN3BT4Y1
        xTiACazZRxgkQ+9CBxRgaeQdBUisRjlRsDO4JuUOJJTGBDFxz4lDy9BLgkhqBJ3TNStQ6P4itNmp
        C1zBEloKwDtL1BqobBiy8imQnsFnNngqgK0ZKMYkMTkyBhPxhWtL0XIqdafgQi9pQ+YknOGhet5c
        xDdZi56jCSXOzXT2of0uG/dxPv/ycLtapO7GOvkmWGGgTXl3pFeepuaEWbOdFagQs2G9x8jJXODw
        f+NYFRdMG+kbF4yLhCX7LGWJetpKTs64OQo0+vYMhDUeFcQKlYu1LZ8MahJvmTyX5Vbro5S8i4m1
        uETgZfuCMxq5db1ryfsBEj9mVuOXXMfD3aGcuwrVJDaJSSX8q/BY0AI0Eg/Z+wrz+J3r/ZNojckD
        B8X64mp2WaFkO03O3lwcDr8BAAD//wMA6bHo0C8DAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be82c4ef9ea-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:45 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '376000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01FVixvARLvyC9TJtxmupgbW
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 1e037c6d5d6084cb5b8f521f7c15b3df
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around
      Mariani these days?</user>\n<ai>In Mariani, you can explore the Mariani Junction,
      nearby tea gardens, and some local heritage sites. Would you like directions
      to any of these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xTTWvcMBD9K2IuuWjDfqVJfUuggUIopeSShiAm8tjWxh4p0jjJsvi/F2k37JZC
        fRGaefNm3jx5B66GCobUmvlidb+65m39sLi73PDy5uH9vamvV6BBtoEyilLClkBD9H0OYEouCbKA
        hsHX1EMFtsexptlqdjFLnplktpwv1/MvyzlosJ6FWKB63H2SCn3k8nJUcIOJauVZSUfKen6jmFCc
        Z62+K4us6EMiWlHJD6TGRFGFSA1FYktJRWox1o5bFSkJjhFZ0rm6I1F7eOE9cJhcbk7KzdtCNSPb
        3E+JVxaDjLHUJDrtcw6TPgrwvs9UoPe7zPfRzBc/w/qi+7XZdHjdbr/dtpv17/bqB2hgHHLdf6bI
        VBxGgWoHgaI4Jv4XWLLesSTjG+NYKIvO0aP4giklkWpzjJv98I+f2UwIFdw6JlU7dtyChkTZLUsn
        TU2kN8KestD77uAAfYRIKRuHIUSyrjimGh/VGarX0ZGo0KMl9e6kU6giNY4zXAafQkeRzrRyXDuL
        ks3Dk2UXmuY4l8oannuXuoGyuTA9TRoaF8kkKY2h2k0aamTruP072EZvKW5N6nwIWWS1m6b8nEfZ
        3yBgfDkkTuOTBonYNM4a5NpYz7XLtOnAYP3Q+CgmkeSK4o3t3YBCGSzR93uW3rVdRhQaHJ7dfvOF
        JK87CjrOygpgoNph5hrG5OxhKKydL9nga4vF8Sl/TxqS+GAiYcqCT19mSSR6HffteOx7DWP5m6vd
        /rEZ8S+UBa3nl1ca/CinweXXq2n6AwAA//8DAP5wUDsuBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be829c267be-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:45 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '376000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_018G8KoMMqGeAKiJPoiHWrib
      via:
      - 1.1 google
      x-cloud-trace-context:
      - abbe760ec2a035238bb59938d4b2ecc0
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}], "model":
      "claude-3-5-sonnet-20240620", "system": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xTwW7bMAz9FYGXXZQiSZsiyG29FBvaHrYB61AUAivRjlBbciUqaBf43wfKzZJi
        wHyxLPI9ko/Pe/AONtDn1swXK7z9hi6srvzPpfu1Ky94fd160MBvA0kW5YwtgYYUO7nAnH1mDAwa
        +uiogw3YDouj2flsNcsxBOLZcr68mF8u56DBxsAUGDYP+wMp06vA62sDV5jJqRgUb0nZGHaUMrKP
        QQ0p7rwjp9UXZTEoeuWEllWOPamSKakhUUOJgqWsEnXI5BRHFXDn24kDg1ND9IGzio3ygSlR5jN1
        Q/wpC0kt+85shNSckJrdQjUl2ErFUVkcuKSKyXRa/QxGfZwvxk6oQE9Sy3cx88U9nd/cr/zXdby/
        uqPb67vftqy/g4aAveD+04VQhaEwbPYwUGIfKPybKNEUC/vQyvEog8HgzEnkeBw1cMKm8bbm2Bic
        F0SeYgOm5/fEcZRl9k1MbDKx4GtB2/kemQTKKXYTrvPtVjIqKfZPXvqrLBqmdZjYmMM6akuUGUsS
        Z8mMdahEzhzvzSTvwyE6UcLnYejoiSiDhkxiNksnophEO8KOZBE/tu++SfRSKItbTqzCUf3l0soH
        5y3KDApPNq2amBRvvfjt0JiyW/ThDMbHUUPjE5nMlXLSwmGwIsWHyzZFS+nN5G0choPCGqT/xOhD
        L/sV8XpyHkWSvmRvJ3BC52ONDtFZrAKO8jxqyBwHkwizVDq1Yg1kGbzqFkrXaSj1797sJ3cZjs8k
        qz9fry81xMIfLhcX4/gHAAD//wMAksc9fT4EAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be83e3b229f-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:45 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '376000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_012KPzFGH4nFiM15N3jzSGgm
      via:
      - 1.1 google
      x-cloud-trace-context:
      - f14dd6b05c31b8809f8bd0b1fca82c9d
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting
      to something warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting
      the interior lighting to a warm ambience. You should notice a cozier atmosphere
      now.</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nOnly extract pertinent user preferences,
      no temporal desires. Extract same user preferences only once independent if
      the user has said it multiple times.\n</instructions>", "temperature": 0.0,
      "tools": [{"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "input_schema": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xSXW/bMAz8Kxxf8uIETtq1nd/aYsO6rcAGLC2GohBUmbGFyKInUVmMIP99UNIs
        3QfmF0M88kjecYO2xgq72KhyeioXl+d3V8P7z+Hbl/unjzLvO3uJBcrQU86iGHVDWGBglwM6RhtF
        e8ECO67JYYXG6VTT+GT8ehzZe5LxrJydlmezEgs07IW8YPWwOZAKrXP57lfhNQXR1rvhFdxA8jWF
        zF+DtFpg4DSqwdklgTCYVvuGQFoC64WC5QDONq1Y32Rcww8dOgog7GkCn0hGEWgtQRsBaW2EPtCC
        AnlDkHukvtZCuUuAFbXWOIJIkvkiaGM41NY3bpjAzcg5SHHf/JlSpUhBHSmjWk1hkbwRy343r+4l
        Bdq3tn7BodMZm+C2OKrB7DITFntj8jupcnp2ft3V87i+n98t317dvtPdbf9hwAK97nLdf4bIVL5P
        gtUGewpiPfm/EzNquFtwEHVYOscOiirta6W7J5uzM3DQXP3KMOz4D86HDR7fWGF2ZOdHxAIj5WMw
        9KJEBVqRdpRX/9pS1jg82xThWAwLDv8wPZtY25gPJIJhdvvsCW4ft/l7LDAK9yqQjux/V3sHRPqe
        9pP65FyBaXfuu2X7JEp4ST5idXLxpiyQk7wMzsrZdvsTAAD//wMAYSxMB08DAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be83ece96ed-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:46 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '377000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_0147QRDgzDK9tdLXL4RFL1w4
      via:
      - 1.1 google
      x-cloud-trace-context:
      - b92680869748a66313e9173ef5117567
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some
      good Italian food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nOnly extract pertinent user preferences,
      no temporal desires. Extract same user preferences only once independent if
      the user has said it multiple times.\n</instructions>", "temperature": 0.0,
      "tools": [{"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "input_schema": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3yTTWscMQyG/4rRpRdv2I9kS+aWbQpNSKGB0kNLMIpHM2syI09tecmyzH8vmt2S
        DYXOxVgfj6RXngOEGiroc+vmi/vtl93t183Pm37/iLd+3V+tH77dgAXZD6RRlDO2BBZS7NSAOYcs
        yAIW+lhTBxX4DktNs9XsapYjM8lsOV9eztfLOVjwkYVYoPp1+AsVetX06ahgg5lqE9nIloyPvKOU
        UUJka+6MRzb0Kgm9mBx7MiVTMkOihhKxp2wSdShUG4kmURYsCVnyhXkg+ZA1fOKeGE7T3Vm62y1M
        U9hrPUV4HKQkzQnZBG5i6qdeLmC0b/3H2CkJ7FFKvRc3Xzx+fr7eNZv16j49rH+0w2b/qV3opIy9
        5v2nCUXxUASqAwyUJDDxv4GTNwaW7GLjAgvpyGp9G11vDe5iSUHI+RJyYJrUfwNBBXeCXUAGC5l0
        QZ7OCrlEO8KOdLjv25Po9DokyrorND7hLnBrmpjMiWSaGGtrAtfBo6gTz/b0LvLU1AWMT6OFJiRy
        WSaZoTqMFmpkH7h9b2xT9JT2Lm/jMARu1TrqsyxyvMGA6eXkOLePFiRh0wTvkGvnI9dBsflE8LFv
        YhKXSTRjEtl3oUeVL7Kk2B0pXWi3GjFhsH8ORykniGqYBAP3ujcN6KkOqKy+5OBPTWEd4uQdYu1x
        Wt2o35OFLHFwiTDrwOdPbHJk+l2O5bh0nYUy/ZXV4fhqnMQX0oFW1x8vLcQi58bl9Xwc/wAAAP//
        AwBdFoGw9gMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be82ad4985b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:46 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '380000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01PnNxWgfNYsdeCtkx5EnJx4
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 50ec5f2324eec37b5b8f12b8d65e6840
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for
      some Italian food right now.</user>\n<ai>I located several Italian restaurants
      nearby. The closest one is La Bella Vita, 4 kilometers away. Would you like
      to navigate there?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes,
      that sounds perfect. Please set it as our destination.</user>\n<ai>Destination
      set to La Bella Vita. The route is clear with minimal traffic. We should arrive
      in approximately 10 minutes. Would you like to start the navigation?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start the navigation and can you also
      adjust the temperature to something warmer?</user>\n<ai>Navigation started,
      and the cabin temperature is now set to a warmer setting. Is there anything
      else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5xUTW8TMRD9K8YXLtsqadIKcuOrAokDoFYUIWQNu7OJi+1ZZsZJq2j/O7KTQqqC
        BJy8Hs88vzd+s1vrO7uwUZZuMv0wX529fPf+Y3d69Xo6nL2MVxcKl7axejtgyUIRWKJtLFMoARDx
        opDUNjZSh8EubBsgd3g0Ozo9EkoJ9ehkcjKfnJ1MbGNbSopJ7eLz9g5U8aaU12VhXyAr+BRuH5k3
        j0MweKMMrRpdoWEMuIakJguyGRh7ZEwtiumZotGVF9NSWiMLqKdksvi0rKWwBh/ga0CjROHYvEU1
        EU1HRlegpic2t5RNos2xHZtf3IiCy1IU1zaVfXaT6ezp67PuySWfXPbXm/PzT8/evuLnF7axCWKp
        27MupewOiLr1tEClIatdbO2ArD5hephYTpmy+rQsn8rQ9751kDrXUup8kVeTNj4En5YJRZySU/iG
        LlBaIrtSjyUIa/Kd22PU1v+6yS72GzE1X8zG68pEn3yEYO6KGitYXq7FA5aOcY0QsHTmYoW7Z4G2
        xUGxM7AD/C1eDVJWw/g9oxSZBoIiJ1C/Rjm245dxLHaJPbE6QS05VXEbfATF0gdlCrWPlRJj5xTj
        gAyaGR8K3QBHZHOY8/e69kyxM0oGuussO1MeoJUToYi6Knp2t90pGcgnFUe980mRUaoBygqZywAt
        traHNWX2RVv24tNvJLxRCB7SP/DGm4FRpD5Ih+IZq9v3QKYn6u44FsQ6fbFYsngtYuehUItZinV2
        HCvFJSYuPv0DQ7Or+J/+3kOoPcVdq+NPruM4fmmsKA2OEYTS/VmtB1IAK6eUQ2hsrr+uxXY3fk7p
        G5YRmk9n88ZS1sPg7MnpOP4AAAD//wMAzDHOEBsFAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be82e9c1601-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:46 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '381000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01TWP2MxLe2qJDuoNXLNFMbu
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 20f0791f0b99155b33be7cce55047126
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead
      on this route?</user>\n<ai>The traffic in Mariani is currently flowing smoothly
      with no delays on your route.</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great,
      can we put on some music? I don''t like driving in silence.</user>\n<ai>Of course,
      would you like to choose a radio station or should I select a playlist for you?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm, let''s go with a playlist, something
      upbeat and cheerful, you know the kind that''s always on the radio.</user>\n<ai>I
      have a Pop Hits playlist that fits that description. Shall I play it now?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That sounds perfect, pop music always
      lifts my spirits.</user>\n<ai>Playing the Pop Hits playlist. Enjoy your drive
      with some uplifting tunes!</ai>\n</conversation>\n</conversations>"}], "model":
      "claude-3-5-sonnet-20240620", "system": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5SUUYscNwzHv4rwS19mj73bNE32LUfh2tJCSC+FNgSjeDQ75mYsx5Kvtyzz3Yu8
        e9wuLYE+eUaW/tL/Nx4fXOzd1s2y8+vru19++nj/+91mz+Obp7vf6u2b201+cJ3TfSbLIhHcketc
        4ckCKBJFManr3Mw9TW7rwoS1p9Vm9f1KOCXS1c365tX69c3adS5wUkrqtp8Oz6JKT1belq27RaEe
        OIGOBIHTIxVBjZw6+BkCJqAnLRgUhGeCKlQgFxqoUAokUGhCpR6UgZJSUYxppqSAqYeZ+ohX8Cvp
        d2KlrcdJz5uUP5Pyj9cw1BSst8kFzFpLqxE673nllu7FDPNkUq47crX36tfX9+GHDx/e/4nvx/2P
        b7+++6N+/KveoetcwtnqvjGFSaVc1W0PLlPRmCj9O9F2Lxx7TL1vjm1rrhKDPQz4yCUq+R2lYmWf
        Du5Fxm1d5uw6J6aVAp218IUeCScyW/fjib11ipyM+IgKmTO0VoDT37gXmOKgYsxiAcmxRJUOYupj
        QI1pB3hGEgYuLwpXbvm8dK5gH7l5ydwHFMOwWJyrCZglLTgMMbSkwKmPNpGc78Q0cJnbMfLCtVz4
        +g8GMa0CFpC9KM3/gwbKA/WAX7gqnHrDy0SAI+Hz2Y4FzAJ1IHW3I2k0dKT9CQhUOUXgYpoG6Vn7
        zNcJV8bycMRywciIBZ4HLuqF1KINUJjijEqGTQtPx7Ip7kbLaEBx/hKPVJpI5phUPA8+2mGj9j2c
        rViL3QNNYYiFvGgb7BjpMQWTvAjuCgcqey8j5/w86LIsnzsnytkXQrHc87+qbQh9rcehUp2mztV2
        K20Pxx/FKz+QHYBX1+u3neOq58HN682y/AMAAP//AwDaLbZu9gQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be83d5716a0-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:46 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '382000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01Gdt9FLrJMPunQt4kAfLePZ
      via:
      - 1.1 google
      x-cloud-trace-context:
      - bb14934b9b595024f8a57d548807ee88
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<system>You are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nRemember that this schema must
      be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5RVUW/bRgz+KwRfsgGyZrtJPegt2doiWZNladZgqwOD1tHSNac79Xiy4Rr+78Od
        4toG2gB7ko4i+X38yKM2qBUW2Eg1G44e3p5Nlr/T2R9/Xb978/DP6t+7r/NlwAzDuuXoxSJUMWbo
        nYkGEtESyEafxik2WGBpqFM8eDU4G4izlsNgPByfDl+Ph5hh6WxgG7D4tNklDc6ZWScxa6ISz91s
        OLp//9FfrD7/NlLy8fVy0l19fXdxdosZWmpi3C2Fsn7b2TJoZ2/JU8OBvcQ0tu0CFhuUsuaGZint
        38L+mhvn15E+kzirbYUFvudwIhBqbZ8g1N51VR1PAhK4HczXg/gspnZqRzncUMMF3NcMnbA/EYhk
        QAtcsedGU53BqtZlHU1KLxbs2QZYeNdAqBnKzifDkkzHMMUrx1PM4YHBMisIDrpWUeBEIJ/acQ7n
        1TEgVQlvPPk/SKfDF0Be5XBpA3uWIHsoaNhGZQXmrG0F2gYHLUkgaOhJ2+oA37oA2h7h6l1GMFrC
        EToptYM+zeGODSWcWrffha9pGfEJSgpJbgXXzldkgawCAuWqZ/ObulN5zLAGMuJ2KYAS74P4Bwri
        7PclYfCHjMDNP3MZoovnhUmvPfezHM4v4dJK8F2awZ69ZyDPYB1Iy6Ve6DK66QO3HS9WGYiDFZ8Y
        A4Zp2XcEyHtaAzdtWOdx7C5IWIFL+gqDmwv7Zc8wg9W+hIae+gIWzhi3iqJdffjzJt0TcC37PmY3
        ynfcGir7iChLmrZDI1WchuNcqaPGR6xv7X3u4T4q1uZ/IOJKh7rH4xVou3C+SU5JzBsHZU226gti
        BQvngfTsULpI/T6p0LtKHCbPIkDGPDfvS6d9jNZslOzGMgrxIW2DIhWbxeqyfRnZMeGsn61j8Bwz
        bKOYLGl/uRYL9H3p/acaC/wlracM08XDAneLAbfZD0P6nfocMZ684PmN8N7/Ex42Bx9fiD6qcZ9h
        gyUFwQL7e4UZKlfFc7xQKVzCrOXk0l8d+KmkkIHikuNw/ozb7eN2+5ihBNfO+u16vNrTB+EvHduS
        sbCdMRl26W9SbPqNPQvuia1gMZoMxxm6LhwaT8e/brf/AQAA//8DAM+Fdm+uBgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be82b21982b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:47 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '386000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01EnSei4ax5LTQqT41d8oU7H
      via:
      - 1.1 google
      x-cloud-trace-context:
      - c9f7ac6c8f85245557a3d320d5613126
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy
      fresh apples</user>\n<ai>There are several grocery stores nearby. The closest
      one is ''Meyve Emporium'' which specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nOnly extract pertinent user preferences,
      no temporal desires. Extract same user preferences only once independent if
      the user has said it multiple times.\n</instructions>", "temperature": 0.0,
      "tools": [{"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "input_schema": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5RU22ocMQz9FaPn2bDZXJruW3MrhRRa0qaBEozXo9lxM2NNJHnbsMy/F3s3yYZA
        oU+DdXSOfCR51hBqmEMvSzvdP29P6Nftw7vrmx+LlM7a05t4eStQgT4OmLNQxC0RKmDqcsCJBFEX
        FSroqcYO5uA7l2qcHEyOJkIxok5m09nh9Hg2hQo8RcWoMP+5fhJV/JPp5TOHUydYG4pGWzSe4gpZ
        nAaKlflkvIsG/yg7r0aoR5ME2QyMDTJGj2IYO6dYGyWzZPLIj0ZaGoYQl8bF2kS3Csuit2euUM1G
        oxTbCtusaXc07WrfNCn6TMq63g2auHAEd4vvwVi9uCLqshRUmwbnc7LT/eOz1fXlyYfFOX6O3y++
        3L7/+HVxcQUVRNdn3j9ukaXikBTmaxiQNUSMbxMLSiGqWGpsiIqMUjjbhtinhpTMZ6JtiG1H3nW2
        d3yPKrZx3IsltpIG5E20TO6FBXMoHLPlQAWCecQedy5lGVfoOsyN+Na+GpuYXb7Jy1SLoRWy2akq
        piE2i/SY59gwSmsGpjp53IPxbhzzQibdenqZsXWxtjuIsmua4EvYU6xDTpJdJMSGuN+QhRK/siFv
        zTO6bqKhR7NVMGmoneL/NILxIaFst9a36O+L2yfB7Vv47R4zri0GNjWKhrjZ49KAMT+tviFWK6jZ
        b7Hlu9A7xWxWmTqYx9R1FXRh2eac0gjXL8LGTQbHCvK1WV2Ifd6vnNJjHVzW65ME/6TCrg5U8IFq
        7/KSFYVxHO8qEKXBMjqh+Po5FECy5+eiFaTyX5mvNxtule4xD+ZwfzatgJLuBg8Oj8bxLwAAAP//
        AwA/PTpNuAQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be82f8096bd-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:47 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '387000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_01JQmzX1HmfPszT87Zcmjbjo
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 04e777d14555ce694919c3acf45d04ad
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5xUbY8TOQz+K5E/p6vuG4f6jeXY5RAfESAQirwZz0y0M8kQOxVVNf/95LSl7cEd
        OuZLJo792H78soXQwApG7tzy8ur9/QfuH+7uX8v0qt3cvL/2/k8PFmQzkWoRM3YEFnIaVIDMgQWj
        gIUxNTTACvyApaHF9eJ2wSlGksXV8upm+exqCRZ8ikJRYPV5ewAV+qbm9VjBHTI1JkUjPRmf4poy
        o4QUrfnLeIyGvklGL4bTSKYwZTNlailT9MSmcIhdtd3rOVVxJypufWnaEr1iXpi3JGYk0yQjPYpp
        UzabVC5gtsf4UhoUBeyOKr0Xt7x8/mn88ObZuxf9/fXDS/zYtrcPd+ENWIg4qt1/BKBQcSoCqy1M
        lCVEij8q6mtORULsqiLmp93vbE/kswXJ2LbBO4yN8yk2QXOr5oeXENuUx8qj41Syp3NHn7dwvMMK
        Qlx4zCbiOnTVyvCGhUawwKQVPANwmdaEAyk77/p9VZCfqDH4mIqYfRiHsmrwZE2ITfCoaRg8KWIt
        wrGO/xZKVTsAn+R3AfOXedZOG9uUxTGJuqh0+CGMKKQkSU5DZbX6zdQ4oXGijFIy/UjIH0vTUJeJ
        +H9QkOlrIRZqjCTDJDWfEzcqPgKfESJ9YIOsFuHQ4VmBjtY1UQtD6Ho1qdXH8THsIt4qB1MKUdil
        1oUolIlrx+mJJevUnhFwlLtd6/+ThBfTNNDj73JwUkFJ5juWNVy6jvjnfVB5OAZmfI8h7jNvQybH
        UiF3g9Bg9ErFmbDLyVPeOO7TNO1nZrag8WfBEEedPSVvpCagUjIWDl5/WlynHIRcRzH/bE7K9Ego
        Zmfwm40xDbip20x6pWAH+YvpOHG7JyNjE1JNY0qNx1rpWb8vFljS5DIhKyWn+6w+sAZT04llGCyU
        uuJX292KcpKeSJfJzfL20kIqciZ8vpznvwEAAP//AwBK97MBQwYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1be829667ac2-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:31:48 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3984'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:31:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '390000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:31:49Z'
      request-id:
      - req_018CM8CTSPvwHC7Do4RL6mWz
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 8dd89a7ade259dd2ad5c0dad8549ee58
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s
      the traffic ahead on this route?</user>\n<ai>The traffic in Mariani is currently
      flowing smoothly with no delays on your route.</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great,
      can we put on some music? I don''t like driving in silence.</user>\n<ai>Of course,
      would you like to choose a radio station or should I select a playlist for you?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm, let''s go with a playlist, something
      upbeat and cheerful, you know the kind that''s always on the radio.</user>\n<ai>I
      have a Pop Hits playlist that fits that description. Shall I play it now?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That sounds perfect, pop music always
      lifts my spirits.</user>\n<ai>Playing the Pop Hits playlist. Enjoy your drive
      with some uplifting tunes!</ai>\n</conversation>\n</conversations>"}], "n":
      1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xWTY8iOQz9K6Oc6Z1m6E9ue1yttBpppNFqt0eRSVyUh1Rc67igEeK/r5KuAoqG
        1tyo+Nl+dp5Ndoa8mZunhykubu9nN9OZe7q5u6+eb56dr26wmj7cze4Xz+55ZiaGFz/RqZkbV4P+
        5rhpAypxNBPjBEHRm/n08cvt/cPj8+10Yhr2GMzcgHPcRU2fKxLcsKzS52J6O6i66HKUm/WXHKhm
        cpjM/N+doejx1cxvJ6bBlGCJZr4zwgFzzJQoKUQ1E6PMwToI4dytFJcN9i+q//n2H35t//7j6evr
        929P3e/f//z5kKnrts0BBxpmcvw535kITbbiqwo4tV1Csa1ghYLRYbLrqZkYkGXXYNRk5mb3YloU
        pYjxPfzFzD/tXoxwpxSX/VcLsjr5KmhBb/tzmwlmY+xCmHwaEDmerVis4zWewMdIcmgTxkRKa9Jt
        cWiBrqBHcYf0G9LaJnSdkG5P8RHRF2QN0ZODtkVvwTlMiRYBL6Xw5c4c2g2FUGpju4GwspVwcyyY
        rcekFCHfwuC/zwHGnVMOKDAQVoGqIneaD9ZMvgC4sqlFRxU5Kwy+dDWdNYtl6FGqWRSTWqUG7enB
        UMKIVp/aQvTWcfSUiQ+3PRgpVixNqckm7sThuTQGKn13IqaUm6GwQhs4LlFsbgDmw1Laec37wsZx
        U7GoTai5WQMPF6gBxUxQhUN/WkHMnckCukzmKEjFpkUB7WSkx4SgtkbIua4FAZIq8MZ6EiyzdQlY
        yAda1iVS7iU0C8K+2bsXQ1Ex35I9gBwHlmtJ38Pf4umvOywk/yoXcYlwYdwyRU1ZYcUfkw5jjkmh
        E4h66PWa8xihdR0lijieDVSQ7UmekRUTlSkvIy0QlyNzBUltxeyvuJ9ulW1eVbZBrdlfxhyJj5ZP
        qTavbJv0MJq7F7OguGSLr2XvJfxAyZ4j6BVi54EPGfMA57sYJz06DvaImv9cRl0bu1rOmxAtNBhJ
        6arOt21ZGIP3pqaAedTWGC7uzEtOoBbXKFsPW/umkFFRS2GHss17pW0vbf/UtSgNyArVuhoofrCq
        AzsI9g2cbAXSpLKzjiHGisWsUwWKRQl50Br0BD2HpktvG6VXbBFs4n6RHBXXW5YYBS+bIOtBC5cF
        RH+l3SWfTSoITbkslDWdLVgBT1yYtuwdHEZsiREFgo24Sf1Svcik98rt3qQPEe/LOZmLwuJco/v9
        3uz3P/YTU1GkVFtBSPn1cPow2f+YmG54w7TCTatWeYUxmfnd0+wxv2IUwuHsfjZ9mpjjG+sEPN3v
        /wcAAP//AwD8piNYuAkAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be66a0415ac-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.939'
      x-request-id:
      - 177f6dcd-3776-45e7-b814-558e05318f1e
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s
      interesting around Mariani these days?</user>\n<ai>In Mariani, you can explore
      the Mariani Junction, nearby tea gardens, and some local heritage sites. Would
      you like directions to any of these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFZRb+M2DP4rBz2nuzbtXVu/b8AGbPc2HLAeBEaiE15k0aPopEHg/z5I
        tZM4TYq9xeJH8iP1kdHekDeV+ermDh5gfnP/+DS/eZj725tngLsb553D23t4eIJnMzO8+IlOTWXc
        CvQXx00bUImjmRknCIreVHeP89svXx+fb+9mpmGPwVQGnOMuavpck+CWZZ0+F9PbQd1Fl6PcbOY5
        0IrJYTLVP3tD0eOrqW5npsGUYImm2hvhgDlmSpQUopqZUeZgHYRw7laKywa7+XuHf/z2+3fif3/9
        E++X39bf4uLn97+y967NAUcaZnb8We1NhCZb8VUFnNouodhWsEbB6DDZzZ2ZGZBl12DUZCqzfzEt
        ilLE+B7+YqpP+xcj3CnF5fDVgqxPvgpa0Nvh3GaC2Ri7EGafRkSOZ2sW63iDJ/ApkhzahDGR0oZ0
        VxxaoCvoSdwx/ZZ0ZRO6Tkh3p/iI6AtyBdGTg7ZFb8E5TIkWAS+l8OXOHNothVBqY7uFsLa1cHMs
        mK3HpBQh38Lo3+cA084pBxQYCatAXZM7zQcbJl8AXNvUoqOanBUGX7qazprFMvYorVgUk1qlBu3p
        wVjChNaQ2kL01nH0lImPtz0aKdYsTanJJu7E4bk0RipDdyKmlJuhsEYbOC5RbG4A5sNS2nnNfWHj
        uKlZ1CbU3KyRhwvUgGImqMJhOK0h5s5kAV0mcxSkYtOigHYy0WNCULtCyLmuBQGSOvDWehIss3UJ
        WMgHWq5KpNxLaBaEQ7P3L4aiYr4lewA5DizXkr6Hv8XT/++wkPyrXMQlwoVxyxQ1ZYUVf0w6jjkm
        hU4g6qHXG85jhNZ1lCjidDZQQXYneSZWTFSmvIy0QFxOzDUktTWzv+J+ulV2eVXZBnXF/jLmSHyy
        fEq1eWXbpIfR3L+YBcUlW3wtey/hB0r2HEGvEDsPfMiYBzjfxTTp0XG0R9T85zLp2tTVct6EaKHB
        SEpXdb5ry8IYvbcrCphHbYPh4s685ARqcYOy87CzbwqZFLUUdii7vFfa9tL2T12L0oCsUa1bAcUP
        VnVgB8G+gZOtQZpUdtYxxFSxmHWqQLEoIQ9ag55g4NB06W2jDIotgk08LJKj4gbLEqPgZRNkPWjh
        soDor7S75LNJBaEpl4WyobMFK+CJC9OWvYPDiC0xokCwEbdpWKoXmQxeud3b9CHifTknc1FYnGu0
        73vT9z/6makpUlpZQUj59XD6MOl/zEw3vmFa4aZVq7zGmEz18HT3lF8xCuFw9mX+/DwzxzfWKbjv
        /wMAAP//AwDj5autuAkAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be66a309828-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.931'
      x-request-id:
      - 34f182eb-024b-49e6-9d64-afcfca1b2bc6
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate
      to Applebees</user>\n<ai>Setting navigation to Applebees in Sherwood. You''ll
      be there in 15 minutes, and traffic is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbBbiM3DP2Vhc5ONzaSeONzL710F9sWBdosBFrieLjWiAOKY8cw/O+F
        lBnb49hBbx7xkXykHmntDXmzMPPnh9kUq/mde5wt7x6mfnn3XFXPd9Xj4331PF36L3M0E8PLn+jU
        LIyrQX9x3LQBlTiaiXGCoOjNYjqf3T8+zZ/vpxPTsMdgFgac4y5q+lyR4JZlnT4X09tB1UWXo9xt
        ZjlQzeQwmcW/e0PR46tZ3E9MgynBCs1ib4QD5pgpUVKIaiZGmYN1EMKlWykuG+z3Gu+f/opfvz/8
        zb9tv83//Pm7/+OfX3fZe9fmgAMNMzn9XOxNhCZb8VUFnNouodhWsELB6DDZzdRMDMiqazBqMguz
        fzEtilLE+B7+Yhaf9i9GuFOKq/6rBVmffRW0oLf9uc0EszF2IUw+DYgcz1Ys1vEGz+BjJDm0CWMi
        pQ3prji0QDfQo7hD+i1pbRO6Tkh35/iI6AuyhujJQduit+AcpkTLgNdS+HJnDu2WQii1sd1CWNtK
        uDkVzNZjUoqQb2HwP+QA484pBxQYCKtAVZE7zwcbJl8AXNnUoqOKnBUGX7qaLprFMvQo1SyKSa1S
        g/b8YChhRKtPbSF66zh6ysSH2x6MFCuWptRkE3fi8FIaA5W+OxFTys1QWKMNHFcoNjcA82Ep7bLm
        Q2HjuKlY1CbU3KyBhwvUgGImqMKhP60g5s5kAV0ncxKkYtOigHYy0mNCUFsj5Fy3ggBJFXhrPQmW
        2boGLOQDreoSKfcSmiVh3+z9i6GomG/JHkGOA8utpO/hb/H0/zssJf8qF3GNcGHcMkVNWWHFH5MO
        Y45JoROIeuz1hvMYoXUdJYo4ng1UkN1ZnpEVE5UpLyMtEFcjcwVJbcXsb7ifb5VdXlW2Qa3ZX8ec
        iI+WT6k2r2yb9Dia+xezpLhii69l7yX8QMmeI+gNYpeBjxnzAOe7GCc9OQ72iJr/XEZdG7tazpsQ
        LTQYSemmzndtWRiD97amgHnUNhiu7sxrTqAWNyg7Dzv7ppBRUSthh7LLe6Vtr23/1LUoDcga1boa
        KH6wqgM7CPYNnGwF0qSys04hxorFrFMFikUJedAa9AQ9h6ZLbxulV2wRbOJ+kZwU11tWGAWvmyDr
        QQuXJUR/o90ln00qCE25LJQNXSxYAU9cmLbsHRxHbIURBYKNuE39Ur3KpPfK7d6mDxHvyzmbi8Li
        UqOHw8EcDj8OE1NRpFRbQUj59XD+MDn8mJhueMO0wk2rVnmNMZnFw9PDNL9iFMLx7HE6m03M6Y11
        An+ZHg7/AQAA//8DAPytJVK4CQAA
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be66bc62512-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.015'
      x-request-id:
      - ede58800-a71b-4568-a087-469f32ed9083
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set
      the interior lighting to something warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting
      the interior lighting to a warm ambience. You should notice a cozier atmosphere
      now.</ai>\n</conversation>\n</conversations>"}], "n": 1, "temperature": 0.0,
      "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//fFZNb+M2EP0rAi+9KLt2EieN7y1QoNhL0cuuA2JMjizWFEcYjuwYhv97
        QVqyLcfOTeJ8vXl8M9JeOavmajqxE8CpfVg+VY8Pz/jy9rA0j08PSzRPs+Xr89vTy1KVipb/oRE1
        V6YG+WaoaT2Ko6BKZRhB0Kr59PVxMnt5fZtMS9WQRa/mCoyhLkj8XjnGLfE6fs+m40HVBZOyPGwe
        U6KanMGo5r/2ygWLH2o+KVWDMcIK1XyvmDymnDG6KBBElUqIvDbg/XVYbi4Z9J8fzb+zx5/1T//k
        /Y/f/57Vf3h++zFJ0bs2JRxgqPL8ON+rAE2y4ocwGNFdRNYtY4WMwWDUm6kqFfCqazBIVHO1X6gW
        WVzA8Nl9oebFfqGYOnFh1b+1wOuLt+zNaHV/rhPAZAyd92UxeKR8uiLWhjZ44T72dAZ1xBCduI2T
        XQ5owd3xHuUdym+d1Dqi6djJ7tI/INrsWUOwzkDbotVgDMbolh5vlbD5zgzqrfM+90Z6C36tK6bm
        3DBpi1FcgHQLQ/whJRgzJ+SRYQAsDFXlzGU92JCz2YEqHVs0rnJGM4HNrMYrsogHjmJNLBhFi2tQ
        Xx4MLYxg9aU1BKsNBesS8OG2B6MLFXGTe9KROjZ4LY0BSs9OwBgTGQJr1J7CClknAjAd5tauez5k
        NIaailh0RElkDTiMdw0IJoDC5PvTCkJiJgnoNpizIAWbFhmk45EeI4LoGiHVupcEHFeetto6xjxb
        txwzeO9Wdc6UuIRm6bAne79QLgimW9InJ0OePk3Yr/2lmNPJQm2Bm4U6wg2SRX6hd8YNgkd79P0H
        pZAai6FcMZQrhIpIDUqdXlLKsvirMBB+kyKpwqawiIUh8oVQwFhA2DXE+G2hDu+p+ucWjj3KPeY+
        Byw5PWVx3CIxs9iSCxKT6nM8RhlWD0aBjiHI6f43lEYbtelcdAHH84oCvNNjNk9WjC5vnrxmGMJq
        ZK4giq6I7J3wy023S+tTJ2bJ3vY5Ax8txNxt+ozoKKd1sV+opQsr0viRd3HEL6bLUgC5A+w68ali
        WirpLsZFz4GDPaCkD96ItXGoprSdUUODwYm7O3u7Ni+xIXpbO49p/Dfob+7xW0EgGjfIOws7fVTI
        qKkVk0HepV3Xtre+SLFrkRvgNYo2NbjwxefDkwGvj85RV8BNzHv0nGKs2DSVLOBCVkIa/gatgx5D
        08XjlusVmwUbqV9uZ8X1lhUGxtsmSHqQjGUJwd6hO9fTURihyZeFvHFXS5/BOspIW7IGTiO2woAM
        Xgfcxn7R30TSRyW6t/FLj8/tXMxFRnGt0cPhoA6H90OpKhdcrDUjxPRHc/mzdHgvVTf8V7VMTSta
        aI0hqvnzy/Ms/VkJ+NPZbDp7LdX5v+/C8Hg4/A8AAP//AwBU8v/tTAoAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be6696296a7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.988'
      x-request-id:
      - 7021ad95-5607-4b01-9477-5c53332c1108
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve
      been craving some good Italian food lately, can you suggest a nice Italian restaurant
      nearby?</user>\n<ai>Certainly, there''s an Italian restaurant called La Cucina,
      4 kilometers away with excellent reviews. Shall I navigate there?</ai>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>La Cucina sounds perfect, please turn
      on the navigation.</user>\n<ai>Navigation to La Cucina is now active. You will
      arrive in approximately 12 minutes. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbRjio3DP2VqzyzvcCyu/fy3C+oqrZq9yoyiWdwycRTxwOLEP9eJTsD
        DAur+8bEx/axc2xyMOTN0jzP5o/PT/P5w/QRZg+L7y/fHr4tcPoA+OxnK+cWU3g0E8Orf9GpWRq3
        Bv3FcdMGVOJoJsYJgqI3y9nLfPr0/PJ9OpuYhj0GszTgHHdR09eKBHcsm/S1mN4Pqi66HOVhO8+B
        1kwOk1n+czAUPb6Z5XRiGkwJajTLgxEOmGOmREkhqpkYZQ7WQQjXbqW4bLDdNNT101///bH4re3m
        yL/++Xfz8uR/z977NgccaJjJ+efyYCI02YpvKuDUdgnFtoIVCkaHyW5nZmJA6q7BqMkszeHVtChK
        EeNH+KtZfjm8GuFOKdb9VwuyufgqaEFv+3ObCWZj7EKYfBkQOZ6tWKzjLV7Ax0hyaBPGREpb0n1x
        aIHuoEdxh/Q70rVN6Doh3V/iI6IvyDVETw7aFr0F5zAlWgW8lcKXO3NodxRCqY3tDsLGVsLNuWC2
        HpNShHwLg/8xBxh3TjmgwEBYBaqK3GU+2DL5AuDKphYdVeSsMPjS1XTVLJahR2nNopjUKjVoLw+G
        Eka0+tQWoreOo6dMfLjtwUixYmlKTTZxJw6vpTFQ6bsTMaXcDIUN2sCxRrG5AZgPS2nXNR8LG8dN
        xaI2oeZmDTxcoAYUM0EVDv1pBTF3JgvoNpmzIBWbFgW0k5EeE4LaNULOdS8IkFSBd9aTYJmtW8BC
        PlC9LpFyL6FZEfbNPrwaior5luwJ5Diw3Ev6Ef4eT3/eYSX5V7mIW4QL45YpasoKK/6YdBhzTAqd
        QNRTr7ecxwit6yhRxPFsoILsL/KMrJioTHkZaYFYj8wVJLUVs7/jfrlV9nlV2QZ1zf425kx8tHxK
        tXll26Sn0Ty8mhXFmi2+lb2X8BMle46gd4hdBz5lzAOc72Kc9Ow42CNq/nMZdW3sajlvQrTQYCSl
        uzrft2VhDN67NQXMo7bFcHNn3nICtbhF2XvY23eFjIqqhR3KPu+Vtr21/VPXojQgG1Tr1kDxk1Ud
        2EGw7+BkK5AmlZ11DjFWLGadKlAsSsiD1qAn6Dk0XXrfKL1ii2AT94vkrLjeUmMUvG2CrActXFYQ
        /Z12l3w2qSA05bJQtnS1YAU8cWHasndwGrEaIwoEG3GX+qV6k0nvldu9S58iPpZzMReFxbVGj8ej
        OR5/HCemokhpbQUh5dfD5cPk+GNiuuEN0wo3rVrlDcZklouX+WN+xSiE09nTfLqYmPMb6wz+Njse
        /wcAAP//AwBLK55ruAkAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be67fdc24d6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.863'
      x-request-id:
      - 0f48a03c-115c-4c11-9baf-8b386aea556e
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I
      could really go for some Italian food right now.</user>\n<ai>I located several
      Italian restaurants nearby. The closest one is La Bella Vita, 4 kilometers away.
      Would you like to navigate there?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes,
      that sounds perfect. Please set it as our destination.</user>\n<ai>Destination
      set to La Bella Vita. The route is clear with minimal traffic. We should arrive
      in approximately 10 minutes. Would you like to start the navigation?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start the navigation and can you also
      adjust the temperature to something warmer?</user>\n<ai>Navigation started,
      and the cabin temperature is now set to a warmer setting. Is there anything
      else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbBkiI3DP2VLZ8hy7AzzE7fcsohVTltTpktl7DVoMVtdWQ1DEXx7yl7
        uoFmYCo32nqSnuQn4YMhbyrzfT53L3OA6TePz9PHx5fFdImzevq0WNTLBdSzmavNxPDyFzo1lXFr
        0N8cN21AJY5mYpwgKHpTPTzPZ0+L55fZfGIa9hhMZcA57qKmrzUJ7lg26WsxvR/UXXQ5ynQ7z4HW
        TA6Tqf45GIoe30w1m5gGU4IVmupghAPmmClRUohqJkaZg3UQwrVbKS4b7PLp4e2v/Z/1v7+78LZL
        +z9+/Pj7V9dC9t63OeBAw0zOP6uDidBkK76pgFPbJRTbCtYoGB0mu30wEwOy6hqMmkxlDq+mRVGK
        GD/CX0315fBqhDuluOq/WpDNxVdBC3rbn9tMMBtjF8Lky4DI8WzNYh1v8QI+RpJDmzAmUtqS7otD
        C3QHPYo7pN+Rrm1C1wnp/hIfEX1BriF6ctC26C04hynRMuCtFL7cmUO7oxBKbWx3EDa2Fm7OBbP1
        mJQi5FsY/I85wLhzygEFBsIqUNfkLvPBlskXANc2teioJmeFwZeupqtmsQw9SmsWxaRWqUF7eTCU
        MKLVp7YQvXUcPWXiw20PRoo1S1Nqsok7cXgtjYFK352IKeVmKGzQBo4rFJsbgPmwlHZd87GwcdzU
        LGoTam7WwMMFakAxE1Th0J/WEHNnsoBukzkLUrFpUUA7GekxIahdI+Rc94IASR14Zz0Jltm6BSzk
        A63WJVLuJTRLwr7Zh1dDUTHfkj2BHAeWe0k/wt/j6f93WEr+VS7iFuHCuGWKmrLCij8mHcYck0In
        EPXU6y3nMULrOkoUcTwbqCD7izwjKyYqU15GWiCuRuYaktqa2d9xv9wq+7yqbIO6Zn8bcyY+Wj6l
        2ryybdLTaB5ezZLiii2+lb2X8BMle46gd4hdBz5lzAOc72Kc9Ow42CNq/nMZdW3sajlvQrTQYCSl
        uzrft2VhDN67NQXMo7bFcHNn3nICtbhF2XvY23eFjIpaCTuUfd4rbXtr+6euRWlANqjWrYHiJ6s6
        sINg38HJ1iBNKjvrHGKsWMw6VaBYlJAHrUFP0HNouvS+UXrFFsEm7hfJWXG9ZYVR8LYJsh60cFlC
        9HfaXfLZpILQlMtC2dLVghXwxIVpy97BacRWGFEg2Ii71C/Vm0x6r9zuXfoU8bGci7koLK41ejwe
        zfH48zgxNUVKaysIKb8eLh8mx58T0w1vmFa4adUqbzAmUz1+XyzyK0YhnM6evj0+T8z5jXUBfjge
        /wMAAP//AwD38McHuAkAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be6785015a0-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.810'
      x-request-id:
      - 1f9533bc-1988-4a31-9e69-ab7cb3304c34
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can
      you help me find a place to eat, but make sure it''s an Italian restaurant,
      I just love pasta dishes.</user>\n<ai>Certainly! There is a well-rated Italian
      restaurant called ''La Dolce Vita'' about 10 minutes from our current location
      in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbbjiI3EP2VkZ+Z3WEyV96iSJGiSFGiPESrZWQVdjXU4na1ytUwCPHv
        kU030AyM9g1ct1PHdaq9NeTNxDw++zvwvzzdOnia3T48vj7fQvUwu8Xx44OrXpx79o9mZHj2A52a
        iXEL0C+O6yagEkczMk4QFL2ZjJ/v7x6fnl/vxiNTs8dgJgac4zZq+lqR4Jplmb4W0/6gaqPLWW5X
        9znRgslhMpPvW0PR47uZ3I1MjSnBHM1ka4QD5pwpUVKIakZGmYN1EMJ5WGkuG+w/sPrv7/u//vwm
        MuZfx/7f3/Xlt2/gcvSmyQl7GGZ0/DnZmgh1tuK7Cji1bUKxjWCFgtFhsquxGRmQeVtj1GQmZjs1
        DYpSxPjRfWomN9upEW6V4rz714AsT/4Vb0Fvu3ObAWZjbEMY3fQeOZ+tWKzjFZ64Dz3JoU0YEymt
        SDcloAG64j3I25dfky5sQtcK6ebUPyL64rmA6MlB06C34BymRLOAl0r4cmcO7ZpCKL2xXUNY2kq4
        PjbM1mNSipBvoY/f5QRD5pQDCvSAVaCqyJ3WgxWTLw5c2dSgo4qcFQZfWE1nZLH0HKUFi2JSq1Sj
        PT3oWxjA6kpbiN46jp4y8P62eyPFiqUuPdnErTg8H40eSsdOxJQyGQpLtIHjHMVmAjAfltbOe94V
        NI7rikVtQs1k9ThcoBoUM0AVDt1pBTEzkwfoMpjjQCrWDQpoK4N5TAhqFwi51rUkQFIFXltPgkVb
        lxwL+EDzRcmUuYR6RtiRvZ0aior5luzByXFguVb0o/s+n/58wEzyr3IRlwAXxA1T1JQnrMRj0l7m
        mBRagagHrlecZYTWtZQolr6+b0+ll0+m5g+FQBCnZs9v1KLKE4EKrhAC+s795keb9CbwCm8aSAo3
        ntIC05ep2b3tdYcKsrHDOgdVYqKyQcq6EIjzgbmCpLZi9lfCTzfWJq9BW6Mu2F/2OZIyWGyFyfw5
        sEkPst9OzYzinC2+l52a8BOVeI6gV4CdJz5UzMsh3/Ow6DGwt0fU/OEasDYMtZy3LFqoMZLSVQ1t
        mrKM+uj1ggJmGa8wXNzHl4JALa5QNh42dj99g6bmwg5lk3dW01z6sqS2QalBlqjWLYDiJ5+BwA6C
        3TsnW4HUqezDY4qhGvKwigLFMglZxDV6gg5D3ab9turUUMSQuFtSx4nrLHOMgpdNkOdBC5YZRH+F
        7lLPJhWEulwWyorOlreAJy5IG/YODvKdY0SBYCOuU7ewLyLpojLd6/Spx8d2TnRRUJzP6G63M7vd
        225kKoqUFlYQUn6ZnD56dm8j0/bvo0a4btQqLzEmM3l4enrJLySFcDh7HD+9jszx/XY03I13u/8B
        AAD//wMAe9UW6hQKAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be67c60fa82-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.996'
      x-request-id:
      - dc24a2c5-1c3e-48b8-9296-cdc3ac1a6cbc
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find
      me a place to buy fresh apples</user>\n<ai>There are several grocery stores
      nearby. The closest one is ''Meyve Emporium'' which specializes in fresh fruits.</ai>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>No supermarkets, I prefer local market
      stands</user>\n<ai>Understood. The nearest local market stand with fresh apples
      is ''Akhisar Farmers'' Market'', 10 minutes away from our current location.</ai>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set navigation to that market</user>\n<ai>Navigation
      to ''Akhisar Farmers'' Market'' is now set. Would you like to start the route
      guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes, and can you
      check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar Farmers''
      Market'' is clear with no traffic delays. Starting route guidance now.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbBbiM3DP2Vhc5ON8k6TnZuxWK7bYH22C7QLARa4tisNeKA4tgxDP97
        IWXG9jh20JtHfCQfqUdaO0PeVOYJ0d27ur6pfT27md4C3MDddHbz8HR7P/PzT1M3m5mJ4fm/6NRU
        xi1Bf3LctAGVOJqJcYKg6E1193h/+zB7/Hx7NzENewymMuAcd1HTx5oENyyr9LGYXg/qLroc5WZ9
        nwMtmRwmU/2zMxQ9vpjqdmIaTAkWaKqdEQ6YY6ZESSGqmRhlDtZBCOdupbhssH9941+eHr5vf/7y
        Vb5/+y1sfp12f//+5x/Ze9vmgAMNMzn+rHYmQpOt+KICTm2XUGwrWKNgdJjs+s5MDMiiazBqMpXZ
        PZsWRSlifAt/NtWH3bMR7pTiov9qQVYnXwUt6G1/bjPBbIxdCJMPAyLHszWLdbzGE/gYSQ5twphI
        aU26LQ4t0BX0KO6QfkO6tAldJ6TbU3xE9AW5hOjJQduit+AcpkTzgJdS+HJnDu2GQii1sd1AWNla
        uDkWzNZjUoqQb2Hw3+cA484pBxQYCKtAXZM7zQdrJl8AXNvUoqOanBUGX7qazprFMvQoLVkUk1ql
        Bu3pwVDCiFaf2kL01nH0lIkPtz0YKdYsTanJJu7E4bk0Bip9dyKmlJuhsEIbOC5QbG4A5sNS2nnN
        +8LGcVOzqE2ouVkDDxeoAcVMUIVDf1pDzJ3JArpM5ihIxaZFAe1kpMeEoHaJkHNdCwIkdeCN9SRY
        ZusSsJAPtFiWSLmX0MwJ+2bvng1FxXxL9gByHFiuJX0Lf42n/99hLvlXuYhLhAvjlilqygor/ph0
        GHNMCp1A1EOv15zHCK3rKFHE8WyggmxP8oysmKhMeRlpgbgYmWtIamtmf8X9dKts86qyDeqS/WXM
        kfho+ZRq88q2SQ+juXs2c4oLtvhS9l7Cd5TsOYJeIXYe+JAxD3C+i3HSo+Ngj6j5z2XUtbGr5bwJ
        0UKDkZSu6nzbloUxeG+WFDCP2hrDxZ15yQnU4hpl62FrXxUyKmoh7FC2ea+07aXtn7oWpQFZoVq3
        BIrvrOrADoJ9BSdbgzSp7KxjiLFiMetUgWJRQh60Bj1Bz6Hp0utG6RVbBJu4XyRHxfWWBUbByybI
        etDCZQ7RX2l3yWeTCkJTLgtlTWcLVsATF6YteweHEVtgRIFgI25Sv1QvMum9crs36V3E23JO5qKw
        ONfofr83+/2P/cTUFCktrSCk/Ho4fZjsf0xMN7xhWuGmVau8wphMNX2aPuZXjEI4nD18un+amOMb
        6wR8t9//BwAA//8DAMkVSsu4CQAA
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be66c2b9670-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.899'
      x-request-id:
      - 804102d1-5055-4d2a-99b2-0a17271f7821
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start
      navigation to Applebees</user>\n<ai>Navigating to Applebees on Maple Street,
      Sherwood. It will take approximately 15 minutes to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any
      traffic on the route</user>\n<ai>The route to Applebees is clear with no reported
      traffic delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something
      upbeat</user>\n<ai>Sure, starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbBkiI3DP2VLZ8hyzDMzgz3PeSSTQ5JKpXZcglbDVrcVpeshiEU/56y
        pxtoBqb2RltP0pP8JLw35M3cPPjJxFfTxdg9Tavx7H4C48Xs0Y2fcHq/mOEXfH66NyPDix/o1MyN
        W4H+4rhuAipxNCPjBEHRm/nd43Ty8OXxeTIdmZo9BjM34By3UdPnigS3LOv0uZjeDqo2uhxlvJnm
        QCsmh8nM/90bih5fzXwyMjWmBEs0870RDphjpkRJIaoZGWUO1kEIl26luGyw3379Hduvs/D3X//M
        ln/+99u3H/Hu6x+VZO9dkwP2NMzo9HO+NxHqbMVXFXBq24RiG8EKBaPDZDd3ZmRAlm2NUZOZm/2L
        aVCUIsb38Bcz/7R/McKtUlx2Xw3I+uyroAW97c5tJpiNsQ1h9KlH5Hi2YrGON3gGHyLJoU0YEylt
        SHfFoQG6gR7E7dNvSVc2oWuFdHeOj4i+IFcQPTloGvQWnMOUaBHwWgpf7syh3VIIpTa2WwhrWwnX
        p4LZekxKEfIt9P6HHGDYOeWAAj1hFagqcuf5YMPkC4Armxp0VJGzwuBLV9NFs1j6HqUVi2JSq1Sj
        PT/oSxjQ6lJbiN46jp4y8f62eyPFiqUuNdnErTi8lEZPpetOxJRyMxTWaAPHJYrNDcB8WEq7rPlQ
        2DiuKxa1CTU3q+fhAtWgmAmqcOhOK4i5M1lA18mcBKlYNyigrQz0mBDUrhByrltBgKQKvLWeBMts
        XQMW8oGWqxIp9xLqBWHX7P2LoaiYb8keQY4Dy62k7+Fv8fTnHRaSf5WLuEa4MG6YoqassOKPSfsx
        x6TQCkQ99nrDeYzQupYSRRzOBirI7izPwIqJypSXkRaIy4G5gqS2YvY33M+3yi6vKlujrthfx5yI
        D5ZPqTavbJv0OJr7F7OguGSLr2XvJfxAyZ4j6A1il4GPGfMA57sYJj059vaImv9cBl0bulrOmxAt
        1BhJ6abOd01ZGL33dkUB86htMFzdmdecQC1uUHYedvZNIYOilsIOZZf3StNc2/6pbVBqkDWqdSug
        +MGqDuwg2DdwshVIncrOOoUYKhazThUoFiXkQavRE3Qc6ja9bZROsUWwibtFclJcZ1liFLxugqwH
        LVwWEP2Ndpd8Nqkg1OWyUDZ0sWAFPHFh2rB3cByxJUYUCDbiNnVL9SqTziu3e5s+RLwv52wuCotL
        jR4OB3M4fD+MTEWR0soKQsqvh/OHyeH7yLT9G6YRrhu1ymuMycxnj8/3+RWjEI5nD9PH2cic3lgn
        8NPd4fA/AAAA//8DAIllRzq4CQAA
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be67a061696-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.829'
      x-request-id:
      - 79d510eb-35cf-4663-9f42-c2f2c54e77aa
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust
      interior lighting.</user>\n<ai>Sure, I can change the brightness or color. Which
      would you like to adjust?</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness,
      set it low.</user>\n<ai>Setting the interior lighting to low brightness now.</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep this brightness level for my future
      rides.</user>\n<ai>I''ll ensure the lighting is low for the duration of this
      ride, but I''m unable to store settings for future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s
      fine, just make sure it stays this way now.</user>\n<ai>Understood. The low
      brightness setting will be maintained. If you need any more adjustments, just
      let me know.</ai>\n</conversation>\n</conversations>"}], "n": 1, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xWy44qNxD9FeQ1cy/DvNlFirKZKNssLiOrsKuhgtvVKlfDIMS/RzY00AyM7q7b
        9Tr1OvbWkDcT499eXqvx7PEOnRvdPb6Cu3ubob97c9UIxrPH+4fHVzM0PPsPnZqJcQvQH47rJqAS
        RzM0ThAUvZncv4xHT88vb6P7oanZYzATA85xGzX9rEhwzbJMP4tof1C10WUvd6txdrRgcpjM5NfW
        UPT4aSajoakxJZijmWyNcMDsMyVKClHN0ChzsA5CuDQryWWBrR/m9Gf6O/zxPtb3Oc7+CQ9/Pf37
        vMnWmyY77GCY4elzsjUR6izFTxVwatuEYhvBCgWjw2RX92ZoQOZtjVGTmZjt1DQoShHjV/WpmQy2
        UyPcKsX54a8BWZ79FW1Bbw/nNgPMwtiGMBx0GtmfrVis4xWeqfc1yaFNGBMprUg3xaABuqHd89uF
        X5MubELXCunmXD8i+qK5gOjJQdOgt+AcpkSzgNdC+NIzh3ZNIZTc2K4hLG0lXJ8SZusxKUXIXejs
        d9lBv3LKAQU6wCpQVeTO48GKyRcFrmxq0FFFzgqDL1VNF8Vi6WqUFiyKSa1Sjfb8oEuhB+sQ2kL0
        1nH0lIF33e6EFCuWuuRkE7fi8HI0OiiH6kRMKRdDYYk2cJyj2FwAzIcltcucdwWN47piUZtQc7E6
        HC5QDYoZoAqHw2kFMVcmD9B1MKeBVKwbFNBWevOYENQuEHKsW06ApAq8tp4Ey25dUyzgA80XxVOu
        JdQzwkOxt1NDUTF3yR6VHAeWW0G/qu/96e8bzCR/lUZc2Pzanm9MPpmawOup2Zckalmks50SXCEE
        9HvVd8RmoAtKg1OIQcAVhkHFMqg3g6rNhR4IeUw/pmb3sW9uwxQ15XkuaDFpRyqYFFqBqMfOrjgv
        LVrXUqKI/U1EBdnYfgpHKSYqnFIIRCDOe+IKktqK2d8wP+ewTSZGW6Mu2F/XOQHvUV3JNl8QNumR
        CLZTM6M4Z4ufhWUTfrM3niPoDWCXjo8RM13kzveDngw7eUTNV1mvan1Ty5l30UKNkZRubtWmKfTU
        Wa8XFDAv9grDVYa+ZgRqcYWy8bCx+wnpJTUXdiibzGJNc+2uSW2DUoMsUa1bAMVvLobADoLdKydb
        gdSpMOTJRZ+O8i6IAsUyCXmta/QEBwx1m/b8dZjYMrCJD7R1mriDZI5R8LoI8jxowTKD6G+Uu8Sz
        SQWhLs1CWdEFnQt44oK0Ye/guGJzjCgQbMR1OlD4VSQHq1zudfpW42s6Z3tRUFzO6G63M7vdx25o
        KoqUFlYQUn6rnD+Ddh9D03Yvpka4btQqLzEmM3l8vX/LbyaFcDx7ehg/Dc3pRXcSjJ53u/8BAAD/
        /wMAcOmhdyYKAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be6791a97b7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '25.967'
      x-request-id:
      - 547f544d-2d0c-456e-94f5-5a5c8ae4135b
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n\nGenerate a JSONPatch to update the existing schema
      instances.\n\n<schema id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'',
      ''grade'': ''8th'', ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}], "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}}}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: '{"error":{"object":"error","type":"invalid_request_error","message":"Invalid
        JSON: [{\"name\": \"PatchFunctionParameters\", \"arguments\": {\"schema_id\":
        \"AcademicRubric\", \"reasoning\": \"The user''s grocery list is not relevant
        to the conversation. The user is asking about how to exit vim. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the"}}'
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be67e89d00d-SJC
      Connection:
      - keep-alive
      Content-Length:
      - '10283'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:07 GMT
      Server:
      - cloudflare
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      x-request-id:
      - 37088cae-72e2-4eda-9d87-ca55277deb46
    status:
      code: 400
      message: Bad Request
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_22S2IrjJiK0Vk6R3SEDPLKJr", "function": {"name": "UserProfile", "arguments":
      "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\": [\"Remember
      that Kevin is being assessed for his French proficiency.\"], \"other_useful_info\":
      []}"}}]}, {"content": "Error:\n\n```\n1 validation error for UserProfile\nrelationships\n  Field
      required [type=missing, input_value={''age'': 0, ''name'': ''Kevin...''other_useful_info'':
      []}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_22S2IrjJiK0Vk6R3SEDPLKJr].",
      "role": "tool", "tool_call_id": "call_22S2IrjJiK0Vk6R3SEDPLKJr"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT224aMRB95ytG85IXoNxT9q0X0hBalTZpkZJFyOwOuwav7dreKCni3yt7CTfV
        D9Zozsw5x6PxtgaAPMUIMMmZSwotGsP1aMloPJs9frsVy83qZvS4/jL5mK87/U+3WPcdarmmxL11
        NRNVaEGOK1nBiSHmyLO2rzut/uB62G0FoFApCd+WadfoNvsNV5qlarTanf6+M1c8IYsRPNUAALbh
        9h5lSi8YQeAJmYKsZRlhdCgCQKOEzyCzllvHpMP6EUyUdCS9bVkKcQI4pcQiYUIchauzPYmPg2JC
        LMSs9fKjfff9w+SvHI4TI7OH6fNo1DvRq6hfdTC0KmVyGNAJfshHF2IAKFkReqfMJfnNvnDKDCvI
        kbEXVADITFYWJJ1/Bm5jtElOBVvwNMYornx3OvedsVnf8Unr92bws3s/+jz9OrkzMdZjNMSsklxm
        of4hJ7gyJJiXtTnX9gpWnEQK3IKhPyU3lAKX4HKCX5bM1KgVFwSVbBNmBJIoBaeApSlw5yNfXFoy
        oPfVKXOsGeS1fyfZGKOnbYxKBxcsTd/APCTenVkK2DMTJQVwu4txN9/h2WR2tf/F8320O2yUUJk2
        amkvFgRXXHKbL6rp+NFap3Ql4enmYXPLs2VEbVSh3cKpDUlPOOy9r/jw+FmO6GCwB51yTBzz7Va7
        V9tbRPtqHRWLFZcZGW34YZNru9o/AAAA//8DAFz3BXzIAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e3c2d1567-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:11 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '864'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14999204'
      x-ratelimit-reset-requests:
      - 11ms
      x-ratelimit-reset-tokens:
      - 3ms
      x-request-id:
      - req_ca838b33f661546ac57c606b2e974c9b
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_k1K7R5udZtCoEoTMvtN7wSfB", "function": {"name": "UserProfile",
      "arguments": "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\":
      [\"Remember that the user''s name is Kevin.\"], \"other_useful_info\": []}"}}]},
      {"content": "Error:\n\n```\n1 validation error for UserProfile\nrelationships\n  Field
      required [type=missing, input_value={''age'': 0, ''name'': ''Kevin...''other_useful_info'':
      []}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_k1K7R5udZtCoEoTMvtN7wSfB].",
      "role": "tool", "tool_call_id": "call_k1K7R5udZtCoEoTMvtN7wSfB"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW8aMRC98ytGc8kl0IUUCHsjaZqqtAilUKnJRsjYA+vEazu2lzRF/PdqvQRI
        lD1Y1rx5Hx7NbhoAKAWmgDxngRdWNQcPVwt2278e9vSXS9Ee829qxKf/rts//phHPK0YZvFAPLyy
        WtwUVlGQRtcwd8QCVartfifp9vqDsyQChRGkKtrKhuZZq9sMpVuYZtLudHfM3EhOHlO4awAAbOJZ
        ZdSC/mIKUSdWCvKerQjTfRMAOqOqCjLvpQ9MBzw9gNzoQLqKrUuljoBgjJpzptTBuP42R/fDoJhS
        885MJN9df/x0sT6fjX5zU6xnD8Pk5sivln6xMdCy1Hw/oCN8X0/fmQGgZkXkTljg+ddd44Q5VlAg
        599JASBzq7IgHapn4CZDz3Mq2FyKDNOszv3YHvVvuqW4DZfmykx/rsO4//xreZHhaYaOmDda6lXs
        n+YEJ44Uq2x9Lq0/gaUkJUB6cPRUSkcCpIaQE8w8uYkzS6kIatsWDIWI2MciwUSw9OTA7piCBdaK
        UWz1ZvIZpnebDI2NiZgQr2AeC5/eKEdszVRJGaab7fZ+i28mtG18dL/f3bb7zVJmZZ1Z+HeLgkup
        pc/n9ZSqEftgbG1Ryd3HDS7fLCVaZwob5sE8kq4EB2efaz08/DQHtHe+A4MJTB3q7STpNHYR0b/4
        QMV8KfWKnHVyv9GNbeM/AAAA//8DAKLFAEfQAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e29cbf94f-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:11 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '972'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999513'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_95201826f2b62d2e6ca4fba425527ddd
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_EX4VVRuHD3hL3NjXoaSKasIy",
      "function": {"name": "UserMemory", "arguments": "{\"age\": 40, \"name\": \"Joe\",
      \"interests\": [\"drones\"], \"ai_instructions\": []}"}}]}, {"content": "Error:\n\n```\n1
      validation error for UserMemory\nrelationships\n  Field required [type=missing,
      input_value={''age'': 40, ''name'': ''Joe''..., ''ai_instructions'': []}, input_type=dict]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}}, ''required'': [''age'', ''name'', ''interests'', ''relationships'',
      ''ai_instructions''], ''title'': ''UserMemory'', ''type'': ''object''}\n```\nPlease
      respond with a JSONPatch to correct the error for schema_id=[call_EX4VVRuHD3hL3NjXoaSKasIy].",
      "role": "tool", "tool_call_id": "call_EX4VVRuHD3hL3NjXoaSKasIy"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTU8bMRC951eMfOGShJAQUvZWRFAR/UDQBigbRc56dtfUaxt7tiWK8t8re0O+
        2j2sRvNm3nv2eJYtACYFS4BlJaessqpz/jKe84+o/c/7Qt6UT73rycOZfrq4Gl+eONYOHWb+ghm9
        d3UzU1mFJI1u4MwhJwysJ6N+b3g2Oh/0IlAZgSq0FZY6g+6wQ7Wbm07vpD9cd5ZGZuhZAs8tAIBl
        /AePWuAbSyDyxEyF3vMCWbIpAmDOqJBh3HvpiWti7S2YGU2og21dK7UDkDFqlnGltsLNt9yJtxfF
        lZo9fPvTv1dC93v0dvE6yXNuxvKUX+7oNdQLGw3ltc42F7SDb/LJgRgA07yKvbecsvJqXXjLHa+Q
        0PkDKgDGXVFXqCkcgy1T5rMSKz6TImVJ2vgeP55OJnf1p8tB+Xnw9eXR8Psb7q8XKWunzCH3Rktd
        xPrvJcKRQ8WDrC+l9UeQS1QCpAeHr7V0KEBqoBLhh0f3BSvjFtCoduEBQSMKIANcCJAUolBbe3RH
        HqTOjasiezfK23BO9ClLnpcpMza64EK8g2VMHFtnLDqS6I/33MWy31zVmLJkmTKBPnPSBnxznrV0
        7iRq4duQ80qqRRsskm8D1wIMlehgj7hxR5IURqK7f1TDlCPULEbKVqvpiu2NZ9X6XzxdR6vNs1am
        sM7M/cErZbnU0pezZkRhvp6MbSQC3TSuT723Ecw6U1makfmFOhB+GI4aPrbd2C16vt4tRoa42smf
        jlprh8wvPGE1y6Uu0FknN9vUWrX+AgAA//8DAFmhp/VMBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e2a3415ef-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:12 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1222'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999572'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_d0ba21b739590bcc8082f339d7bd4b69
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_R07SsMig2Lll9vN1mRE4K8YO", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_R07SsMig2Lll9vN1mRE4K8YO].", "role": "tool", "tool_call_id":
      "call_R07SsMig2Lll9vN1mRE4K8YO"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTU/cMBC976+wfOmF3W4Cy0KOrQCh0oXS9kAJirz2JDF1PJY94Wu1/72Ksx8B
        NQdrNG/em+fJeDVijGvFM8ZlLUg2zoxPH8+WYnGMV+n50d3Xt8W1n0ksf7RnF5e/H/lBx8DlI0ja
        siYSG2eANNoelh4EQaeazNPp7Hh+ejiNQIMKTEerHI0PJ7MxtX6J42mSzjbMGrWEwDN2P2KMsVU8
        O49WwQvPWNSJmQZCEBXwbFfEGPdougwXIehAwhI/2IMSLYHtbNvWmAFAiKaQwph94/5bDeL9oIQx
        BV7ahbq4VWl659HcnDynb3+uE/dl0K+XfnXRUNlauRvQAN/lsw/NGONWNJF7I0jW55vCG+FFAwQ+
        fJBijAtftQ1Y6q7BVzkPsoZGFFrlPMt737fT+c/wXVfplTGnT4ukuT07+nZyd53zg5x7EAGttlWs
        /1UDawP4T4E5DyV4sBJYiZ5pS+A1emZ0VZO2FZNo0DNhFRPNUsdCC6ACI2RLYEIpUF1MNTB4IS8k
        gYrqA+0wiS5cd10IOc/uVzlHF80IpbZgHROfHXjSFiwVnUwxlJHYlOipCECduzDZ+iyEVcXWYdR7
        EqaFnGfJ+mHN381zPfpf/LCJ1rs9NFg5j8vwYa14qa0OddHPtPshgdD1LTq5h7jv7bsV5s5j46gg
        /Au2EzxKk6QX5Ps3tofnxxuQkIQZ0k7mo41HHl4DQVOU2lbgnde7BzBaj/4BAAD//wMAWhgQlP8D
        AAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9ea9bf1664-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:12 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1138'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14982376'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 70ms
      x-request-id:
      - req_bf2073c086b9db292fbed863ebe21389
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_mkj07ZDPj0uAeKwqKnnQHvDe", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_mkj07ZDPj0uAeKwqKnnQHvDe].", "role": "tool", "tool_call_id":
      "call_mkj07ZDPj0uAeKwqKnnQHvDe"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2yTS0/jMBDH7/0UI1+40FIe5ZFbF2iRYFesFnGAVJHjTBK3jm3sCY+t+t1XTkIb
        0OYQOfP4zX/GmfUAgMmMRcBEyUlUVg0vltcpn48vVzN98XS0qk9nckbz08elvPv5wvZDhkmXKOgz
        ayRMZRWSNLp1C4ecMFAPz47Gk9Ozi+Nx46hMhiqkFZaGx6PJkGqXmuH48GjSZZZGCvQsgucBAMC6
        eQeNOsN3FkHDaSwVes8LZNE2CIA5o4KFce+lJ66J7e+cwmhCHWTrWqmeg4xRieBK7Qq3z7p33g2K
        K5X8+fvjcnp58/hY+of3Of1aXU+XeDs/79Vr0R+2EZTXWmwH1PNv7dG3YgBM86rJveckylkXeM8d
        r5DQ+W8oAMZdUVeoKbTB1jHzosSKJzKLWRS3uqvVcnz2dHW/HNdTvH17udX6983rFcZsP2YOuTda
        6qKJfygRao8OrMMcHWqBHvCdHBeEGYRpcqkBnTPOQ1YjkAGphXEOBYHUtiYI/fsRBFYfkxsHe3ey
        KEnqArjOYFqlMvj2QCNmAZUidKz222GuApg6XXu+h2yIyrxB6gJVo/fgkQJ+1PRmwxDRxyx6XsfM
        2KZFh1ZxgZ8BZWM8sOhIatSUhDJJT/eBMFVuHCUd2h+oroeE6yzhXQ8N75WrGmMWrWMmNaGTxiXb
        6J3KPj6Ii5kybzFbbDaLDftywZvB/86L7rTZLoYyhXUm9d/+c5ZLLX2ZtJcc/hBPxrYlAm7RLGD9
        ZaeYdaaylJBZoQ7Ak+PzSQtku6XfuQ/H3X4yMsRVL+/kfDLoRDL/4QmrJJe6QGed3K7kYDP4BwAA
        //8DAH63IwKRBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e39ddcfb0-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:12 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1288'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '14982482'
      x-ratelimit-reset-requests:
      - 20ms
      x-ratelimit-reset-tokens:
      - 70ms
      x-request-id:
      - req_598fa052129a56fbb1a89dc7c8d64639
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_zMI5rS3Ssu0rOYnx9D5u6NUk", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_zMI5rS3Ssu0rOYnx9D5u6NUk].", "role": "tool", "tool_call_id":
      "call_zMI5rS3Ssu0rOYnx9D5u6NUk"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xTTVPbMBC951fs6OILIV9NwL7RgZaWlDJAh7aY8SjyxlYiSx5pTQmZ/PeObJOE
        TA/1waPZt+/t25V23QFgMmURMJFzEkWpuuHiYsYHt9PFxeJ2JSb29OulCafn978ffn6W7MgzzGyB
        gt5Yx8IUpUKSRjewsMgJvergZNgfT07CUb8GCpOi8rSspO7oeNylys5Mtz8YjltmbqRAxyJ47AAA
        rOu/96hTfGER1Dp1pEDneIYs2iYBMGuUjzDunHTENbGjHSiMJtTetq6U2gPIGJUIrtSucPOt9867
        QXGlEvHxcsSX0yt5NVy+5vhwU53ePeer0716jfSqrA3NKy22A9rDt/HooBgA07youTecRP6pTbzh
        lhdIaN2BFADjNqsK1OTbYOuYOZFjwROZxiyKG9+v376M7d3ozlV9+/2XfgnPx9Xk+scyZkcxs8id
        0VJndf59jlA5tFBanKNFLRACqQmtNDZRMstJ6iwRRhmb7HJcAC43lUphhuCQgAwEK1TK/Amg0ila
        CKYt+UynZ8VMeloAUgPlCIEwxdxYShySz3EBCE6YGbs6rl2WfhzoYhY9rmNmytosT9M3MK8DvRIt
        SY2aEt/EvsHeYYXethmu04S3jnr/0Wtd85mrCuuiTZsx2zxt2LvL2XT+dX5qT5vto1YmK62ZuYM3
        yuZSS5cnzQX523VkyqaEl3uql6d6tw+stKYoKSGzRO0FPwzCsBFku4XdweFJC5IhrvZow3DSaT0y
        t3KERTKXOkNbWrndps6m8xcAAP//AwAqqa3dTAQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e4fd36895-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:12 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1972'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '14979930'
      x-ratelimit-reset-requests:
      - 22ms
      x-ratelimit-reset-tokens:
      - 80ms
      x-request-id:
      - req_91a6f6c82abb9b2e823fd17d0a45ec10
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_WzI4rcgiRk9LEU8sQFQCOfsD",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 1, \"traffic_and_conditions\": 1},
      \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\": 0},
      \"points_of_interest\": {\"restaurant\": 0, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 1}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_WzI4rcgiRk9LEU8sQFQCOfsD].", "role": "tool", "tool_call_id":
      "call_WzI4rcgiRk9LEU8sQFQCOfsD"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RUy27bOhDd+ysGXCupnVcb7do0vQ3Q4jp93AC3CoQxNZLYUCRDjpymhv+9IKXY
        jtFdtBComTlnDg/FWU0AhKpEDkK2yLJz+uD85+UCwz/v3r3l9xf3/uv84fO3e/60vL7QV0uRRYRd
        /CTJT6hDaTuniZU1Q1p6QqbIOnt9ND09e31+PE2JzlakI6xxfHB8eHrAvV/Yg+ns6HREtlZJCiKH
        HxMAgFV6R42mol8ih8STIh2FgA2JfFMEILzVMSIwBBUYDYtsm5TWMJko2/Ra7yTYWl1K1HrbeHhW
        O+utUah1KZc3hu/bj2f48b8wvZlehf/7h7lc7vQbqB9dElT3Rm4M2slv4vleMwBhsEvYObJsP4yF
        c/TYEZMPe1QAAn3Td2Q4bkOsChFkSx2WqipEXgy6b35fnXjZqC93558uv78J1x+uL/6tw/tCZIXw
        hMEaZZpU/60l6AN5cJ5q8mQkBTBEFbCFBUFg30vuPVWAUlpfKdPEFLcEFdXKUAWDAqith++B/HzL
        lIEyUvcDqCUIjqSqlXzWLeIIZQsSmRrrH0GrO4IvtmdlmgwubFdbz/CVOAZCBnOrDAewNVwZJk+B
        M0BTwWX8YlQm+pMin6lSeJj27aLBFAqR/1gVwrq0fU9Oo6SngjYFXznyrAwZLqM15Y7YV35QlQBL
        1D0VIl9FrL8bLJ1Gi5+K8llWCPZY10qWaKpSWlOpeMJRx2y9zl4gRQ6+lGH0ZV+T1KpDptiTvdWj
        Nq2aNpYnOdgtVCSLuZeJcelISluXajySfTkxhr1Hw6OSWnkqA2O0YwxVaGTU9jzaeCvJP5ahtc6N
        vr5MLe3+KMmJLv4o+5K7Pij5dKZYKZtKna0kBh48u12LZxd0Pfnb+nZcrTeDTdvGebsIe3NK1Mqo
        0JbDJY03PLB1Q4tId5sGaP9sJgrnbee4ZHtHJhKenMyOB0KxHdrb9NF0nK+CLaPewZ3NjiejSBEe
        A1NX1so05J1Xm5E6WU/+AAAA//8DAAg1SJBRBgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e2992d001-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:13 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2395'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '14991855'
      x-ratelimit-reset-requests:
      - 16ms
      x-ratelimit-reset-tokens:
      - 32ms
      x-request-id:
      - req_bb133aadfb9183996a74aed5b3e16ac7
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_qPedj2mhoooqXBI9LUJLjA1O",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 1, \"traffic_and_conditions\": 0},
      \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\": 0},
      \"points_of_interest\": {\"restaurant\": 1, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 0}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_qPedj2mhoooqXBI9LUJLjA1O].", "role": "tool", "tool_call_id":
      "call_qPedj2mhoooqXBI9LUJLjA1O"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RUXW/bOgx9z68g9JxmSdasTd52hxbo3YZlWztcYCkMRaZtpbKoUfSwNsh/H2S7
        SRrct/rBkPlxeHgoczsAUDZXC1Cm0mLq4M7mm6u1vhq/+3G7mVW3T2b+saa7ZvP1vX749kENUwat
        N2jkOWtkqA4OxZLv3IZRCybUycV0PHt3MX87bh015ehSWhnk7O1odiYNr+lsPJnO+syKrMGoFvBz
        AACwbd+Jo8/xj1pAi9NaaoxRl6gW+yAAxeSSRekYbRTtRQ0PTkNe0CfavnHuyCFELjPauUPh7tke
        nQ9Caeeyz9d3ZZyU1z+enr58/Hqjp5ezMl6eXx3V66AfQ0uoaLzZC3Tk39sXJ8UAlNd1m7vUYqrr
        PnCpWdcoyPEECkBpLpsavaQ21Haloqmw1pnNV2qx6nj/WmK+mdYVEf3675+b+ae7fz9t3k++rNRw
        pRh1JG992cbfVghNRIbAWCCjNxgB/whrI5hDUlNbD8hMHCFvEITAekPMaASsD41A6j+OIGEdw8SK
        GpfDGiEKN0Yaxhy0McS59WUCkgohx8J6zKHrAwpiuIvIywPQMBV0TZsUAxpbWAOxWRstWBJbjODs
        A8I3asT6cggfqC6IBb6jJEMcwpKslwhUwI0XZIwyBO1zuEpfqcOkaGv5jLnVo1apkEaCcaUWP7cr
        RaEVjDE4bfA5oGqNbwKyWI9esiRmdqTCiDtWbcJv7RpcqcU25fJDN4RxGspz0GIyXClhXRTWZNrn
        mSGf23QnEo/xbjd8BRXT6ZLFXpdTTsbZWgummsLkem7OllUKb+noem0T2OvJhHYkGRWZ7UdySifZ
        dMPaS69LYRmzKDrJ0ZPLtTeJ20tryWSQH7NYUQi9yq9ji8cXpVWiThfllHLdRGueZ6pzS21ooNzo
        1F9icb9TL37p3eD/zvf9abdfhY7KwLSOJ5tNFdbbWGXdb512QhQKXYkEd9+u3ObFFlWBqQ6SCT2g
        T4Dn08uLDlAd1vzBPR1Pe6+QaHeUd345H/QkVXyMgnVWWF8iB7b7JTzYDf4CAAD//wMAGbrZSIMG
        AAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e2f5667f1-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:13 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2818'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14992189'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 31ms
      x-request-id:
      - req_cf2c6e4c3ba6d71950b4f6d8f208dfcf
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_Y3EY1tUyaYbvz2AcSP1yqK8Q", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Y3EY1tUyaYbvz2AcSP1yqK8Q].", "role": "tool", "tool_call_id":
      "call_Y3EY1tUyaYbvz2AcSP1yqK8Q"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RVTW/bOBC9+1cMeFZSfyTpRjcjbRpgt4XrpAs4dSCMyZHEliJVcuTWMfzfF5QU
        2zH2Fh0EYr7emzfUaDsAEFqJFIQskWVVm7PrHx9XOFo3X77MqVxc8/Mdfnv+NXf/LuRoLZKY4VY/
        SPJL1rl0VW2ItbOdW3pCplh19H48vLx6fz0Zto7KKTIxraj5bHJ+ecaNX7mz4Wh82WeWTksKIoXv
        AwCAbfuOHK2iPyKFtk5rqSgELEik+yAA4Z2JFoEh6MBoWSQHp3SWyUbatjHmyMHOmUyiMQfg7tke
        nQ9CoTHZw/3tzdV8PVrc4WeJj8+/R3z5+PWxOsLrSm/qllDeWLkX6Mi/t6cnYADCYtXmzpBledsH
        ztBjRUw+nJQCEOiLpiLLsQ2xXYogS6ow02op0mXHezH5uBjxtw0uVuvn8VTez0abX3//9XUpkqXw
        hMFZbYs2/qEkaAJ5qD3l5MlKCkB/2KNkUhDVRG2hagzr2hCs0WiFkSOQ984H8GTiPQB2wCWBQkaI
        gsQyNbVVcueBUJZHICCRqXB+cw6RwjF6KF1jFKwIAvtGcuNJAUrpvNK22ONQri0p6No/QLzUhdDI
        EjDADP1PbYsE5q7h9vDgMc+1nFp146zSsZmQwI3RFTLdOMvemQT+0UUZ46dWTauVjtwSmFNgbDxa
        TuBWe7rnVosEPqCVdIfGJPDJO0l+c1+6um7xPjdBywTQKpij0m5q1cwpiYHP24nUcfQUliL9vl0K
        V7eD8VQblPQSULbGdzV51pYsZ3Fo2ZFs73zXXpuwRtPQUqTbmNu2vxTpMA7/JSgdJUvBnRAZWpXJ
        vRTRudslb6AiXZU7z1kgjmjhlJPspI6YUeuem+kFb+lgL3n0vY1M7bTlkLk805bJU+BTOn4/1J5J
        rj1loRttb1JoZeT22lp0o85CP+u3s6XIMX5y8RNvlahIaTylXMUr1U/RxzvVhtbdrepYPO3Eq9Wx
        G/zf+ak/7fYr17ii9m4VTjaoyLXVocy69RF3T2BXdxCx3FO72ptX21rU3lU1Z+x+ko0FLy6GF11B
        cfidHNzjybj3smM0R3lXk6tBT1KETWCqslzbgnzt9X7ZD3aD/wAAAP//AwCk3B2i6wYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e4d8096b4-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:14 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3223'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '14985048'
      x-ratelimit-reset-requests:
      - 18ms
      x-ratelimit-reset-tokens:
      - 59ms
      x-request-id:
      - req_10fbaa061df9cd212834eb123499d8bd
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_OWZW2OB0pHctUa6Z2vZabnDp", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_OWZW2OB0pHctUa6Z2vZabnDp].", "role": "tool", "tool_call_id":
      "call_OWZW2OB0pHctUa6Z2vZabnDp"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RVwU4jORC95ytKPjdMCAOIvrEwA7PaXSJINFomqFWxq7sNbttjVzPLRvn3lbub
        JER7I4fIqlev6vmVU1mNAIRWIgcha2TZeHNw/vRliTdXzUw94bx5/vKXebo//VbRbP7t739Flhhu
        +USS31iH0jXeEGtne1gGQqZU9ehsMj45PTs/HndA4xSZRKs8HxwfnhxwG5buYHw0ORmYtdOSosjh
        xwgAYNV9J41W0T8ih65OF2koRqxI5JskABGcSRGBMerIaFlkW1A6y2STbNsaswOwc6aQaMy2cf9Z
        7Zy3RqExhWx/Hj9fX8dftxMffj6V7dmM6ff5+U6/vvSr7wSVrZUbg3bwTTzfawYgLDYdd4os669D
        4hQDNsQU4l4pAIGhahuynK4hVgsRZU0NFlotRL7odd9+f/g+uf1t7G8kz/H0YfLygEt75RciW4hA
        GJ3VturyZzVBGymAD1RSICspgg/uRStSoC1wTaCtbxkskQJ2sCSIHFrJbSAFKKULStsqQSlZUakt
        Keh1QekCzCOF6bZ+BtpK03ak6EnqUst3/ROHUNYgkaly4RViK2vACFMMz9pWGdy5lrvDLGBZanlh
        1aWzSif3YgaXRjfIdOksB2cy+ENXdcq/sOqiWerUJoM7ioxtQMsZfNWB7hkTPYMrtJJu0JgMroOT
        FF7va+d91+/PNmqZAVoFd6i0u7Bq6pTEyIedvT7NkeJC5D9WC+F853Igb1DSW0LdBT95CqwtWS7S
        BIodBz6F/nod4QVNSwuRrxK3u/5C5OM0ybek/ChbCO6NKNCqQm6sSOB6nX1AinRN6QIXkTh1i/ua
        ZG916pm8HrSZwfBODg6WJ+xjYrzTlmPhykJbpkCR9+WEzVAHX0odqIj9aAdxCq1M2t5Hq37URRxm
        /XG1lDQyapt+r50TDSmN+5Kb9KTeZpreVJfq+1fVq3hci3d7YD36v/PjcFpv9qdxlQ9uGffWoSi1
        1bEu+l2QFklk5/sWqdxjt6fbd6tX+OAazwW7Z7Kp4OfJ+KwvKLb/DVt4MjkZUHaMZof3+XgyGkSK
        +BqZmqLUtqLgg95s7tF69B8AAAD//wMA1Kbb6bgGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e4ae2f993-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:14 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3350'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '14976983'
      x-ratelimit-reset-requests:
      - 26ms
      x-ratelimit-reset-tokens:
      - 92ms
      x-request-id:
      - req_76d88a57f7b645495a774738127c7807
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_KwpbdCIYm1SvTc6Ke4phs23Y", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_KwpbdCIYm1SvTc6Ke4phs23Y].", "role": "tool", "tool_call_id":
      "call_KwpbdCIYm1SvTc6Ke4phs23Y"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7xWTW/bOBC9+1cMeFa0sV03G98Md7NddANkk2CLoA4EmhxJTCiSGI7auIb/+4KS
        YrvZHtP4YNOcmffmg5zhdgQgjBZzEKqWrJpgT84f/livL2ft94Xkx9uHycU/E9KP3/Vyidd3IksW
        fv2Aip+tcuWbYJGNd71YEUrGhDo+m5zO3p+dT8edoPEabTKrAp9M89kJt7T2J6fjyWywrL1RGMUc
        vowAALbdd/LRaXwSczjNnncajFFWKOZ7JQBB3qYdIWM0kaVjkR2EyjtGl9x2rbVHAvbeFkpaeyDu
        P9uj9SFR0tri/PPsyfz7ga36vNg030Lz8XKmx+bsiK+H3oTOobJ1ap+gI/l+f/6CDEA42XS2V5JV
        fTEoXkmSDTJSfAEFICRVbYOOUxhiuxJR1djIwuiVmK96vz99C2u9/OuuGd98vVXvP+G7UMfJ9G4l
        spUglNE746pO/7ZGaCMSBMISCZ3CCPjEJBWjhpRNaRx8ldZomVwDJPIUofQEKFUNSjJWnjY5JCzj
        QstJvcUIsfat1bBGiEyt4pZQg1TKkzauAvbANYLG0jjU0Afyf2CIrapBRriS9GhclcG1b7lb3JIs
        S6MWTi+90yb5FzNYWtNIxqV3TN5m8Lep6qS/cHrRrE2KMYNrjCxbko4zuDCEN9yFl8EH6RR+lNZm
        8Cd5hbS5qX0IHd9lG43KQDoN11Ibv3D6ymslI+ddbkMqIsaVmH/ZroQPXYoJg5UKnxXqbvO3gMTG
        oeMipb84Sn9OfXh56OPtDLuMdpbb3UrssleAH35/FTz3tSmk04XaV+e12ZRvSk9cROTEGnPVFz9R
        pur/cj47HK4uTjkcr9dmDd44joUvC+MYCSPntD+/b0BWGsIi9jfkDei0dCql9O0Yq/6mF3G46q9N
        iYkoddLUubuj0qA2Mm9SQ3krMkotq/sf+qb1M+L7nfhh4uxGP1vfD6vdflJbXwXy6/hi8IrSOBPr
        op86aWRF9qGnSHD33Yug/WHIi0C+CVywf0SXAN9NptMeUBxeIQfxdPz7IGXP0h7ZzWbj0eCkiJvI
        2BSlcRVSILN/I4x2o/8AAAD//wMA/JKh6yIJAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e2d039e6a-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:14 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3719'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996511'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 13ms
      x-request-id:
      - req_d9602770471051915040e1160acc9544
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_PsyKlXGB5e3uRJKwlPXZZEm3", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": 1, \"comfort_settings\":
      {\"climate_control\": 0, \"lighting_and_ambience\": 1}, \"points_of_interest\":
      {\"restaurant\": 1, \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\":
      0}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]},
      {"content": "Error:\n\n```\n9 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Input
      should be a valid dictionary or instance of NavigationAndRouting [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_PsyKlXGB5e3uRJKwlPXZZEm3].", "role": "tool", "tool_call_id":
      "call_PsyKlXGB5e3uRJKwlPXZZEm3"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RWS2/bOBC++1cQvPjixHG8jhHf0myb3aaLNZy0DVIFwogcW0woUkuO0hiG//uC
        lOJXhb1s4oNMzjePjzPkkKsOY1xJPmFc5ECiKPXR+ePHDM5GP/8pKIOv48Hs+e42G33+8/qF/n7k
        vWBhs0cU9Gp1LGxRaiRlTQ0Lh0AYvA7Gpyejs/H58CQChZWog9mipKPh8eiIKpfZo5PB6aixzK0S
        6PmE/egwxtgqfgNHI/GFT1j0EyUFeg8L5JONEmPcWR0kHLxXnsAQ721BYQ2hCbRNpfUOQNbqVIDW
        28D1b7Uz3iYKtE6XN9nV1y+XZ+Nb+PZ9NpT26T77fv6sduLVrpdlJDSvjNgkaAffyCcHwRjjBopo
        OwUS+adGcQoOCiR0/sAVYxzcoirQUFgGXyXcixwLSJVM+CSpeU/98lrfXX0Y4bCafb7+qad39/cf
        i2HCewl3CN4aZRZR/zZHVnl0rHQ4R4dGoGf4Qg4EoWQhm6AMKypNqtTInkErCYEjQ+es88csuKjH
        TBmhK4nh3zqHgpgEAhby49ncOkY57kXylcgZeNZVhrpMGU8Iktl5VMSXEiMLqWJWwC0bV1o9Iete
        alUA4aU15Kzu9lj3i1rkpMziwsiLIlMhRhDP0BNUDgyF2Sfl8IbiGsL0dzAC/wAdHVw5K9Atb3Jb
        lsosguivyivR7TEwknVnIJW9MHJqpQBP3Xr1uysyiJKRZRkyT64SVLmYx5gOvQxQEUq9v8K6iMex
        QGWA0Sd88mOVcFvGOjksNQh8VcijsF+iI2XQUBpqmO7w6DtbUSxyL+HPoCuMFqskSfgrlCR8Mlgn
        fN37H3GELebWUeqRglPfF3VVUlGXpY3AoUogcvLmRHSzGVIwMoVmO7TRaVd8k+yUVhnyqZ2nyhA6
        9NR3m83YWpst+l4E5sph6usD0EZhD3+T0rSQkGBESPl/8DhUeS8qi/rMp7459G1cftF5EzIYKIT+
        Gvp53H0FSgX9IrScNho18K6xXehwcV7WPa51l/6itOH0sOZ7N9a60zZ+aEbrzU2v7aJ0NvMHFzef
        K6N8nta3VrjyPNmyDhHcPcQXRbX3SOCls0VJKdknNMHhb6dnzZOCb18xW3g4GjcoWQK9Y3c2GHca
        ktwvPWGRzpVZoCud2rwxOuvOvwAAAP//AwBxyaIQYgkAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e498a9866-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:16 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '5218'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9994'
      x-ratelimit-remaining-tokens:
      - '14973661'
      x-ratelimit-reset-requests:
      - 32ms
      x-ratelimit-reset-tokens:
      - 105ms
      x-request-id:
      - req_dc47c0e56b9af837ba616ac480358b2b
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow
      inside</user>\n<ai>Certainly, changing the interior lighting to yellow now for
      a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>"}, {"role":
      "assistant", "content": [{"type": "text", "text": "Based on the user''s request
      to \"Make the lights yellow inside,\" I can extract a preference for the interior
      lighting color. Let''s use the extract_user_preferences_v1 function to capture
      this preference."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"comfort_settings": {"lighting_and_ambience":
      {"interior_lighting_color_preferences": [{"preference": "yellow", "sentence_preference_revealed":
      "The user requested to make the lights yellow inside."}]}}}}, "id": "toolu_01XCEeMQvTYSxvPrs6JmA76K"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n4
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...hts yellow
      inside.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':...ghts yellow
      inside.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...hts yellow
      inside.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...hts yellow
      inside.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_01XCEeMQvTYSxvPrs6JmA76K].", "tool_use_id": "toolu_01XCEeMQvTYSxvPrs6JmA76K"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xVTW8bNxD9KwQvuqxkWYnVZm9pPhDko1BRA61RBwuanNUy5pI0ZyhFFfTfi+Gu
        EtlpDjFyWuwM+d48zhtyL62Rtexx3czP399dQXx9nt7lZf/M/Pui+6C79xtZSdpF4FWAqNYgK5mC
        44BCtEjKk6xkHww4WUvtVDYwfTK9mGLwHmi6mC+ezpeLuaykDp7Ak6z/2R9BKQTXZGTUUgr/52Z+
        vvAvV7+u7rxaXD3Lv4XL35+/Tes3spJe9bxvpUh3r7PXZINfqaR6IEjIMD5mkvVeou6gV8092L9f
        vIIPf2wur/78vFklXL7tn/+yfMeSQGHw1q9lLS87EDHBxoaMoh05hFbOia1C0VtE69cCYQNJOZHg
        LtsERrQWnEFhvSBGgETWgyeWl5qYoIUEXgOKcPMJNM3EXyA8gBEUhDKm7DqCj1hbS53w2TmxUS4D
        im0HCcQWhAl+QqJTGxAYQdvWamF9G1KvuNyZeAMJJlhAkSBOb3ZT/oovSutrf+3PZ4LlTlLIZP16
        MhAL+1Wm8uaLRC554lyp1tJQHfSRdgLzzXSQhbNrvxhRdejbkKhBIEbHmXa2VwQNOyEF9wi608No
        QxKWUMQUymkDcz8ZuWOwnrAJbWM9QQKknyTu6UgADEvK+p6brLxpejBW/QyWomzSZ7R6UnZPkjI2
        FJIYjFZIkxm377IDBMay3HT2i3MCFVlsd0PryxAc2blS9pB1IG4BIhfHq+CzRW7QqYOEugmZStrZ
        dVfSX008k5WMPIOAZZxD5AvBmCHcyVqefX8Azka3yUqWTvK0RpVuy/jtD3zBDPnyQ0m1rdVFvA5+
        lMq5w6H6UeaHjjx74MjTklrlG4wA5hRB1uzASg6hBKYh6CMkRTnBMYmgqOlAMcX/bVY2tS5sG2MT
        lNvl20WP0Pat40/V8L/Kia/rcqytTdAglV4PEaO85oLvBdcpaEi7BrsQ49iTR9T2nWE5LbDYfez/
        Q7cPrB8Ph4+VRAqxGW6x+w9ISSDcZaY8HnUub1a9H96FhsItsHkuLpYXlQyZHgQPh/8AAAD//wMA
        F/VxiBQHAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e9d8867d3-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3998'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:32:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:32:18Z'
      request-id:
      - req_015ib4BMDoEwNcNbJYiz2A79
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 43fdf7672f8e9c0f6aef6435e8f8b952
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_a15KwHS8RqsNPiFYJSDzHze0", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_a15KwHS8RqsNPiFYJSDzHze0].", "role": "tool", "tool_call_id":
      "call_a15KwHS8RqsNPiFYJSDzHze0"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RXS2/bOBC+51cIPCfNo0kfvu2m2xZboOg2PXS3LogxNZJYUxx1OLLjBvnvC9Jy
        JNtKscC6Ptg055vHN0MOybujLFM2V5NMmQrE1I07efntjxnk+E+of8dPP84J8vntlby5aetPb+bq
        OGrQ7Bsa2Wg9MVQ3DsWSX4sNIwhGq+fPL86unj1/+fQsCWrK0UW1spGTp0+uTqTlGZ2cnV9cdZoV
        WYNBTbIvR1mWZXfpO8boc7xVkyzZSTM1hgAlqskDKMsUk4szCkKwQcCLOu6Fhrygj2H71rmBQIic
        NuBc73j9uRuM+0SBc/rZ9Qo+/3WNxfvf3r55VVy8W36//HzzYjbwtza9alJARevNQ4IG8of5yY6z
        LFMe6qT7AcRUrzvgB2CoUZDDjqksU8BlW6OXSEPdTVUwFdagbT5Vk+k6bji/erd8e/Pi4/fw/oN9
        /fefN69+vP2BZ1N1PFWMEMhbXyb8NTGjkUwqzBbgbA7Rf4bMxCGzPgnagJw1jAUyeoMhw1thSJFm
        G25Z9PwkeWgiFQxTNflyN1XUJEeMjQODG0CVJk8bZLEevejoQw98nDK1Yn152gDPU7THU7UA1+JU
        Te6mag1lzHUH0LEKUzVJZd/IoyldEGtDCxyAhzhrUAf0wYpdWFkleAN2FLtlc+N4aaXSAU3LVlY9
        2iPmCVeBz62BpsFcgzEYgp053Defp9VsUC+tc4kR6SW4uS6Y6p4m6RyDWJ8q1Wnf3x8fINXd726q
        hRwybFgLQ1FY04cNC7J5ElOhQ4PGFtZoJshTScJWrok3KQ4VsWAQLbZGPZzY5OGg3LqwNfhcG/K5
        jdkLe1Q7lPUFcZ0yrAO1bHBotGfUVcpjCLEwAnPUjnyJrKNjjJMpPztp+3+cDNUFseiAErmFU+Ns
        DYKRmDC5XVYF+FiYuPzHSPRbSbBukEFaHuykgCC6Qoiuxg2A5cLRUuc29pKYs33YgRk7W1YpoFhP
        qGcWfWdvwNt6wbjk9APakCMeJ7EPXpuV/wqfcRylpXBo+g1ZLyHur+QWg5zGL2gZvOxXe0GxFaE2
        rQ3W47DDoACvBrYHMgw2dcjUEBl8ORAWEEQXRPmo6rAXr+LZpGuUivIxRB/3sGEfPD2FZdRBuh65
        naCZ9SVpvE0WAz66m3PyIKM0t63/GgaxpcZl9QiJPpgN0KMsieeDim5b0BTPONRQo7diH+kAqyb1
        8Y3usrIOY/NaoBs5C8dUQDQukFc5rPSa169KUclkkFfx5Gian94RQtsg18BzFG0qsP7RQ92RAafX
        0KAL4Dqkw6k3cBA2GDkIWJ+2S2xiNeYWTus2xENif0enDR3Il2G4K7v5Ej3jmADiCpfEYAY+Hy15
        cqmDMEKdlgvywh7o9H2MJkNuKf1vKDcQ9ppYiR4ZnPa4DN0JPEKvU44LYBl+It/Nz6AdpUB2t/LX
        e7V17b4/Ght/7Ub3D88VR2XDNAs7rw9VWG9DpddX73hvD0LN2kU09zU9i9qtl45qmOpGtNAcfTR4
        efm0exep/inWi5+dX3ZSIQHXC67OLi+PuiBVWAXBWhc2XlEatg8PpaP7o38BAAD//wMAOxL+0ycO
        AAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e8a78072b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:19 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '9062'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14979686'
      x-ratelimit-reset-requests:
      - 8ms
      x-ratelimit-reset-tokens:
      - 81ms
      x-request-id:
      - req_a2f7c302934318cd1b385900aace86fa
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_dN0zzd7u90zxh2RIZzDWdzGt", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_dN0zzd7u90zxh2RIZzDWdzGt].", "role": "tool", "tool_call_id":
      "call_dN0zzd7u90zxh2RIZzDWdzGt"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RXUW/bNhB+z68Q9Jw0abMkjV/XdthQrMPWrUDrgjiTJ+lqiiccT3acIP99IC3H
        suMUA5b6wZZ5331335E8indHRVGSKydFaRtQ23b+5Prb2xn4N6/ff7zq7OWHmfvr4j3F2dsPH5g+
        lsfJg2ff0OrG64XltvOoxGFttoKgmFhfXr06u7i8uj4/y4aWHfrkVnd6cv7i4kR7mfHJ2ctXF4Nn
        w2QxlpPiy1FRFMVd/k45Boc35aTIPHmkxRihxnLyACqKUtinkRJipKgQtDzeGi0HxZDSDr33I4My
        e2PB+23g9edu9LwtFHhv6OeL3/pqfh79/HP/t1/M/vnk7eewHMVbU6+6nFDVB/tQoJH9YXyyF6wo
        ygBt9v0D1DbvBuAfINCiosQ9qqIoQeq+xaBJRnk3LaNtsAVDblpOpuu83e9nt7fuqr8+u71pXv35
        6+fbN5/c7S86LY+npSBEDhTqjH9HNxTqQhssFuDJQQpfoAhLLGarohNekNtALIug1SKq9FZ7waJi
        yZY+ohSdYIWCwWJ8kWN1SRTGaTn5cjctucshBTsPFjeAJg+edihKAYOaRGVGVKfCvVKoTzuQec77
        eFouwPc4LSd303INFXRmAJg0H9NykhfAxp6oTMViLC9wBB7jyKKJGCIpLUhXGd4BHcTucG4CL0kb
        E9H2QrraogOiy7gGgiMLXYfOgLUYI808PqZ3eV1bNEvyPitiswQ/N5Vwu5XJxmFUCnnSBu/7++Nn
        KPXwu19qZY8CG9UqUFVkt2nDgsllM1cmdmipImuEweUpiTu1ZtmUODYsilGNUotmPLCpw7NqG9I2
        EJyxHByl6sVHUgcUhYqlzRU2kXuxOCbdKhpmKmCMaWIU5mg8hxrFpMCYBnN99sr2/zRZbisWNRE1
        aYun1lMLikmYCvt9VRWENDFp+R8Ssd1Kim2HAmmPb80RQU2DkEIdJgCSyvPSOEp9ItXsMeyZFXuq
        m5xQmk9oZ4Rh4BvppqCYlpx5QFv2LIdFPAavafW/wmeSnvJSeG75HVPQmPZXDotRT9MX9AJBH8/2
        glMrQmN7ihRw3GFQQVYj7pENI+UOmRuiQKhHxgqimorZHXQd9+JVOqVMi9qwO4TY5j1u2M9enooE
        TdShR+4WaEahZoM3mTHik7vZcQA9KHOX/ccoSC01LasnRGyT2QAD6pJlPprRXQbD6YxDAy0GUnqi
        A6y63Mc3vsuGPKbmtUB/4Cw85AJqcIGycrAya10/qkS1sEVZpZOj6777jhD7DqUFmaMa2wCFJw91
        zxa8WUOjqUDamA+nLcGzqMGkQYFC3i6pibXoCE7bPqZD4vGOzhs6cqjjeFcO4zUGwUMGSCtcs4IZ
        BHdwynNIE1UQ2rxcUBb0TKfvUzIFHHH+37GzEB81sRoDCngTcBmHE/iAvME5LYBl/I59vz6jdpQT
        2d/KX+/LnRfw+6NDz1+Hp/uHi4vnuhOexb17SFlRoNiY9Ut4eoOPyt06RKL7mi9I/c6dp+yE206N
        8hxDIvzp/OL1mrDcXsq25suXG6uygh/5XV9dHg1JlnEVFVtTUXpF6YQerkxH90f/AgAA//8DADnN
        E6MxDgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1c9e28542516-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:20 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '9689'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14988861'
      x-ratelimit-reset-requests:
      - 11ms
      x-ratelimit-reset-tokens:
      - 44ms
      x-request-id:
      - req_85f49a5748fa0407b7b1c50ea44bb8f5
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>"},
      {"role": "assistant", "content": [{"type": "text", "text": "Based on the conversation,
      I can extract some user preferences regarding interior lighting. Let''s use
      the extract_user_preferences_v1 function to capture this information."}, {"type":
      "tool_use", "name": "extract_user_preferences_v1", "input": {"pertinent_user_preferences":
      {"comfort_settings": {"lighting_and_ambience": {"interior_lighting_brightness_preferences":
      [{"preference": "low", "sentence_preference_revealed": "The user prefers low
      brightness for interior lighting."}]}}}}, "id": "toolu_016eNQzpuy4xddFashbbvEpg"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n4
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...interior
      lighting.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':... interior
      lighting.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...interior
      lighting.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...interior
      lighting.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_016eNQzpuy4xddFashbbvEpg].", "tool_use_id": "toolu_016eNQzpuy4xddFashbbvEpg"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7yUzW7bMBCEX2XBiy+yYTtOWuhWtA2CIE0dxED640KgpLXEVlwq3KUVx/C7F5Tt
        NimKHnrISRBFfTNDzHKrTKlSZbnKxpO5/XwRBLvXH0Tebrrutr2Z5FYlSjYtxl3IrCtUifKuiQua
        2bBoEpUo60psVKqKRocShyfD0yE7IpThdDydjc+mY5WowpEgiUq/bo9Qca7JAkdqbyW+h2w8+fTm
        Zn5pV18mi8vq7nbxTndX1eOpShRpG/+baynq80CFGEdz7bVFQc8RQ20QlW4VFzVanT3DnuH1zWMb
        NrOHsjzXXOf5+n1bxUio2ZGhSqVqUSOg987DITIYKk2hBRmk1gKMa/S6AY/3wXgsYWWwKRm0R7CG
        2VAFhkBqhBa9GEKSGNJnrccVeqQCGVz+HQsZwcJB4bzHQkBqwwl0CIRYgjjQZdljjtSDUGekBgpN
        A2vdBGToavQI5MDQynmr46mAYdBrbRqdNziCC/Q44J7Ggu0w3wzjE34lT5e0pMkIYvyBd0EMVYO9
        YkQdLQQq0f8j1wjunvs3svdrhH+fGId8uA8zWtL0IFo0xmrBLPbEu+Z/xAtnV85LxijR/9/cjJZ0
        chBsnSHhzK0yQ4IeWV4m8Oygj1FVtCEbwZrKzGJp9MuYWNIVyoCh8KgF4fL243U/VeBa9H2D+EkF
        +c8Spmq3+5YoFtdm+w7FO0I/ZOJ+IMVJ7D8x3ofoUKWxr4kK/R2Sbvdzetycnr6anSTKBXm6OBlP
        Z7vdTwAAAP//AwDKSDB7pQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1cc59d1d7ad0-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:29 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3998'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:32:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '401000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:32:29Z'
      request-id:
      - req_01HUSqRiefXjWZRgHyLoqEJL
      via:
      - 1.1 google
      x-cloud-trace-context:
      - b70d8671079162bf913b2df7faac9022
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy
      fresh apples</user>\n<ai>There are several grocery stores nearby. The closest
      one is ''Meyve Emporium'' which specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>"}, {"role": "assistant", "content":
      [{"type": "text", "text": "Based on the conversation, I can extract some user
      preferences related to grocery shopping and navigation. Let me use the extract_user_preferences_v1
      function to capture these preferences."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"points_of_interest": {"grocery_shopping":
      {"preference_for_local_markets_farms_or_supermarket": [{"preference": "local
      markets", "sentence_preference_revealed": "The user prefers local market stands
      over supermarkets for buying fresh produce."}]}}, "routing": {"navigation_and_routing":
      {"traffic_and_conditions": {"traffic_information_source_preferences": [{"preference":
      "real-time traffic updates", "sentence_preference_revealed": "The user requested
      to check for traffic on the way to their destination."}]}}}, "comfort_settings":
      {"climate_control": null, "lighting_and_ambience": null}, "entertainment_and_media":
      {"music": null, "radio_and_podcast": null}}}, "id": "toolu_016CvSF8AbDeMnUEPX9GQbEL"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n10
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Field
      required [type=missing, input_value={''navigation_and_routing''...their destination.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.routing\n  Field
      required [type=missing, input_value={''navigation_and_routing''...their destination.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.traffic_and_conditions\n  Field
      required [type=missing, input_value={''navigation_and_routing''...their destination.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Field
      required [type=missing, input_value={''grocery_shopping'': {''pr...ying fresh
      produce.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''grocery_shopping'': {''pr...ying fresh
      produce.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''grocery_shopping'': {''pr...ying fresh
      produce.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=None,
      input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_016CvSF8AbDeMnUEPX9GQbEL].", "tool_use_id": "toolu_016CvSF8AbDeMnUEPX9GQbEL"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RV21IcNxD9lS697Mss5m573gjBjgl2SEjKVAVKJaSeHYUZadzdWkyo/feUNLth
        Fzuk4jyqr0en+0gPyjtVq55nenvn43enFwfxh49vL93xnyeXJzunL3+Ml6pScj9gjkJmM0NVKYpd
        Nhhmz2KCqEr10WGnamU7kxxO96YHU44hoEx3t3f3tw93t1WlbAyCQVT9+8OqqMTY6cS5aoGSz0lv
        7xwNr3/ZP6bPd3P5fLB//2H37Hw4+6QqFUyf886N2PZNClZ8DOeGTI+CxLlMGJKo+kGxbbE3eqPs
        4fH84s2ro5vv8X347eT88vXbn29OzvKV0HAMPsxUrX5tEQbCuY+JoVn2AGu6DlrjgHGOZDqYm847
        U3xIFIm34N2k68A4R8gMaGwLMWB9Fa7Czha898w+zIDwU/KEDhqPnWPwAaRFmFBM4sNsAvHmD7RS
        XwUAmMKRczAZDN1mX/UYVoEJDiZCpmm81SY4bWNwPgPiVRHeys13t+BdsJEIrQALJSuJEJpIMLGx
        byKJZpRclicbfW3neyOYKwvFbjL27PyszcGlqelvPAaLf7eEOy8thNQVihKOGPaeJWAyRB+EdWy0
        D4KELJtAssUkMkEyB40n1CyF/BURzgSbMa3Mz8PZf4YSzAjE+NBjkHLHHp03m4D6xN4u+SDjfCyB
        Q3TWsPxL87ImltAIwunFTx/KMkMckAp0BomwwiYtMoJnzsmqUkOORS4aioOqFeHQGYujq1W1ejEg
        iQ8Ze2IkPRA2SHlE/GK5PKpSBU6WyXK1VP2wyMoe/eXw9dXKOSuPD02kvoDWHBNZXO9WMD6eC1bT
        TcX3CMsKkAZnBLNuOdMeNipowjmaDt1SlPk6ZXuQBV1hqUV7W6a2KhhHNd2Z++yXFj2BQxYfCswt
        tbheLBbVt5D3VCrrLD4RykjgV3WSXd8I4EuRrEN4lMjYfV0ko+WJREbjjKJFutfcxmEYZ782NN1E
        0l20ptO9oVsU1o2hnnUkzWlAGq1fjrrkwDLnP4x3dDOs50P+ZRxDnCPBWlcuk79J9/lVaQi5hYGi
        Sxb/z5j/Qf7rVBfxLxXzVPvjfK8Xi+tKscRBj1/L5l9XHJw3ubCVH4hKpfK91g/jF6Yl3mKW2+He
        y1eVikk2jPsvF4u/AAAA//8DAKIW2Ma/BwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1d391aed9e62-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:43 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3993'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:32:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '388000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:32:45Z'
      request-id:
      - req_014uJThz1eShqZ6q3KV1RXtw
      via:
      - 1.1 google
      x-cloud-trace-context:
      - b826381ea04c037d5155b9279fe5fcda
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}, {"role":
      "assistant", "content": [{"type": "text", "text": "Based on the conversation
      provided, I can extract some user preferences related to navigation and points
      of interest. Let''s use the extract_user_preferences_v1 function to capture
      these preferences."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"routing": {"navigation_and_routing":
      {"routing": {}, "traffic_and_conditions": {}, "parking": {}}}, "comfort_settings":
      {"climate_control": {}, "lighting_and_ambience": {}}, "points_of_interest":
      {"restaurant": {"preferred_restaurant_type": [{"preference": "Applebees", "sentence_preference_revealed":
      "The user requested navigation to Applebees, indicating a preference for this
      restaurant chain."}]}, "fire_station": {}, "dancing_station": {}, "grocery_shopping":
      {}}, "entertainment_and_media": {"music": {}, "radio_and_podcast": {}}}}, "id":
      "toolu_01Xe3LX5iJ8oXBNeMGNzcu8S"}]}, {"role": "user", "content": [{"type": "tool_result",
      "content": "Error:\n\n```\n3 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Field
      required [type=missing, input_value={''navigation_and_routing''...ns'': {},
      ''parking'': {}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.routing\n  Field
      required [type=missing, input_value={''navigation_and_routing''...ns'': {},
      ''parking'': {}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.traffic_and_conditions\n  Field
      required [type=missing, input_value={''navigation_and_routing''...ns'': {},
      ''parking'': {}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_01Xe3LX5iJ8oXBNeMGNzcu8S].", "tool_use_id": "toolu_01Xe3LX5iJ8oXBNeMGNzcu8S"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xUTW/bMAz9K4QuvjhpvlpkPhZYV3RrtyEdmm0pDEViYq025Yh0iy7Ifx/kJP1Y
        e1mxk2CKfo/vkdRaOasyVfEy7/WH0/7R5bvJakGjs5Px5PRqJd+nfZUqua8xZiGzXqJKVfBlDGhm
        x6JJVKoqb7FUmTKlbix2hp3DDnsilM6gNxj1jgY9lSrjSZBEZT/Xe1DxvswbjqhtKfG7yXv9yW0x
        l4vz+uPXyUCG5v23/urH3KlUka7if1+0mOKkISPO0xcddIWCgSMM1Y2obK3YFFjp/BnsFIefpofu
        bOynxxd4/uHit2nGkygJNXtytFSZuiwQbnXprI7ggCH4wODIOqMFQQotIEVAhICrxgW0sHBYWgYd
        ECrH7GgJjkAKhCT4RhwtE/DzX2gkg6TW4SZG0sfLFDRZSCToxcKZXJPNjSfrYgGcdOGyQManLA/M
        2hgfbCQU3xKeTT5fTFrpXbj0YHwIaGLBjlO4QyBEG3O1tTGfHyvewd85KQCrWu53JTNojqkuRFsa
        5BTYkcGIZj0lAoW+ReAajVs4A44WPlRb8/TcN5EcK1gEX7UVNowh4VYCsnThFAMmLQOwYN2Z33fi
        CQ89yWY0o37rwgs/9z774JaOdAkBufbECC72zPiqLlGwO6NBF65eyH8Q/1cr39SmGQ27MPlnaxih
        DrjAgGSwbVJSlvsCq2j+s250ZzSKUmJSw7idMm1tAr7GsMUWH7WXjcVXe9yNhh5rRgsxuXD8aPae
        3wTcTnsc9DhU7co9cvBrLu7gVarqmI3c7rqv42th7TZcqEwd1BjEEZLE5Q/5E/0HO7MPdv6rVLVT
        p7L1ZpO+FWx3/h+w1/v/DPt6s7lOFYuv862zz9+69oLjApBBlVFTlqlq2uc1W2+fsFz8DRKr7PCo
        N06Vb+RpcNTrbTZ/AAAA//8DAEWTAmO/BQAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1d58cbdcfa82-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:47 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3993'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:32:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:32:46Z'
      request-id:
      - req_01R4RKxrAWEPGDQfqGUEsJH1
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 4c8a6168028caa7a2f5009548fc8739d
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make
      the lights yellow inside</user>\n<ai>Certainly, changing the interior lighting
      to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: "<html>\r\n<head><title>504 Gateway Time-out</title></head>\r\n<body>\r\n<center><h1>504
        Gateway Time-out</h1></center>\r\n<hr><center>nginx/1.27.0</center>\r\n</body>\r\n</html>\r\n"
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c1be67c9c17d8-SJC
      Connection:
      - keep-alive
      Content-Type:
      - text/html
      Date:
      - Tue, 09 Jul 2024 23:32:47 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      x-request-id:
      - 6c35ea4a-96cd-4558-849b-511998dc2a16
    status:
      code: 504
      message: Gateway Timeout
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for
      some Italian food right now.</user>\n<ai>I located several Italian restaurants
      nearby. The closest one is La Bella Vita, 4 kilometers away. Would you like
      to navigate there?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes,
      that sounds perfect. Please set it as our destination.</user>\n<ai>Destination
      set to La Bella Vita. The route is clear with minimal traffic. We should arrive
      in approximately 10 minutes. Would you like to start the navigation?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start the navigation and can you also
      adjust the temperature to something warmer?</user>\n<ai>Navigation started,
      and the cabin temperature is now set to a warmer setting. Is there anything
      else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>"},
      {"role": "assistant", "content": [{"type": "text", "text": "Certainly! I''ll
      extract the relevant user preferences from this conversation using the available
      tool. Let me do that for you now."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"routing": {"traffic_and_conditions":
      {"willingness_to_take_longer_route_to_avoid_traffic": [{"preference": "prefers
      routes with minimal traffic", "sentence_preference_revealed": "The user accepted
      a route with minimal traffic without requesting alternatives."}]}}, "comfort_settings":
      {"climate_control": {"preferred_temperature": [{"preference": "warmer temperature",
      "sentence_preference_revealed": "The user requested to adjust the temperature
      to something warmer."}]}}, "points_of_interest": {"restaurant": {"favourite_cuisine":
      [{"preference": "Italian", "sentence_preference_revealed": "The user expressed
      a desire for Italian food."}]}}, "entertainment_and_media": {"music": {"favorite_genres":
      [{"preference": "Italian music", "sentence_preference_revealed": "The user requested
      Italian music to set the mood."}]}}}}, "id": "toolu_0139H6d8Ur2UfjwFFYALErBT"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n7
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Field
      required [type=missing, input_value={''traffic_and_conditions''...sting alternatives.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.routing\n  Field
      required [type=missing, input_value={''traffic_and_conditions''...sting alternatives.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Field
      required [type=missing, input_value={''climate_control'': {''pre...o something
      warmer.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...e for Italian
      food.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...e for Italian
      food.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...e for Italian
      food.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Field
      required [type=missing, input_value={''music'': {''favorite_genr...ic to set
      the mood.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_0139H6d8Ur2UfjwFFYALErBT].", "tool_use_id": "toolu_0139H6d8Ur2UfjwFFYALErBT"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xVUW/bNhD+Kwe+7EWOHSfxGr11aI2taLe2SYZuSyGw5FmiIx2Zu1Ncw/B/H6go
        QJ1mL0ufBB553/fd3UdqZ4I3pemkrmbHn7brV9s/N1fu1VIubj+c13R1/nVpCqPbhPkUitgaTWE4
        tjlgRYKoJTWF6aLH1pTGtbb3ODmZnE0kEqFO5rP56Wwxn5nCuEiKpKb8Z/cAqjG2VS8ZdZCS1301
        O357U5++OLt7d/Fp/XHx98sPeLF+8/G1KQzZLue9t+qaZU9OQ6T3lm2HiiwZhlKvptwZcQ12tjqA
        PTn/deFfXPH8arXeLJd/vXz7mn+5zCWhlUiBalOaywbhzrbB2wwOyBxZIJAPziqCNlZB8A7ZtsB4
        2wdGD6uArRewjNAFkUA1BAJtECKHOpBtYTXKBWfb9gh++6ltwXrPKAJoXXPPBJY8JI53weOQT+hy
        53kLby7++H0oHGJCHtQJaAQXmdFpPt2V13RNx0fwbhQx6goEHHsNVJfXBAATSJZvAtXjatzMyfNH
        yTnXxW4VWStBzcfkAaQNdZMDlSVf2e5LQHKYQU6eUpBiIJUqrqpAioyiDzirwFiJDiWNIW/JZeTD
        aM3RIW8raWJKo+DTJwRjJlAbqEPSQV2HPtgHPrY+xCGcondWNONcHnRScJx8AZs8BPS51db7YSjd
        YXGboA1gl3QL8csanQpEBurbNjupR4FNg4xgU+KYOFjFI1OYlIeJMlyImPKV8v4+3JjSTBOyBsoF
        9IJcJcYVcu6wTMd5TccpmsIMPKbc7ffF/wUbv88De2yV6ZMeeR7H90aafuugHw7+yIs/HP+xq59H
        8B/en35n+gOaz/v958KIxlTdP4aHr/OwIXjbD9Mrs7UL0w8/hHJ3/+hWGm+QxJSL458XhYm9fhs8
        m8/3+38BAAD//wMA3cJqCXEGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1d58bdbf67f3-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:48 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3993'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:32:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:32:47Z'
      request-id:
      - req_01RT8VS4ryVzsUpwgmShcxzy
      via:
      - 1.1 google
      x-cloud-trace-context:
      - bba616d4929c0546058640c7a5a5d713
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a
      place to eat, but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>"},
      {"role": "assistant", "content": [{"type": "text", "text": "Certainly! I''d
      be happy to help you find an Italian restaurant. Based on your preference for
      pasta dishes and Italian cuisine, I can extract some user preferences. Let me
      use the appropriate tool to capture this information."}, {"type": "tool_use",
      "name": "extract_user_preferences_v1", "input": {"pertinent_user_preferences":
      {"points_of_interest": {"restaurant": {"favourite_cuisine": [{"preference":
      "Italian", "sentence_preference_revealed": "The user expressed a love for pasta
      dishes and specifically requested an Italian restaurant."}]}}}}, "id": "toolu_01FcSomiH44MkXT5rdVtdoRo"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n6
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...talian restaurant.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...talian restaurant.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...Italian restaurant.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...Italian restaurant.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...Italian restaurant.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...talian restaurant.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_01FcSomiH44MkXT5rdVtdoRo].", "tool_use_id": "toolu_01FcSomiH44MkXT5rdVtdoRo"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4yTUW8bNwzHvwqhl3s5G7bjbMO95aFd16JbUAddsWY4MBLPp/kkXkTKqRfkuw+6
        cwrvrU+HE8k/f39KfDbemcYE2ber9fXu7uDtn/pv943X9qCf31/lN3+Z2uhppJJFIrgnU5vEQzlA
        ES+KUU1tAjsaTGPsgNnR4mpxvRCOkXSxWW22q582K1Mby1Epqmm+Pr+KKvPQZimqE0r5z+1qfXvb
        fzmN480/690H98vNh+Ov1uMnU5uIodTdotr+bY5WPcdbTBhIKUmRiWNW0zwbsT0FbP8n+9buOPh3
        2+3Hw5e76+Q+q+NPXCwRCkcf96Yxdz3BmOjoOQt05x5gcRjgCQWCF/FxD0JHSjhAosfsEznoPA1O
        AK3l5EqGMmhP8H73x++7CWYJv1XDAOjcFHhVOhc+ee0h5mEATkBh1BMcccgk8NRTIsBxTDwmj0o1
        oMATgeNYKfR4JPCx4xRwYsUHzlpaBOgSh6lZFkqVwGOmdFrCO0pUyRQQpXHxcFqUL3yfQ3Mf7+N6
        CR/PjFXirD7uq5m2gZvJhD9jz7iSHxazmeV93FwUWw4dJ22FtIjIj6tcXah0PlErOnmsaqgcRuvj
        /uIIo4Nqn9hSOrXS8zhOyDk6SlCN7KNKy13ro1Ii0eqVgIQu5j+PfXkftxfdqdQo+hgoaovRtYGc
        xx+0Ah0nqEIWb6sZM6HzPOmM7CyKVssy87uJBZ3zxVNRGwYIeKDzZaVsNScCy2EcPEad+5Xg95c4
        P/2leXn5uzaiPLbzvZYtxm+t8oFi2ZUpJPSYKVoyTfFemzxtefM8b9JrcnP983ZdG856ebhebbYv
        L/8BAAD//wMAz/XQLEcEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1d58bad667f1-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:54 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:33:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:32:53Z'
      request-id:
      - req_01Egrj9tJa5DaFbVAucTcD1d
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 0e81b5be138befedffb4cfac459bfd11
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting
      to something warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting
      the interior lighting to a warm ambience. You should notice a cozier atmosphere
      now.</ai>\n</conversation>\n</conversations>"}, {"role": "assistant", "content":
      [{"type": "text", "text": "Certainly! I understand that you''d like to change
      the interior lighting to a warmer tone. Let''s extract this preference and update
      your vehicle settings accordingly. I''ll use the extract_user_preferences_v1
      function to capture this information."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"comfort_settings": {"lighting_and_ambience":
      {"interior_lighting_color_preferences": [{"preference": "warm tones", "sentence_preference_revealed":
      "The user prefers warm tones for interior lighting and dislikes cool tones."}]}}}},
      "id": "toolu_0167CmdUsxWUVkEBMFamMpJy"}]}, {"role": "user", "content": [{"type":
      "tool_result", "content": "Error:\n\n```\n4 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...slikes cool
      tones.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':...islikes cool
      tones.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...slikes cool
      tones.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...slikes cool
      tones.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_0167CmdUsxWUVkEBMFamMpJy].", "tool_use_id": "toolu_0167CmdUsxWUVkEBMFamMpJy"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7SUW2sbMRCF/8qgF7+sje04KexbGnIh1BCC25DWZVF2Z72qpdFGM7IdjP970dpO
        r9C+5GlZXc53DjrSVplK5crxohiO7m/uN5tJM/2wvPSnj+68XV7zrVGZkpcW0ypk1gtUmQrepgHN
        bFg0icqU8xValavS6lhh/6R/2mdPhNIfD8eT4dl4qDJVehIkUfmX7VFUvLdF5KTaWUn/sRiOzh6b
        xfXz51s8nz6MblaXZmbMxVplirRL++60lM1VpFKMpzsdtEPBwEmG2igq3youG3S6+FX23YWrPvLm
        4eOn5eX76ZV20/b2JUVCzZ4MLVSuZg1CG3BlfGSoDwwotbWw1gzOMBtaAOMKg7YQ8DmagBXUBm3F
        YAgkKWAQQ0iS4oWiDVhjQCqRwT99w1IGMPNQ+hCwFJDGcAZrBEKsQDzoqupkjrSD+NpIAxSthZW2
        ERnWDQZMGytPPYFGrxC4xdLUpgRDtQ9OJ/8DuMGAPe5EWbDtP7300xdeo+dzmtNoACl/L/gohha9
        PRjMj9yaqtfMA3jAnrWdWyN/uqt9ACMMHJ/2AQZzGh8IpTVOCxapFcHbv5AiVRigV3pX+yAFoyRL
        3PsHdTCnkwOj9YaEC18XhgQDsrxBoMkBhgkh2pBLp66pKhxWRr8BcU6zBhnTHpMON/XCWkDiGBCk
        0QKprb83U4eu2Iwkx5ayhFhKDJgBrpDA1P/Rpc6TNOgGarf7mikW3xb7GqV3Qm8K8UukdBu7Kcbn
        mJqv8hQsU7F7R/Lt/q4eF+enZ8NRpnyUnwdHw/Fkt/sOAAD//wMAPNlKd6kEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1d592a2ace5c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:32:54 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:33:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:32:54Z'
      request-id:
      - req_012bKFHBE8keWzg9JXvhhhgx
      via:
      - 1.1 google
      x-cloud-trace-context:
      - abf4ebadd1feddf4978bb531d4de4074
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_R07SsMig2Lll9vN1mRE4K8YO", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}, \"pertinent_user_preferences.comfort_settings.lighting_and_ambience\":
      1}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_R07SsMig2Lll9vN1mRE4K8YO].", "role": "tool", "tool_call_id":
      "call_R07SsMig2Lll9vN1mRE4K8YO"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy951cQuuySZEmaLIlvG9at2Nq167rDUBeGItO2Wkl0JTprG+S/D3I+
        W8wHg+Dje3yk6VUHQOhcJCBUJVnZ2vTm96eqmN1MXl5mVHy+WLhp/lLm1+dn48vHJ9GNDFrco+Id
        q6/I1gZZk9vAyqNkjKrD6Wgw+TCdz6ctYClHE2llzb2T/qTHjV9QbzAcTbbMirTCIBK47QAArNp3
        9OhyfBIJDLq7jMUQZIki2RcBCE8mZoQMQQeWjkX3ACpyjC7ado0xRwATmUxJYw6NN8/qKD4sShqT
        mXt98+nRfh3z7Hf+8Hf57fLn2fJj+eGo30b6uW4NFY1T+wUd4ft88qYZgHDSttwryar6si28kl5a
        ZPThjRSAkL5sLDqOY4hVKoKq0MpM56lI0o3v68H0V7jQ5ejcmPnyx9Ben46/z/5cpqKbCo8ykNOu
        bOtvKoQmoH8XoPZYoEenEAryoB2j1+TB6LJi7UpQZMiDdDlIu9AyFoaKGpPDAgGf2EvFmEPhyQJX
        CIrcEn2QcaJ+27uOQ2JIRXK7SgXVrQWZ5zuwahPva/SsHTrOorXsYCzEKyzIcxaQo6fQ37nLpMuz
        6CvWtXpLaRpMRTJc363Fqy2uO/+L77bRen99hsra0yK8OSZRaKdDlW02GT9DYKo3LaLcXXvlzavD
        FbUnW3PG9IAuCo5Ho9lGUBz+rAM8HW1BJpbmiHYyGHS2HkV4Dow2K7Qr0dde78++s+78AwAA//8D
        AMPuTY71AwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1e3f088f176d-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:33:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1169'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996534'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 13ms
      x-request-id:
      - req_561f8cef1f5f1322c2305dab577ea2ca
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_22S2IrjJiK0Vk6R3SEDPLKJr", "function": {"name": "UserProfile", "arguments":
      "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\": [\"Remember
      that Kevin is being assessed for his French proficiency.\"], \"other_useful_info\":
      [], \"relationships\": \"{}\"}"}}]}, {"content": "Error:\n\n```\n1 validation
      error for UserProfile\nrelationships\n  Input should be a valid dictionary [type=dict_type,
      input_value=''{}'', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/dict_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_22S2IrjJiK0Vk6R3SEDPLKJr].",
      "role": "tool", "tool_call_id": "call_22S2IrjJiK0Vk6R3SEDPLKJr"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTwW7bMAy95ysIXXJJsiRt6sW3DeuGtkObLUV3qItAkWlbrSwJEp3NM/zvg+0k
        Tor5IBB8fI9PFF0NAJiMWQhMZJxEbtV4+Xotknj9cFvePwVB6cvkb6w/mps3/I2ejRqG2b6ioANr
        IkxuFZI0uoOFQ07YqM6C+XRxFSyXQQvkJkbV0FJL44vJYkyF25rxdDZf7JmZkQI9C+F5AABQtWfj
        Ucf4h4UwHR0yOXrPU2ThsQiAOaOaDOPeS09cExv1oDCaUDe2daHUCUDGqI3gSvWNu686iftBcaU2
        u/LxSiUPtLv+FsTWfP60lcsf98XqpF8nXdrWUFJocRzQCX7Mh++aATDN85a74iSyr/vCFXc8R0Ln
        30kBMO7SIkdNzTVYFTEvMsz5RsYRC6PO93y+nt+411t5N316u/p5sb7+svp+d+siNoqYQ+6Nljpt
        6x8zhKFDxZu2PpPWDyGRqGLwmSlUDFsEDjuuZAyxbM1xV45gWxBIAulBFM6hJlUC14C5pRI8OalT
        GFb1cAK/EDRiDGSgsDEnbHhk+upeFqp60nq0zTDQRyx8riJmbGvVoVVc4KEga5Mfzry32I6rAluw
        qiNWv9TsbIT14H/xyz6qj6unTGqd2fp3m8QSqaXPNt0YmzfwZGzXopF7aVe8ONtaZp3JLW3IvKFu
        BJeXs06P9X9VjwaXe5AMcdXnZ9PZYrC3yHzpCfNNInWKzjp5XPlBPfgHAAD//wMAECwpVfEDAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1e3f3b7617ea-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:33:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1225'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999513'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_555e16e645d457730b80e5a67fd867ed
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_mkj07ZDPj0uAeKwqKnnQHvDe", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": {\"interior_lighting_brightness_preferences\":
      [\"low\"]}}, \"points_of_interest\": {\"restaurant\": 0, \"fire_station\": 0,
      \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience.interior_lighting_brightness_preferences.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''low'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_mkj07ZDPj0uAeKwqKnnQHvDe].", "role": "tool", "tool_call_id":
      "call_mkj07ZDPj0uAeKwqKnnQHvDe"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT3W/aMBB/56+w/Awl9GO0eWNi1aRuFd1LpzVVZJwjcWqfPfvSliL+98mGQlqN
        h+h0v/t95HJsBoxxVfGccdkIksbp0VX7TaqXSzl3mV1OZrf4M+jZ19vf7Vs2+cGHkWGXLUh6Z51I
        a5wGUhZ3sPQgCKLqZHqaXXy5zLIsAcZWoCOtdjQ6O7kYUeeXdpRNTi/2zMYqCYHn7GHAGGOb9IwZ
        sYJXnrOkkzoGQhA18PwwxBj3VscOFyGoQAKJD4+gtEiAMTZ2WvcAslaXUmh9NN79Nr36uCihdVnX
        2QLv16/d1eR8en2F6/X93a/7Nuv57aTXLgVadSgPC+rhh37+yYwxjsIk7kKQbK73gwvhhQECHz5J
        McaFrzsDSPE1+KbgQTZgRKmqgufFLrd5arPpn/mizboZ3Lz8vUG8+/48h4IPC+5BBIsK6zQ/q9ou
        EKMGWBfAM+dhBR5QQmBkmYmpEgqv5IUkqFglSLBAvpPUeThJoi7OQSh4/rApuHVJW1TVO9ikxtiB
        J4WAVEazsmc2ltasrKcyAJHCOoy1qptYlQKrUpilinNjhQReWV8e4KWPFUIIfb1k/Cx0B8lZ25eC
        bx+3/MM2t4P/1Y/7anu4Qm1r5+0yfDoqvlKoQlPuNho/RyDrdhZR7jFde/fhgLnz1jgqyT4BRsHz
        82x/7vz4DzvC07M9SJaE7tOmZ4N9Rh7WgcCUK4U1eOfV4fwH28E/AAAA//8DAES0EsL9AwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c1e3f6c3f236e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:33:21 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1256'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996398'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 14ms
      x-request-id:
      - req_05cc8e147187d425c373b870d65adb16
    status:
      code: 200
      message: OK
version: 1
