interactions:
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "UserMemory", "description": "", "parameters": {"properties":
      {"age": {"description": "The user''s age", "title": "Age", "type": "integer"},
      "name": {"description": "The user''s name", "title": "Name", "type": "string"},
      "interests": {"description": "The user''s interests", "items": {"type": "string"},
      "title": "Interests", "type": "array"}, "relationships": {"description": "The
      user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions"],
      "title": "UserMemory", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSTW+jMBC98yusOcMKSNKo3LurrLSVmu3uHuoIuWYgToyNbBOKovz3Fc4HNKoP
        1mie35vnmTkGhIAoICPAt8zxupHR4+7pede9iHX/UeO/bnUonvr19/3rYduxFMKBod93yN2V9Y3r
        upHohFZnmBtkDgfVZJnGi4dlvEw8UOsC5UCrGhfNdZTG6TyKF1EyuxC3WnC0kJG3gBBCjv4eLKoC
        PyAjcXjN1GgtqxCy2yNCwGg5ZIBZK6xjykE4glwrh2pwrVopJ4DTWuacSTkWPp/jJB77xKTMf7+U
        f7u2+yHW4qDxeSVf946zlZjUO0v3jTdUtorf+jPBb/nsrhghoFjtuX8sml9Ya9PfsQkBZqq2RuUG
        53CkwCqkkM3jkHo6hYzCT40UQgpCOTRonaWQvVEojFZoKWxCCkzkQllnWm/GP9iQE3yqdgq+ijeX
        6HQbjNRVY/S7veszlEIJu80NMuv/O217cBXd+DVoP00WGqPrxuVO71ENsmmSnFVhXLwRnV12BJx2
        TE5Y8yS4+ATbW4d1XgpVoWmM8FsBZZMXi+XDLF6WjzEEp+A/AAAA//8DAHB7h5UeAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1b892faba-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:51 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=1JtlGUxWe49sMrWsu874ZmmOmvTRS2M4DRBNgQkh2Pg-1720567071-1.0.1.1-eTDIATF_VyHt4TSVoCAQf3USX8wxerOqOSEPTSiZH26fFhcpCjIjG4hZ03PZx1nz7Ocj0nBXfdJQ7PQ8_FR8oA;
        path=/; expires=Tue, 09-Jul-24 23:47:51 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=fl9w9QFWN_g6H59JLQpKfouatIHfWGf_X0qDiw5L9eM-1720567071639-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '413'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9992'
      x-ratelimit-remaining-tokens:
      - '21999317'
      x-ratelimit-reset-requests:
      - 43ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_4a81f733ad89bf38ec0e96563281635e
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSXW+jMBB851es9plEJGmKwmvVD+lOp1OvbU4tETLOAk6MjWyTaxTlv1c4H6TR
        8YBWM8zssLu7AADFEhNAXjHH60YOZqv7X6to+/L09j5r7v5u/t0/GppP1s2nLkoMO4XOV8TdSTXk
        um4kOaHVgeaGmKPOdRSPo+ltHMUjT9R6SbKTlY0bTIbTgWtNrgfRaDw9KistOFlM4CMAANj5d5dR
        LekTE4jCE1KTtawkTM4fAaDRskOQWSusY8ph2JNcK0eqi61aKS8Ip7XMOJOyb3x4dhd1PygmZbb9
        kz++/ry7jV/Y2/x5stTr93w+24iLfgfrbeMDFa3i5wFd8Gc8uWoGgIrVXvtqyfw2uhCSruQAyEzZ
        1qRcFx13KbKSUkyiMPXyFJMUf9BGqBTDFIVyZMg6m2LysQhTZCITyjrT+hAeTvGZaqpzMuAq5sCr
        QVjISagSmLVkLS2h0AYqYeHBkOIVNF1ALkjx7TDFzlu7ikzWWipamQlVaN90j9/+YB/8r14cq/15
        21KXjdG5vVoeFkIJW2WGmPVDvNxlcDJd+Ntqv50LNkbXjcucXpPqbMfxzcEV+3Pu2ZvJkXTaMdnj
        k1EcHHOi3VpHdVYIVZJpjDifWrAPvgAAAP//AwCh/rEvaQMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bae7f983-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:51 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=4mFYkRdrrnyfVjwR2nun4zgl.Xe1um1n71KaWj7fQsU-1720567071-1.0.1.1-AzEAOH0kx2nBSqa3i9rXd54.E9kYSOUJgxYxRTi8.gqLMh5MLNHJocZTmJGJaCdDR.hWVTFFz6KK6CaDC8x6PA;
        path=/; expires=Tue, 09-Jul-24 23:47:51 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=Q5WWG1wgKqOC.htDHssPdaCztfda7pLQUd3XXkr4fJA-1720567071851-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '686'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '14999846'
      x-ratelimit-reset-requests:
      - 20ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_f69b1dd273695df9b47bd08dbeeef7da
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n\nGenerate a JSONPatch to update the existing schema instances.\n\n<schema
      id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'', ''grade'': ''8th'',
      ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}},
      "tools": [{"type": "function", "function": {"name": "PatchFunctionParameters",
      "description": "Respond with all JSONPatch operations required to update the
      previous function call.\n\nUse to correct all validation errors in non-compliant
      function calls,\nor to extend or update existing structured data in the presence
      of new information.", "parameters": {"type": "object", "properties": {"schema_id":
      {"description": "The ID of the function you are patching.", "type": "string"},
      "reasoning": {"description": "Think step-by-step, listing each validation error
      and the JSONPatch operation needed to correct it. Cite the fields in the JSONSchema
      you referenced in developing this plan.", "type": "string"}, "patches": {"description":
      "A list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTXU/bQBB8z69Y7bODDEkw+A1VLSqoiFaVSCHIupzX9oX76t05JIry36uzQxKi
        +sFa7ezO7I7XmwEAihJzQN6wwJWVw+vF14eFfny+nVrKzB92t7ydT83k7sv3VfoXk9hh5gvi4aPr
        jBtlJQVhdA9zRyxQZD3PLtLJZZZm5x2gTEkyttU2DMdmeJFejIfpZHg+2jU2RnDymMPLAABg073j
        iLqkFeaQJh8ZRd6zmjDfFwGgMzJmkHkvfGA6YHIAudGBdJxat1IeAcEYWXAm5UG4fzZH8cEnJmXx
        g9/fX2V+WqqwevBZ83z1dv3z5v3pSK+nXttuoKrVfO/PEb7P5ydiAKiZ6nofWeDNt13hI3NMUSDn
        T6gAkLm6VaRDXAM3M/S8IcUKUc4wn+ENZyUpwX+1cyf4DJMZOmLeaKHrruB3Q9B6ctAwD9oEsM4s
        RUklML0GTe9gHVXkSHPy4EjGbwzBQGgIaCV8ELqGXhQqQbL04FveQKRjihKoHSspAeOgdoaTW4MU
        PpxBVOZGL8l5FpcE4YHNTRsibce6FCqB90bwJmKtPlHvRc+6pWy0i/wM85fXLX7yaDv4X/y6i7b7
        25Kmts7M/cmpYCW08E3R2xZN9sHYXiLSvXY33H46S7TOKBuKYN5IR8LLq3HPh4e/5oBORjswmMDk
        IZ+NssFuQvRrH0gVldA1OetEd9JY2aKcZJejNKuuUxxsB/8AAAD//wMAuxpL5tsDAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1b82a175f-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:51 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=4sa4yup__7k97fWPMj8k1nOq1eGl35OmqY3XYQBRZQA-1720567071-1.0.1.1-EiMlEiejs4Uyse486uWiKlzEPUpBQ8IZ2j1oBtCyLv3TLuePN9HstCRigwDKYlaSGUzsbNq.gkhj6Xjpjoi2CQ;
        path=/; expires=Tue, 09-Jul-24 23:47:51 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=.7PfdhrSCKWBRmgAaZ0v0vosgLP1VGjsgSGsYoIaxj4-1720567071885-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '776'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999713'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_544686786e713230a8cbfc5f51bafd26
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type":
      "function", "function": {"name": "UserMemory", "description": "", "parameters":
      {"properties": {"age": {"description": "The user''s age", "title": "Age", "type":
      "integer"}, "name": {"description": "The user''s name", "title": "Name", "type":
      "string"}, "interests": {"description": "The user''s interests", "items": {"type":
      "string"}, "title": "Interests", "type": "array"}, "relationships": {"description":
      "The user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions"],
      "title": "UserMemory", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSTW/bMAy9+1cQvOziFI5TJ6vvBbp167BhOWxVYCgO4yjVhyHJXbMg/32Q49hu
        MB0Ego/v8YHkMQJAscEcsNxxX6paTu729097JV6zxWv29ik7GFM96m/y6eP84fAL48Aw6z2V/sK6
        KY2qJXlh9BkuLXFPQXW6SJNsvkgW0xZQZkMy0KraT2Y32cQ3dm0myTTNOubOiJIc5vAcAQAc2z94
        1Bt6wxyS+JJR5ByvCPO+CACtkSGD3DnhPNce4wEsjfakg23dSDkCvDGyKLmUQ+PzO47iYVBcymL5
        5+H7srmf3n7Ru7XVu59/H3879dKM+p2lD3VraNvosh/QCO/z+VUzANRctdylI/uVlLGHKzYAcls1
        irQPzvHIkFfEML9NYtbSGeYMPxtiGDMU2pMl5x3D/JnhxhpNjuEqZshFIbTztmnNdAU/SJFak4XG
        kf3gIAjGwCuKoZeKgesN1BREVyd8Z+8U/S9eddGp36Q0VW3N2l0tBrdCC7crLHHXDmi8p+giumrv
        pnl3Clhbo2pfePNCOsim6eysisOpDujsrgO98VyOWPM06nyiOzhPqtgKXZGtrejPKDpF/wAAAP//
        AwAgwYllRQMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a21d6e9854-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:51 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=nQMa5XrTJtTZF6Hkq4lPijYy3WNLRf8VAaVn5_aOJao-1720567071-1.0.1.1-FRwmZUYxzWyIG6mPiL47HeyuBtVIkx0Hj4Ut1RhL_adU8dLc5PHKdRdWfBCSCJE39GJh3Ld2n22i7t0j_KjkNQ;
        path=/; expires=Tue, 09-Jul-24 23:47:51 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=U42uVfg9dJqi44e2ez9mFuOzvBqbkXCZweQTjgRIX5k-1720567071916-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '631'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '14999864'
      x-ratelimit-reset-requests:
      - 37ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_d2e06397e1d48afdebf77a92a26c883e
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSXWvjMBB8968Q+2wXx0nqxG9H27T0oPho7y5QBaMqa0c5WTKSXC6E/PfDyofd
        cH4Qy4xndtjdfUAIiDVkBPiGOV43MppvH162T09vMVvm+jG9nUxHv15f7tefC1E/Q9gp9McWuTur
        briuG4lOaHWkuUHmsHMdpUk8vU3jdOSJWq9RdrKqcdFER0mcTKJ4Go3GJ+FGC44WMvIeEELI3r9d
        RLXGv5CRODwjNVrLKoTs8hMhYLTsEGDWCuuYchD2JNfKoepSq1bKAeG0lgVnUvaNj99+UPdzYlIW
        MWOLPL/7fS++6Xy3/LFM8tfZG38e9Dta7xofqGwVv8xnwF/w7KoZIaBY7bU/LZrc6FJIvJITAsxU
        bY3KddFhT4FVSCGLQ+rlFDIK3/FTKAohBaEcGrTOUsjeVyEFJgqhrDOtD+FhCo8G0RGvIkKRhUHF
        NzcUOoF2GzRFa7FsZSFUqb3TAb7EOgT/q1en6nBZodRVY/SHvdoIlEIJuykMMusnM1xQcDZd+YNp
        v9wANEbXjSuc/oOqs00ms6Mr9Cfas+P5iXTaMTlQzdLglBPszjqsi1KoCk1jhL8fKJuCY5zOx+Nx
        XEJwCP4BAAD//wMAVjI6k0gDAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bb81f99b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:51 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=ymNFQAiudR2wI86YJdJFBYGCaaNTbLDmpZrRDwH_Els-1720567071-1.0.1.1-qxV2.jg5EHPiECEKsrwlrypYgORzXZR1g9T.bKmlOjz1a6XV6OI.d_94DaUzy4yhDjrSdc4Y8IHnZMgZXgSLAw;
        path=/; expires=Tue, 09-Jul-24 23:47:51 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=qh_whaLE3rcSRNKfuNFg4iOmB2zSaIwdmZqF9BbGPdw-1720567071917-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '796'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '21999054'
      x-ratelimit-reset-requests:
      - 38ms
      x-ratelimit-reset-tokens:
      - 2ms
      x-request-id:
      - req_b17512fb9f894d5150eb37c5cc2711a1
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSTW/bMAy9+1cIPCeFnSwJ5tvQrsAGrFiAnrYUgiLTtjJ9uBI9pDD83wc7ju2m
        80Gg3vN7pEg2EWOgMkgZyFKQNJVefj59fTqJcutWZ/OciNK+nursuRb7+3z9CItO4Y4nlHRV3Uln
        Ko2knL3Q0qMg7FyT3SrebHfxLukJ4zLUnayoaLm+2yyp9ke3jJPVZlCWTkkMkLLfEWOMNf3Z1Wgz
        PEPK4sUVMRiCKBDS8SfGwDvdISBCUIGEJVhMpHSW0HZl21rrGUHOaS6F1lPiy9fM4qlRQmv+6/Xp
        i94/3q9tWfzc/rDfH4r9t7N+mOW7WL9VfUF5beXYoBk/4ulNMsbACtNr8UxeSOJ1QM8rjzl6tBID
        /5vc2DEGwhe1QUvdU6A5QIWelEX7UX6AtDmAdCZ3nnhAImWLAdWqKLsrFzbjwhxVpzhAmrRtC+9S
        ttH/4pchasdxaVdU3h3DTfchV1aFknsUoe/CfBjR1fSlX4763byh8s5UxMn9QdvZbj4NywHTPk7s
        +kqSI6Fnql0cDXVCeAuEhufKFugrr8ZdidroHwAAAP//AwDUMVe2KgMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1ba336420-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:51 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=z4_iuXQn7nxgTEoC9LzApHZySZNFl7mpEd3zdTZ_NsI-1720567071-1.0.1.1-150_9e47fCiUvpFvGARbmmHwAUGeyVQJqJqSntC5tfqcJjrbvWTXkjjBD0lHkhcEPQcx82T7nhY57pgJiQkXAg;
        path=/; expires=Tue, 09-Jul-24 23:47:51 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=uCfbKJN8nRexaWKFqY0lldnnjHamquFNmPy7Hkf7C0M-1720567071981-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '855'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999706'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_3da2fb9d2214f0a230c9fcaaca5e2484
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools":
      [{"type": "function", "function": {"name": "UserProfile", "description": "",
      "parameters": {"properties": {"age": {"description": "The user''s age", "title":
      "Age", "type": "integer"}, "name": {"description": "The user''s name", "title":
      "Name", "type": "string"}, "interests": {"description": "The user''s interests",
      "items": {"type": "string"}, "title": "Interests", "type": "array"}, "relationships":
      {"description": "The user''s friends, family, pets,and other relationships.",
      "title": "Relationships", "type": "object"}, "ai_instructions": {"description":
      "Prompt instructions that you as the AI assistant should always retain in subsequent
      conversations.", "items": {"type": "string"}, "title": "Ai Instructions", "type":
      "array"}, "other_useful_info": {"description": "Any other details you would
      like to know about the user.", "items": {"type": "string"}, "title": "Other
      Useful Info", "type": "array"}}, "required": ["age", "name", "interests", "relationships",
      "ai_instructions", "other_useful_info"], "title": "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSy27bMBC86yuIPduBJL9iHVukadHafcQJAkSGwNAriQ5FquQqqWv43wvRDzlG
        dRBWM5rZwe5uA8ZAriBhIEpOoqpVf7q+ma+//FybtZhOf8fXi8cPtws+0/Prz3+/Qa9VmOc1Cjqq
        roSpaoUkjd7TwiInbF2jSRyOxpNwEnmiMitUrayoqT80/TiMh/1w1I8GB2FppEAHCXsKGGNs699t
        RL3CP5CwsHdEKnSOFwjJ6SfGwBrVIsCdk464Juh1pDCaULepdaPUGUHGqExwpbrG+2d7Vndz4kpl
        LyulZje/7j4+lPNFJDfh493s/u3h+1m/vfWm9oHyRovTfM74E55cNGMMNK+89t6h/WFNLhVeyBkD
        boumQk1tdNimwAtMIQl7qZenkKTwFV+lTqGXgtSEFh25FJKnZS8FLjOpHdnGh/BwCrcWkZhXManZ
        J4talIwToxKZI26Jmdx/CKNf0Treiq9SaB0NlWizxmHeqEzq3PhWO3iXexf8r14eqt1px8oUtTXP
        7mJlkEstXZlZ5M6P7nyDwdF06S+qeXckUFtT1ZSReUHd2sbjaO8K3Q137HB0IMkQVx0+CMfBISe4
        jSOsslzqAm1tpT8wyOssnl5H8Wg8GOUQ7IJ/AAAA//8DAKSLy2ZpAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bd989822-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=pZWq9FjRbBo0OGThKFeNRfkYnXGFwu10yMUYxUebU2k-1720567072-1.0.1.1-iajxw3dHuwgZLczy_cxcZit12mXaoIBCmj7AVPH3x_qlajH_ybRMuHKuuueSFaL1x0pyoXLNRJlWUtmizXUz0Q;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=PBqZxizNf.ujPJ7M5TIgIgJOD8.ysQ0Que8WkkxCqF0-1720567072017-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '765'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9991'
      x-ratelimit-remaining-tokens:
      - '21998983'
      x-ratelimit-reset-requests:
      - 48ms
      x-ratelimit-reset-tokens:
      - 2ms
      x-request-id:
      - req_319a571b37196d495478266b7fce1def
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n\nGenerate a JSONPatch to update the existing schema instances.\n\n<schema
      id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'', ''grade'': ''8th'',
      ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}},
      "tools": [{"type": "function", "function": {"name": "PatchFunctionParameters",
      "description": "Respond with all JSONPatch operations required to update the
      previous function call.\n\nUse to correct all validation errors in non-compliant
      function calls,\nor to extend or update existing structured data in the presence
      of new information.", "parameters": {"type": "object", "properties": {"schema_id":
      {"description": "The ID of the function you are patching.", "type": "string"},
      "reasoning": {"description": "Think step-by-step, listing each validation error
      and the JSONPatch operation needed to correct it. Cite the fields in the JSONSchema
      you referenced in developing this plan.", "type": "string"}, "patches": {"description":
      "A list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT224TMRB9z1dY85yUXJSm3TcQLSAk1FZICNXRyvFOdt36hj2bNkT5Aj6An+CJ
        f0L8BrI3TdKKfbBG58w5Mx7PbnqMgaqgYCAbQdJ4PTi/u/h057X91ozX76+Xn+vPDw+X6/EILyeN
        gn5SuMUdSnpSnUhnvEZSzna0DCgIk+toNh5OT2fD2SgTxlWok6z2NJicTAfUhoUbDEfj6U7ZOCUx
        QsFue4wxtsln6tFW+AgFG/afEIMxihqh2CcxBsHphICIUUUSlqB/IKWzhDa1bVutjwhyTpdSaH0o
        3H2bo/gwKKF1+eHtm3eTc3M9eRx/v8Ev/uPXxdl0HcRRvc567XNDy9bK/YCO+D1evCjGGFhhsvZK
        kGwud4lXIgiDhCG+sGIMRKhbg5bSNWDDIcoGjShVxaHg8FqKCo2SN+0iKMmhzyGgiM4qW+eEi0cK
        QhKjBllAjSthibURA/MBlxjQSoxsGZzJKdLZFYYoUlcn2c6nRjFyKG43HJzPrgG9FhKfEpoMvlI2
        Pc8OXgndIodiw/Odc8bfXz/+/P6Z6TqIqgPPkjwjTmJYl1pFStU4eGdQu0wape9zEFGRsDkU7QJD
        rSxymPc5YKXIhWy5UobDdjvfwrNpbnv/i+e7aLvfQu1qH9wivlgqWCqrYlN2A07PEcn5rkSym+dt
        b58tMPjgjKeS3D3aZDgbnnd+cPjBDuzp2Y4kR0IfqWaz3q5DiOtIaMqlsjUGH9R++Xvb3j8AAAD/
        /wMAmEiL5fsDAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a21a96fade-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=TuSa61rhOu4thL5x8llA7mIPnfv248bB0eDGRo9Bf3A-1720567072-1.0.1.1-3eVS6J2x0ykroVF9O21IRWsR8DPiiOqhOeJCMRUUXGmXn93NS5RyN6IDuooKceewPjWAGLDlHuVITF39Pzsr5g;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=o.54OCjQvzE_HmL1nHMi1WVwINa.rONvdn6L550G6eE-1720567072081-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '701'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9994'
      x-ratelimit-remaining-tokens:
      - '14998154'
      x-ratelimit-reset-requests:
      - 35ms
      x-ratelimit-reset-tokens:
      - 7ms
      x-request-id:
      - req_e9228396d94c05c12c32e2f8f066ac59
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xSwW7iMBC95yusOQeUQCki5121aqUuqtS91CgyZpKYOnZkTwoI8e+rGEgo2hys
        0Xt5b55m5hgxBmoDGQNZCZJ1o0eL7e+37fPT0i7L3cfTWh5+Lf7K9OWldc3SQNwp7HqLkq6qsbR1
        o5GUvdDSoSDsXNP5JJk9zpN5GojablB3srKh0XQ8G1Hr1naUpJPZRVlZJdFDxj4jxhg7hrfLaDa4
        h4wl8RWp0XtRImT9T4yBs7pDQHivPAlDEA+ktIbQdLFNq/UNQdbqXAqth8bn73hTD4MSWucP/s/X
        6+x7v6/M2/si3W9o9zxdTHc3/c7WhyYEKloj+wHd8D2e3TVjDIyog/bDo1s6WyiNd3LGQLiyrdFQ
        Fx2OHESJHLIk5kHOIePwit/KcIg5KEPo0JPnkH2uYg5C5cp4cm0IEWAO71hjvUbHqBLEqELWenRM
        edZZbljwG3PoDCxV6PLWY9HqXJnCBucT/Ih5iv5Xry7VqV+ptmXj7NrfbQgKZZSvcofCh0ndLiy6
        mq7CAbU/bgIaZ+uGcrJfaDrbyWN6doXhZgf24XJdQJaEHvBpkkaXnOAPnrDOC2VKdI1T/T1Fp+gf
        AAAA//8DACI27/dOAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bde115ce-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=PZtzAK5HQmqo6kgBW3QcbUwGUYrRR5yJx48APAyeSVE-1720567072-1.0.1.1-ra_mwr6Ji610o70kQdwt58py595.K6I5dPvIYd1h8io29.bcXIlFrc9vrwLrl2B7SgtAAjbLEr8Z85lbag_5yw;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=pkHLT3PqINw8H0JZCxft3ela4Ti4._LYQHqdGvUo_Gg-1720567072097-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '592'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '14999854'
      x-ratelimit-reset-requests:
      - 12ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_43a0fb0b9aa65c6e888d25d275b832b8
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieF0yTNkmszbAiGHjZ0QLEUgiLTjlJJ1CR6axr4vw+yna92
        PhgUH9/jE0EdMsa4LviCcbWVpKw3w/nu88Oumsfl/eTtwRf56svve7N8fCx+fl1N+CAxcLMDRUfW
        jULrDZBG18EqgCRIqqPZbT69m+WzUQtYLMAkWuVpOL6ZDqkOGxzmo9tpz9yiVhD5gv3KGGPs0P6T
        R1fAK1+wfHDMWIhRVsAXpyLGeECTMlzGqCNJR3xwBhU6Apdsu9qYC4AQjVDSmHPj7jtcxOdBSWPE
        01tdxdun1be/P8pPq7vv9aqMj8Vyc9Gvk9771lBZO3Ua0AV+yi/eNWOMO2lbLrxSkIpEHSEIH6CE
        AE5BFH9G7+QY4zJUtQVH6Sr8sOYeAmkH7iN9zReHNQ9Yk3ZVd/AyvHSHfHAJjQZrTkGWpVZCukIo
        dIVOtpNI3gzWXKEtMZCIQInTiyujrSRI9RTQ9LpGV9tU1EpJu9HJTuqShDxqR1FgKbQjCBCp9wmR
        ZB2ko95PqQOISDLZ6IUL6VTSvc5WARWEvYhb9L6/XeoESZ+kdmlcrRcLhZZdO1tHrY5zkIXGtsBj
        oWTrKG+ahl/Nvsn+Fz/3UXPaW4OVD7iJ79aQl9rpuBUBZGzX4XIrs6Poc/tK6qvF5z6g9SQIX8Al
        2el43qny88M8o/NJDxKSNOf83Xic9T553EcCK0rtKgg+6NOjyZrsHwAAAP//AwAcRGYoMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a21e1e6446-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=y.pEDikVtCTo8dRTwaAevNOOXmC5iwnlLEl..uV2OuY-1720567072-1.0.1.1-K4KVUgN1YORSJjUyAXz8K_OTEv3iQGcdNwvU2s9hb4lTF0KNh5kmag9nl_Yt9CCzltEFSzOg7xBDRnkfhUYO0g;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=tFzeV0HM5orSEL5RNFDqz1dmGFF_vhr.1M_YYm1I18c-1720567072374-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1095'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '14999681'
      x-ratelimit-reset-requests:
      - 25ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_96c20c55852bab38216ae50d7cc93f71
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type":
      "function", "function": {"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties":
      {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieFkybtkuOwD3TFtjYD2sNSCIxMO0plUZDooUXg/z7Idj7a
        zQeD4uN7fCKofSaENIVcCqm3wLr2drzYff6xm97ePm7jz8nXFd6tVjcM/PyY326+y1Fi0GaHmg+s
        C021t8iGXA/rgMCYVCfX03x+dZ1fTzqgpgJtolWex5cX8zE3YUPjfDKdD8wtGY1RLsXvTAgh9t0/
        eXQFvsilyEeHTI0xQoVyeSwSQgayKSMhRhMZHMvRCdTkGF2y7RprzwAmskqDtafG/bc/i0+DAmvV
        zf3i8WW1yx9WDzr/eH/17dOvO/yC5/166VffGSobp48DOsOP+eW7ZkJIB3XHxRcOoFk1EYPyAUsM
        6DRG9WfyTk4ICaFqanScriL3a+kxsHHo/qWv5XK/loEaNq7qDx7Cc3/IR+fQZLSWHKAsjVbgCqXJ
        FSbZTiJ5O1pLTXVJgVVETpxBXFtTA2Oq50B20LWm2qaiTgrqjUl2DkKejOOoqFTGMQaMPPjEyNAE
        cDz4KU1AFRmSjUG4AKeT7ttsFUhjeFVxS94Pt0udMOkzGJfG1XmpsTDQt6ubaPRhDlAY6go8FRo6
        R3nbtvLN7Nvsf/HTELXHvbVU+UCb+G4NZWmciVsVEGK3DudbmR1En7pX0rxZfOkD1Z4V0zO6JDub
        zXpVeXqYJ3RxAJkY7Ck/v/yQDT5lfI2MtSqNqzD4YI6PJmuzvwAAAP//AwB+3iufMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bf7496de-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=HkOgoy6AZ4oJy2ZxwBZI0eI9swjouOudEku895Ee0bA-1720567072-1.0.1.1-ukLuT974QSISWhiG0LWM9g9tZOKKRL.nlqvdsxxSvew55fD5gNkKjB1kI9YnYUcBxvSimic15dQRjkaTPEnHIg;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=8QPDwWK9IDlP.RL4F8PAvfFL_CSjFZVn3J5CkZtsSdY-1720567072451-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1166'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14999768'
      x-ratelimit-reset-requests:
      - 8ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_f2409e21e4997a385b86645f3b0c589f
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTy27bMBC86ysInu1Cfse6tUiCpoe0SE9FHRBraiXT4Qvkqo1r6N8LSvIjaXUQ
        uDs7s8PF8pgxxlXJC8blDkgar8fr/d3j/na7eNSHP3c+Ptz7mZ1/gm/lx+WT4qPEcNs9SjqxPkhn
        vEZSzvawDAiESXWymuaL5SpfTTrAuBJ1otWexnM3nubT+ThfjCezgbhzSmLkBfuZMcbYsfsni7bE
        V16wfHTKGIwRauTFuYgxHpxOGQ4xqkhgiY8uoHSW0CbXttH6CiDntJCg9aVx/x2vzpc5gdbi9re1
        9uuXh+/78vPTcntzs6qe7n/Aw1W/XvrgO0NVY+V5Plf4OV+8a8YYt2A6Lr5SAEmiiRiED1hhQCsx
        il+Td3KMcQh1Y9BSugo/brjHQMqi/Ze+4cVxw4NrSNm6DzyElz7IR9dQiihAVSkpwJZCOluqZDuJ
        5O1ow6UzlQskIlLiDOJSKwOEqZ6C04OSVvUuFXVSYLYq2dnwYpKEvFOWonCVUJYwYKTBJ0aCJoCl
        QaVSAUUkSDaGVAlWJt232To4ieEg4s55P9wndcKkT6BsGlfnxWCpoG9nmqjkaQ5QKtcVeFdK6Bzl
        bdvyN7Nvs/+dn4dTe95b7Wof3Da+W0NeKaviTgSE2K3D9VZmJ9Hn7pU0bxaf++CMJ0HuBW2SnS2W
        vSq/vMsLul4MIDkCfcnPF5Ns8MnjIRIaUSlbY/BBdY+GV16Us1m12s6na+RZm/0FAAD//wMACQ9m
        rz0EAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c079fa9a517da-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=Pym_dtlfF1tocgM0m7Bvb4qePNhBpP4_T7uxIpKNHrg-1720567072-1.0.1.1-ezma2JCjePNh1nUyXvyUL4bs7f0V4UD9I_RdbJDKJCCm3xMwYS5.Olnib0U905KH_X_XRBvyFzGjH5tQeFoTsQ;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=NtBZs_IhhY_FNQ7daf8zGBVPVscQk4xLomwWPXzVGz8-1720567072463-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1674'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999835'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_68e9b549ff12461ae6a96d167dae9bde
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4RUTW/bMAy951cIvOziNF9Is/o2bN2AYR1SbEWH1YGhyLStVJYEUW4XBP7vg+R8
        FgPmgyG8Rz4+0qJ3A8ZAFpAyEDX3orFqeLO5/b4Rz6Wr7Mcfza9KTl5x6afm0/1sfg9JyDDrDQp/
        yLoSprEKvTS6p4VD7jGoThbT8fx6MV5MItGYAlVIq6wfzq7mQ9+6tRmOJ9P5PrM2UiBByp4GjDG2
        i+/gURf4B1I2Tg5Ig0S8QkiPQYyBMyogwIkkea49JCdSGO1RB9u6VeqM8MaoXHClToX7Z3d2Pg2K
        K5V79frtNy2vzXSyeOTq4cNDOSu+zO7O6vXSWxsNla0WxwGd8Uc8fVOMMdC8iblL7kX9eR+45I43
        6NHRGynGgLuqbVD70AbsMiBRY8NzWWSQZvBA6O6wMW6bQZKBQ05GS131pC24R9YSOmYdluhQCyS2
        5oQFM5r5Gpkw+gUd8eDjKorYYA0pg/Rpl4GxUcuhVVzgIaCO4Ejq8EH28AtXLWaQ7jLgVThMF0kW
        G47BX9FhI3kdY6X26JB8rBIUyXPW8OdofRU7UdES1dJSLyp4DM/gzriK66hTmKrHbuu26BEUGPrL
        9+FPGTxyT0ZnsOqSDLjMg2vXxsnHiFXXJf/rdENG5/3sR9YZi85LpNGFzVGBJJy0AbiYSAY/6/47
        vCNWOom6oISVvJFqmzCLnhLGdcGMr9GxC82ESS1UW0hdsUNrMeMqg27VwcV16Qb/Oq/2p+64ZspU
        1pk1vdkaKKWWVOf9LQr3jbyxfYkgt4rr3F5sKFhnGutzb55RB8H30+teD05/kBM7GS/2rDeeqxNx
        M5sN9haBtuSxyUupK3TWyeN6D7rBXwAAAP//AwCr8rgQ3QQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a21cd4239e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=1qJbkCwzvsxamnD6hQ47oZ_JkB0luQOCfYARyTK.MSo-1720567072-1.0.1.1-i5M3PP2ZJHkPlcQH1iFOGV7A656cyslFkfMaK615az7CCGDP7ezsHjrMuQ87.DeNJcO.woxxj2n0zXGki_0m2Q;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=PaLWiqOq0.LGb1ZhXOs4EVZVCLmJQKww5zUBoZYEdYw-1720567072515-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1182'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '14998501'
      x-ratelimit-reset-requests:
      - 38ms
      x-ratelimit-reset-tokens:
      - 5ms
      x-request-id:
      - req_7ca2d706d3d9d192b76518d7f22b1f23
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour
      Kevin! Let''s start with some basic questions to assess your French proficiency.
      \n\n**Fill in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA)
      soif  \nB) faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "UserProfile", "description": "", "parameters": {"properties": {"age": {"description":
      "The user''s age", "title": "Age", "type": "integer"}, "name": {"description":
      "The user''s name", "title": "Name", "type": "string"}, "interests": {"description":
      "The user''s interests", "items": {"type": "string"}, "title": "Interests",
      "type": "array"}, "relationships": {"description": "The user''s friends, family,
      pets,and other relationships.", "title": "Relationships", "type": "object"},
      "ai_instructions": {"description": "Prompt instructions that you as the AI assistant
      should always retain in subsequent conversations.", "items": {"type": "string"},
      "title": "Ai Instructions", "type": "array"}, "other_useful_info": {"description":
      "Any other details you would like to know about the user.", "items": {"type":
      "string"}, "title": "Other Useful Info", "type": "array"}}, "required": ["age",
      "name", "interests", "relationships", "ai_instructions", "other_useful_info"],
      "title": "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//RJDBasMwEER/RcytICe2E0eJjr31G0oJsryu1dhaI22aQvC/F7ekvb5h
        3wx7R+hgUXXucOgbX5yOrSn2bncq2vZ4Kupj2VRlZ3Z746HB7Qd5gYUfnGw8T/NIEjhCwydyQh1s
        ZeqyOZjSVBoTdzTCwnnP1yh524dEN06XvP2JfkF/jX61FJ/1Kho4eMqwr3eE2NEXbKkxUc7unWDv
        SDzS6sw5ZHFR1huOQnEd9qJkCPGiZCDlOSXyolzMN0oqZPX8pHoXpg0WjT7EkIdzIpc5wiILz1je
        NK6PojnxNMtZ+EIxw5r9TkNY3PiPmmYtf7zhj1f1snwDAAD//wMAnqtLjFoBAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2ba45cfe5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '1.168'
      x-request-id:
      - ab889c4a-c640-4eca-a326-b0a4b4af2372
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT227bMAx991cIek4KO22aNo/DLsCyrQO6YQWWQlBk2lEqiYJEF80C//sg27lu
        fjAoHp7DI4LaZYxxXfI542otSVlvxvebD982799mvz5/uXazjf7+VGhVL35OX+nPgo8SA1cbULRn
        XSm03gBpdD2sAkiCpFrMJvn0dpbPig6wWIJJtNrT+PpqOqYmrHCcF5PpwFyjVhD5nP3OGGNs1/2T
        R1fCG5+zfLTPWIhR1sDnhyLGeECTMlzGqCNJR3x0BBU6Apdsu8aYE4AQjVDSmGPj/tudxMdBSWOE
        frhZPS4mD3j7yT2t5ddH9fFdbn+Yk3699NZ3hqrGqcOATvBDfn7RjDHupO248EZBKhJNhCB8gAoC
        OAVRvBYXcoxxGerGgqN0Fb5bcg+BtAP3L33J57slD9iQdnV/8DK89Id8dAoVoyWnIKtKKyFdKRS6
        UifbSSRvR0uu0FYYSESgxBnEldFWEqR6CmgGJaPrdSrqpKRd6WRnL+RRO4oCK6EdQYBIg0+IJJsg
        HQ0qlQ4gIslkYzBcSqeS7nm2DqggbEVco/fD7VInSPoktUvj6rxYKLXs29kmajV0CrLU2BV4LJXs
        HOVt2/Kz2bfZ/+LnIWoPe2uw9gFX8WINeaWdjmsRQMZuHU63MtuLPnevpDlbfO4DWk+C8AVckp3e
        zXpVfnyYR/T+ZgAJSZpj/vauyAafPG4jgRWVdjUEH/Th0WRt9hcAAP//AwCftFTJMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1b835f94f-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=hcZyIuI5vIWCZrwOwAIp.MdzR5jVPAfF4fmAjGxvQy0-1720567072-1.0.1.1-uM022QO_NaW_8UBVVEwiLBqzkFa9IN5ZKUJzri5XwGcxlmPmVhxTOyae_CUn0fiZsL0MTLHvNeEA_Ik9OgOmUQ;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=UHojPU8weR0ljSgNGdyCrh9hLDNPLv.F1_3xK31YXyc-1720567072590-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1291'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '14999646'
      x-ratelimit-reset-requests:
      - 22ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_fed5643feab95e98fd21f49cdf9918c2
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieDEzcNktuGtssKtNgG9LQUAivTjhJ9QaK3BIH/+yDb+Wg3
        HwyRj+/xiaCOGWNclXzJuNwASeP1eLG9f94+ft+vvt1B+VD8yf3zj9l2X+zuf76s+Cgx3NsWJZ1Y
        n6QzXiMpZ3tYBgTCpDqZT/PZ7TyfTzrAuBJ1otWexjduPM2nN+N8Np4UA3HjlMTIl+xXxhhjx+6f
        LNoS93zJ8tEpYzBGqJEvz0WM8eB0ynCIUUUCS3x0AaWzhDa5to3WVwA5p4UErS+N++94db7MCbQW
        vjmUXx++7J5nxZNchdXd4+NL8Xn6dNWvlz74zlDVWHmezxV+zi8/NGOMWzAdF/cUQJJoIgbhA1YY
        0EqM4vfkgxxjHELdGLSUrsKPa+4xkLJo/6Wv+fK45sE1pGzdBx7Crg/y0TWUIgpQVUoKsKWQzpYq
        2U4ieTtac+lM5QKJiJQ4g7jUygBhqqfg9KCkVb1JRZ0UmDeV7JyEvFOWonCVUJYwYKTBJ0aCJoBN
        8WS05pUKKCJBsjEIl2Bl0n2frYOTGA4ibpz3w31SJ0z6BMqmcXVeDJYK+namiUqe5gClcl2Bd6WE
        zlHeti1/N/s2+9/5dTi1573VrvbBvcUPa8grZVXciIAQu3W43srsJPravZLm3eJzH5zxJMjt0CbZ
        2XTRq/LLu7ygi9kAkiPQl/zt9CYbfPJ4iIRGVMrWGHxQ3aPhlRcS8/miKIq84lmb/QUAAP//AwCe
        Vhf6PQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a10dab1742-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=MFNB0iUtx1uKiWHyr3fZnAHVwpx71T6fsaB7HWhEmD0-1720567072-1.0.1.1-vIoCv8bXXASmozagpwiYdAVnXDU.FxhKz7ITQ.u3HDgI3q_c1eNYgvc1hDygy4w3VFtHeWV3rTCJQVU.Y9XvKA;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=Cbq_NTMoyt1zXQps.oItu.LkE1oy8Gy5S3aN77wu744-1720567072695-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1605'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21999680'
      x-ratelimit-reset-requests:
      - 7ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_4df8f82b2ce16edeaadf7d920e024a71
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT227bMAx991cIek4Ku2kSNI8rtgUD1mHotmJYCkGRaUepbqDorm3gfy9kO5dm
        84NB8fAcHhHULmOM65IvGFcbScoGM77efrzd3lX5xN3e/J1/mj0uqx9R3zb3N/LXdz5KDL/egqI9
        60J5GwyQ9q6HFYIkSKrF/DKfzub5vOgA60swiVYHGk8upmNqcO3HeXE5HZgbrxVEvmB/MsYY23X/
        5NGV8MwXLB/tMxZilDXwxaGIMY7epAyXMepI0hEfHUHlHYFLtl1jzAlA3huhpDHHxv23O4mPg5LG
        iPnd0n7+5j58KSaAzz9fn+zX+yX+fj3p10u/hM5Q1Th1GNAJfsgvzpoxxp20HReeCaUi0URAERAq
        QHAKongqzuQY4xLrxoKjdBW+W/EASNqB+5e+4ovdiqNvSLu6PwSJj/0hH51CxWjFCWVVaSWkK4Xy
        rtTJdhIp2tGKK28rjyQiUOIM4spoKwlSPaE3g67R9SYVdVLSrnWyk7AkFLx2FIWvhHYECJEGnxBJ
        NigdDX4qjSAiyWRjEC6lU0n3fbZGrwBfRNz4EIbbpU6Q9Elql8bVebFQatm3s03Uaj8HWWrfFQRf
        Ktk5ytu25e9m32b/ix+GqD3srfF1QL+OZ2vIK+103AgEGbt1ON3KbC/60L2S5t3i84DeBhLkH8El
        2cnsslflx4d5RK+vBpA8SXPMX01n2eCTx5dIYEWlXQ0YUB8eTdZmbwAAAP//AwC4kdbWMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1b973ce5c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=BfEVx7GkB4uQ04BFl1nRO3SYywi1UCQAjMLDogPDKM8-1720567072-1.0.1.1-5a60uqnIOWBk16sRKAQIr6P95HdUKVffumV.JuK8noe.yXRunpwv7v98RWB2Cp2BEnqOoC0kt5VzAUO8G_1i9Q;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=v0m9Z1_z2ZlfkBV0L44BVUF9mK2rATMiS_PglHjYvGE-1720567072727-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1587'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999845'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_a297f0fcc3d1974445206ecf474538e5
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools":
      [{"type": "function", "function": {"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties":
      {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieDE+ejyW3AlsMKbMNWbCiWQlBl2lEqiYJED8kC//dBtvPR
        bj4YFB/f4xNBnTLGuC75mnG1k6SsN+PV/uPnvfn5LcjV8Ri/3JeLh8fi+6fcwN3Dgo8SA5/3oOjM
        eqfQegOk0fWwCiAJkupkOc3ni2W+nHSAxRJMotWexjMcT/PpbJzPx5NiIO5QK4h8zX5ljDF26v7J
        oivhwNcsH50zFmKUNfD1pYgxHtCkDJcx6kjSER9dQYWOwCXXrjHmBiBEI5Q05tq4/0438XVO0hix
        2TWmmbrDpvm6ORzu/ywXd+h/fHh/06+XPvrOUNU4dZnPDX7Jr980Y4w7aTsuHChIRaKJEIQPUEEA
        pyCK35M3coxxGerGgqN0FX7acg+BtAP3L33L16ctD9iQdnV/8DK89Id8dAtNRltOQVaVVkK6Uih0
        pU62k0jejrZcoa0wkIhAiTOIK6OtJEj1FNAMukbXu1TUSUn7rJOds5BH7SgKrIR2BAEiDT4hkmyC
        dDT4qXQAEUkmG4NwKZ1Kuq+zdUAF4SjiDr0fbpc6QdInqV0aV+fFQqll3842UavzHGSpsSvwWCrZ
        OcrbtuWvZt9m/4ufhqi97K3B2gd8jm/WkFfa6bgTAWTs1uF2K7Oz6FP3SppXi899QOtJEL6AS7LF
        vOhV+fVdXtHVfAAJSZprfja7ywafPB4jgRWVdjUEH3T3aHjlhYJ8uSqKIq941mZ/AQAA//8DAOtx
        3Wo9BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a10eca15e1-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=_SXzibfdbqIW.pb6RRbPDaJhVaglV8Y8zqpJBJaHQGE-1720567072-1.0.1.1-1TU74wADoxExYMV_x67I1xaMTq4e8TiShaCBTzfZBX7PoymrGFoaFZYXabW.mf3CbYyP8xYCe3iThnT56N.I3A;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=9JYIY5onAMN32i7mewbAJKA7O0ktmaFPcHkva8ebuQU-1720567072745-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1749'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999844'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_edd0be9c75407f89409437cfadaf5509
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}], "model": "gpt-3.5-turbo",
      "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOidFPpZ0yW3Fhg0r1kOxS7EUAiPTjmJZVCW6aBD4vw+ynY92
        88Gg+PgenwjqmAkhTS7XQuodsK69Ha/23x729vFr8eVX9QDzR5tXP6r83vPPF/9bjhKDtnvUfGLd
        aKq9RTbkelgHBMakOr2dTRbL28nttANqytEmWul5PL9ZjLkJWxpPprPFwNyR0RjlWvzJhBDi2P2T
        R5fjm1yLyeiUqTFGKFGuz0VCyEA2ZSTEaCKDYzm6gJoco0u2XWPtFcBEVmmw9tK4/45X8WVQYK2C
        /d0dPtimaF7p++6pepk/rQ73j9VVv1764DtDReP0eUBX+Dm//tBMCOmg7rj4xgE0qyZiUD5ggQGd
        xqhepx/khJAQyqZGx+kq8riRHgMbh+5f+kaujxsZqGHjyv7gIVT9YTK6hqajjeQARWG0ApcrTS43
        yXYSmbajjdRUFxRYReTEGcS1NTUwpnoOZAdda8pdKuqkoN6aZCdhSciTcRwVFco4xoCRB58YGZoA
        jgeVwgRUkSHZGFI5OJ1032fLQBrDQcUdeT/cJ3XCpM9gXBpX56XG3EDfrm6i0ac5QG6oK/CUa+gc
        Tdq2le9m32b/i5+HqD3vraXSB9rGD2soC+NM3KmAELt1uN7K7CT63L2S5t3iSx+o9qyYKnRJdrH8
        3KvKy8O8oKtPA8jEYC/55XKWDT5lPETGWhXGlRh8MOdHk7XZXwAAAP//AwBALVtfMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bc5724ee-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=OP83xi2_XiOaGCGTEVAK9x3AfAYpRDHZcU5XALGKytQ-1720567072-1.0.1.1-JXeimXK6gNoeupxcddG23O0I5AmGJYzkDO1dQH0_53hEjrMcdgJgrFrGYVm1k5Khzn0_.2jx1B7w4egmm8TMRQ;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=9JYIY5onAMN32i7mewbAJKA7O0ktmaFPcHkva8ebuQU-1720567072745-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1611'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999681'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_c271a2bb8fc624a725ae2785b7e6bf39
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieF3TVtk+OAHnZYOmDF0mYpBEamHaX6gkSvDQL/90G289XN
        B4Pi43t8Iqh9xhhXJZ8xLjdA0ng9nm4f5lt9/+PxffGz/l4s58v518ft8vnXzW4x56PEcOstSjqw
        rqQzXiMpZ3tYBgTCpFrcXeeT27v8rugA40rUiVZ7Gn+5moypCWs3zovrycDcOCUx8hn7nTHG2L77
        J4+2xA8+Y/nokDEYI9TIZ8cixnhwOmU4xKgigSU+OoHSWUKbbNtG6zOAnNNCgtanxv23P4tPgwKt
        BeQvdvr0tHjIvzUvixuQyzB9rt6XZ/166Z3vDFWNlccBneHH/OxTM8a4BdNx8YMCSBJNxCB8wAoD
        WolR/Ck+yTHGIdSNQUvpKny/4h4DKYv2X/qKz/YrHlxDytb9wUN46w/56BwqRitOAapKSQG2FNLZ
        UiXbSaRoRysunalcIBGREmcQl1oZIEz1FJwelLSqN6mokwKzVslO6pmEvFOWonCVUJYwYKTBJ0aC
        JoClwV2lAopIkGwMqRKsTLqX2To4iWEn4sZ5P9wudcKkT6BsGlfnxWCpoG9nmqjk4DdAqVxX4F0p
        oXOUt23LL2bfZv+LX4eoPe6tdrUPbh0/rSGvlFVxIwJC7NbhfCuzg+hr90qai8XnPjjjSZB7Q5tk
        J8VNr8pPD/OETg8gOQJ9yt/m99ngk8ddJDSiUrbG4IM6Ppqszf4CAAD//wMA8d6ZvDMEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bf1124fa-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=CoMHg.4DYLXdOZpXCjPi9ICCgfH.Z41ISoZ2I.uGMwE-1720567072-1.0.1.1-lneuism2XOHOTbh4jLYl3AiEJyDnCTujmyMVDmFwbrsdaS9HDaSk6rGqX6sa_HU_V4SK_ttWyl5cOGUGliZTcg;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=7aAlvKD12x.07LxoQz_xE_lpYO9eWGxiPPa95qiC1Q4-1720567072747-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1573'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9990'
      x-ratelimit-remaining-tokens:
      - '14994599'
      x-ratelimit-reset-requests:
      - 59ms
      x-ratelimit-reset-tokens:
      - 21ms
      x-request-id:
      - req_b1c14227d9302c88f142d2fb5d4d70bc
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTY/TMBC951dYPrfI3bZbtceVgMIBlgMgoCvLdSapu7bH2JPVlir/HTlJP3Yh
        h8gzb96b59H4WDDGTclXjOudIu2CHS/3bz/t99vn9Zf5kzjQUryz6TD78GPq/yzWfJQZuN2DphPr
        jUYXLJBB38M6giLIqpPFjZjfLsRi0gEOS7CZVgcaz3B8I25mYzEfT6YDcYdGQ+Ir9qtgjLFj988W
        fQnPfMXE6JRxkJKqga/ORYzxiDZnuErJJFKe+OgCavQEPrv2jbVXACFaqZW1l8b9d7w6X+akrJVP
        C3enf4pv2/X993L/+/PWfL2bv7//eNWvlz6EzlDVeH2ezxV+zq9eNWOMe+U6LjxTVJpkkyDKEKGC
        CF5Dkk+TV3KMcRXrxoGnfBV+3PAAkYwH/y99w1fHDY/YkPF1HwQVH/tAjK6hHFFUVWW0VL6UGn1p
        su0sMmlHG67RVRhJJqDMGcS1NU4R5HqKaHPxaMOtqXe5qJNSbmuyndwlCwU0npLEShpPECHR4BMS
        qSYqT4NKZSLIRCrbGCyWyuus+zJbR9QQDzLtMIThPrkTZH1SxudxdV4clEb17VyTjB46RVUa7AoC
        llp1jkTbtvzF7Nvif+eH4dSe99ZiHSJu06s15JXxJu1kBJW6dbjeyuIk+tC9kubF4vMQ0QWShI/g
        s+xc3Paq/PIuL+hyPoCEpOwlfysmxeCTp0MicLIyvoYYoukeDa+C1CAWy+l0KipetMVfAAAA//8D
        AJ1FKyg9BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1be36174b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=2P5_jfSr6SJOABD_ErtBtz4i79QdOZCxzGR1MQD3FXA-1720567072-1.0.1.1-ne77FssAJ2ispKrhcYQ1tgiVVD0uLdsDA9J2AV0BNX2tjzPB5P1KKcSJeKUOstXAxcmB3qNp40MmAQ.7x6ABXw;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=BaZbKMWcRurvXEKFyrUfghrADk5VEixplRwyONxiI.4-1720567072780-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1540'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9992'
      x-ratelimit-remaining-tokens:
      - '21999742'
      x-ratelimit-reset-requests:
      - 45ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_699e34457935f0f8ef8639df35ee2c92
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieF3TZLk9uwbt2GbbdiQJdCYGTaUSqLmkRvLQL/90K289XN
        B4Pi43t8IqhdJoQ0pVwKqTfAuvF2uth+/LG9o3j/vrj9sLgrq2/xYTa/2dCnyL/lJDFovUXNe9aF
        psZbZENugHVAYEyqxfwyn72b5/OiBxoq0SZa7Xl6dTGbchvWNM2Ly9nI3JDRGOVS/MqEEGLX/5NH
        V+KzXIp8ss80GCPUKJeHIiFkIJsyEmI0kcGxnBxBTY7RJduutfYEYCKrNFh7bDx8u5P4OCiwVv0t
        f34vtl8Wl3cPc3Dt/Wcz+3p73ZYn/QbpF98bqlqnDwM6wQ/55ZtmQkgHTc/FZw6gWbURg/IBKwzo
        NEb1p3gjJ4SEULcNOk5XkbuV9BjYOHT/0ldyuVvJQC0bVw8HD+FpOOSTU6iYrCQHqCqjFbhSaXKl
        SbaTSN5NVlJTU1FgFZETZxTX1jTAmOo5kB11rak3qaiXgmZtkp29kCfjOCqqlHGMASOPPjEytAEc
        j34qE1BFhmRjFC7B6aR7nq0DaQwvKm7I+/F2qRMmfQbj0rh6Lw2WBoZ2TRuN3s8BSkN9gadSQ+8o
        77pOns2+y/4XP45Rd9hbS7UPtI5v1lBWxpm4UQEh9utwupXZXvSxfyXt2eJLH6jxrJie0CXZq5vF
        oCqPD/OILq5HkInBHvPXN1fZ6FPGl8jYqMq4GoMP5vBosi57BQAA//8DAK6g/9wzBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a21d23251c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=GIkLmkZE.7R6lltql2G_pz9QXidLVyrIyu9oS6B3w.Q-1720567072-1.0.1.1-ax718Bfl4n0on8Q1fU33J8lGbbZUjEWAvqGQ2VfX8uDxz5n74f0zB9UWXWQOz9PyuGSWO7lxklUutJ2bKyeW7A;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=1PCDqYESRnEQ2v7I5ZCuZ15gAShdivwW36Z8rb.bGzU-1720567072786-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1617'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '14999812'
      x-ratelimit-reset-requests:
      - 16ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_18305c41edb05697fe1f52c29ef0cace
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4RUTW/bMAy951cQvOzidE7SzotvG5AWGNCuHTJsax0Yis1YSmVJkORgaeD/PshO
        81EMaA6GwMf3+EiQ2Q0AUJSYAhac+aI2cjhdz+7W1y+z9Z8bxh/X80v5ou9+8N9l+fhQYRQYermm
        wr+yLgpdG0leaNXDhSXmKaiOknF89SmJk1EH1LokGWiV8cNLPRzH48thfDUcTfZErkVBDlN4GgAA
        7LpvsKhK+ospxNFrpCbnWEWYHpIA0GoZIsicE84z5TE6goVWnlRwrRopTwCvtcwLJuWxcP/bnbyP
        c2JS5pvt/JNcffeb2U1SGv31y1JMH+6a+5N6vfTWdIZWjSoO8znBD/H0TTEAVKzuuPfMF/x6n3jP
        LKvJk3VvpACQ2aqpSfnQBu4ydAWnmuWizDDN8Kcje0u1ttsMowwtMaeVUFUHzjlB48h+cBDKRsAq
        isCSZKGo48K4CJgqQShPlpx3wNmGYEmkwFi9ESWVFzDn5AgUUQlew5KgMWXYBBAKPCc4eoDe3EXn
        xYQOyWWYPu0y1KazZMlIVtBrAu+CH1nVRzZMNpRhOk7a6D1O6OiMlOE3slQLxjN8n35o+UzjKaQ4
        z6Bmz90UF+8rnc3zTG2XYcFChTTDW20rpjq41FUfm/Gm3Is5nx9SfzHvtMqwbRctnq1DO/jfe7F/
        tYczkroyVi/dm6vAlVDC8bzfkrBPzmvTlwhyi+5cm7MLRGN1bXzu9TOpIPg5Tno9PP5BHNHRaLxH
        vfZMHoHpaDrYW0S3dZ7qfCVURdZY0Z0vrkxeUJxMJ5NJvMJBO/gHAAD//wMANafIO8cEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1b803fabe-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=xIitk4V1aBHMf5TslPVWS2LqlSX9vqNkqy7Csmx0PKc-1720567072-1.0.1.1-XhQBloXckBGGIsoDNiC_IkinzBD_u2yzO1gKkjbSO0ujGg4.tzdOYiwGPiw6Kug4oKyGfl3df5Z3ZP7iHjOz6g;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=EunUIrwvr66F.EiFVHC94TcONYlaMUIFYj0EMkUx_J4-1720567072807-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1676'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9994'
      x-ratelimit-remaining-tokens:
      - '21999563'
      x-ratelimit-reset-requests:
      - 31ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_eb77f1d463b99969f890943d56220af9
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieD4zQN6tuGDhhWoCu2w7Y2haDItKNEEjWJLhIE/u+DHOer
        mw8GyUc+PhHkPmOM64qXjKuVJGW9Gd+tPz+usdkUs0+//MMjfv2TVxKe8/X3j7spH6UKXK5B0bHq
        g0LrDZBGd4BVAEmQWCfzIp/dzvP5pAcsVmBSWeNpfIPjIi9uxvlsPBl41Qq1gshL9pIxxti+/yeJ
        roItL1k+OkYsxCgb4OUpiTEe0KQIlzHqSNIRH51BhY7AJdWuNeYCIEQjlDTm3Pjw7S/s85ykMeKn
        /WJ+bJ/u3749F/dq+/A7ts1t8dRc9DtQ73wvqG6dOs3nAj/Fy3fNGONO2r4WthSkItFGCMIHqCGA
        UxDF2+QdHWNchqa14Cg9he8X3EMg7cD9W77g5X7BA7akXXNwvAybg5OPLqHkUZB1rZWQrhIKXaWT
        7ESSd6MFV2hrDCQiUKoZyJXRVhKkfApoBiajm1VK6qmkXeokZ8HLSSLyqB1FgbXQjiBApEEnRJJt
        kI4GlloHEJFkkjGEKulU4r2ONgEVhJ2IK/R+eE/qBImfpHZpXL0WC5WWh3a2jVod5yArjX2Cx0rJ
        XlHedR2/mn2X/c9+HazutLcGGx9wGd+tIa+103ElAsjYr8PlVmZH0tf+Stqrxec+oPUkCDfgEu1s
        OlwJP9/lGb2bDSAhSXOO3xazbNDJ4y4SWFFr10DwQfdHw2svqum0ni9vijvgWZf9BQAA//8DAG4a
        YpQ9BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bf749e68-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=ZdrX1DSt1LC3CTU3K5BYs8jXlevr6TnXASoadYiY2M0-1720567072-1.0.1.1-iKYaAI4ud3PDnu5p8I1Xhw1sdw5L3ga_WbCG6SltwzWrpeJvfk11QAtS__UjRQ3lN8KvZctOpzqCKurmN4NGkw;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=8As9wrc8P4wRHeuV.2Wu.8hgTQNuyq9g4eLOgChJ4xE-1720567072838-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1735'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '21999560'
      x-ratelimit-reset-requests:
      - 16ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_955f32eaf69d4d5378577a2794bc831e
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTXW/bMAx8968Q9JwUTpMsq9+2odiCosWwrRu2pRAUmXaUSqIg0UPTwP99kO18
        tJsfDJHHO54Iap8xxnXJC8bVRpKy3oyvttd3W/829+778/Ku+QAq3H5efvl5f/t8PeWjxMD1FhQd
        WBcKrTdAGl0PqwCSIKlOFpf5/M0iX0w6wGIJJtFqT+PpxXxMTVjjOJ9czgfmBrWCyAv2O2OMsX33
        Tx5dCU+8YPnokLEQo6yBF8cixnhAkzJcxqgjSUd8dAIVOgKXbLvGmDOAEI1Q0phT4/7bn51Pg5LG
        iOby29eb5c2yeq9+vftRLT5u3P3t4+7TWb9eeuc7Q1Xj1HFAZ/gxX7xqxhh30nZceKIgFYkmQhA+
        QAUBnIIo/kxeyTHGZagbC47SVfh+xT0E0g7cv/QVL/YrHrAh7eo+8DI89kE+OodSREFWlVZCulIo
        dKVOtpNI3o5WXKGtMJCIQIkziCujrSRI9RTQDEpG15tU1ElJu9bJzooXkyTkUTuKAiuhHUGASINP
        iCSbIB0NKpUOICLJZGNIldKppPsyWwdUEHYibtD74T6pEyR9ktqlcXVeLJRa9u1sE7U6zEGWGrsC
        j6WSnaO8bVv+YvZt9r/zw3Bqj3trsPYB1/HVGvJKOx03IoCM3Tqcb2V2EH3oXknzYvG5D2g9CcJH
        cEl2Op/2qvz0ME/o1WwACUmaU342W2SDTx53kcCKSrsagg/6+GiyNvsLAAD//wMAEBSy0zMEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c079fd99167a5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=1haEgNDVxrY6bMA0EsWc1H.P4PHaqN7q7m_bnOeDxaQ-1720567072-1.0.1.1-INFQU44kCN0f32RMHrniSBvFX5jNpAuX82utLz6Db3xklDa8R9dzIXwB3_n6S5gDxBnfsJSnlU.U3zCtlsGDZw;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=zGvRdraOs_ErMzPlGKA7vucFtEY3rSyceSbMM8maDGQ-1720567072885-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1905'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999849'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_dcfd16e561db91a38135a71eb9d46092
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieD0yRNk9uwrsO6YsCA3pZCYGTKUaKvSXTXIPB/H+Q4X+18
        MEg+8vGJIPcFY1xXfMG4XANJG8xwvvn6c6Pu4Euq/qx+Parvd/fz+3mwk3T/NOeDXOFXG5R0rPok
        vQ0GSXt3gGVEIMyso9lNOb2dlbNRB1hfoclldaDhxA9vypvJsJwOR+O+cO21xMQX7HfBGGP77p8l
        ugrf+IKVg2PEYkpQI1+ckhjj0Zsc4ZCSTgSO+OAMSu8IXVbtGmMuAPLeCAnGnBsfvv2FfZ4TGCNu
        /z6PH0db93C7bR4+P1e79be3p9fNj4t+B+pd6ASpxsnTfC7wU3zxrhlj3IHtavGNIkgSTcIoQkSF
        EZ3EJF5H7+gY4xDrxqKj/BS+X/KAkbRD97F8yRf7JY++Ie3qgxMgbg9OObiEskcRlNJSgKuE9K7S
        WXYmKdvBkktvlY8kElKu6cml0RYIcz5Fb3omo+t1TuqowK50lnMkCl47SsIroR1hxES9TkwETQSX
        /dFgyZWOKBJBltETV+Bk5r2O1tFLjDuR1j6E/j25E2Z+Au3yuDotFisNh3a2SVoe5wCV9l1C8JWE
        TlHZti2/mn1b/M9+6a32tLfG1yH6VXq3hlxpp9NaRITUrcPlVhZH0pfuSpqrxechehtIkN+iy7Tj
        u/5K+Pkuz+h82oPkCcw5PplNi14nT7tEaIXSrsYYou6OhqsgJJaz+Xg8LhUv2uIfAAAA//8DAEzg
        pWM9BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1b89422d2-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=ZoWkAl8ItRnj4nukiRa2k.Dc0mMdPN.U6_qQ7X1ii4A-1720567072-1.0.1.1-291SlSO.BsC0LEfyIz0bwI8aqQqGtIWMuZWdA0QS4RsjNIiBj1LyIXWKqlnd_DSdqlRdV6WuujITZ4w0_SHu1g;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=7ZOZ0R8l4TNIilekFzf5hIn70I6wZ_RfbxUBrdokKJY-1720567072900-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1780'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '21999812'
      x-ratelimit-reset-requests:
      - 41ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_80099a47a1ffc40dc495161c90813835
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_SQfVwuwGiRivoeNIlTktcaIi",
      "function": {"name": "UserMemory", "arguments": "{\"age\": 40, \"name\": \"Joe\",
      \"interests\": [\"drones\"], \"ai_instructions\": []}"}}]}, {"content": "Error:\n\n```\n1
      validation error for UserMemory\nrelationships\n  Field required [type=missing,
      input_value={''age'': 40, ''name'': ''Joe''..., ''ai_instructions'': []}, input_type=dict]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}}, ''required'': [''age'', ''name'', ''interests'', ''relationships'',
      ''ai_instructions''], ''title'': ''UserMemory'', ''type'': ''object''}\n```\nPlease
      respond with a JSONPatch to correct the error for schema_id=[call_SQfVwuwGiRivoeNIlTktcaIi].",
      "role": "tool", "tool_call_id": "call_SQfVwuwGiRivoeNIlTktcaIi"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3RTXU/bMBR976+4ui+8tCxtKYE8MmAwaYhStkkjVWXsm8Tg2J7t8LGq/31yUtqC
        tjxEzjn3nnN8dbPsAaAUmAHyigVeWzU4fji7ejg9F9MXOZ0e6ZPpza+ncjZOT0pzPcN+7DD3D8TD
        W9c+N7VVFKTRHc0dsUBRdZiOkslhmqTDlqiNIBXbShsGB2YwSkYHg2QyGI7XjZWRnDxmcNcDAFi2
        7xhRC3rBDJL+G1KT96wkzDZFAOiMiggy76UPTAfsb0ludCAdU+tGqR0iGKMWnCm1Ne6e5c55Oyem
        1OL0T31ycTr6fjE7+zo+sxNxUEyS+vOuXyf9attARaP5Zj47/AbPPpgBoGZ123vNAq/O14XXzLGa
        Ajn/QQoAmSubmnSI18Bljp5XVLOFFDlmeZd7Ni1+PDfPX+SNfDJ0daluHwNnlzLHfo6OmDda6rKt
        v60I9hwpFm19Ja3fg0KSEiA91NJ7qUtguv109LuRjsQ+/CTQRAKCASYEhIqg8eT2PFgKPsLhf7r7
        bQgbb0s+x+xumaOxbRYmxBtZtcCndwIt98RUQzlmyxyjVRTIcVaRU4Y/thXfXrkzRchxvlrNV/hu
        fKvev87z9Wm1WTtlSuvMvf+wRVhILX216EYY5++DsZ1FlJu3692821i0ztQ2LIJ5JB0Fj8Zpp4fb
        H2rLppM1GUxgaosfD0e9dUL0rz5QvSikLslZJ9ttx8IuxCQ9HCdpcZxgb9X7CwAA//8DALqo5+n2
        AwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a61c36faba-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1021'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999572'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_1cd78c582ca8358687e6c4bbf3014c46
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieD89Usvg1osXYoeuhhGLAUgiLTjlJJ1CR6SBb4vw+yna9u
        PhgiH9/jE0EdM8a4LnnBuNpKUtab8Wr38LJ7UvPn1+9h8WeH++nzt/fdg9/Lp1+vfJQYuNmBohPr
        k0LrDZBG18MqgCRIqpPlNF/cLfPlpAMslmASrfY0nuN4mk/n43wxnswG4ha1gsgL9jNjjLFj908W
        XQl7XrB8dMpYiFHWwItzEWM8oEkZLmPUkaQjPrqACh2BS65dY8wVQIhGKGnMpXH/Ha/OlzlJY8Tm
        8AUof1z9aFbRv5Tl5/vlvfm6fbzq10sffGeoapw6z+cKP+eLD80Y407ajgt7ClKRaCIE4QNUEMAp
        iOL35IMcY1yGurHgKF2FH9fcQyDtwP1LX/PiuOYBG9Ku7gMvw3sf5KNrKEUUZFVpJaQrhUJX6mQ7
        ieTtaM0V2goDiQiUOIO4MtpKglRPAc2gZHS9TUWdlLQbneyseTFJQh61oyiwEtoRBIg0+IRIsgnS
        0aBS6QAikkw2hlQpnUq6t9k6oIJwEHGL3g/3SZ0g6ZPULo2r82Kh1LJvZ5uo1WkOstTYFXgslewc
        5W3b8pvZt9n/zm/DqT3vrcHaB9zED2vIK+103IoAMnbrcL2V2Un0rXslzc3icx/QehKE7+CS7Gw+
        71X55V1e0NViAAlJmkt+Pltlg08eD5HAikq7GoIPuns0vPKiXCzvZvmyWuU8a7O/AAAA//8DALoY
        BM09BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1bd67fad6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=pQ7znqJlMScDOXDWrAwCrAK_qoAqIkSi9GFot5ZEh8E-1720567072-1.0.1.1-aYUuvLKTtdtOSKcC__o3KhmkGmww6gmmgw5E2ed2UbgJoWh8o0JOY2eGwb8p56H5xsHQ.k3cdb6bf3dp4EdHcg;
        path=/; expires=Tue, 09-Jul-24 23:47:52 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=BEfkIhW8oiNlw7ojehL7HgCc8Iee1UWl.a90s1l4IWM-1720567072953-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1836'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9995'
      x-ratelimit-remaining-tokens:
      - '21999389'
      x-ratelimit-reset-requests:
      - 27ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_63196cdb989ee8cfcf769e68e18d0261
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_ySbGULC67TaVWR3dokZbW9vi", "function": {"name": "UserProfile", "arguments":
      "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\": [\"Remember
      that Kevin is being assessed for his French proficiency.\"], \"other_useful_info\":
      []}"}}]}, {"content": "Error:\n\n```\n1 validation error for UserProfile\nrelationships\n  Field
      required [type=missing, input_value={''age'': 0, ''name'': ''Kevin...''other_useful_info'':
      []}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_ySbGULC67TaVWR3dokZbW9vi].",
      "role": "tool", "tool_call_id": "call_ySbGULC67TaVWR3dokZbW9vi"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTS4/aMBC+8ytGc9kLUB7llVu1oq3aLdrdwq7UDULGHhKDY7u2sypC/PcqCW9t
        DpY133wPjya7GgBKgREgT1ngmVWN0Xo82cxaD2LUn6SzFzbhY55+N8PNrx9+g/WCYZZr4uHIanKT
        WUVBGl3B3BELVKi2B51Wrz9oDTolkBlBqqAlNjS6zV4j5G5pGq12p3dgpkZy8hjBWw0AYFeeRUYt
        6B9G0KofKxl5zxLC6NQEgM6oooLMe+kD0wHrZ5AbHUgXsXWu1AUQjFELzpQ6G1ff7uJ+HhRTatEf
        bp+SbmdIZknT53w9ud9uej/H/sKvkt7aMtAq1/w0oAv8VI9uzABQs6zkPrLA06+HxkfmWEaB3K0V
        ADKX5BnpUDwDdzF6nlLGFlLEGMVV7u3v5bfZw31/MGUvr89dYTZ/lq+jdxljPUZHzBstdVL2T1OC
        O0eKFbY+ldbfwUqSEiA9OPqbS0cCpIaQEsw8uUdnVlIRVLZN+CJEiX0sEkwJ5p4c2ANTsMCaZRRb
        vJl8jNHbLkZjy0RMiCOYloVPV8ol9s5UTjFGu/1+vserCe1rH93nh9v+tFnKJNaZpb9ZFFxJLX26
        qKZUjNgHYyuLQm5ebnB+tZRonclsWASzIV0Ijj4PKj08/zRntN8/gMEEps71dqvdrR0iot/6QNli
        JXVCzjp52ujavvYfAAD//wMAtJ5dBNADAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a75f69f983-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:52 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '891'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999505'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_af793f91825dfe48aa5f7b054d9d1a4c
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieD4yTNmlsP3YBiKFYMOy2FoEi0o0QWVYkOEgT+74Ns56ub
        DwbFx/f4RFCnjDFuNF8yrjaSVO3t+HH7/Lr9+fpWlPp5W8Vy+/Q0/Tqt3OFN446PEgPXW1B0Zn1R
        WHsLZND1sAogCZLqZFHk84dFvph0QI0abKJVnsYzHBd5MRvn8/FkOhA3aBREvmR/MsYYO3X/ZNFp
        OPAly0fnTA0xygr48lLEGA9oU4bLGE0k6YiPrqBCR+CSa9dYewMQohVKWntt3H+nm/g6J2mt+LVf
        HB7CC7zsd7/3i2/Fx8uPj++zI9z066WPvjNUNk5d5nODX/LLT80Y407WHRcOFKQi0UQIwgcoIYBT
        EMV+8kmOMS5D1dTgKF2Fn1bcQyDjwP1LX/HlacUDNmRc1R+8DLv+kI9uocloxSnIsjRKSKeFQqdN
        sp1E8na04grrEgOJCJQ4g7iyppYEqZ4C2kHXmmqTijopWa9NsnMW8mgcRYGlMI4gQKTBJ0SSTZCO
        Bj+lCSAiyWRjENbSqaR7n60CKghHETfo/XC71AmSPknj0rg6LzVoI/t2dRONOs9BaoNdgUetZOco
        b9uW382+zf4Xvw9Re9lbi5UPuI6f1pCXxpm4EQFk7Nbhdiuzs+h790qau8XnPmDtSRDuwCXZ2bTo
        Vfn1XV7Rx/kAEpK01/y8WGSDTx6PkaAWpXEVBB9M92h46YXWj9NCybme8KzN/gIAAP//AwA7DLll
        PQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1be5fcf15-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=VzIf3JwQ_rkR2IhCjwTA1TFN_8SIrGsd4oUOFhSoR5Y-1720567073-1.0.1.1-a_doFeizVR__sVSFqXcESMu6TKujnJAl2LRR1gpgm8JlE__YtVaQiftOtMcwVQJ_2aOrXqJgx_0n5uaSO44saA;
        path=/; expires=Tue, 09-Jul-24 23:47:53 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=UTuG5ZzyeVpcsH5hHRUFSgReGXQ5DL4aCKkrzfiLEtk-1720567073003-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1640'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9994'
      x-ratelimit-remaining-tokens:
      - '21999768'
      x-ratelimit-reset-requests:
      - 31ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_d92264b2a2e403f45784ce6dc41af115
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}], "model": "gpt-4o",
      "n": 1, "stream": false, "temperature": 0.0, "tools": [{"type": "function",
      "function": {"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xT24rbMBB991cIPSfFSdYbksdCF0pht1AWCs0iJvLIUVa3SuPuhuB/L7Kdy6b1
        gxnNmXPmaBgdC8a4rvmacbkDkjaY6Wr/5XGfnhfxxzc3jx5/PuPbw1Or3r6qQ+KTzPDbPUo6sT5J
        b4NB0t4NsIwIhFl1tpyX1f2yXM56wPoaTaY1gaZ3fjov53fTsprOFiNx57XExNfsV8EYY8f+ny26
        Gt/5mpWTU8ZiStAgX5+LGOPRm5zhkJJOBI745AJK7whddu1aY64A8t4ICcZcGg/f8Sq+zAmMEfvt
        4eE3yqc3+b38XFVw/5iShYd01W+QPoTekGqdPM/nCj/n1zfNGOMObM/Fd4ogSbQJowgRFUZ0EpP4
        M7uRY4xDbFqLjvJV+HHDA0bSDt2/9A1fHzc8+pa0a4ZDgPg6HMrJNTSbbDhFUEpLAa4W0rtaZ9tZ
        ZNZNNlx6q3wkkZAyZxSXRlsgzPUUvRl1jW52uaiXArvV2U7GslDw2lESXgntCCMmGn1iImgjOBpV
        lI4oEkG2MaZqcDLrfsw20UuMB5F2PoTxPrkTZn0C7fK4ei8Waw1DO9smLU9zgFr7viD4WkLvqOy6
        jn+YfVf8L34Zo+68t8Y3IfptullDrrTTaSciQurX4Xori5PoS/9K2g+Lz0P0NpAg/4ouy1bValDl
        l3d5QVfVCJInMJf8fXVXjD55OiRCK5R2DcYQdf9ouApCYrlcLRaLUvGiK/4CAAD//wMAVUyNtT0E
        AAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1be75fb40-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=tn5o.4PAGemmSfawbgOuK2xXpS0TAdzg9Lh3VowFURE-1720567073-1.0.1.1-xg5cUvpRXFlGX6fBhI7OIqcRtJmKQekzRXwcWTudYTZTy26L08Rg9usnP6YS07edxjvYdlW7JLsNiVgnIoOwAg;
        path=/; expires=Tue, 09-Jul-24 23:47:53 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=5kg3j5NivUZcMxVi7NDB5dVBdctAAd.YFPtBAaB8Uyg-1720567073092-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1878'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '21999165'
      x-ratelimit-reset-requests:
      - 22ms
      x-ratelimit-reset-tokens:
      - 2ms
      x-request-id:
      - req_964f3233429eba788b66ac83d0fa9ee9
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTy27bMBC86ysInu1Csq3I8a1pjQAp2kvRokETEDS1kmnzFXJVJDD07wVpWXbc
        6kCQO9yZ4Wr3kBFCZU1XhIotR6Gdmt7u1t92ZrlQ8PFhv34plz/F5le9NNVi9jCnk5hhNzsQeMr6
        IKx2ClBac4SFB44QWYtqlpc3VV4VCdC2BhXTWofThZ3O8tlimpfTYuAVWysFBLoivzNCCDmkNVo0
        NbzSFcknp4iGEHgLdDVeIoR6q2KE8hBkQG6QTs6gsAbBRNemU+oCQGsVE1yps/DxO1zsz3XiSrH7
        XTm3dz8+z79/0i/y0Xzh9Wz99f7uQu9I/eaSoaYzYqzPBT7GV1dihFDDdcqFV/RcIOsCeOY8NODB
        CAjsT3FFRwjlvu00GIxPoYcn6sCjNGD+TX+Kmk/U2w6laYeT434/nPIJeYemM3reNFIwbmomrKll
        NJ+oij7iwurGemQBMOadRISSmiPEFPRWjXRKttt4L/FxvZHRWUITm7PSYGC2YdIgeAh4Mg0Beee5
        wZGqkR5YQB4NjcGaGxHpr+OttwL8Gwtb69zpfUkSohByaWIRky0NteSDru6CFOm1qTi8ljbdcbYW
        /Ogu7/uevvsrffa//fOw68eOVrZ13m7CVYPSRhoZtswDD6lRLvs1O5E+p/np3o0Edd5qhwztHkyk
        LRfVkZWeJ/aMFkUxoGiRqzNwUy6zwSgNbwFBs0aaFrzzMs0TbRyry+pmnlfNbU6zPvsLAAD//wMA
        tlPq0VgEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a21c1196db-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=5yiKIvpmJqTrTtZ5trfJnkNBVpDUl37Ys1vHwgbF3CI-1720567073-1.0.1.1-DvrPcsH0116qh4mjxKbmP9lKdZ2SyaNS.jowiF1yzz69PaW2._f4KZX6TrELefi6SfVdScGpQ1Skrmhk.1jTOA;
        path=/; expires=Tue, 09-Jul-24 23:47:53 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=EdIkORnUOv4t6FmBzrNN8dO76uQABDn20wiBdu5QtRI-1720567073127-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1820'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9996'
      x-ratelimit-remaining-tokens:
      - '21999684'
      x-ratelimit-reset-requests:
      - 21ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_2783470e1424e519e2ea0962b84c10f2
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour
      Kevin! Let''s begin with a simple question to gauge your understanding of French.
      Please fill in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc)
      parle</ai>\n</conversation>\n</conversations>"}], "n": 1, "temperature": 0.0,
      "tools": [{"type": "function", "function": {"name": "UserProfile", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}, "other_useful_info": {"description": "Any
      other details you would like to know about the user.", "items": {"type": "string"},
      "title": "Other Useful Info", "type": "array"}}, "required": ["age", "name",
      "interests", "relationships", "ai_instructions", "other_useful_info"], "title":
      "UserProfile", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA1yS247TMBCGX8Wa63Q3TUpDfYlACLESB2kRy6aKvMmkMXU8kWfSAlHeHTlV2RV3
        9vfP4feMJ7ANaGjXqSnSPF/labFZbbJttto16XpVpPnrfJ1t2l1eQAL09BNrAQ11Z+Smpn5wKJY8
        JFAHNIIN6HWRpa+2RVqsE+ipQQcaTF3T6IVvWxvwTOHIt4t0Ae3o61hldcpioY5sjQz6cQLrG/wF
        Ok2gR2ZzQNATBHIYazJbFuMl5pAX9NHYB+URGyWkjp7OqqeAyjzRKEo6VCNjiNoQ6GQbVOYSMGBg
        8sbZP9iogDyQZ7yBBITIVbVx7n87y9CiUP2Qu/vh65vDF9mcvt19+v7+nT/jw8PbmP17iEavz4Pk
        +agn8KaP6j1j+ByotQ4hARMOY49eGDRMJZgDlqBVmqhyiY+XEj7iyfoSIrReMCALR+VxH1FAZ2IP
        7uyw4GmO2NjKepYwLgZexJN0GKqRsR1dZX1LF2mGed7PCbTWW+6qgIaj75cjmfcJjNetDIH6QSqh
        I3oGXeRpHJ8Y94x2WdzU9c/849tsnv8CAAD//wMA56I5zocCAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a26f1a2513-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '1.798'
      x-request-id:
      - f5a6a62d-1fde-4dd0-b94c-ed7ab4429540
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>"}], "n": 1, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "UserMemory", "description":
      "", "parameters": {"properties": {"age": {"description": "The user''s age",
      "title": "Age", "type": "integer"}, "name": {"description": "The user''s name",
      "title": "Name", "type": "string"}, "interests": {"description": "The user''s
      interests", "items": {"type": "string"}, "title": "Interests", "type": "array"},
      "relationships": {"description": "The user''s friends, family, pets,and other
      relationships.", "title": "Relationships", "type": "object"}, "ai_instructions":
      {"description": "Prompt instructions that you as the AI assistant should always
      retain in subsequent conversations.", "items": {"type": "string"}, "title":
      "Ai Instructions", "type": "array"}}, "required": ["age", "name", "interests",
      "relationships", "ai_instructions"], "title": "UserMemory", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA1xRQW7bMBD8SjBnqpFcy7J57yFBjR6KAA0iQWDJlcWYIgWSauoK+ntBGXGK3rgz
        s7O7wxlagUOorqJuV2VFXhyyrZKb7LAvPmd5l8uSyoPaqw4M7ucryQgO2Yv4SbphNBS1s2CQnkQk
        BV5Um7zcVXlVMAxOkUn2UrrJxnDfaU9vzp/D/UpdgW6yMrlkvzbJqHdaUgB/maGtot/gOcNAIYgT
        gc/wzlDyDEGHKGwEQ3TOtFIY83/belwi2vH45c9+92M05uvz83A4v+0f+m/i6TV1X8Zk+L4G2MeT
        z7BiSOxTIH+kwfkLGIQ/TQPZGMAx1xAnqsHvtjm7q1d9qmo8OqqRIG0jeQoxJPylhvLOUqjRJNKT
        EWlW6PW4CuYaI92033vyxsnz1el4kd51sUazpFLoVtsQ/bRue21pFixLszB02urQt55ESJf8G9LS
        MEzveY7eDWNsozuTDeC7cpsCjcLcoKooGD5++4aX1bL8BQAA//8DAL8Ho0JBAgAA
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2ace7158f-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '1.673'
      x-request-id:
      - b0ec7d20-1332-4aa5-a1aa-570372555dec
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieF89G09XHDBhQbim3Yod1SCIxMO0plUZDorkXg/z7Idj7a
        zQdD5ON7fCKofSaENKUshNRbYN14O73Zfbrbffj6Av7p4Zu9XdH3+5vr8nr5K378eS8niUGbHWo+
        sC40Nd4iG3IDrAMCY1KdXc3zy9VVfjXrgYZKtIlWe54uLi6n3IYNTfPZ/HJkbslojLIQvzMhhNj3
        /+TRlfgiC5FPDpkGY4QaZXEsEkIGsikjIUYTGRzLyQnU5Bhdsu1aa88AJrJKg7WnxsO3PzufBgXW
        qucHdAvzuWrrucPdl7vbPz8e7jdLe9ZvkH71vaGqdfo4oDP8mC/eNRNCOmh6Lr5wAM2qjRiUD1hh
        QKcxqufZOzkhJIS6bdBxuorcr6XHwMah+5e+lsV+LQO1bFw9BB7C0xDkk3MoRRygqoxW4EqlyZUm
        2U4ieTdZS01NRYFVRE6cUVxb0wBjqudAdlSypt6mol4Kmo1JdtaymCUhT8ZxVFQp4xgDRh59YmRo
        AzgeVSoTUEWGZGNMleB00n2brQNpDK8qbsn78T6pEyZ9BuPSuHovDZYGhnZNG40+zAFKQ32Bp1JD
        7yjvuk6+mX2X/e/8OJ66495aqn2gTXy3hrIyzsStCgixX4fzrcwOoo/9K2nfLL70gRrPiukJXZJd
        rFaDqjw9zBN6sxxBJgZ7yi9XeTb6lPE1MjaqMq7G4IM5Ppqsy/4CAAD//wMAEwJm6TMEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1b8c61666-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=ENZ7cJ0LyBvrP4mDV9UGD_qWl6VLYwq6KkcxFONU.3A-1720567073-1.0.1.1-YBTBCnXhDZ_xwlT0HBoRFi6GTlHrgrrS3c.q35NUMayTzBUN8NyCQtky9BDqWwwfX1SXZujb_mf6RwxT1MpV8Q;
        path=/; expires=Tue, 09-Jul-24 23:47:53 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=ewlBadD7qXWeyguW_q2Agz8b8oC.ZY0MILhFXL7e4rs-1720567073267-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1923'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999835'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 0s
      x-request-id:
      - req_a65767952cac1c6acbdac4c6299558ec
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-3.5-turbo", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy9+1cIOieF09VJ6ts2tBvWocDQU7EUAiPTtlJ9QaKHBoH/+yDb+Wg3
        HwyRj+/xiaAOGWNcVbxkXLZA0ng9v93dPe4e1t+L3P68f3xu2yJ8bpbqpr1/iF/5LDHcdoeSjqwr
        6YzXSMrZEZYBgTCpLlbXebFc5avFABhXoU60xtP801Uxpy5s3TxfXBcTs3VKYuQl+50xxthh+CeP
        tsI3XrJ8dswYjBEa5OWpiDEenE4ZDjGqSGCJz86gdJbQJtu20/oCIOe0kKD1ufH4HS7O50GB1gK+
        NXn1FJ6Wz/F5/aP7tfvytL6t7vKLfqP03g+G6s7K04Au8FO+/NCMMW7BDFx8owCSRBcxCB+wxoBW
        YhR/Fh/kGOMQms6gpXQVfthwj4GURfsvfcPLw4YH15GyzRh4CK9jkM8uoRRRgLpWUoCthHS2Usl2
        Esn72YZLZ2oXSESkxJnEpVYGCFM9BacnJa2aNhUNUmC2Ktk5CnmnLEXhaqEsYcBIk0+MBF0AS5NK
        rQKKSJBsTKkKrEy677NNcBLDXsTWeT/dJ3XCpE+gbBrX4MVgpWBsZ7qo5IaXizQHqJQbCryrJAyO
        8r7v+bvZ99n/zi/TqT/trXaND24bP6whr5VVsRUBIQ7rcLmV2VH0ZXgl3bvF5z4440mQe0WbZIti
        Pary88M8o7c3E0iOQJ/zy+I6m3zyuI+ERtTKNhh8UKdHk/XZXwAAAP//AwBOECMkMwQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1ba8f270a-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=RoCgRkkRCBUFcvrUWDsKaF0MlhFcKPBj7W29Tby.9sU-1720567073-1.0.1.1-Kq7s8CZov0o4EqF5U4KFIAyRqOa6vtPxfWd_HuvqOofunxdSXSCsddZHO7s82JiWGYdwcnjzZKy80YSkgeDVNQ;
        path=/; expires=Tue, 09-Jul-24 23:47:53 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=N64iNsrM2U0EDMtxklfiNnOrhhxQtN5dfVg_7Unf2Zg-1720567073772-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2600'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9993'
      x-ratelimit-remaining-tokens:
      - '14999684'
      x-ratelimit-reset-requests:
      - 39ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_b0dc5d4de63835a66dc561a33b46fb59
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>"}], "n": 1, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "PatchFunctionParameters",
      "description": "Respond with all JSONPatch operations required to update the
      previous function call.\n\nUse to correct all validation errors in non-compliant
      function calls,\nor to extend or update existing structured data in the presence
      of new information.", "parameters": {"type": "object", "properties": {"schema_id":
      {"description": "The ID of the function you are patching.", "type": "string"},
      "reasoning": {"description": "Think step-by-step, listing each validation error
      and the JSONPatch operation needed to correct it. Cite the fields in the JSONSchema
      you referenced in developing this plan.", "type": "string"}, "patches": {"description":
      "A list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}], "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}}}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4RTQW7bMBD8CrGXXujEdhTL1i1tk0OBADm0aAErMFbkSmIjkQKXSmsI+nvByLEK
        X3IhiJmd4Sy5HMBoyKDcFuVuvUwXZbm9XSRK46Iokt2ivEmWSZKoIik0SHDFb1IBMlA1hivl2q6h
        YJwFCcoTBtKQrdL18naTLtOVhNZpaiADVMr1NvB1aTz9cf6Fr9+oCSh7q6LL4nUdjWpnFDFk+wGM
        1fQXsqWElpixIsgG8K6h6MlsOKANICE41xwUNs2l7K25SBwe79DeFF/Vr88p3X1Zpve7o7fp5iGq
        j100fI8Bct5mA1hsI/uEQdUPJ/wJPbYUyDNIQF/1LdnAkMGQA6uaWjwYnUMmcvjB5B+pdf6YgxQ5
        eEJ21thqor/XJHomLzrvXo0mLUJNxot4qhRYxcVqYWwgTxz4SpwV2LAT8WDj7FnXUWApjFVNr42t
        BApNipBJC4VhVn/i2fNUTqJDDihafDG2upridrFt4hh2P+Tguik2an3m6wm6jpEn8BWbnib0G3lq
        DdY5jFJ8YIDVpX6dfqw6t3Gh3cequZ8cnj/28tRgvE6uTXfpN+SgMPBU+eh8hXaq0K46ofd1f/I8
        X3p8j4n8iYGdzWEcn8e3RUJprOH6MI0EZP+P8fgsoX+f+M67tguH4F7IMmSr7eomznzAZsZ2aSJh
        /pEzsVmN4z8AAAD//wMACkewWOYDAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a29e4a9855-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:53 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '2.481'
      x-request-id:
      - 970ef541-3067-48d0-a3e1-1730f6e3e57a
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}], "model": "gpt-4o", "n": 1, "stream": false, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTS2/jIBC++1cgzsnKTpumya3a92Uv291Vu60QwWOHFBgK46pR5P9e4Th2ml0f
        LJhvvocxs88Y47rkK8bVRpKy3kyX288/tj9/o96+bJ+/PV/ri/mvu9ubeHvj/mz4JDFwvQVFR9YH
        hdYbII3uAKsAkiCpFotZPr9a5IuiAyyWYBKt9jS9xOksn11O8/m0uOiJG9QKIl+xvxljjO27d4ro
        SnjlK5ZPjhULMcoa+GpoYowHNKnCZYw6knTEJyOo0BG4lNo1xpwAhGiEksaMxodnf7Iez0kaI+b3
        zffre7xb2I9f77/MSgNbs/tU3Z74HaR3vgtUNU4N53OCD/XVmRlj3EnbceGVglQkmghB+AAVBHAK
        ongpzuQY4zLUjQVH6VP4/oF7CKQduH/pD8nzgQdsSLu633kZnvpdPmHv0G5PQVaVVkK6Uih0pU7h
        O6m8TbhCW2EgEYES72iijLaSIFEooEnVIrUbXW9SX6cn7VqnZKOaR+0oCqyEdgQBIh1DQyTZBOlo
        kKp0ABFJpkBD3FI6leTP63VABWEn4ga9P35fZwnJiKR26RC7WBZKLXtf20StBssgS41dj8dSyUO6
        vG1b/u6vtNn/1o/9qh1utMHaB1zHswvKK+103IgAMnYX5fS+ZkfRx25+mncjwX1A60kQPoFLsvPF
        8qDKx4kd0aIoepSQpBmBq2We9UF53EUCKyrtagg+6G6eeOXFZZ5fw8V6USx51mZvAAAA//8DAP59
        lE9YBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a1be4267f1-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:54 GMT
      Server:
      - cloudflare
      Set-Cookie:
      - __cf_bm=whEd8xzpY9drFjD_ARMMNtBuvKEEHPPVEv6GPNy4B08-1720567074-1.0.1.1-Im0Lt102pG27izYgeefBEfVZx1V1fhcdOO6mlhZwYIr.MzZRTEDJFDDW1QJ2azcGWlz3AEXF77rns0VoL225XA;
        path=/; expires=Tue, 09-Jul-24 23:47:54 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=hF3sYfSp2AlDO7ez1SSR0bvSI3ImcZ4gBKm3mO18KpI-1720567074407-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3185'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '21997434'
      x-ratelimit-reset-requests:
      - 17ms
      x-ratelimit-reset-tokens:
      - 6ms
      x-request-id:
      - req_18d35d01ce7ab3930d18152a56e1c678
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a
      place to eat, but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3RSXW/bMAz8Kxxf9uIUSdtlnR/3BbQYhm3omg5DYXA23QiVKU2kjAZB/nshN1sz
        DNWLQB55Iu+0RddhjYPeNvPFRbxYjWMc7758vLq9uv4ef7z/ulpihbaJXKpYlW4ZK0zBlwSpOjUS
        wwqH0LHHGltPuePZyezVTIMI2+x4fnw6Xx7PscI2iLEY1j+3f0iN70v7dNX4jpORE795AecvO/jF
        sKYYN2AB1uwjbEKG3kkHJHBu5B0JJFajnEjsCN6ScgdBSmGCmLjnxNIy9CFBJDWCzumaFUi6vwxt
        duqEKziHlgT43hK1BhoGhqx8SKRH8IkNHgGwNQPFmEJMjozBQvBl1pai5VRwp+CkD2kgc0GOcFc9
        bR6Cb7IWPScTSpyb+WJJZ+PdZV7FCxrGUzd8eH199u0zVig0lL79eKU1NQeTNeOiUEnMhvUWIydz
        wvJ/4YQGJ6ZN6BsnxkXCkn2SskQ9jSEnZ9zsBZp8eyLCGvcKYoXKxdqWDx5qEo9Mnstyl+u9lHwf
        E2txicCH8RlnNHLreteS9xtI/DuzGj/nOu5uduXcVKgWYpOYNMi/Ck+AFqJpcMneV5in71xvH0Vr
        LNyxKNYnbxbLCkO2w+Ti7GS3ewAAAP//AwBlLpivLwMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cb5f982b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:54 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '366000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_015LD1zvumQu3S2WEDUn917g
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 4ef0b36a52bab2964170e0a56af81a99
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<system>You are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nRemember that this schema must
      be useful for prompt engineering an AI assistant.\n</instructions>", "temperature":
      0.0, "tools": [{"name": "UserMemory", "description": "", "input_schema": {"properties":
      {"age": {"description": "The user''s age", "title": "Age", "type": "integer"},
      "name": {"description": "The user''s name", "title": "Name", "type": "string"},
      "interests": {"description": "The user''s interests", "items": {"type": "string"},
      "title": "Interests", "type": "array"}, "relationships": {"description": "The
      user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions"],
      "title": "UserMemory", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA1RSwW7bMAz9FY6XXpTAydJ287HFsK1YDmvXrmsRBIrNxEJl0RWpJUaQfx/kLOh2
        Isj3SD4+aY+uxhJb2SyLyaf+y269eX38tbNXk3n7OV5tH74/oUHtO8osErEbQoORfS5YESdqg6LB
        lmvyWGLlbapp9H50PhIOgXQ0Laaz4mJaoMGKg1JQLJ/3p6FKu9w+hBKvKap1wffv4OtZDSuCxnZd
        D8rQkO+g5wSiHAm0cQIurDm2Vh0HSOLCBrQhuBeKc2o59rBOocroGL6RngkkoYHSRf7taqpBmX2e
        XtlOU6S8IEJNap2XMR7Mm05mv0ySrx8sy3laFpMPl48Pt+nuR+ov19f2/mk3385WP9FgsG3uexOT
        O0OXFMv9CbzhPC97Ws6KDCtFEhUsn7GOHEhwYTCSH06UxnWSuzvSIVb2SL1rKHquXtDgvK8irxUX
        h4NB65YuiMY0eDBQb6mldkURtLEKN0zgBGYF9GSjAPvaQGMFdJstUYEstIbTArChhr8rzJAMj3BU
        TTW4AEfZ4yxgYVCUu2UkKxz+93AAhF4ThYqwDMl7g2n4XuX+6NNS+YWy6ovzjwY56b+16R8ZGNfW
        AgAAAP//AwDQ/RmuvgIAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2dcda237a-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:54 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '368000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01P1Wao1RQHW6zF3hsAuj4w8
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 512ea5caa3c55bf51321482df031fc75
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow
      inside</user>\n<ai>Certainly, changing the interior lighting to yellow now for
      a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>"}], "model":
      "claude-3-5-sonnet-20240620", "system": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xS0U4bMRD8FWtfeHGi5EgDujdQq6oqRWqhtBUgy9xtDic+78W7DqAo/175Qpqg
        StyL5d3Z8c7MrcHVUELLjRmNrx4umyIW009/zpaLH58vV2dL+fgTNMhLhxmFzLZB0BDJ54Jldiw2
        CGhoqUYPJVTephoHx4MPA6YQUAbFqJiMpsUINFQUBINAebvekQo+5/H+KOHcMtaKgpJHVIkxHrGK
        uEzIooTUHXyzC+yb3jWPwuoFvacn5QK7GvUdqC+qskHhs0RbibKqizjDiKFCNaPYj7ogGB3FLYcL
        jarIUxyqC5Qjzs/2sFcOk9cwexo2q7GapVCJy3uSqmwnKeYZxwfPDWGj9yqJfCYCvTU835MZjX/N
        qZ1zc3Xxe7K4OX+ap+L65Ot30BBsm+fe2SFThS4JlGvoMIoLGP4H5m5F7YyiGEbJavvaTrqxoTa2
        fXAZnRs7c8w/RG/OW87bNezvUMI2BdDAmAOu8ABuIq7Qesyyr19T3WWKdTawfS/TIWzuN/m718BC
        nYlomcJbT/sGZ85+n5C815D6n7WX1CUxQgsMDOXx6clEAyU5LI5Pp5vNXwAAAP//AwC1BiU0DQMA
        AA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cf54985b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:54 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '368000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01D6jmkn3PPgUiHa7tbdHPYY
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 1660e95ce2919a04d3ee202daba392c6
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting
      to something warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting
      the interior lighting to a warm ambience. You should notice a cozier atmosphere
      now.</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nOnly extract pertinent user preferences,
      no temporal desires. Extract same user preferences only once independent if
      the user has said it multiple times.\n</instructions>", "temperature": 0.0,
      "tools": [{"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "input_schema": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xSXW/bMAz8Kxxf8uIETtq1jd+KDRuKdgM2DEOxojBUmbGFyJQnUVmzIP+9YNIs
        3QfmF0M88kjecYOuwQr71Nbl9PyR33WX19crmt++v/y4Oj37+elmjQXKeiDNopRMS1hgDF4DJiWX
        xLBggX1oyGOF1pvc0Phk/HqcAjPJeFbOTsuzWYkF2sBCLFjdbQ6kQo9avvtV+IaiGMd+/QquIHND
        UfkbkM4IrEMeNeDdkkAC2M5wSyAdgWOh6EIE79pOHLeKG/hhYk8RJDBN4IZklIAeJRorIJ1LMERa
        UCS2BNojD40R0i4RVtQ56wkSifIlMNaG2Dhu/XoCVyPvIad982fKOieK9ZEy1aspLDJbcYF385pB
        cqR9a8eLEHuj2AS3xVGNELwyYbE3Rt+5LqdfY/vtltrPpzkv5+uL+OF8+vA2YYFseq37zxBKxUMW
        rDY4UBTHxH8nKmpDvwhR6sPSGjsoWhtuatM/OM1W4KB5/SvDBh/+4Lzb4PGNFaojOz909ER6DJZe
        lNSRVmQ86epfOlKN47NNCY7FsAjxH6ariY1LeiAJbAh+nz3B7f1Wv/sCk4ShjmRS4N/V3gGJvuf9
        pJy9LzDvzn237JCllrAkTlidXMzLAkOWl8FZOdtunwAAAP//AwCh4AvxTwMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2be55175e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:54 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '369000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01FZZBpdLmfcFdEVi2WAr1dk
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 0e7311628f963aac1589edc5cec90b57
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xSTW/bMAz9KwIvuyiFk/QD87FDV2zIcUu3FYWgyIwj1CY9kU6bBfnvg9xmSbCi
        ukgkHx/5SG0hVlBCK7UrxtMwv/3za3OttzfVz49p9ml+dxcXYEE3HWYUivgawULiJju8SBT1pGCh
        5QobKCE0vq9wNB1djISJUEeTYnJeXE4KsBCYFEmhvN/uSRWfc/pwlXDtBSvDZHSFJjCtMYnXyGTN
        FxM8GXzW5IMa4RZNL5hMl3CJCSmgmIS1T1Wk2kRSTJGTaWK90kj1mZmhfpCcM5C/ErnM4Y443Hps
        lj2FXNQom+A77VPOiWIiLTm1Q0NnsLMHEcxNZgL7Ms9s964Y/5hV85uvFW6q2ez754t5qBOGR7BA
        vs157zSRqajrFcotdJg0EtL/wBwN3C45qRPULHTw7VU7T5Xz7SJmdA7s5+L+IRYpvwhFTonvt3Cw
        oYSGn8CCYN5gwCOsS7hG32AW/m11shUxDT+ZQwWz5PTGamD3sMvnwYIody6hF6bTuQ4Bwd/9SzvU
        N42FfviPg6yuV6f8iCRQnhdXUwvc67FzfHW52/0FAAD//wMAdv0hmPACAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2bcacaaaf-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:55 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '370000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01X9TsKCn8Xc4BNLuc98Zvwv
      via:
      - 1.1 google
      x-cloud-trace-context:
      - c8e3919b968baddc22eb83c70c2ca702
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour
      Kevin! Let''s start with some basic questions to assess your French proficiency.
      \n\n**Fill in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA)
      soif  \nB) faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nRemember
      that this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "UserProfile", "description": "", "input_schema":
      {"properties": {"age": {"description": "The user''s age", "title": "Age", "type":
      "integer"}, "name": {"description": "The user''s name", "title": "Name", "type":
      "string"}, "interests": {"description": "The user''s interests", "items": {"type":
      "string"}, "title": "Interests", "type": "array"}, "relationships": {"description":
      "The user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}, "other_useful_info":
      {"description": "Any other details you would like to know about the user.",
      "items": {"type": "string"}, "title": "Other Useful Info", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions",
      "other_useful_info"], "title": "UserProfile", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUXWvbQBD8K8u9uAHFJM5X65dQQktNCW0hpQ91CWtpJR057Sq3e07dkP9e7pwE
        u/RJ3Gp3NDM7p0fnGzd3g3a3R8fHcX01w14vqH6bvl5c++/vP9x/c5WzzUi5i1SxI1e5KCEXUNWr
        IZur3CANBTd3dcDU0OHJ4dmhCjPZ4exodnp0PjtylauFjdjc/OfjC6jR7zxeHnO3ABwlSOf/UAWr
        ZLCARnhi0OOagFhS14PnVuKA5oXBBOpIaAQISSnCGKX1gWCFSg3kjt4r1MJrirqdwSBMU7jp6Z/6
        OBJGzZgrAusJVtR5Zs8dSAsIHyNx3UNA7hJ2BKhKqgOxbcl6g0ZIM98xyto3BDpS7VtfQ0OGPijg
        SpIV8Ex3ojBGaikDk1bg2SiSmlYgEUaKKoxhV/F0yUu+2VfdprAnvoIFPEgKDTBRA4NE2jNtn8MU
        rnEDC0C9g40kUBkI7hNp7i1udGg9xTLAVOcUxM2LoMvM53gKP3o08JoRIjAOdAlvFi14myiwGHym
        tecKxkCo2fcYqTYY6GDJsyl8kgeQ0ABGygiXSz55hsyVwkjaLfarRdmhXlYrT5nE6RSukIsAoxBg
        oGeZyBvwwygxBxUiheKB9n5U8LzFDL4leNPi4MOmgjZ64kYrGMn04HLJZ1NYaJYfqcC9LvUBNxlg
        0kDwd5S/abIliLXBg7e+EJJYxnY2Xcol061EyBR2k7g19QvXxYzXLJUk7+yxgsUkhJxVXAXauwpl
        5VjXKZYzN/+LydQ9/aqcmoy3kVCF3dwRN7eWIrvnF0r3KTN2c04hVC6VP8D80Xkek92a3BGrm1+c
        nldOku3Wjt+dPj39BQAA//8DAHGGzUphBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cb1b7ad6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:55 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '372000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01Ty5yjdnhvWWvZ4f1wFNnd4
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 424cec460ae7c070f90cdad60857b0c5
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour
      Kevin! Let''s begin with a simple question to gauge your understanding of French.
      Please fill in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc)
      parle</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nRemember that this schema must
      be useful for prompt engineering an AI assistant.\n</instructions>", "temperature":
      0.0, "tools": [{"name": "UserProfile", "description": "", "input_schema": {"properties":
      {"age": {"description": "The user''s age", "title": "Age", "type": "integer"},
      "name": {"description": "The user''s name", "title": "Name", "type": "string"},
      "interests": {"description": "The user''s interests", "items": {"type": "string"},
      "title": "Interests", "type": "array"}, "relationships": {"description": "The
      user''s friends, family, pets,and other relationships.", "title": "Relationships",
      "type": "object"}, "ai_instructions": {"description": "Prompt instructions that
      you as the AI assistant should always retain in subsequent conversations.",
      "items": {"type": "string"}, "title": "Ai Instructions", "type": "array"}, "other_useful_info":
      {"description": "Any other details you would like to know about the user.",
      "items": {"type": "string"}, "title": "Other Useful Info", "type": "array"}},
      "required": ["age", "name", "interests", "relationships", "ai_instructions",
      "other_useful_info"], "title": "UserProfile", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2RTTU8bMRD9K6O5cHFQCF/V3qASEFpV9JB+oWjl7E52Xbwziz1OgCj/vfKmEdCe
        LI/fe555z96gq7HALjbl+OjscnV9dXvD8vPx5XyWLl5+LWbfCA3qc08ZRTHaJheC+FywMbqolhUN
        dlKTxwIrb1NNo+PR6SgKM+loMp6cjM8mYzRYCSuxYnG/2YsqPWX6sBQ4BduLl8a9kIFFUphCLXyg
        0NoVAbGkpgXHSwmdVScMKlAFskpgoZKu96QEKVKAPsjSeYKFjVRDhrYuQiW8ohB3ZOuF6RBuZE0r
        CgamUFnO8hTAwpLWUJNa5yNoaxU617QKi0F/mTwsJYC2BLNI4e7vbcvEVdY+hM+k0BE0VlsKsM4C
        a4IHljVYrjORs9CgoCL+3Si9Deqs3w9xiFvz6piIL1PMOQzh5X0qx0ez62N+1MuTr+77RVPfPp1+
        qRY3P9Ag2y7z3rSZqdwnxWKzP/1EK8doMAdcHI8zQClQ1IjFPV4F4qoFb7lJGTE3GMgPLsbW9RGL
        zdagdaXjqCENFgzEj9J1iV2Vx3KcXQ2OuPbP0FlmCmhyX/CPPpCnjlhj5gSKvXCkiAbvgqxc/T/e
        kw3suAF6olC5DJ4blGx9uUurzK8md5RtABdfKTstNHgxhdhK8vWQy8Gl8G9J4QBsBAtNIFLHDc63
        27nBqNKXgWwUfh/JcBDpMRFXhAUn7w2m4d8Um53rpcoDZXvOJ2cGJenb2uTkw3b7BwAA//8DADkI
        tY2XAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2df80cfd9-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:55 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '373000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01QKjGZaMS7vX43TCFXbgsL8
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 8de7c3e677e20d4fe08537d0f148d937
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some
      good Italian food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nOnly extract pertinent user preferences,
      no temporal desires. Extract same user preferences only once independent if
      the user has said it multiple times.\n</instructions>", "temperature": 0.0,
      "tools": [{"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "input_schema": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3yTS2/bMAzHv4rAyy5KkaaPLb7tgWFt16HDetgwFAIr04lWm3IkKsgQ+LsPdDw0
        xYD5IoiPH8k/5T2EGiro8srNT8+WO2zu32wubn6l5WP/9m5zmz94sCC/e9IoyhlXBBZSbNWAOYcs
        yAIWulhTCxX4FktNs7PZxSxHZpLZYr44n18u5mDBRxZigern/i9UaKfp41HBO8xUm8hG1mR85C2l
        jBIiW3NlPLKhnST0YnLsyJRMyfSJGkrEnrJJ1KJQbSSaRFmwJGTJJ+Yzyaus4SN3YjhNd0fpbntq
        msJe6ynCYy8laU7IJnATUzf2cgKDfe4/xlZJYA9S6r24+emnu9uvX67vL9/frJvNzfeP3y6X1z8Q
        LDB2mvefJhTFfRGo9tBTksDE/waO3hhYsouNCyykI6v1eXS9NbiNJQUh50vIgWlU/xkEFVwJtgEZ
        LGTSBXk6KuQSbQlb0uHu15PotOsTZd0VGp9wG3hlmpjMRDJNjLU1gevgUdSJR3t6ETk1dQLDw2Ch
        CYlcllFmqPaDhRrZB169NK5S9JR+u7yOfR94pdZBn2WRww16TE+T49g+WJCETRO8Q66dj1wHxeaJ
        4GPXxCQuk2jGKLJvQ4cqX2RJsT1Q2rBaa8SIwe4xHKQcIaphEgzc6d40oKM6oLK6koOfmsI6xNHb
        x9rjuLpBvwcLWWLvEmHWgY+f2OjItCmHclza1kIZ/8pqf3g1TuIT6UBny9fnFmKRY+NiOR+GPwAA
        AP//AwCAWy0u9gMAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cd3afb38-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:55 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '377000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01QBck8qeBNq9zN6QLejizhE
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 7ec9a3dc83e4995c830ea0e85c5dc6ef
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around
      Mariani these days?</user>\n<ai>In Mariani, you can explore the Mariani Junction,
      nearby tea gardens, and some local heritage sites. Would you like directions
      to any of these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xT227bMAz9FYEvfVGKJOu6zo8dVnRXYFt3a1EIjEw7Wm1KleguReB/HySnSIYB
        84sg8vCQh0fegquhgj61Zr5Yvo4PfP5q9fZT017dhfUlf7tYXIMGeQyUUZQStgQaou9yAFNySZAF
        NPS+pg4qsB0ONc2ezZ7PkmcmmS3ny5P56XIOGqxnIRaobrZPpEKbXF6OCs4xUa08K1mTsp4fKCYU
        51mrN8oiK9pIRCsq+Z7UkCiqEKmhSGwpqUgtxtpxqyIlwSEiSzpW70nUBC+8Ow6Ty81BuXlYqGZg
        m/sp8cpikCGWmkSHfY5h1HsB3neZCvS0y3wfzHzx/evnVk5+XV5cXq9+Xn189+F08+UHggbGPtf9
        Z4pMxWEQqLYQKIpj4n+BJesdSzK+MY6Fsugc3YsvmFISqTb7uJmGv3nKZkKo4MIxqdqx4xY0JMpu
        WTpoaiI9EHaUhV6tdw7QJkRK2TgMIZJ1xTHV+KiOUN0PjkSFDi2p307WClWkxnGGS+9TWFOkI60c
        186iZPPwYNmFptnPpbKGVefSuqdsLoy3o4bGRTJJSmOotqOGGtk6bv8OttFbio8mrX0IWWS1Hcf8
        nAeZbhAw3u0Sh/FRg0RsGmcNcm2s59pl2rRjsL5vfBSTSHJF8cZ2rkehDJbou4mlc+06IwoN9is3
        bb6Q5HVHQcdZWQH0VDvMXP2QnN0NhbXzJRt8bbE4PubvVkMSH0wkTFnw4cssiUT3w9SOh67TMJS/
        udpOj82Iv6Ms6GT+4kyDH+QwuHx5No5/AAAA//8DAOPgF2MuBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cb0322ba-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:55 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '377000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01FQNBfVc9PMhCAcgiDhq7pp
      via:
      - 1.1 google
      x-cloud-trace-context:
      - ab6d21794d2bb234274957bbf46de7fe
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<system>You are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n\nGenerate a JSONPatch to update the existing
      schema instances.\n\n<schema id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'',
      ''grade'': ''8th'', ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3ST224TMRCGX2Xkm4C0WeVAKNo7RFsOQqhAQUBTRY53suvWO97Y47SrKE/AA/AS
        XPFOiNdA9qYtueBu14d//v+b8VboUhSi8dViND5+y7Warm7efTu6Wr7ko/p8Peb3IhPctRhPofey
        QpEJZ01ckN5rz5JYZKKxJRpRCGVkKHE4Hc6G3hIhDyejyZPR08lIZEJZYiQWxcX2TpStNYvgo2qy
        Ev/DYjQ+fRO+virtanOlPl2fjGcvjk/oixKZINnEe2eSVX0aSLG2dCadbJDR+ShDbWBRbIVXNTZy
        kWSfK1lio9WHsHQ6yjiU3pKmShTivEYIHt3Awzqg66C06IEsQ+vsRpcIkjrQtLKukbEeODS4kcTA
        FrhGOJSHvnIOURhvtWdNFWiKrBSCNA5l2UGkITV52EgT0MPKOpDGgMN10A5LWGk0pYdHMXIGlZMl
        ZiCphMpZha5bGO35cSrjcGUdZkAWQltKRg/SIRCq2DTXwVJ6LMEScK19LL1B51OYHF4PjAG8bY3U
        BE0HXNtQ1Sl9vJ6MoVR1b6iY05zGOURXRYr4AI0GDA1SYhSZ9c69hRuEa8Q2wbonknLDXPz5+f33
        rx9zkc9pkvc5iz7UILbhgLxc2sAg+1NgcIMGNCXdZOOuWiN1ogtz8YzrpD3ND8Dde/dJWPu9Nt7q
        5O6zbhLsWqZZqOMaWygt3Giu91Ia/f/zxSp5pPVRx76TBVVLqva9uWtz1vN/GDXApuUu3Qa7gjZO
        OvpcZGL/KYqLy93uMhOebbvoJ/nwKaUNj+uApFAUFIzJREivt9j2L2TB9hrJi2I8m00yYQP/uziZ
        jne7vwAAAP//AwD3aS3oHgQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cb77aab7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:56 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '380000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01WGpA6wbwps5Tvoz5HeyYmT
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 3abe3fd770a7ee39eb3702ee3bb970bb
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}], "model":
      "claude-3-5-sonnet-20240620", "system": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xTXW/bMAz8KwJf9qIUSdoVWd5arEAHdMWAdR9YUQisRCdCbUmT6LRd4P9eUG6W
        FAPmF8si70gez1vwDpbQlZWZzuZX6fryHJv7Rfe9+XJx+XXRPS4uQAM/J5IsKgVXBBpybOUCS/GF
        MTBo6KKjFpZgW+wdTY4n7yclhkA8mU/nJ9PT+RQ02BiYAsPydrsjZXoSeH0t4RwLORWD4jUpG8OG
        ckH2MaiU48Y7clp9UhaDoifOaFmV2JHqC2WVMjWUKVgqKlOLTE5xVAE3fjVyYHAqRR+4qNgoH5gy
        FT5SV8TvipDUsq/MRkjNAanZzFTTB1upOCqLiftcMYUOqx/BoPfzxdgKFehRavnuzXT24+Ej/lx9
        vrn6cPbr+ObP/PLb9dNjAQ0BO8H9pwuhCqlnWG4hUWYfKPybKNEce/ZhJce9DAaDMweR/XHQwBmb
        xtuaY2NwXhBljCXMD6+JwyDL7JqY2RRiwdeCtvUdMgmUc2xHXOtXa8mopNjde+mvsmgY12FiY3br
        qC1RYeyzOEtmrENlcmZ/b0Z5b3fRkRLOUmrpnkiELCRms3Qgism0IWxJFnGzfvVNpt89FXHLgVU4
        qr9cWvngvEWZQeHBplUTs+K1F7/tGlN2jT4cwXA3aGh8JlO4Uo5aOAxWpHhzucrRUn42ZR1T2ims
        QfrPjD50sl8RryPnUSTp+uLtCM7ofKzRFJ3FKuAgz52GwjGZTFik0qEVa6DI4FW30Lethr7+3cvt
        6C7D8YFk9ceLxamG2POby9nJMLwAAAD//wMAZSXqfz4EAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2decafaf8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:56 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '382000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01EURmDNEox3psFYeTM8GBfG
      via:
      - 1.1 google
      x-cloud-trace-context:
      - c681e38229474e9043de604c30633fff
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead
      on this route?</user>\n<ai>The traffic in Mariani is currently flowing smoothly
      with no delays on your route.</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great,
      can we put on some music? I don''t like driving in silence.</user>\n<ai>Of course,
      would you like to choose a radio station or should I select a playlist for you?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm, let''s go with a playlist, something
      upbeat and cheerful, you know the kind that''s always on the radio.</user>\n<ai>I
      have a Pop Hits playlist that fits that description. Shall I play it now?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That sounds perfect, pop music always
      lifts my spirits.</user>\n<ai>Playing the Pop Hits playlist. Enjoy your drive
      with some uplifting tunes!</ai>\n</conversation>\n</conversations>"}], "model":
      "claude-3-5-sonnet-20240620", "system": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//lJRRb9s4DMe/CqGXe3GKpO16uDxu2NYDuns4DNiGYRBYmbaF2qInUrkF
        gb/7gUqKJtjhgD3Jpsg/+f9Z1sHF1m3dJL1fbx7e/v747v7mIXx4E4fr7u7+0/enD+9d43Q/k2WR
        CPbkGpd5tACKRFFM6ho3cUuj27owYmlpdbN6tRJOiXR1vb6+Xd9dr13jAielpG779fAsqvTDyuuy
        da9RqAVOoANB4LSjLKiRUwN/QsAE9EMzBgXhiaAIZZgzdZQpBRLINKJSC8pASSkrxjRRUsDUwkRt
        xCt4IP1NrLT2OOl5k/JnUn63ga6kYL1NLuCsJdcaofOeV25pXswwjyblmiNXey9+vXn95u/htn/1
        lz7cx/h58353y+++iGtcwsnq/mcKk0pzUbc9uJmyxkTp50TbvXDsMbW+OratqUgM9tDhjnNU8j2l
        bGVfD+5Fxm3dzLNrnJhWCnTWwmfaEY5ktj4OJ/bWKXIy4gMqzDxDbQU4/oN7gTF2KsYsZpA55qjS
        QExtDKgx9YBnJKHj/KJw5ZZvS+MytpGrl5nbgGIYFotzMQGzpBm7LoaaFDi10SaS852YOs5TPUZe
        uOQLX//BIKZVwAyyF6XpF2igPFEL+MhF4dQbXiYCHAifz3bMYBaoASl9T1Jp6ED7ExAocorAxTQV
        0rP2ma8Trhnz0xHLBSMjFnjqOKsXUotWQGGMEyoZNs08HsvG2A+WUYHi9BiPVKrIzDGpeO58tMNG
        9Xs4W7FkuweqQhczedE62DHSYgomeRHsMwfKey8Dz/PzoMuyfGucKM8+E4rlnv9VdUPoezkOlco4
        Nq7UW2l7OP4oXvmJ7ADcbtZ/NI6Lngdv7m6W5V8AAAD//wMAdhxQUvYEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2b985238b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:56 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '384000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01RwvJB9GErQQ16gCjBsx7wn
      via:
      - 1.1 google
      x-cloud-trace-context:
      - e5dc90dcfc303f2695a99183c436bc5e
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy
      fresh apples</user>\n<ai>There are several grocery stores nearby. The closest
      one is ''Meyve Emporium'' which specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nOnly extract pertinent user preferences,
      no temporal desires. Extract same user preferences only once independent if
      the user has said it multiple times.\n</instructions>", "temperature": 0.0,
      "tools": [{"name": "extract_user_preferences_v1", "description": "A function
      that extracts personal preferences of the user in the categories ''Points of
      Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment
      and Media''.", "input_schema": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5RU72sbMQz9V4w+X0p+NGPk48baboxSttF9GMW4Pl3O6511k+S0Idz/PuwkbUph
        sE+H9fSe/CT5dhBqWEEvazud/Vzw5eMTXtx8e7zd3l63ftZcLd5DBbodMGehiFsjVMDU5YATCaIu
        KlTQU40drMB3LtU4WUyWE6EYUSfz6fx8+m4+hQo8RcWosPq1O4oqPmV6+azggxOsDUWjLRpPcYMs
        TgPFynw23kWDT8rOqxHq0SRBNgNjg4zRoxjGzinWRsmsmTzy1khLwxDi2rhYm+g2YV30zsxXVLPX
        KMUOwjZr2hNNu5mZJkWfSVnXu0ETF47gafEzGKsXV0RdloJq3+B8TnY6mw2xGb5ff2l7XF78/hSX
        9zeXVx+hguj6zPvHLbJUHJLCagcDsoaI8W1iQSlEFUuNDVGRUQrn0BB7bEjJfCbahth25F1ne8cP
        qGIbx71YYitpQN5Hy+ReWLCCwjEHDlQgmEfs8eRSlnGDrsPciB/tq7GJOeWbvEy1GNogm5OqYhpi
        c5+2eY4No7RmYKqTxzMY78YxL2TSg6eXGVsXa3uCKLumCb6EPcU65CQ5RUJsiPs9WSjxKxvy1jyj
        6yYaejQHBZOG2in+TyMY/ySUw9b6Fv1DcXsUPLyFR7fNuLYY2NQoGuJ+j0sDxvy0+oZYraBmv8WW
        70LvFLNZZepgFVPXVdCFdZtzSiNcfx/2bjI4VpCvzepC7PN+5ZQe6+CyXp8k+KMKuzpQwQeqvctL
        VhTGcbyrQJQGy+iE4uvnUADJnp+LVpDKf2W122+4VXrAPJjz2XxaASU9DS7Ol+P4FwAA//8DAFWp
        VUy4BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cd89faa6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:57 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '385000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_011U8xtYWewJXFpLhmCLVvrU
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 9c81700f5842617ccb2c6f3b33e4ef7b
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for
      some Italian food right now.</user>\n<ai>I located several Italian restaurants
      nearby. The closest one is La Bella Vita, 4 kilometers away. Would you like
      to navigate there?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes,
      that sounds perfect. Please set it as our destination.</user>\n<ai>Destination
      set to La Bella Vita. The route is clear with minimal traffic. We should arrive
      in approximately 10 minutes. Would you like to start the navigation?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start the navigation and can you also
      adjust the temperature to something warmer?</user>\n<ai>Navigation started,
      and the cabin temperature is now set to a warmer setting. Is there anything
      else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5xU348bNRD+Vwa/5GXvlKTHteSNFiROKkgIKiFQZc3tziamtmeZGScXov3fKzs5
        9U4tEvDktT3f5++bH3tyYXAbl3Trl6tXr+9/WK9Wu29fHn5/rT+/+VvfvsO165wdJ6pRpIpbcp0T
        jvUAVYMaZnOdSzxQdBvXRywDXb24+vpKOWeyq/VyfbO8XS9d53rORtnc5o/TI6nRQ4W3ZePekBiG
        HI9fwd0iRqAHE+wNbEcgFGmP2aAoCUxCIwnlnhRG4QS2Cwo95z2JogXOUDTkbYPiHkPE+0hgzPEa
        3pJBIhgYbIcGIwscuUDmw7Wbu0/amKMvWh23NNV98cvVN2m0376/Ta/yvb7D1Y/fpZ9uf7l1ncuY
        Ku6iukLFPxHq96tKladibnNyE4mFTPnzwHorXCzkbf00wXEMvcc8+J7zEKq9FnQIMYa8zaTqjb3h
        B/KR85bEVzzVQ9xzGPyFo6X+00tuc9kotHiFQ7AdpJBDwgiPoM4p1cr19ESlF9oTRqqZ+XVH57Jg
        39NkNACeCb/I1w65GAj9VUirTcBoJBkt7Emv3fx+nmu7pJHFvJLVmOa4jyGhUc2DCceWxyZJaPBG
        aSJBK0KfGz2gJBJ4GvPvfV2U0gDGsMDhz6LnrnxCV6+UE9muGjo/t3j0MnHIpp5HH7KRkLYWqCsW
        qSO0ObkR91wkVHclaMhfMHFnGAPm/6CcHiYh1VaSgTQItX6/EMHIPHSgeKyaF3fQc4kDCGGMR9hy
        i62mngFAwnZnbV4WF39VTZvdVBu6dmqiIWC1lYrWxjv7a/a2lKV2+T+4gzPi/1Rn8Uxr42lloXO1
        EvNwKck8z+87p8aTF0Ll/Hzg24VW3iYtlxg7V9r/b3M6z7A3/kB1Dm9WL246x8WeHS5fzvNHAAAA
        //8DALx95xhgBQAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cd82ce78-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:57 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '386000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01XQx87LpH7tY24fQAJVTTPv
      via:
      - 1.1 google
      x-cloud-trace-context:
      - b21417aff472915a17bbca9f45d2a91a
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<system>You are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Jeremiah and I''m 27 years old, have one cat named Morgan and a dog named Ehud.
      Used to have a cat named Watson, but he passed away :(; and I''m into pasta
      making.</user>\n</conversation>\n</conversations>"}], "model": "claude-3-5-sonnet-20240620",
      "system": "Extract the relevant user preferences from the conversation.\n##
      Additional Instructions\n    \n<instructions>\nRemember that this schema must
      be useful for prompt engineering an AI assistant.\n</instructions>\n\nGenerate
      a JSONPatch to update the existing schema instances.\n\n<schema id=UserMemory>\n<instance>\n{''age'':
      40, ''name'': ''Joe'', ''interests'': [''drones''], ''relationships'': {''cats'':
      ''Sherlock and Mycroft''}, ''ai_instructions'': []}\n</instance>\n<json_schema>\n{''properties'':
      {''age'': {''description'': \"The user''s age\", ''examples'': None, ''title'':
      ''Age'', ''type'': ''integer''}, ''name'': {''description'': \"The user''s name\",
      ''examples'': None, ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Interests'', ''type'': ''array''}, ''relationships'':
      {''description'': \"The user''s friends, family, pets,and other relationships.\",
      ''examples'': None, ''title'': ''Relationships'', ''type'': ''object''}, ''ai_instructions'':
      {''description'': ''Prompt instructions that you as the AI assistant should
      always retain in subsequent conversations.'', ''examples'': None, ''items'':
      {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'': ''array''}},
      ''required'': [''age'', ''name'', ''interests'', ''relationships'', ''ai_instructions''],
      ''title'': ''UserMemory'', ''type'': ''object''}\n</json_schema>\n</schema>\n",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5RVUW/bOAz+KwRfegc4uTTt2sJvHXAb2st6wda7HrAUAWMxthJZckU5WRDkvw+S
        myUBtgL3ZIsm+X38SNFb1ApzrKWcDs5H49HVf6t/x6PRuFUfF+9fZPHtrzlmGDYNRy8WoZIxQ+9M
        NJCIlkA2YIa1U2wwx8JQq7h30XvXE2cth95wMLwcXA0HmGHhbGAbMP+63ScNzplpKzFrohLP7XRw
        frN+ebzl5Wx58/Sx0hff1lcfrhcLzNBSHePGFIrqQ2uLoJ0dk6eaA3uJaWzTBsy3KEXFNU1T2n+E
        /Seund9E+kzirLYl5jjicCYQKm2XECrv2rKKJwEJ3PRmm1585hM7sed9eKCac3isGFphfyYQyYAW
        uGfPtaYqg3WliyqalJ7P2bMNMPeuhlAxFK1PhhWZlmGC944n2IcnBsusIDhoG0WBE4H+xA77cFue
        AlKZ8IbX/wfpcvAGyEUf7mxgzxLkAAU126iswIy1LUHb4KAhCQQ1LbUtj/CtC6DtCa7eZwSjJZyg
        k1J76Ms+fGZDCafSzU/hK1pFfIKCQpJbwSfnS7JAVgGBcuWr+c+qVf2YYQNkxO1TACXeR/FPFMTZ
        n0vC4I8ZgZstuAjRxfPcpNeO+7s+3N7BnZXg2zSDHXvPQJ7BOpCGCz3XRXTTR257XqwyEAdrPjMG
        DNOq6wiQ97QBrpuw6cexe0/CClzSVxjcTNivOoYZrA8l1LTsCpg7Y9w6inb/5e+HdE/ANey7mP0o
        f+bGUNFFRFnStB0bqeQ0HLdKnTQ+Yv1o72sPD1GxNv8LEdc6VB0er0HbufN1ckpiPjgoKrJlVxAr
        mDsPpKfH0kXqj0mFzlXiMHkWATLmtXkvrfYxWrNRsh/LKMSXtA3yVGwWq8sOZWSnhLNutk7B+5hh
        E8VkSfvLNZij70rvPlWY4x9pPWWYLh7muF8MuMt+GdLt1NeI4fUbnj8IH/y/4nFz8PmN6JMaDxm2
        WFAQzLG7V5ihcmU8xwuVwiVMG04u3dWB3woKGSguOA7n77jbPe92zxlKcM20266nqz19EH5p2RaM
        uW2NybBNf5N8223saXBLtoL5+fVgmKFrw7Hxcniz230HAAD//wMAFdIB6a4GAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a37b81fa16-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:57 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '4000'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '388000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:17:59Z'
      request-id:
      - req_01Vt9a9ayJJui1HZaFWaeW1n
      via:
      - 1.1 google
      x-cloud-trace-context:
      - c5b1a92bb50e3ed9d0f115f982033469
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>"}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tools": [{"name": "extract_user_preferences_v1", "description":
      "A function that extracts personal preferences of the user in the categories
      ''Points of Interest'', ''Navigation and Routing'', ''Vehicle Settings and Comfort'',
      ''Entertainment and Media''.", "input_schema": {"$defs": {"ClimateControl":
      {"properties": {"fan_speed_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Airflow Direction Preferences"}}, "title": "ClimateControl", "type":
      "object"}, "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5xU244TMQz9lSjP6apd7n3jKkDAAyBx0ypyE8802pkkOE7FUs2/I6eFtiysBPMy
        M459cs6xk60OXi/1WHo7Xzz//vHZ6tnjJ08/vaEPD9651/nN5m3URvNVRsnCUqBHbTSlQQJQSigM
        kbXRY/I46KV2A1SPs1uzO7OSYkSenc/Pb8/vns+10S5Fxsh6+WX7E5Txm5S311I/goJepah4jcql
        uEEqwCFFo14oB1HhNyZwrEoaUdWCpDJhh4TRYVG1hNi32n2elRR7lGI3C9XV6ATzTL1CViMqnxSv
        gVWXSF2leqYnc+CX0iAo2uyskv8qZn2+9+nJ97eXL3P6SvdfP3aLgLTQRkcYpe4GAgIVc2W93OqM
        xCFivJ4oq5Qqh9i3RKDL3edkjuKT0UzQdcFZiN66FH0Qba3850qIXaKx+WhLquTwdKMvW33410tN
        CMOMw4hqj6Bq9sBYtNEFpYUnCJZwgzCg2PN+vW8LlEv0Clap8i+UfV+FPRoVog8ORIeCoy62LvyV
        wZmeLqZJJmnsErEtyILQ5LohjMAoJjClobnWYAm9ZRwzEnAlvC743lx57An/SSHh14qF0StOqiA3
        bUfbSPgA3IgbPYR+LYRbt2BchR2DrWjKKUQuNnU2REbC0iZE3lBJTtmJoEPc7kb1d1EPcx5w9b+a
        ImxC30ZGdPzCurltvA5FHYgpt4YQ98q7QGgLN8jd4HqITqw4CfaUHNKVLeuU837GJ6OFPzGEOMpZ
        EfNG9AHEkrGW4OSjg02iwGh7jPSnua55hcBqV/Cfjc4DXLXbh9diwQ7yZleOt92bQeBDajJy8g5a
        pyd5LowunLIlhCKWHN8/baEImSYn1mEwurYrebndXSmW0yXK4b89v7MwOlU+Cd69P00/AAAA//8D
        AJOzGJTzBQAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07a2cb056441-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:58 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3999'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '370000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:03Z'
      request-id:
      - req_01AdJQFEz84yEjBTnYUenMBa
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 5b18409cc0cb0271065f30a32a10f8e8
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_0aaFPPCWDiAoPyXQX2PS8TcJ", "function": {"name": "UserProfile",
      "arguments": "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\":
      [\"Greet Kevin in French.\"], \"other_useful_info\": []}"}}]}, {"content": "Error:\n\n```\n1
      validation error for UserProfile\nrelationships\n  Field required [type=missing,
      input_value={''age'': 0, ''name'': ''Kevin...''other_useful_info'': []}, input_type=dict]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_0aaFPPCWDiAoPyXQX2PS8TcJ].",
      "role": "tool", "tool_call_id": "call_0aaFPPCWDiAoPyXQX2PS8TcJ"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTy27bMBC8+ysWe8nFThXFT93SNkWRooXbBE2AKBBoaSUx5csklVYw/O8FJb+S
        VgeB2NmdGa5GmwEA8gITwLxmPpdGjBbP19/W91/npTQvd+XLc7tuJ+/LVn1x1/Ech2FCr54p9/up
        81xLI8hzrXo4t8Q8BdaLWRxNprNoNu8AqQsSYawyfjTWoziKx6NoMrq43A3WmufkMIHHAQDApnsH
        i6qgP5hANNxXJDnHKsLk0ASAVotQQeYcd54pj8MjmGvlSQXXqhHiBPBaiyxnQhyF+2dzcj7uiQmR
        RZ/XP2JxW41X05vVz/GkmN6QZ7eTE72eujWdobJR+WE/J/ihnrwRA0DFZDe7ZD6vP+0al8wySZ6s
        e0MFgMxWjSTlwzVwk6LLa5Is40WKSbrzzdin5fLD/Ud+pZftw/eHeHk7v8tvUhymaIk5rbiquv67
        muDMkmBB1tXcuDMoOYkCuANL64ZbKmDVePjNHEjuHFcVcAW+JuCKe84EBNFzuCqKgDEFJI1voY8P
        lNr+o+A1SCLfkfT+91rdzc47oyZshFyKyeMmRW06v6wo9mDdFd69ou6wFyYaSjHZbLdPW3y1v+3g
        f+en3Wl7yJ3QlbF65d7ECEuuuKuzfofhAzivTS8R6J66fDevIovGaml85vUvUoFwES16Pjz+UUd0
        drkDvfZMnEzN48HOIbrWeZJZyVVF1ljexR1LkxWT2fQympWLCAfbwV8AAAD//wMAIpZbKfcDAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cc99a2f99b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:59 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1076'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999513'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_2c1d560a0da34b30b409d4534c09ad8f
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=a4206dff-4858-48ef-8944-7a3a71a77c8b>Hello</user>\n<ai>Bonjour Kevin! Let''s
      start with some basic questions to assess your French proficiency. \n\n**Fill
      in the blank:** Je mange des p\u00e2tes parce que j''ai ____. \n\nA) soif  \nB)
      faim  \nC) froid  \nD) chaud</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_kdllMERSCVhNT1iy0XSMUwVO", "function": {"name": "UserProfile", "arguments":
      "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\": [\"Greet
      Kevin in French at the start of the conversation.\"], \"other_useful_info\":
      []}"}}]}, {"content": "Error:\n\n```\n1 validation error for UserProfile\nrelationships\n  Field
      required [type=missing, input_value={''age'': 0, ''name'': ''Kevin...''other_useful_info'':
      []}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_kdllMERSCVhNT1iy0XSMUwVO].",
      "role": "tool", "tool_call_id": "call_kdllMERSCVhNT1iy0XSMUwVO"}], "model":
      "gpt-4o", "n": 1, "stream": false, "temperature": 0.0, "tool_choice": {"type":
      "function", "function": {"name": "PatchFunctionParameters"}}, "tools": [{"type":
      "function", "function": {"name": "PatchFunctionParameters", "description": "Respond
      with all JSONPatch operations required to update the previous function call.\n\nUse
      to correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "parameters":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTy27bMBC8+ysWe8nFTuVXXelWF2mNAHGCJg0CRIZASyuJDkUyJBXHMfzvBSXH
        dtLqQBA7uzPDxWjbAUCeYQSYlsyllRa9cHUxf74azlfZ88V60J9NZ5fhL3p7WbnZSGPXT6jlilL3
        PnWeqkoLclzJFk4NMUeetT8ZBOOvk2DyrQEqlZHwY4V2vZHqDYLBqBeMe/3hfrBUPCWLETx2AAC2
        zektyoxeMYKg+16pyFpWEEaHJgA0SvgKMmu5dUw67B7BVElH0ruWtRAngFNKJCkT4ijcftuT+3FP
        TIhkHN48jarpQ6DVNZvxJc3fwrvL6eZEr6Xe6MZQXsv0sJ8T/FCPPokBoGRVM3vDXFr+3DfeMMMq
        cmTsJyoAZKaoK5LOPwO3Mdq0pIolPIsxilvfT5kQVxe/b3/cl/O7Pt8ED7dXf9b31zF2YzTErJJc
        Fk3/XUlwZkgwL2tLru0Z5JxEBtyCoeeaG8pgWTtYMwsVt5bLArgEVxJwyR1nArzoOXzPMo8xCVRp
        t4E2PpAr84+CU9CkaQNr7sqGq33GeWNR+12QjTF63MaodOOUZdk7WDaFLx9IG+yFiZpijLa73WKH
        Hza36/zvvtjfdofECVVoo5b2U4Aw55LbMmm351dvndKthKdbNMmuP4QVtVGVdolTTyQ9YTgYt3x4
        /JeO6GQfe3TKMXEyFY47e4doN9ZRleRcFmS04U3QMddJNhzmk+VoEBJ2dp2/AAAA//8DAIQVJwnx
        AwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cc9cb59822-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:59 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1189'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21999506'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_57e18be7f9f03b7ac53fd47127f35adc
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85>I''m
      Joe and I''m 40 years old, have two cats named Sherlock and Mycroft, and I''m
      into drones.</user>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_UwHQUuE14LnhbrnhTzKZsmku",
      "function": {"name": "UserMemory", "arguments": "{\"age\": 40, \"name\": \"Joe\",
      \"interests\": [\"drones\"], \"ai_instructions\": [\"Remember user''s name,
      age, interests, and pets\"]}"}}]}, {"content": "Error:\n\n```\n1 validation
      error for UserMemory\nrelationships\n  Field required [type=missing, input_value={''age'':
      40, ''name'': ''Joe''..., interests, and pets\"]}, input_type=dict]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}}, ''required'': [''age'', ''name'', ''interests'', ''relationships'',
      ''ai_instructions''], ''title'': ''UserMemory'', ''type'': ''object''}\n```\nPlease
      respond with a JSONPatch to correct the error for schema_id=[call_UwHQUuE14LnhbrnhTzKZsmku].",
      "role": "tool", "tool_call_id": "call_UwHQUuE14LnhbrnhTzKZsmku"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTS0/bQBC+51eM9pKLE5JACPhGq1SViBBQqNRiFG3ssb2wr+6OadMo/73adcir
        +GCt5pvvsY9ZdQCYKFgKLK855crK3uXL9OZXPpyVmqSS9/LT2fD28+hydCqr5RVLAsMsXjCnd1Y/
        N8pKJGF0C+cOOWFQHU5Gg/H5ZDC5iIAyBcpAqyz1TvvjHjVuYXqD4Wi8YdZG5OhZCk8dAIBV/IeM
        usA/LIVB8l5R6D2vkKXbJgDmjAwVxr0XnrgmluzA3GhCHWLrRso9gIyR85xLuTNuv9XeendQXMr5
        y+P0x/nsRk7x7vpBv+nm6vuiwdm3Pb9WemljoLLR+faA9vBtPT0yA2Caq8i95ZTXXzaNt9xxhYTO
        H0kBMO6qRqGmsA22ypjPa1R8LoqMpVmb+/H317vHZjo8m+l64XT98Pf6p1evTcaSjDnk3mihq9j/
        UCN0HUoebH0trO9CKVAWIDwo4b3QFQgNVCMIbRuCghPvw1VRxNrHXDLgybhAKY1TsQH4wjQUSY1H
        1/VgkXw/ZrJh8+gzlj6tMmZsjMaL4h2sY+HEOmPRkUB/cmAb2964bDBj6SpjBfrcCRvw7SY3nqUT
        qAufQMmVkMskhki4LsBQjQ4OdNtwJEhi1Ln/zzTcfITaYcnYev28ZgdXtu58tH7erNbbpy5NZZ1Z
        +KOXy0qhha/n7bWFO/dkbGsR5J7jSDUHU8KsM8rSnMwr6iB4cT5p9dhuinfo5XADkiEu9+rji84m
        IfNLT6jmpdAVOuvEdsI6684/AAAA//8DAHnTZKZgBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cc3fd19854-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:59 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1198'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999572'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_0c2eceb57c535b6313671990d7a7b478
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_4sOkK5vxxhnNR91xdtwH393w", "function": {"name": "UserProfile",
      "arguments": "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\":
      [\"Remember that the user is named Kevin.\"], \"other_useful_info\": []}"}}]},
      {"content": "Error:\n\n```\n1 validation error for UserProfile\nrelationships\n  Field
      required [type=missing, input_value={''age'': 0, ''name'': ''Kevin...''other_useful_info'':
      []}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_4sOkK5vxxhnNR91xdtwH393w].",
      "role": "tool", "tool_call_id": "call_4sOkK5vxxhnNR91xdtwH393w"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTS2/iMBC+8ytGc+kFWB6lQG7tqvtopS67YncrNSgyyYQYHNu1nUIX8d9XccJT
        zcGy5pvv4dFk2wBAnmAAGGfMxbkWrfHy/ulV0O13PX1OH7p3Zpk96/nd19X68c8SmyVDzZcUuz2r
        HatcC3JcyQqODTFHpWp32OsMboad4cgDuUpIlLSFdq1+e9ByhZmrVqfbG9TMTPGYLAbw0gAA2Pqz
        zCgT2mAAnea+kpO1bEEYHJoA0ChRVpBZy61j0mHzCMZKOpJlbFkIcQI4pUQUMyGOxtW3PbkfB8WE
        iJ5Gf6/nprhX+cPPbNQf9T7zuMv/TU/8Kul37QOlhYwPAzrBD/XgwgwAJcs9d8JcnH2pGyfMsJwc
        GXshBYDMLIqcpCufgdsQbZxRziKehBiEVe5r+2P1OHjbbDL59Gvc3SRu/a0/7q9DbIZoiFkluVz4
        /mlGcGVIsNLWZlzbK0g5iQS4BUOvBTeUAJfgMoLflszEqJQLgsq2DbdJ4rGPRZzyYGHJgK6ZCXOs
        7aPo8s1kQwxetiEq7ROxJNmDmS98OlP22BsTBXlwuwtxN9vh2ZR2jY/us/q2O2yXUAtt1NxeLAum
        XHKbRdWkyjFbp3RlUcrN/BYXZ4uJ2qhcu8ipFclScNyvtxiPP84RvRnUoFOOiRPWeNCoE6J9t47y
        KOVyQUYbfljqxq7xHwAA//8DAIr15qzTAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cc995c15ce-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:59 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1094'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999513'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_a1895464418964301439e53f34296dc1
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_ZqNAlQFC3nhgP6MnJDgQIxlD", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"comfort_settings\": {\"lighting_and_ambience\":
      1}}}"}}]}, {"content": "Error:\n\n```\n5 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''lighting_and_ambience'':
      1}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'': 1}, input_type=dict]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''lighting_and_ambience'':
      1}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''lighting_and_ambience'':
      1}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_ZqNAlQFC3nhgP6MnJDgQIxlD].", "role": "tool", "tool_call_id":
      "call_ZqNAlQFC3nhgP6MnJDgQIxlD"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3RTyW7bMBC9+yuIufRiJ04cL9EtcJKiBRpk65bIEChqJDGlhgxJZTP87wUl23KC
        VgdhMG/mvUdyZtljDGQGEQNRci8qowbHD2cXj8WP32o+FreiIlte/5x8vpmm1jsN/dCh0wcUftO1
        J3RlFHqpqYWFRe4xsB5MD4fjyXQ4nTVApTNUoa0wfjDaGw98bVM9GB4cjtedpZYCHUTsvscYY8vm
        HzxShi8QsWF/k6nQOV4gRNsixsBqFTLAnZPOc/LQ70ChySMF21QrtQN4rVUiuFKdcPstd+LuorhS
        yffrs0f6dTK6uZvMZuen6Yi/zJ6e5287ei31q2kM5TWJ7QXt4Nt89EGMMSBeNb2X3IvyfF14yS2v
        0KN1H6gYA26LukLy4RiwjMGJEiueyCyGKG593z1enKir8/mIyuJy8o2+nhZXX17UaQz9GCxyp0lS
        0dTflsgMWi8JySe1Q5sYizlaJIGO5RJVxlypa5UxSULVGTJfIguVnxzralmuLZPk0UptmZJF6SUV
        LLUhInRur1E34ZjoYojulzFo05jgWbYByyax/39L+0JXubY+ceiDgtvfaCWcsoRXqQx1Dd8TVzXG
        EC1j2DhLttWds136Rl7p5xhWq8UK3l3+qveveLGOVtuhVbowVqfuwwxCLkm6MmkfILye89q0EoFu
        0SxH/W7ewVhdGZ94/QcpEI6OZ5OWELqF7OB2BZtp91x1+aPh5Ki39gju1XmsklxSgdZYud2W3qr3
        FwAA//8DAJYCl80sBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cc9e576420-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:17:59 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1602'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996799'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 12ms
      x-request-id:
      - req_c9ab630129cb6d97475501ad98ce9e8d
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_u2TSKIKIfBcZAWf7GhnUMkyH", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_u2TSKIKIfBcZAWf7GhnUMkyH].", "role": "tool", "tool_call_id":
      "call_u2TSKIKIfBcZAWf7GhnUMkyH"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTVPbMBC951fs6MIlCUnAJPEtQNNSPoYp0E6LGY8ir22BrHUluSVk8t87sp0P
        mOaQkffte293pV11AJhMWAhM5NyJolS96fOnm9/BZPJ8rubzh/E1HX+9nV6+Tc6C17cr1vUMWjyj
        cBtWX1BRKnSSdAMLg9yhVx2OR4PgZDwYT2qgoASVp2Wl6x31g56rzIJ6g+EoaJk5SYGWhfDYAQBY
        1f++Rp3gKwth0N1ECrSWZ8jCbRIAM6R8hHFrpXVcO9bdgYK0Q+3L1pVSe4AjUrHgSu2Mm99q77wb
        FFcq/jk/zgJ7Ojs6p/PlTAWBnH8bZGKy59dIL8u6oLTSYjugPXwbDz+YATDNi5p7y53I523iLTe8
        QIfGfpACYNxkVYHa+TbYKmJW5FjwWCYRC6Om7mp0f3d5cXmRnopfsx/p+HOuH65fll8i1o2YQW5J
        S53V+fc5QmXRQGkwRYNaIKRkQORcZ1Jn4HIEqR0aSQaUzHLno4IUGXAES1SK/oJGTKz/XiDwJMHE
        nz314KqlzHQyKxbSGxyAxbpNoLRJ+o65FArv0PlUO9PJGRUpGXcAgjvMyCz7dfGlnxLaiIWPq4hR
        WffAk2QD5nXgsETjpEbtYt9bvOvN+mfshWPbevU3PcVcJzFvSzzctBxv4brlfana8w9XFdamzSQi
        tn5as3d3tu787/zUntbbt64oKw0t7Ieny1Kppc3j5t78pVtHZWPh5Z7qnarerQkrDRWlix29oPaC
        x8PpSSPIdnu8g6dBCzpyXO3RRtNhp62R2aV1WMSp1Bma0sjtknXWnX8AAAD//wMAAg50QWMEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d1098f67a5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:00 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1328'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996549'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 13ms
      x-request-id:
      - req_9500a22292033ee0c288f3f6bb87958b
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_vYen3iFfug2nejKNIwRYXb4l", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_vYen3iFfug2nejKNIwRYXb4l].", "role": "tool", "tool_call_id":
      "call_vYen3iFfug2nejKNIwRYXb4l"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTU/jMBC991eMfOmlXykU2NyqXUArWAQL+9ElKHKdSWJwxsF2ylZV//vKSdoG
        tDlE1ryZ92aePZseAJMJC4GJnDtRlGr46fn85nVZLK7mNy+r9b38ckmzqUq/zYOTV8EGvkIvn1G4
        XdVI6KJU6KSmBhYGuUPPGpxOJ7OT08npWQ0UOkHly7LSDY9Gs6GrzFIPJ8F01lbmWgq0LITHHgDA
        pv77HinBvyyEyWAXKdBaniEL90kAzGjlI4xbK63j5NjgAApNDsm3TZVSHcBprWLBlToIN9+mcz4Y
        xZWKk9tgfv6jKu9wJn5di+vF3dnrn8t00dFrqNdl3VBakdgb1MH38fCDGAAjXtS1t9yJ/KJNvOWG
        F+jQ2A9UAIybrCqQnB+DbSJmRY4Fj2USsTBq+l4tkI7kRVplU8Lnq5uvb98Xv5fHKmKDiBnkVpOk
        rM5/yBEqi6ZvoTSYokESCKk2IMmhkdqAklnuJGUgtNIGcm5hiUggEyQnU4kJcAtv3BQjeMjleyLv
        N1SUoAGXI/SvW7I5JfNiKX1SHwR3mGmzBklN1k/MpVB4j87n2jkln3WRauP6YLF2CHRa990Rs6N6
        vtIbiTZi4eMmYrqsx+RJsgPzOjAu0ThJSC72NHGHZiwardi28uOdAzGnJOZt2+OdQfEerg3qUtWa
        K64qrEW9RxHbPm3Zu0vd9v53fmpP2/0yKJ2VRi/th7fNUknS5nFzsf5VWKfLRsLTPdVLV73bI1Ya
        XZQudvoFyRMeT4N269hh0Q9wMAla1GnHVafuKAh6bZPMrq3DIk4lZWhKI/dr2Nv2/gEAAP//AwAL
        B5mvhQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d14fd21666-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:00 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1335'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996534'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 13ms
      x-request-id:
      - req_706d55cc6db65bcb24ba3e0919207130
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_aGg0dSrS6YsY8JuQjBS89dE0", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_aGg0dSrS6YsY8JuQjBS89dE0].", "role": "tool", "tool_call_id":
      "call_aGg0dSrS6YsY8JuQjBS89dE0"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUy24bOwzd+ysIrZ10nBvn4d3tRXrRAC2SJl0UdWDIEmdGiUZUKKqtYfjfC834
        1aBeGAIPz+EhJc56BKCcVTNQptViuuhPrp9vPr/et93y9svdl6Z+793q4ivdy4f/buoXNS4MWj6j
        kR3r1FAXPYqjMMCGUQsW1cnlWTW9uKwur3qgI4u+0JooJ/+cTk8k85JOqsnZdMtsyRlMagbfRwAA
        6/6/eAwWf6kZVONdpMOUdINqtk8CUEy+RJROySXRQdT4ABoKgqHYDtn7I0CI/MJo7w+Fh9/66HwY
        lPZ+4S/Pn89u3eTjv9Wnx6p+fX05qx/s9cVRvUF6FXtDdQ5mP6AjfB+fvSkGoILueu6dFtN+2Cbe
        adYdCnJ6IwWgNDe5wyClDbWeq2Ra7PTC2bmazQff+v+msg/8cPEtfbu6zffP7x+uru1NNVfjuWLU
        iYILTZ//2CLkhAyRsUbGYDAB/hLWvRHAYCgHQUYLP7R3Vg9hZuIENiMIgQuGmNEIuBCzQJlHOoWi
        fSxbE0OXkzPwExkhZWMwpTp7v9qVRDuGZVFoEUhaZDBasCF2mAqhBZ2AKYsLzRgMdTWxQEIpgTQG
        HSxEckESUA2uN55kqBdIIDJFZL8qXjotgnawOfj+oX3GBAHRlraWCEk4G8mle20MsXWhKVDxZ7F2
        AS0MF9B3h9q0O8er037csdwrprmafV/PFcV+6ozRa4O7hLYPvovI4gIGWZQbWRyN7l0/tj699zhX
        s8nmaaP+eBub0d/OT9vTZr9TnprItExvVkTVLrjULob3UR5XEopDiSL31O9u/mMdVWTqoiyEXjAU
        wfPz6nwQVIfvxQGeVNMtKiTaH/Gm1fVoa1KlVRLsFrULDXJkt9/m0Wb0GwAA//8DAFaQQYTMBAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d15ac4270a-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:00 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1698'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996385'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 14ms
      x-request-id:
      - req_bf1e45c0ccad17d4eb6cee174bd1e387
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_IQ9WxRj0VRVc0BQ6JDSPeFet",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 1, \"traffic_and_conditions\": 0},
      \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\": 0},
      \"points_of_interest\": {\"restaurant\": 1, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 0}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_IQ9WxRj0VRVc0BQ6JDSPeFet].", "role": "tool", "tool_call_id":
      "call_IQ9WxRj0VRVc0BQ6JDSPeFet"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RUTXPjNgy9+1dgeFZcJ5vEsY/bJl3vbjt20iadrjMamoQkZimSBaGduB7/9w4l
        +SOe3qKDhgLwgIcHCpsBgDBaTEGoSrKqgz2bvNz+/s+XLy+fxuu/Z5/XN0rffL2ZTZqqGc9qkSWE
        X72g4h1qqHwdLLLxrnMrQsmYsp6PL0ZX1+PR+KZ11F6jTbAy8NmH4dUZN7TyZ6Pzi6seWXmjMIop
        fBsAAGzad+LoNL6KKYyynaXGGGWJYroPAhDkbbIIGaOJLB2L7OBU3jG6RNs11h452HubK2ntoXD3
        bI7OB6Gktfnd3XxR0+2vj5/+un661v8uPn59WKinD0f1utTr0BIqGqf2Ah359/bpSTEA4WTdYueS
        VXXXB84lyRoZKZ6kAhCSyqZGx6kNsVmKqCqsZW70UkyXHe/ZYvL0ev8yerx/VKOPi+vPvzzM8Q55
        KbKlIJTRO+PKNv6PCqGJSBAICyR0CiPgK5NUjBqSmtI4QCJPEXSDwB6MU54IFYNxoWFI/cchpFzH
        aWLlG6thhRCZGsUNoQaplCdtXJkScYWgsTAONXR9QOEJ/oxI80OiLBW0TQuKAZUpjHpTKGHufcPG
        lRn87OvCE8MDcjLEDObeOI7gC5g5RsLIGUin4TZ9pfaSnK3lN9RGDluZQpoHxqWYftsshQ+tWoTB
        SoW7gKo1/hSQ2Dh0nCcl8yNmQ+pYtYAf0ja4FNNNwtL3bgKjNJFd0PQ8WwomWRRG5dLpXHmnTboQ
        icdou83eQUV1uuSx1+WUk7KmloypJpO3PTdryiqFt3RkvTIp2fvJhHYkuS9y04/klE6yyYak416X
        whDmkWWSoyenpVOJ21trSV4hrfNY+RB6ld/HFo8vSqtEnS7KKeW6iUbtZiq18W1o8FrJ1F9i8bwV
        b/7n7eD/zs/9abvfg9aXgfwqnqw1URhnYpV3/3RaCJF96EqkdM/tvm3erFARyNeBc/bf0aWElxeT
        fuGKw44/uC9Gl72XPUt7hLucXA56kiKuI2OdF8aVSIHMfgMPtoP/AAAA//8DAIFF5QCABgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cc9ce796de-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:00 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2590'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996468'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 14ms
      x-request-id:
      - req_a6cb04823553ea6b06652eaecdb4d338
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_Fhulu2nxFuPFxxKz768opVDA", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Fhulu2nxFuPFxxKz768opVDA].", "role": "tool", "tool_call_id":
      "call_Fhulu2nxFuPFxxKz768opVDA"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6yUXW/TMBSG7/srLF+3o93WhvUOGEUICQ2JbzJFZ/ZJYnBsYx+Plar/Hdlp2lK4
        g1xE9vl8/CY+mxFjXEm+ZFy0QKJzenL19fnr79fN6urT/Ys3a/r49Ea+bJ8tLuaf37+NfJwy7N1X
        FDRknQnbOY2krOndwiMQpqqz4nw6XxTT4nF2dFaiTmmNo8mlnZxPzy8n0/lkdrFLbK0SGPiSfRkx
        xtgmvxOikfjAl2w6HiwdhgAN8uU+iDHurU4WDiGoQGCIjw9OYQ2hSdQman3kIGt1JUDrQ+P+2Ryt
        DzqB1tUcX8fm3Xr9YzFFt7hvi+vGvPzwWR7160uvXQaqoxF7fY78e/vypBlj3ECXc2+ARLvaBd6A
        hw4JfTgpxRgH38QODaVj8E3Jg2ixg0rJki/LnnvVRh3PzcMq3qweHl79LBaPrXt//aTk45J7hGCN
        Mk2Of9siU0aRAs2UcZFYDCiZMoQN+sCUCYQgma0Ztcg8fo/Ko2T9v8EC+Sgoegystp4hiJY5jzV6
        NAKZAMLG+vUZe548w5aF1kYt2V0q6DQIlOyHoja3AOe8dV4B4R9dGAQmsVYmI+bw/vhn+WguaYih
        5Msvm5Jbl0+46zAEtNn4yKEnZdBQFQP66sAcHnkbKcszLvk96IglX25Srv/Wq7bZJhmHqH5LHupa
        iQqMrIQ1UqXPGLJ3ux3/A42wXW09VQEp9QunWEKrDghTU/JWDzxaNW2Kz0DQ3alU7T/gOKsMhcrW
        VfpFPAY6BUo2iB4MDSy18lgFgiTJYJNgRMI7MTfeCvTrKrTWuUHefyPGxEmgTLo0WY4OpYJT7C4G
        JfYfF6SyOdZZKSDQjuN2y3+7jtvR39a3u9V2P8a0bZy3d+FkKvFaGRXaqr+S6T4Hsq5vkcrd5nEZ
        f5uA3HnbOarIfkOTCl7OillfkB8m9ME9u1rsvGQJ9FHexaIY7SB5WAfCrqqVadA7r/IA5bWr5LxY
        XEyL+mrKR9vRLwAAAP//AwBroVXUSQYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd3f0915e1-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:00 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2563'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21994716'
      x-ratelimit-reset-requests:
      - 7ms
      x-ratelimit-reset-tokens:
      - 14ms
      x-request-id:
      - req_493831ca52ed4c2e090e207e5cf0fb26
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_puydGFBkN53McHrHDJJU3A2M", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_puydGFBkN53McHrHDJJU3A2M].", "role": "tool", "tool_call_id":
      "call_puydGFBkN53McHrHDJJU3A2M"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xUTW/bOBC9+1cMeLZTx7bsxrfuttlui6QFNkXRVoHAkCOJMUUy5Ki7iuH/viAl
        f9TdW9cHg5qPN+8Nh7MdATAl2RqYqDmJxunJ1eOb26ebbvF+Vj3dvX/OVlebL3fLvz7NP6jnWzaO
        GfbhEQXtsy6EbZxGUtb0buGRE0bUy9Vsmi1X09XL5GisRB3TKkeThZ3MprPFZJpNLudDYm2VwMDW
        8G0EALBN/5GikfgPW8N0vLc0GAKvkK0PQQDMWx0tjIegAnFDbHx0CmsITWRtWq1PHGStLgTX+li4
        /21Pzsc+ca2LaskXd7+Lr9fLLy/l5uqxfP5TanvdnNTroTuXCJWtEYf+nPgP9vVZMQBmeJNyP3IS
        9fUQ+JF73iChD2dQAIz7qm3QUJTBtjkLosaGF0rmbJ33vF3byT+uf9vcZvMb8da/ff3u3af5q9lN
        zsY588iDNcpUKf6uRlBGkeIalHEtQRtQgjKEFfoAygRCLsGWQDWCx6dWeZTQzwYE8q2g1mOA0npA
        LmpwHkv0aASC4ISV9d0FfEYwiBLIgkenucCIFxD+VlQnaGG9j5A/IY8Bv6MBlRh0wD0CNo66cQRL
        Q9kdUfpuXCSlLrYUQ87W37Y5sy4JHqrvA+pkfOHQkzJoqGgD+uIoIbzwtqXUrXHOvnPdYs7W25jr
        N30Tt7vY1X1U/0mel6USBTeyENZIFW81JO9uN/4FNsI2pfVUBKRYL5zTElo1nDAWJW/1no9WVR3j
        EyHePKiI9j/QcVYZCoUtizgxHgOdE4o23npuaOhbyvYoi6OniA8oXlPOnlqFNMxpqQzKnN1HAaXy
        WATisY97UZIbETWdmStvBfquCLV1bn8nvyYTozjiysSHl3rYoFT8XGvTBiUOE8GlsinWWSl4oIHH
        /Y798KR3o/863w+n3WEVals5bx/C2WZjpTIq1EX/rONOCGRdXyLC3aeV2/6wRZnztnFUkN2giYCL
        eTbsXHbc8kf37DIbvGSJ65O8bJmNBpIsdIGwKUplKvTOq7SEWekKma2W8+mqvJqy0W70LwAAAP//
        AwB9Th9EjQYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd2cc81742-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:00 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2599'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996380'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_68dfb33c2f296b7c2d6dd2ad968e4698
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_Yzugs2YJLwSf8J6RuJfsUdDb", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Yzugs2YJLwSf8J6RuJfsUdDb].", "role": "tool", "tool_call_id":
      "call_Yzugs2YJLwSf8J6RuJfsUdDb"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RVTW/bOBC9+1cMeFZSx81XfWzXWWy6XQRuAzStA4EmRxITimSHw25dw/99QUn+
        iLG3+GDIM/PePL6hxusRgDBaTEGoRrJqgz159zT758dDM5+9f3/3dc6fbtHdj2c3377Y58k3UWSE
        Xz6h4i3qVPk2WGTjXZ9WhJIxs55dTcYXl1fjq+su0XqNNsPqwCdvTy9OONHSn4zPJhcDsvFGYRRT
        +D4CAFh331mj0/hLTGFcbCMtxihrFNNdEYAgb3NEyBhNZOlYFPuk8o7RZdkuWXuQYO9tqaS1+8b9
        Z33wvDdKWluO9Y+bp4/qyV7+Ob9epdnvD/JrMh+XB/166lXoBFXJqZ1BB/ldfHrUDEA42XbYO8mq
        uRkK7yTJFhkpHlEBCEl1atFxPoZYL0RUDbayNHohpote98PvVMfJw+3f/36urm8v5+m2ivf6j+VC
        FAtBKKN3xtVd/ZcGIUUkCIQVEjqFEfAXk1SMGrKb0jj4Ka3RMksDJPIUQScE9mCc8kSoGIwLiSFb
        EU8h0x4yxsYnq2GJEJmS4kSoQSrlSRtXZyJuEDRWxqGG/khQeYL7iHS3JypyQ5s6UAyoTGXUi0YZ
        g1I1oCRj7WkF1jwjzH1i4+oCPvi28sTwGTkHYgF33jiO4Cv4yzESRi5AOg2z/CsfPpvdRT6hNvK0
        MzHkaWFciOn39UL40HlJGKxUuC1ouuCbgMTGoeMy+1weiH1DvaoO8FPahAsxXWcsPffzGed5bYum
        Z8VCMMmqMqqUTpfKO23yTLKO8WZTvEKK6n0p4+DLsSZlTSsZc08mbwdt1tRNLu/kyHZpMllW+jox
        oRtJ6avSDCM5lpNjMpF0PPhSGcIycndFB3FaOpW1vYzW5BXSqoyND2Fw+XVq8fCidE60+aIcS25T
        NGo7U6mN70qD10rm82UVjxvx4m3fjP7v+XF42uy2pPV1IL+MR0tPVMaZ2JT9G5/XRWQf+haZ7rHb
        xunFghWBfBu4ZP+MLhOev70+7wnF/h9gn56cDctasGdpD3AX785Hg0gRV5GxLSvjaqRAZrefR5vR
        fwAAAP//AwCoY8RdngYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cc9ca56446-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:00 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2765'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996380'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 14ms
      x-request-id:
      - req_e96a4277036ece0fb28a7d82f0b9442c
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_DwnnnOJISjdHR6b887fRFYaI", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_DwnnnOJISjdHR6b887fRFYaI].", "role": "tool", "tool_call_id":
      "call_DwnnnOJISjdHR6b887fRFYaI"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RUTW8bOQy9+1cQuvhip3bixImv3RZNkd0WSRbtohMMFA1nRq4kjiVOEsfwf19I
        468YvWzXB0ND8r1HkRRXPQChCzEDoWrJyjZmeDX/8NeCnufTn98XV3YxvmvfT+pPX77dv/jXP8Ug
        Iuhxjoq3qBNFtjHImlznVh4lY2QdT09H5xfT0fQyOSwVaCKsang4oeHp6HQyHJ0Px2cbYE1aYRAz
        +NEDAFil/5iiK/BFzGA02FoshiArFLNdEIDwZKJFyBB0YOlYDPZORY7Rxaxda8yBg4lMrqQxe+Hu
        tzo47+skjckRXz//fdN8/3B78/ptIRfV5MVe35zND/Q66mWTEipbp3b1OfDv7LMjMQDhpE3Yr5JV
        /XET+FV6aZHRhyMqACF91Vp0HK8hVpkIqkYrc11kYpZ1ef/x7Jz78vn6bl58ur14vLyclrcf/5HX
        mRhkwqMM5LSrUvx9jaCdZi0NaNe0DG3AArRjrNAH0C4wygKoBK4RPC5a7bGAbjYgsG8Vtx4DlOQB
        paqh8ViiR6cQlGSsyC9P4J5AkfcRw7UOA3hGcIgFMEHj6UkXmAS2Qcf8iT4G9I2uatauyqUrcmkf
        dVTqH6q2rkAPfUW2JM95QI7xoQ/SFeDR0hOCNAaIa/TbHDUGCDrCucYlSI/giCFWWpNLJUn6bUDf
        VeoklbOJfcOQidmPVSaoSVXtRLb+OtneNehZO3ScR458n3B456nl1JH14PdJGtKOQ05lHrvnMfD/
        48PIwlK7WINUbYuFlsekjZHqP7AedyUhn6RpMROzVSZ+2d7Ola6lyee7GEWG3tBv2rC3pHyepbdJ
        J8Q7OYUHkNzjE0qD3fO5Q05d3krBVirOaSCLXMePSDiAa1DS9eOQxsHiGkOcXzLA5DCAdEtLHk8y
        sX5Yr9cPa/HmKa97vzo/bE7r3Qo0VDWeHsPRRhOldjrUefec4y4ITE0nEeke0qpt32xP0XiyDedM
        P9FFwsl4OukIxX67793jq4uNl4mlOcCdTUe9TZIiLAOjzUvtKvSN12n5irLJi/PpxdloWl6NRG/d
        +xcAAP//AwDE/63AhQYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd29f617da-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3085'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996535'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_1569b0652ce3d415fbc10e874a82c234
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_7SHmGOnBJ13erxUzvmMWHrYz", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_7SHmGOnBJ13erxUzvmMWHrYz].", "role": "tool", "tool_call_id":
      "call_7SHmGOnBJ13erxUzvmMWHrYz"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5yUW0/bMBTH3/spjvwcWAql3fLIZWM3Vm1DG1pQ5NonicGxjX2CYFW/++QkvVDt
        iTxEzrn+/Hd8liMApiTLgImak2icPnh3d3H1MDmZtvOHs4e3n8/Hl7+n50+fP11PnnzLkphhF3co
        aJ11KGzjNJKypncLj5wwVh3PjtKT6Sydve0cjZWoY1rl6OD48OSAWr+wB+n46GTIrK0SGFgGf0YA
        AMvuHRmNxCeWQZqsLQ2GwCtk2SYIgHmro4XxEFQgboglW6ewhtBEbNNqveMga3UhuNbbxv2z3Flv
        heJaF3ezy/TqSzr5eHr+/qK+OLu5up+U7xbHO/360s+uAypbIzYC7fg39myvGQAzvOly55xE/X4I
        nHPPGyT0Ya8UAOO+ahs0FLfBljkLosaGF0rmLMt77tmPy+bDN3P6aXyM/un672Pz9delv/mbsyRn
        HnmwRpmqi/9ZI7QBPTiPJXo0AgM4bx+VRAkGUQJZWCAE8q2g1qMELoT1UpkquqhGkFgqgxJ6FCit
        h+tYc76tmYAyQrddVnAoVKnEi54xCbmoQXDCyvpnCK2ogQf4bltSpkrgzDal9QQ/kKIhJDC3ylAA
        W8JHQ+gxUALcSLiIX8SViUJ1lq8oFT/sBHBRaQw5y/4sc2ZdpwOXcu2sO8Mbh56UQUNF1KfYYX3j
        e6Iu4ZHrFnOWLWOuv+91TaPO66BsnOSMPC9LJQpuZCGskSoec2QYr1bJKzFEr0cRBj32eYRWDSeM
        /chbPXBpVdUxvEPhzULFYtH3ehDXHUNhy0INx7CPEm289dzQoEepPBaBeJRhAJPciMj10lp5K9A/
        F6G2zg3qvp4Ud3+MToEm/hj7uE0blFifI5fKdqHOSsHj3iLB7Yq9uJmr0f/Wt8NqtZlo2lbO20XY
        G1CsVEaFuuhvZ7zagazrW8Ryt93kbF8MQ+a8bRwVZO/RxIKTo3TaF2Tbab11H6XDYGVkieudvEk6
        HQ2QLDwHwqYolanQO682s3S0Gv0DAAD//wMAxoY3gEoGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd3f62ce5c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3101'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '14990728'
      x-ratelimit-reset-requests:
      - 12ms
      x-ratelimit-reset-tokens:
      - 37ms
      x-request-id:
      - req_1061969f1f5f501f5023edc9168a2cba
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_WmHlSxPDvOZ2DcxKYsug62Pg", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_WmHlSxPDvOZ2DcxKYsug62Pg].", "role": "tool", "tool_call_id":
      "call_WmHlSxPDvOZ2DcxKYsug62Pg"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xU23LbNhB911fs4FlydbHjRm9t3KadtqnSxm1T08OBwSWJBMTCi6ViVaN/7wDU
        zZ5O9aAB9+w5Z3dJ7HYEoGyllqBMq8V0wU1ef/ru3ePbrv/2j0jmr9/48p/ql/X72eab1W1cqHFi
        0MMnNHJgXRjqgkOx5AfYMGrBpDq7nk+vXl1Pr7/OQEcVukRrgkwuaTKfzi8n06vJbK9rWrIGo1rC
        3QgAYJv/U4m+wie1hOn4EOkwRt2gWh6TABSTSxGlY7RRtBc1PoGGvKBPVfveuTNAiFxptHMn4+G3
        PTuf5qSdK+X28f0b9Lfu3cc3N49VH3529sfZ2/bMb5DehFxQ3XtznM8ZfowvX5gBKK+7zF1pMe33
        +8SVZt2hIMcXUgBKc9N36CW1obaFiqbFTpe2KtSyGOr+s/vB/f60uln/+vf8xjz99DH2zav5qinU
        uFCMOpK3vsn5H1oE661Y7cD60Av0ESuwXrBBjmB9FNQVUA3SIjA+9paxguHbgCjcG+kZI9TEgNq0
        EBhrZPQGwWjBhnhzAR8IDDEnjrQ2juELgkesQAgC09pWmA10CEyBrRb8P4+D8BhwjR5srm4DmhGw
        C7K5yK2GNFOMhVrebQtFIXfMGJw2eEhoc/CrgCzWo5eyj8jlqYeYE9fa9Vio5bZQTL0M09smAf68
        f9iNn2HpUVjXtTWl9lVpyFc2vduY0QQb6mpiKSNKYsVB0jjbacFEECZ30HK2aVNWFtPdg03FDYz0
        stgSl8ecB04njzE+72R5VyhHXwp1nwsIZL3EkuoyS2CUfYsYRfesvRzca8tYRtGpgUOs0t4ksxfh
        hskgb8rYUgiHYSQAk4do69PXm9vosLJ6sOz6aM1xjLqylDMCVUYPZe12u939Tj27DrvRf53v96fd
        cY04agLTQ3yxFVRtvY1tOVyJdJ+iUBgsktx9Xlf9sw2kAlMXpBT6jD4JXi6uZoOgOm3IEzy7nu9R
        IdHujHc1X4z2Raq4iYJdWVvfIAe2eYGpOpQGp9evF4vFtFaj3ehfAAAA//8DAHC7/qnJBQAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d12b479e68-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2465'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996407'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_185e714e9c5d2a8235da8e0fd24b9225
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_ajBBeNlufuvoGhYkq3Y9yKRk",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 1, \"traffic_and_conditions\": 1},
      \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\": 0},
      \"points_of_interest\": {\"restaurant\": 0, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 1}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_ajBBeNlufuvoGhYkq3Y9yKRk].", "role": "tool", "tool_call_id":
      "call_ajBBeNlufuvoGhYkq3Y9yKRk"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RVS2/bOBC++1cMeFayjuM0G93cpI9Fs9ms0xzaKhDG5EhiTJEqOQrqGv7vC0ry
        I8beooNAzOv75htqtB4BCK1ECkJWyLJuzMnV84e7ny1ffv+8/Gc5fXiY3v7W87sb9Vg/rgqRxAy3
        eCbJ26xT6erGEGtne7f0hEyx6tnlZHzx7nJ8+WfnqJ0iE9PKhk/OTy9OuPULdzI+m1wMmZXTkoJI
        4ccIAGDdvSNHq+iXSGGcbC01hYAliXQXBCC8M9EiMAQdGC2LZO+UzjLZSNu2xhw42DmTSzRmD9w/
        64PzXig0Jlf/Xn2f3j62OnxQ5Ut9475clHezv34f4PWlV01HqGit3Al04N/Z0yMwAGGx7nLvkWX1
        cQi8R481MflwVApAoC/bmizHNsQ6E0FWVGOuVSbSrOeNz+/f051pi/bFfaq+LX+ef7tafZkvM5Fk
        whMGZ7Utu/ivFUEbyEPjqSBPVlIA+sUeJZOCqCZqC3VrWDeG4AWNVhg5AnnvfABPJt4DYAdcEShk
        hChILNNQV6VwHghldQACEplK51enECkcolvqqy0IAvtWcutJAUrpvNK23AFRoS0p6PvfY2wLQ2hl
        BRjgHv1S2zKBuWu5O3z1WBRazqy6dlbp2E1I4NroGpmunWXvTAK3uqxi/MyqWb3QkVwCcwqMrUfL
        CXzUnh64EyOBG7SSPqMxCXzyTpJfPVSuaTq8v9ugZQJoFcxRaTez6t4piYFPu5E0cfYUMpH+WGfC
        Nd1kPDUGJW0Dqs74R0OetSXLeZxafqDbqe/b6xJe0LSUiXQdc7v2M5GO4/S3QelZkgnuhcjRqlzu
        pIjOzSZ5AxXp6sJ5zgNxRAvHnGQvdcSMWg/czCB4RwcHyaPvbWQapy2H3BW5tkyeAh/T8buhDkwK
        7SkP/WgHk0IrI7fX1rIfdR6GWb9dOooc4zcXv/FOiZqUxmPKdbxS25nGO9WFNv2t6jV72ohXu2Mz
        +r/z03Da7HaucWXj3SIcrVBRaKtDlff7Iy6fwK7pIWK5p263t6/WtWi8qxvO2S3JxoLT6dl5X1Ds
        /yd792RyNXjZMZqDvHfTyWggKcIqMNV5oW1JvvF6t+1Hm9F/AAAA//8DAHxBcHzsBgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd3b3624ee-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3121'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14994408'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 22ms
      x-request-id:
      - req_9a47fe51379883a3d6e677262e4551e8
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_Sv7x6rJeJvkUv7F2qJLqG4ye",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 1, \"traffic_and_conditions\": 0},
      \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\": 0},
      \"points_of_interest\": {\"restaurant\": 1, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 0}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Sv7x6rJeJvkUv7F2qJLqG4ye].", "role": "tool", "tool_call_id":
      "call_Sv7x6rJeJvkUv7F2qJLqG4ye"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xUTW/bOBC9+1cMeLazjuNUjW/Bot1NdtEt0G6BIgoEmhpJU1MkMxy5cQz/9wUl
        fyUo1geDnDfvzeOInO0IQFGpFqBMo8W0wU5ufnz4xFTW/p+X8LKir7+/3Nazv7LvIbu7v1XjxPDL
        H2jkwLowvg0WhbwbYMOoBZPqZTabXr/LptlND7S+RJtodZDJ3E9m09l8Mr2eXF7tiY0ng1Et4GEE
        ALDt/5NFV+KzWsB0fIi0GKOuUS2OSQCKvU0RpWOkKNqJGp9A452gS65dZ+0ZIN7bwmhrT4WH3/Zs
        feqTtrbIbk07X39bvf/+CTfPS/TZn/Xz/MPLWb1BehN6Q1XnzLE/Z/gxvnhTDEA53fbcz1pM83Gf
        +FmzblGQ4xspAKW57lp0ko6htrmKpsFWF1TmapEPvr+ss+d3fI/369W/6+zj7On+76c/5hvM1ThX
        jDp6R67u8782CORISFsgFzqBLmIJ5ARr5AjkoqAuwVcgDQLjU0eMJQx3A6JwZ6RjjFB5BtSmgcBY
        IaMzCEYL1p43F5DqGM/8igTk1t6uMYLDKEfVCD9JGogBDVVkILAPyEIYL+AOfpK1RylpKMJyk1LW
        VJKre5c6JAqTFvw/o0d3fV9C+gAYc7V42ObKh749jMFqg4eEpg/+1rtx6KToInJxOnDsE9fadpir
        xTZX7DsZWr1NArzab3bjV1jaCuuqIlNoVxbGu5LSRYg9mmDj28qzFBElseIgaSy1WjARhL09aFmq
        m5TVi+l2ScncUSp4chILXxXpMzNG2ZvFKLpj7fb7Sq99x5TkO4rkksJDru5EW9IuV49JrCLGIopO
        bg/lS+1Mqv4mXLM3yJsiNj6Ew8kTgMmGaHLpXveeWyxJDy7aLpI59kyX5PuM4EujB+e73W73uFOv
        Hspu9Kv14361Ow4Y6+vAfhnfzAtVkaPYFMNjSS8tig9DiST32A+y7tVsUoF9G6QQv0KXBOez6+tB
        UJ1m5wm+zK72qHjR9ow3n70f7U2quImCbVGRq5EDUz/aVBWK8uqqypbz2Q2q0W70HwAAAP//AwDK
        j6NY4wUAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d2ce61aaaf-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2291'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21993470'
      x-ratelimit-reset-requests:
      - 10ms
      x-ratelimit-reset-tokens:
      - 17ms
      x-request-id:
      - req_a1d042b97b9413f9ddeedceee48ac1c7
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_6wT3J1knF6kuFATdyhGxLvjK", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_6wT3J1knF6kuFATdyhGxLvjK].", "role": "tool", "tool_call_id":
      "call_6wT3J1knF6kuFATdyhGxLvjK"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUTXPbNhC961fs4NKL7EqyJSW6JW3tNmkat/G0mQk9nDWwJNciARhY2tFo9N87
        IKkPe6KDhti3+/bhAdjtCECxUStQukLRja/P3j789tdjOb/++qGY/X01//Lp6+Ji/nhzsf5l8RnV
        OFW4+wfSsq86167xNQk728M6EAol1ulyNpkvlpPlmw5onKE6lZVezi7d2WwyuzybzM+mF0Nh5VhT
        VCv4NgIA2Hb/SaI19F2tYDLeRxqKEUtSq0MSgAquThGFMXIUtKLGR1A7K2STatvW9QkgztW5xro+
        Nu5/25Pvo09Y1/ny+kke37//zHzL0/XHq/Dw7/W7339dn/TrqTe+E1S0Vh/8OcEP8dWrZgDKYtPV
        3qDo6mpIvMGADQmF+IoKQGEo24aspG2obaairqjBnE2mVlmve/F8e/FhurZXi3V79e7WbKrr738+
        PXzM1DhTgTA6y7bs8m8rArYsjDWw9a1AG8kAW6GSQgS2UQgNuAKkIgj02HIgA/3dgCih1dIGilC4
        AIS6Ah+ooEBWE2gUKl3YnMN/BJbIgDgI5GvU1PENfeAJ65YiPLNUgN4H5wOj0NAmnsMXT5oLTtvb
        jOH5yIbGAMI/FAXbgFb2yjqq1KKNFH6Kp6qS0j8Ea0YLuuXIlgCtAY9REAzHiuJ555VPh0IxU6tv
        20w531k26N8nVF3wZ09B2JKVPDXMj+1il9htMFOrbaaCa6W3f5sIwnpY7MYvsLSUgEXBOkdrcu2s
        4XQ5YocmWLumcEHySJKqYk+pa25QKBVIcPWeq+aySlkdGTb3nMQdqLxjKzF3RZ6OJFCUQezB2H5d
        4JNrAyf63rnkTaYGOzN1N86UYRIMmxMPMrXqXmOmDMV0f3IfWFMe0JYnYIFR8sI588PSPtYV4ya9
        gLwhqZz5UcZRdp4e55CSNlpwoDwKJif31hi0OjnzKlwGpyls8lg57/enkgBKFgmy7VQkPxsyjL1D
        TRtZH84TDbsuwzujsXd1t9vt7nbqxcPejX70fTd87Q4DsXalD+4+vppvqmDLscr7x50mQxTn+xaJ
        7q4bvO2LWap8cI2XXNyabCK8nE0ue0J1nPVHeDbdo+IE65O6y+mb0SBSxU0UavKCbUnBB+5GsSp8
        bubLxcVkWbydqNFu9D8AAAD//wMALBhiZJMGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d109ee22d2-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2670'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996429'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_e6f78e9ee3f1196b8d99b4e77ca5a20f
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_v7mBcZ0VbHPWdjqObiUB5GPJ", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_v7mBcZ0VbHPWdjqObiUB5GPJ].", "role": "tool", "tool_call_id":
      "call_v7mBcZ0VbHPWdjqObiUB5GPJ"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xV227bOBB991cQfHayjhOvG79tk90U20U2QHpBWwXEhBxJTCmSHY6cGIb/fUFJ
        8SVrPxjSXM85MyLXIyGkNXIhpK6BdRPdyeXTn7e/Lm/+mTxffbRwdXPdfJ823z7f/vHRv4Ac54zw
        +ISaX7NOdWiiQ7bB925NCIy56tl8Opn9Pp/M33WOJhh0Oa2KfHIRTqaT6cXJZHZydj4k1sFqTHIh
        foyEEGLd/WeI3uCLXIjJ+NXSYEpQoVxsg4SQFFy2SEjJJgbPcrxz6uAZfUbtW+f2HByCUxqc2zXu
        f+u9551O4Jz6Nrum6fXZyjn3ZX777D883T99XV7d7/XrS69iB6hsvd7qs+ff2hdvmgkhPTRd7h2w
        rv8aAu+AoEFGSm9KCSGBqrZBz5mGXBcy6RobUNYUclH0uJfz5r3+Pvny+OHuq3n69e+j/fx+dnP3
        dyHHhSSEFLz1VRf/qUZhvWULTgAzNpEFB4EvTKBZtAlJRMISCb3GlA1GWM9YIaUcab2xGhgF15gj
        U44TodzPGovn2upa2CSs14EINZ+K3Hp4ERAjBehDOOQuwthOCiCLSXANLJosUdcHXyJqRiN68qIM
        JDCn75qKDKoKtDrtWMeci6mQix/rQobYkSeMDjS+BtSd8beIxNajZ5XZqz0eXeASXIuFXKwLSaHl
        Xsh1IZmgLK1W4I3SwRub0adDn/VloAayR6XQksbD8otuZwv5bJ2zvvKYkuKgGH6icsFXSCr3xGyE
        ZbBGDZWH1M1mXEgdmjIQq4Sc0Q0QtLMNMGZoTMH1xr45oVF58kjALeGg0Q5YJ8t8IgxWhIMKCfNn
        doBfES4RHPaLeI8s9ormqe6X2DyMC1mCVykimuMqJARWNUJmcTwCLJUuPCtj8xZlVf8f1mkSg/Wc
        VChV3l3CxMMEMTG0BH54L2EZWrJZp9Ym63HXy1hkoJU60OXVh8lSR8NmHcBXe84SEqsyBHM0dTeC
        CKv8XasGuQ7mWMQOrcpHzj7BPA5isL4rkXewQWOhZ9W0qVuRgWDHL4V+NbYgB3uFnvCYA4htyhqS
        egRv0jGAXSOVmBCaPLSEtLRbthkngbGhwxeD0dDPYbPZbB428uCk24yOPT8MT5vtDeFCFSk8pjcH
        viytt6lW/WmXj8rEIfYtcrmH7iZqDy4XGSk0kRWHn+hzwYvz6bwvKHeX3849nb16OTC4vbzZu4vR
        AFKmVWJsVGnz5xvJdneTLKPSOJlfnp+fT0o52oz+AwAA//8DAG4N3cGkBwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd3cd2174b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3472'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996442'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_0bc46e1c20a0c61b2205e6855a656c0b
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_Gj53oBUD3SCmqiYnKad2EMGB", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Gj53oBUD3SCmqiYnKad2EMGB].", "role": "tool", "tool_call_id":
      "call_Gj53oBUD3SCmqiYnKad2EMGB"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUTW/jNhC9+1cQvPTipN74q/ExbXYXLbpIsC3aNAqICTWSmFAkdzhKNjX03wtS
        8ldQHwxqHue9N0NythMhpCnlRkjdAOs22LPLp+sv5Owd/IOfn1bX1y3S7b/m1+uvt6/rIKcpwz8+
        oeZd1rn2bbDIxrsB1oTAmFg/rC9my9V6tr7MQOtLtCmtDny28GcXs4vF2Wx59mE+JjbeaIxyI+4n
        Qgixzf/Joivxu9yI2XQXaTFGqFFu9puEkORtikiI0UQGx3J6ALV3jC65dp21RwB7b5UGaw/Cw297
        tD70CaxVH+cLN/vsryA8LXmJi8Xf/vbup+rLkd5A/Rayoapzet+fI3wf37wTE0I6aHPuDbBuPo4b
        b4CgRUaK76iEkEB116LjVIbcFjLqBltQpizkphh8f3pazv3Vn7/Mv/7cfjN37jcoL65//3RVyGkh
        CSF6Z1yd9//RoDDOsAErjAsdiy5iKYxjrJGiMC4yQil8JbhBQfitM4SlGO6GiEyd5o4wisqTQNCN
        CIQVEjqNQgNj7entXPyFwiGWgr0gDBY0Zr5RR7yA7TCKV8ONgBDIBzLAOMpEwQ2wIKxsEk2JXUT6
        IR5pxfNcXUhtxFjIzf22kD7kIkfF3YYmB38MSGwcOlaJTB1R5Y3ZUiE320KS73ho2DYR0PP40U9P
        sPTJBFVltAJXKu1dadJxxiFzhxlXeWohISr6jjSeim/uH6aFfDXWGlc7jFGxVwzPqKx3NZJKmpiC
        8OJNqUbenNgnE9q3lSdWETl5G+W1NS0wJltM3u4cW1M3aVe2DO2jSS4ymNDgjeOofKXSURFGHluC
        kaEjcLzjqQyhipzL2sVKcDpRvwvX5DXSm4qND2HXvARg0mAwLl3wbKjF0sAg2XYxF7ktZAUvngyj
        in4oL3dsH63R0dDIQt6kO3CCArGJqSZSj+DKffpwBoSlykoqMiG02T7Si8lNuX/IZw6l8dle8KWG
        oSd93/cPvTx5rv3k/9YP46rfjznr60D+Mb6bWrIyzsRGDU82vffIPgwSie4hj9PuZELKQL4NrNg/
        o0uEi/lqNRDKwwQ/wBezcdpK9gz2KG+5Wk1GkzK+RcZWVSbdv0AmD1hZBVUu16v5bF1dzuSkn/wH
        AAD//wMA4yGOKmkGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d2c94496e7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:01 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2758'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21992089'
      x-ratelimit-reset-requests:
      - 10ms
      x-ratelimit-reset-tokens:
      - 21ms
      x-request-id:
      - req_be14a6b4d6cb05a5432e14e3828a1f00
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_iO4bSK2Oo6GnXhaMScFB0mTl", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_iO4bSK2Oo6GnXhaMScFB0mTl].", "role": "tool", "tool_call_id":
      "call_iO4bSK2Oo6GnXhaMScFB0mTl"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RWTW/bOBC9+1cQPDuxE8d118dt2u6in9guihZVQNDUSGJCctjhyK1h+L8vKH/G
        2e5ebB0kivNm3uMMweGyJ4S0pZwKaRrNxkd38dv9y/ffx3P9Bq7eT8Z/4e3i9rX7E75ej+a397Kf
        PXB2D4a3XpcGfXTAFsPabAg0Q456Nbkejp9NhpPnncFjCS671ZEvRpfjC25phhfDq+vxxrNBayDJ
        qfjWE0KIZffOGkMJP+VUDPvbGQ8p6RrkdAcSQhK6PCN1SjaxDiz7e6PBwBCy7NA6d2BgRKeMdm5P
        vH6WB+N9orRzavH27UvSn8d/+OHnWblI/t2tf/E9wAHfOvQidoKqNphdgg7su/npEZkQMmjf+X7U
        bJpXG+BHTdoDA6WjUEJITXXrIXBehlwWMpkGvFa2LOS0WOu2H25mn95cf8Bnr8OXRr/7ZF79PvR/
        u0L2C0mgEwYb6g7/AonAsOAGxFw7W+rML4AIKQkbOkObgEQkqIAgGEgCfjLpTqnYrk1k5suOIeal
        QCrk9NuykBg7IoLotIEtoOkmBxGIbYDAKnOoA44BYcs21IOo6aFT2y/kXLsWCjldFnINJSjVBqBy
        FQo5zWVfrfonYN58j5kZHZAOBlSFpJh0VVlzUuJNTKVDqQyG0uYEpyc6NigbKiTf1U0lbMnAYdCT
        CDPoKyRWCTgLTAPjrNcMWR0Tul8Xh8FHIM0twXmUOFs3edQlS/uZzbhjPTYwkEVSO7RBh3TyPEW0
        gZPCSnWMkHiQX7olHfhYVKXn2JLNWWxtsgHOJaGyBCpxt0N+XanHqPMoKXUwOfv/K2YLDMA/kB7O
        pacmNEALlRqM8T8PmdRGIK/pAViZRtvTpAiyENY25AO928EeSqsHvk35SHm6X7rtkjDU6az8pEuL
        3X/E0uj0ZO/WEIC0UwF+pM2hsxN0t5KPetaq92/ju81otev1DutIOEtHrVtWNtjUqHXfyk0vMcY1
        RQ53190p2kfXBBkJfWTF+AAhB7y5GY3WAeX+HrM3j27GGysja3fgN5k8721EyrRIDF5VNtRAkezu
        ltFb9f4BAAD//wMAAy6zkGQJAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd2d4bf94f-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:02 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3918'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14994416'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 22ms
      x-request-id:
      - req_74b0d2608f2d31352bae542c6635e24b
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_jbyFqecOwcP0B55a6NssmaFs",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": 0, \"routing\": 1, \"traffic_and_conditions\": 1},
      \"comfort_settings\": {\"climate_control\": 0, \"lighting_and_ambience\": 0},
      \"points_of_interest\": {\"restaurant\": 0, \"fire_station\": 0, \"dancing_station\":
      0, \"grocery_shopping\": 1}, \"entertainment_and_media\": {\"music\": 0, \"radio_and_podcast\":
      0}}}"}}]}, {"content": "Error:\n\n```\n11 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_jbyFqecOwcP0B55a6NssmaFs].", "role": "tool", "tool_call_id":
      "call_jbyFqecOwcP0B55a6NssmaFs"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xVwW4jNwy9+ysEnVrASR07iTe+pd0G7bZIs93cdgKB0XA82mhELcVJ4hr+90Ia
        O3bc+mCMH8mnxycOvR4ppV2tF0rbFsR20Z9cffv1lj9+nt4+1//cXs3/uPnzt7P7m5f+dfXp870e
        5wp6/IZWdlWnlrroURyFIWwZQTCzns2nk4vL+WR+VQId1ehz2TLKyTmdTCfT85PJxcnZbFvYkrOY
        9EJ9HSml1Lp8Z4mhxle9UJPxDukwJViiXrwlKaWZfEY0pOSSQBA93gctBcGQVYfe+4OAEHljwfv9
        wcNnffC89wm8N5/+7vy1tPcff//wy3Tuv1z39ZfX65f24LyBehWLoKYP9s2fg/gbvjg6TCkdoCu1
        dyC2vdkm3gFDh4KcjqiU0sDLvsMguQ29rnSyLXZgXF3pRTXo/va4uvmO9q8Xezf5+eICLm9T6uAm
        VXpcaUZIFFxYlvz7FpULThx4BSLYRVFCCl+FwYrqE7KKjA0yBospA7VywRIzWlE1CKjcflI/uCC4
        RE4/KheSINSKGiUtKsbvvWOs1TBQKgn3VnrGdKry+TsyiJEJbKtcyhoi07OrsVAEtHkSePVfDtUQ
        K8xle53KguCSeHVaWo7ZW0yVXnxdV5pi6ZwxerC4S2gL+FNEFhcwiMmtm4PWS+Iz+B4rvVhXmqmX
        wcV1JuCn7Y/N+DjGjtjJyjTEJrXEgkmMuA7NIVCXWc6CFmVyKw3P5OoMGWpMimhd46xhgtoUy/eZ
        Qh65ZOYzhKFpnN2Gs54tYiDUxlKoXR6yNMjbxVxoiDvIEZOoZ4vvu9+d9eK8d2EZMCUjZASe0HgK
        S2ST28YMFuXHOrIQS11DLCahZIO2Eqx3HQhmacLkdy56t2xzVpEN3aPDwZ51oYrkgqRsTR48xiTb
        e8Ek0DME2fE0jtEkKa3tsOxrpj6Cl0wWeZVvJcaDG9z5UPz1ZMGbDvgJJZkGuEvlJvuIPKB50ipd
        8tSAqHy5dar0w3jHx1gf1hjbgguHZmHuS8CF/LoXEzqsHQyauj4Va4d5g9pRyYhUWxis2Gw2m4eN
        frc/NqP/e37YPm3e9q6nZWR6TEdrVDcuuNSaYYfkBZSE4nBEpnso+71/t7J1ZOqiGKEnDJnwfPZh
        u+D1/i9lH57OZtuokIA/qLs8m422InVaJcHONC4PXmRXNr5uoqlns2b+eD69Qj3ajP4FAAD//wMA
        wfM4qPoGAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d2ccbe6896-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:02 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '3084'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '21989540'
      x-ratelimit-reset-requests:
      - 13ms
      x-ratelimit-reset-tokens:
      - 28ms
      x-request-id:
      - req_c07d00a55ae053109cc6e340a03e9c3b
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_a0Yn9TTWE0IuYW4acZr9XfwZ", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_a0Yn9TTWE0IuYW4acZr9XfwZ].", "role": "tool", "tool_call_id":
      "call_a0Yn9TTWE0IuYW4acZr9XfwZ"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RWTXPbNhC961fs4Eyrsi3XsW5taqedaTMex5M4jjwcGFySiEAsslj6Ixr99w5I
        WpbVeHqIrYMEYd/uPrxdfCxHAMoWagbK1FpME9zO0dfj998OmmoRL0wZZYr33+4W1l3e+/cf91SW
        POj6Kxp58BobaoJDseR7s2HUginq7uHe5ODXw8nhm87QUIEuuVVBdvbHBzvS8jXtTHb3DgbPmqzB
        qGbwZQQAsOy+E0df4J2awSR7mGkwRl2hmq1BAIrJpRmlY7RRtBeVPRoNeUGfaPvWuQ2DELncaOce
        E/ef5cb4USjtXE6L36dh6uzNx3fH5uJ7ZU50fYtfbzby9aHvQ0eobL1ZC7RhX8/PtpIBKK+bzvdU
        i6lPBuCpZt2gIMetUABKc9U26CUtQy3nKpoaG53bYq5m8563nnz2R+fnn44nf7WfP021ueSji/L2
        cq6yuWLUkbz1VYc/rxHaiAyBsURGbzAC3glrI1hAUlNbDzfa2UInaoDMxBGKFkEIrDfEjEbA+tAK
        JCniGFLYzYgesUjwa4Qo3BppGQvQxhAX1lfJJDVCgaX1WEC/JiiJAbWpwWjBivgeYmtq0BFONS+s
        rzI4o1a6wTnrsrQGtC/gLfnCJrIxg7fONlowzQmTy+BvW9XJpUP+1lzbxDCDM4yiW9ZeMjixjPBB
        uvVm8If2BuFP7VwG75gM8j18qCmELu8/bbQm64Kd6cJSNzqlwugo407wkCqLca5mX5ZzRaHTnTE4
        bfABUHeTvwRksR695Kkm+YaCY+4XOg79yjvHG+1anKvZcq56KGORD4A8VWKuZpPVKnuBtMPvdloh
        h5z0yUviXPoazNVs92WyDgFz7YvcrIv6HxIDyvqSuOmqlkdq2eBm0J9nZagpiSWPKIldHJu+txK1
        1FvP10SwCcg6df0r0HBDR3cy6aGjt8lYL8iWOF+jDTniLYV+slsCWS8xpzLv0mGUMa/31TajUt9Q
        yzbp19poPb5K/tIy5rHfy88X6CnqFWgU2psk+v8yeQB6lFvixauQqfpTLI/DKfY8m9gG5EbzAiU3
        tbYvIA4mFulSSZdY17INFlaPm3SQ/qhHuhaJ5KsX2MLPJed0dHf/Q390Py9JD33SK1cr9eSWXo1+
        NL4aRqv168ZRFZiu49ZjRZXW21jn/U2drvkoFPoUKdxV94pqnzyMVGBqguRCC/Qp4HT/4KgPqB5f
        bo/m/Tf7g1VItNvwO5zujQaSKt5HwSYvra+QA9v1u2q0Gv0LAAD//wMATyVz3FYKAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd3be324fa-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:03 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '4913'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '14991599'
      x-ratelimit-reset-requests:
      - 9ms
      x-ratelimit-reset-tokens:
      - 33ms
      x-request-id:
      - req_f8de5c8af44c1d97f8442da4c0b2cab0
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_wdWM1jI92GZ7anuUHi5JD4ud", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_wdWM1jI92GZ7anuUHi5JD4ud].", "role": "tool", "tool_call_id":
      "call_wdWM1jI92GZ7anuUHi5JD4ud"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6yW32/bNhDH3/NXEHzxBjiO5R9xrLcMS9ZuWFEEbVa0DoQzeZLoSiRHnry4hv/3
        gbIjKXGRNWv9YFO8u+/njiLp254wxpXkMeMiBxKlLU7nq6s3f9/ixz8uf7maD1/R/evb8f35ZH09
        XNqC90OEWa5Q0EPUQJjSFkjK6L1ZOATCoBrNRsPp+Ww4u6gNpZFYhLDM0ul4MD2lyi3N6TAaTQ+R
        uVECPY/ZpxPGGNvW3yFHLfGex2zYf5gp0XvIkMeNE2PcmSLMcPBeeQJNvN8ahdGEOqStq6LoGMiY
        IhFQFC14/9l2xu1CQVEkdvXB3d9+eAdT+WV1U77frIdfri/H1x3eXnpj64TSSotmgTr2Zj5+AmOM
        ayjr2LdAIr8+OL4FByUSOv9EijEOLqtK1BTK4NsF9yLHEhIlFzxe7PP+R/71Z7R6PR/99nEGunr/
        Sk1//3VSyQXvL7hD8EYrndX+73JklUfHrMMUHWqBnuE9ORCEkoFDpg0xpRnlyIRxDgWx1LgSaMCu
        QOSdSCaAMDNuw3xuqkKyJTJPrhJUuSAmhHFS6YyRqeW8RaFSJdi+BiYxVVqFBfDsJxxkgz67QU9Q
        OdDUZ29grTII5kstb0xFSmd9hiQGPw9YKKTNu1uNRpSBuERGDrQPyaNkSh+yAGudsU4B4aGw8MMw
        1PZQ0KBeOhveEfoFjz9tF9zYegUd2gIEPjjk9eSZRUdKo6YkrG7SyefMNSXVMWsoKqyDtr0U1qZy
        ijARlfJKYy9m214b3ItZ7zVBoUD3+qznMex1gR35xOEaoUBZu7JV5YkVZo3MgidgUvkcfW/XZz2p
        kMBtkkfqT2D1EfpPTvCqFdErhzKxTgUH0Nl3S6bgKUmNkT8wzb21ThQ24SQlJVJu5I/Tbd9wEq6G
        7xJe8F0/7LVR/HSjjeLndpk1SpNPTJooTRgy+urGG8VR/WDs+AgwfikgVQ4TT/URbRHjeHhATI4Q
        k5ciJGihdHZMmTSU6RFl+lJK5oxAt0l8bqytr8oHzLTBnB9hzp/FuP2FdWbBfX4ked5Izo4kZ98k
        efhtJWfNW704krz4JklykKZKJKBlIoyW+1u5JVw0Sc+PCPNnCcKUqXGUeKRA8meiUCWEK89ocqZo
        GfOGEQ2PINHwZZRCZXkY1RVBuVTBr2VFwxYWHcOiZ2HhGDsCpevbJABKlArOysor0WFELeP4OEej
        /8VwIJWpn62RAnznbEejwLvb8UctxO7ka+O7w2jXtF6FyawzS/+kk+LhL9rnyb6NCD2IJ2P3iCB3
        V7d41aOujVtnSksJmc+og+BkNB7vBXnbVnbM8+nBSoag6Bhmo4uTQ5LcbzxhmaRKZ+isU03Td7I7
        +RcAAP//AwCon8FD8woAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07cd3b26251c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:03 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '5403'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '14988544'
      x-ratelimit-reset-requests:
      - 13ms
      x-ratelimit-reset-tokens:
      - 45ms
      x-request-id:
      - req_d6650943bc172a9862b9c567eaf5db64
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow inside</user>\n<ai>Certainly,
      changing the interior lighting to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_byAet0H9Xu9spNdd8D7DlGhH", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 0,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_byAet0H9Xu9spNdd8D7DlGhH].", "role": "tool", "tool_call_id":
      "call_byAet0H9Xu9spNdd8D7DlGhH"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUTW/bOBC9+1cQvOTiZGUnjmvfdpFtCxTttttsUaAKBJoaSWwoDnc4cu019N8X
        pPwVtz4Y1Lx5b2YeP3YjIaQp5VJI3SjWrbfXi+9/fqDN5/ft5gtt/pvdTRQ8zB5f60qtXm3lODJw
        9R00H1g3GltvgQ26AdYEiiGqTubTbHY/z+aLBLRYgo202vP1HV5Ps+nddTa7ntzuiQ0aDUEuxbeR
        EELs0n9s0ZWwkUuRjQ+RFkJQNcjlMUkISWhjRKoQTGDlWI5PoEbH4GLXrrP2DGBEW2hl7anw8Nud
        rU8+KWuL1SP/5f+5/dxmf8z+fjf99OVdg29WX9dn9QbprU8NVZ3TR3/O8GN8eVFMCOlUm7gfFevm
        9T7xoyLVAgOFCykhpKK6a8FxHEPuchl0A60qTJnLZb7ve/s7cPZ28bVbBP+hLF89zB/sm+ZtLse5
        JFABnXF1yn9sQBhn2CgrjPMdiy5AKYxjqIGCMC4wqFJgJbgBQfBvZwhKMZwNEZg6zR1BEBWSAKUb
        oRVDjbS9EVFcI1HMVN4TRtgEwSg84dqUkEQd6LjNtP1J9WfRsYA1OGFSO1uhCAS0nmN8o8FzYkTR
        K2vqho2rC+XKQrUrA07DlfjRGN2I0GBnS0FQ2VgwEroAdBWEJ6iAYm6S2oK1+EMcxG6ShT7uFYRc
        Lr/tcok+OUngrdJwSGhS8DcPxMaB4yLqFyf1kBLXynaQy+Uul4QdD7uyiwL0vP/oxy+w+Mmkqsro
        NJlGV5p4ZkJCI6yxrZC4CMCRFQZJbU2rGCKBCe1B65c2DYx4CMggFcccjRYvhkgWnCJp6sG0NGCA
        eB01nJEKgjUoC8OBfa+eh1OQioSD4cYFU0Iu+6c0kkfjOBRYFakpCLw3DQKrjpTjwzyVISgCq2jJ
        IVYqp2P7F+GaUANti9Cg9wd7IxB7JlbGxXuWjGmhNGoo2XbB6OPGqNJgyvBYajW01fd9/9TLFxe3
        H/1q/bRf9ccHz2LtCVfh4v2SlXEmNMVweePND4x+KBHlntLD2r14K6UnbD0XjM/gouDd5H42CMrT
        W36Cp9n9HmVkZc94t/PJaN+kDNvA0BaVcTWQJ5OeWln5opzN72+zebXI5Kgf/Q8AAP//AwBLDjoH
        cwYAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d2cae76456-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:03 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '4905'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996549'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_c20678651a040fa4c53dd4d5dee8258f
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for some Italian food
      right now.</user>\n<ai>I located several Italian restaurants nearby. The closest
      one is La Bella Vita, 4 kilometers away. Would you like to navigate there?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes, that sounds perfect. Please set
      it as our destination.</user>\n<ai>Destination set to La Bella Vita. The route
      is clear with minimal traffic. We should arrive in approximately 10 minutes.
      Would you like to start the navigation?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start
      the navigation and can you also adjust the temperature to something warmer?</user>\n<ai>Navigation
      started, and the cabin temperature is now set to a warmer setting. Is there
      anything else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_5ZuI8ZoY7mCGZF2dlejlyDfT", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 0, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      1, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 1, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_5ZuI8ZoY7mCGZF2dlejlyDfT].", "role": "tool", "tool_call_id":
      "call_5ZuI8ZoY7mCGZF2dlejlyDfT"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xWTW8bNxC9+1cMeGoB25Itq250Kdo0aV0gqdsGKOrIWIzJ2V06XA5DzspRBf33
        glzJktUUCJLqIKzm472Zx1mOVkcAyho1A6VbFN0Fd/Ls/sXryO/fX/352v7yHN10ujBnrX24ubMv
        SB3nDL67Jy3brFPNXXAklv3g1pFQKKOeXZ6Pp99cji+fFUfHhlxOa4KcXPDJ+fj84mQ8PTmbbBJb
        tpqSmsHbIwCAVfnOJXpDH9QMxsdbS0cpYUNq9hgEoCK7bFGYkk2CXtTxzqnZC/lcte+d23MIs6s0
        OrcjHj6rveedTuhchUH/XP9+fXN/N55evDPpj+///uHXs9+aPb4BehlKQXXv9aM+e/5H++yADEB5
        7EruNYpuX24CrzFiR0IxHUABKIxN35GX3IZazVXSLXVYWTNXs/lQ9/Smv/r2hv+67J7/dPPy3Di6
        d8sf6zdzdTxXkTCxt74p8W9aAuutWHSAItQFAWGgDxJRC/SJIoRINUXymlI2GLBec4ykBQwKQm4/
        wVfWCzUU09dgfRJCA1yDtASR3vc2koFhoCBJ7LX0kdIpZP4tGIYQGXUL1i/YLShBGTHrm01mgpoj
        UA7Z1QQahRqOS3iw0m4IHS3QC9SWnEkQOPQuzypgAk9kyJwWLUIWndJczd6u5opDkSRScKhpG9AW
        4yhQFOvJS5U1qfY0KYELdD3N1Ww1V5F7GeRdZYD4bvNjffzEl39KxLq2ukJvKs3e2Hz4qXizW3NX
        c5QqkeSsNEBqZzsUygkS2W2xnG3aHFXAsLuzubhHqMDWS6q4rvIxRUqyKZaSYB/RyxantpGqJJhL
        2doMep2hD8xNZE1xWaWWQ9i2lR2UOQStz4NaCurIWBwouz5Z/SgIGsslIrDROJS1Xq/Xx7sDQWM+
        +TBGh5qNDuQaDcGRTJWnnSLmSXxyhvni+Gz+fws92mk8qnHBfbS5nN4m658S5yHcYRWqK0Fn0Zew
        lGX1mvb4qkgLQkfDy38FmntnIBI6t4SGy/uSuCPY4EDNbCDmUQHPD6dztb797Fb/45RH5YBLq6XT
        hnw8eEu+tNFXuLyjp40V0nx1JZJyCXTM5rsv6u9/GKWPNPqAsaP4aX2iue/T0M4eQ+mSO5I2X41b
        vPXt+natnmyL9dHHnm83T+vHLeu4CZHv0sHSVLX1NrXVsDHyuknCYaDIcLdlm/dPFrQKkbsglfA7
        8hnw4mK8Wedq9wdi555MphuvsKDby7ucTI82Raq0TEJdVVvfUAzRlv2u6lBpGl8+m0wm41odrY/+
        AQAA//8DADx5bG3oCAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d2ba7667f1-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:04 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '5900'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996348'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 9ms
      x-request-id:
      - req_725dbf3221686f5f58f5f4a6f0553973
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>"},
      {"role": "assistant", "content": [{"type": "text", "text": "Based on the conversation,
      I can extract some user preferences regarding interior lighting. Let''s use
      the extract_user_preferences_v1 function to capture this information."}, {"type":
      "tool_use", "name": "extract_user_preferences_v1", "input": {"pertinent_user_preferences":
      {"comfort_settings": {"lighting_and_ambience": {"interior_lighting_brightness_preferences":
      [{"preference": "low", "sentence_preference_revealed": "The user prefers low
      brightness for interior lighting."}]}}}}, "id": "toolu_01XLdVEJdeydLLUF5Vcgreck"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n4
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...interior
      lighting.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':... interior
      lighting.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...interior
      lighting.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...interior
      lighting.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_01XLdVEJdeydLLUF5Vcgreck].", "tool_use_id": "toolu_01XLdVEJdeydLLUF5Vcgreck"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5xUUW8bNwz+K4RetgIXx3GdFr3HFi2KNNsKNM3azcVBlWifmjtSJXkOHMP/fdDZ
        AZxsfVgfSVEfv+8jpa1L0dWu11UzPXt18eLty3W//O32r69t/rZ53r+b3XlXOdtkLFWo6lfoKifc
        lYRXTWqezFWu54idq13o/BDx5OnJ+YkyEdrJbDqbT5/Npq5ygcmQzNV/b+9BjblrBi2oI5USD830
        7Pzzev1qfveRUrz6tLqmu5Atta5y5Pty77230L4ZKFhieu/F92goWmAoD+bqrdPQYu+bB7CfLuP1
        64uIm3h5+fHN+XVYCYabIgm9MiVaudpdtQgowgIHyZAopuANFaz1BoprFN+B4PchCUZYJuyigheE
        PqkmWkEisBYho1giJCsipcmCSxSkgAr89RsGm8AVQ2ARDAbWJq3gFoEQIxiDj3GEuUc9NLpN1gL2
        2TbAAjR0Hax9N6DCbYuC4HMWzpK84QSKnP9gWi9oQWcTEB6sQP86UEQZuwmzHeg9WdBsAqFLvTds
        ygCFu/vawP2SxRpFKxD6ZEFPJ5A5kWnDyyaRoaDaguYTwBKYT9QXNzzFpseYfGHxJ/7SdTAowsWH
        P34fRwucUXwZrh75oI+dmLjK5VKPOm4V57KXMe7Travd6Y8ncHqQ7io3uleWJnu5Gbdguyt7vj8f
        AxO/XKYwMg9MMY3kytluV/3fzo+dO33k8BGln0D/9wSOJZbYD1Le7ShsmQQbtdHsfSZ6ColWD5Mr
        4YCyabTlnA+u/AS3H6zBMcF+0BQOE/Ax8ViVOQavtu/6Zbf7Ujk1zs3+4T78ScYDxe9Daenq8j4q
        N4yfV73dfxCN8Q2W8Z0/n88rx4MdJ+dnz3a7fwAAAP//AwAvZLhtHQUAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07dd5f6faaaf-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:06 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3992'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '368000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:11Z'
      request-id:
      - req_014A58wNgJsh8AF7P3bpjqR6
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 23ccad041d0f4fc0df74d58e950dc887
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}, {"role":
      "assistant", "content": [{"type": "text", "text": "Based on the conversation
      provided, I can extract some user preferences related to navigation and points
      of interest. Let''s use the extract_user_preferences_v1 function to capture
      these preferences."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"routing": {"navigation_and_routing":
      {"routing": {}, "traffic_and_conditions": {}, "parking": {}}}, "comfort_settings":
      {"climate_control": {}, "lighting_and_ambience": {}}, "points_of_interest":
      {"restaurant": {"preferred_restaurant_type": [{"preference": "Applebees", "sentence_preference_revealed":
      "The user requested navigation to Applebees, indicating a preference for this
      restaurant chain."}]}, "fire_station": {}, "dancing_station": {}, "grocery_shopping":
      {}}, "entertainment_and_media": {"music": {}, "radio_and_podcast": {}}}}, "id":
      "toolu_01WkDaXgMTL9AZ3Tz2HUNxws"}]}, {"role": "user", "content": [{"type": "tool_result",
      "content": "Error:\n\n```\n3 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Field
      required [type=missing, input_value={''navigation_and_routing''...ns'': {},
      ''parking'': {}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.routing\n  Field
      required [type=missing, input_value={''navigation_and_routing''...ns'': {},
      ''parking'': {}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.traffic_and_conditions\n  Field
      required [type=missing, input_value={''navigation_and_routing''...ns'': {},
      ''parking'': {}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_01WkDaXgMTL9AZ3Tz2HUNxws].", "tool_use_id": "toolu_01WkDaXgMTL9AZ3Tz2HUNxws"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6yU207cMBCGX8Wam9xkzyxocwetAJWWVmI5qBWKXHuycTexg2fMaZV3r5xduqBS
        tUK9sjwef/PPwV6B0ZBBTYt8OBpdnt8fHYzD1Ts+mRwdPF7MHF0qSIEfGoxeSCQXCCl4V0WDJDLE
        0jKkUDuNFWSgKhk09ia9aY+ctci98XC8M9wdDyEF5SyjZci+rZ6g7FyVB4rUTkrch3w42lvOeIqT
        4kQeTa+OD7GYobpoIAUr63jvi2RVHgar2Dj7RXpZI6OniLFNYMhWQKrEWuYvsJfL9/Jq8Wn+cbb/
        dTJ/HB+fn97fxVseJTlr7AIymJcobmVltIxwgd47T8JYbZRkFFxKFlx6ROHxJhiPWhQGK01CehS1
        ITJ2IYwVXKJIvAts7CIR7vsPVJyJpJF+GS3p9jAV0mqRsJdFYVQurc6Vs9pEAZT0xbxEwudRfkWW
        SjmvY0B2XcAPZ59Pz7rU+2LuhHLeo4qCDaXiDoVF1NFXah39aat4g78zXAqsG37YSCYhKboaH8sS
        kPpiX6+1yap66KhUulBpUbtbXKfdeCzQe9S5R2IZvLScx6YnovCu7py8cywqvMXqSfyT2sqpdfGD
        1ehF0jhjmXJX5MYyRmJ/i036kEITBwKpmy3XxOnUem0uIYNBg56NRctx2Hy+VodWIQ02PRhs2gIp
        dFlCtmrb9K2wzfp/YK+Pxavs2ABIIZb4L/DfSzrYlnTwx/b9m/K3wtvrtr1Ogdg1+fpJvvwjugPC
        mxDDQGZDVaUQum8pW62ffs5uiZYgm+6Ohim4wM+Nk72dtv0JAAD//wMAwyQZRvcEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07e0ce7afaf8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:07 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3992'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '373000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:11Z'
      request-id:
      - req_01HJNQrZ6P78WdYRgZjpj88H
      via:
      - 1.1 google
      x-cloud-trace-context:
      - d9db108a89e574e9768f8bc375645022
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I could really go for
      some Italian food right now.</user>\n<ai>I located several Italian restaurants
      nearby. The closest one is La Bella Vita, 4 kilometers away. Would you like
      to navigate there?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes,
      that sounds perfect. Please set it as our destination.</user>\n<ai>Destination
      set to La Bella Vita. The route is clear with minimal traffic. We should arrive
      in approximately 10 minutes. Would you like to start the navigation?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start the navigation and can you also
      adjust the temperature to something warmer?</user>\n<ai>Navigation started,
      and the cabin temperature is now set to a warmer setting. Is there anything
      else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>"},
      {"role": "assistant", "content": [{"type": "text", "text": "Certainly! I''ll
      extract the relevant user preferences from this conversation using the available
      tool. Let me do that for you now."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"routing": {"traffic_and_conditions":
      {"willingness_to_take_longer_route_to_avoid_traffic": [{"preference": "prefers
      routes with minimal traffic", "sentence_preference_revealed": "The user accepted
      a route with minimal traffic without requesting alternatives."}]}}, "comfort_settings":
      {"climate_control": {"preferred_temperature": [{"preference": "warmer temperature",
      "sentence_preference_revealed": "The user requested to ''adjust the temperature
      to something warmer''."}]}}, "points_of_interest": {"restaurant": {"favourite_cuisine":
      [{"preference": "Italian", "sentence_preference_revealed": "The user expressed
      a desire for Italian food, saying ''I could really go for some Italian food
      right now.''"}]}}, "entertainment_and_media": {"music": {"favorite_genres":
      [{"preference": "Italian music", "sentence_preference_revealed": "The user requested
      ''some Italian music to set the mood''."}]}}}}, "id": "toolu_019mftXE6m8nbsUa1MDmN6S6"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n7
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Field
      required [type=missing, input_value={''traffic_and_conditions''...sting alternatives.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.routing\n  Field
      required [type=missing, input_value={''traffic_and_conditions''...sting alternatives.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Field
      required [type=missing, input_value={''climate_control'': {''pre... something
      warmer''.\"}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...an food right
      now.''\"}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...an food right
      now.''\"}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...an food right
      now.''\"}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Field
      required [type=missing, input_value={''music'': {''favorite_genr...c to set
      the mood''.\"}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_019mftXE6m8nbsUa1MDmN6S6].", "tool_use_id": "toolu_019mftXE6m8nbsUa1MDmN6S6"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xVWU/jMBD+K5Zf8pKetFXJG9pdhJBgD9hLWxQ58SQxJLbxjLdUVf/7ymk4CuVl
        4SnKePIdns/OmivJE95gmQ5H3wyUF0eO5FEmRKbMZDk/vc15zGllIXQBoiiBx9yZOhQEokISmnjM
        GyOh5gnPa+El9A560x4arYF64+F4MpyNhzzmudEEmnjyZ30PSsbUqceA2koJ7z4djn6Lsx/Hy6+A
        02x+96HIlifSHc95zLVowndfBOXVsdc5KaO/CCcaIHAYYLT1xJM1x7yCRqQ7sIdNQb8+zZq5zvC7
        GJ19bM5nF7NgCQQarXTJE35pWG6cg5wYVcD+ilpJEXgYOGccxmwJTANIRoYJKduuRiEqXTIHt145
        kKxQUEtkQksm5LXHLRiS8zl5B8wUbeH04vM5M9l1y2ZYE3y1C3BnISeQbOujz07AQYRMMCSwvWzV
        C0/2IDxZ6IUe9dllBSxyxpPSZXSPrPBBYGSFu2nXgrTHTvRZb9uN/YUed0C5aQrjKEWg0Ib7EIPa
        qFZlFTpSoWUqmkyBzuEpan+hDzpQa5QmTE2RKk3gAGmv0EI5SJHarY9iFkmh88DwWGodlM7k4FYp
        VsbaPVYmHSsELhJKN6CpldmAVOJVR05IZdo+a2QugsgdNwv9E6K6vk8APmagG/1SUcWgsbTqKJAZ
        x7Sv65ApD8iWFThgwlpnrFOCoM9jbkMEANtTYmw4Z1JuyxVP+MCCI6WDBY/gUuugABc2GwfdLAfd
        hHnMWx6erDeb+H/BuufbwJ7HaLA3Lm/jeJmqwdMEvTv4szi+O/7zXL+N4JX0D16kfIfmarO5ijmS
        sen2otm9stsFhFvfTi8J0Y65b/8SyXp7E6dkbkAjT2ajw0nMjaenxen0YLP5BwAA//8DAMb794KG
        BgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07e75ac8ce78-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:10 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3992'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '393000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:11Z'
      request-id:
      - req_019ZZwSyH35BWZCKUcJndV42
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 29963fc9d199b8803c9b0fd49b26f8a9
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy
      fresh apples</user>\n<ai>There are several grocery stores nearby. The closest
      one is ''Meyve Emporium'' which specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>"}, {"role": "assistant", "content":
      [{"type": "text", "text": "Based on the conversation, I can extract some user
      preferences related to grocery shopping and navigation. Let me use the extract_user_preferences_v1
      function to capture these preferences."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"points_of_interest": {"grocery_shopping":
      {"preference_for_local_markets_farms_or_supermarket": [{"preference": "local
      markets", "sentence_preference_revealed": "The user prefers local market stands
      over supermarkets for buying fresh produce."}]}}, "routing": {"navigation_and_routing":
      {"traffic_and_conditions": {"traffic_information_source_preferences": [{"preference":
      "real-time traffic updates", "sentence_preference_revealed": "The user requested
      to check for traffic on the way to their destination."}]}}}, "comfort_settings":
      {"climate_control": null, "lighting_and_ambience": null}, "entertainment_and_media":
      {"music": null, "radio_and_podcast": null}}}, "id": "toolu_011pnfpSNJhme5FjEn5bPGHC"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n10
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Field
      required [type=missing, input_value={''navigation_and_routing''...their destination.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.routing\n  Field
      required [type=missing, input_value={''navigation_and_routing''...their destination.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.traffic_and_conditions\n  Field
      required [type=missing, input_value={''navigation_and_routing''...their destination.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Field
      required [type=missing, input_value={''grocery_shopping'': {''pr...ying fresh
      produce.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''grocery_shopping'': {''pr...ying fresh
      produce.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''grocery_shopping'': {''pr...ying fresh
      produce.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=None,
      input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_011pnfpSNJhme5FjEn5bPGHC].", "tool_use_id": "toolu_011pnfpSNJhme5FjEn5bPGHC"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6RV224cNwz9FUIv8zK78TV25q03t3Fa17CDBmhtDGSJs6N4RlJJalPX2H8vpNmF
        d500QN1HkdLh0SGP9KicVY0aedHu7e/LlT/3i4O/3/x18vvRt/HDxc+n785UreQhYt6FzHqBqlYU
        hhzQzI5Fe1G1GoPFQTXKDDpZnB3OjmccvEeZHewdHO29PthTtTLBC3pRzR+PG1AJYWgTZ9RCJa9T
        u7d/evZ9d3a/xPen17+N/en5VS/vrj+oWnk95nOXWkx/lrwRF/ylJj2iIHGG8TGJah4Vmx5H3e7A
        7kffxeuL837E47OPP/jju8sff/ouXwk1B+/8QjXqfY8QCZcuJIZuXQOMHgbotQXGJZIeYKkHZ3XJ
        IVEgnsPbahhAW0vIDKhND8Fjc+Nv/P4cfnHMzi+A8M/kCC10DgfL4DxIj1BRSOL8ooJw9xGNNDce
        AGbwjbVQRU33OVc/batBewuVkO46Z1rtbWuCty4T4g0Iz3Pxgzm89SYQoRFgoWQkEUIXCCoTxi6Q
        tIySYbna1L3COGiD4NNQ7pqQ4ZOTHnCM8rDBX4MMbtSCmYBQGKqJ2uAWfcYs3PR459AbrAqjw6/K
        UcXgvHAbutZ5QUKWakeOHNGJtJesSOcIW5bSio0sVnuTS2/CO3ocfUUPzAVFOz+il8J8ROv0i2QZ
        EzuzFoO0daHgxWCNZpmEKBNjCLUgnF//elHmGkJEKrwZJMCGqfTICI45Ic9VrWLei1zsFKJqFE3c
        plSvGvUqIonz+SaJkdpI2CHlNvCr9RypWpVbZMesp0w1j6ts8ilfFl+esnxmk3G+CzQW0i2HRAa3
        qxWOT+vCVQ8zcSPCGgFStFowW5hzE/wOQku4RD2gXfszX6eMDrKgLSr1aO6L7hvAMBnrk37IeenR
        EVhkcb7QnKvV7Wq1ql8i3nPXbKv4zAyTgF/0Qk69kMDnDtmm8OSPqfq2Q6bIM39MwQUFg/TQch9i
        nHq/1bS2C9QOweihHTXdo3DbaRq5DdRyikhT9PNWlzOwPvMf2julGbbPQ/5wLENYIsFW1clxd+kh
        PykdIfcQKdhk8P+0+V8eg22pi8fXjnlu8am/t6vVba1YQmynX2b32ysJzpNc1MrvSq1S+Wmbx+k3
        ayXcY7bb68OTN7UKSXaCRyer1T8AAAD//wMACaaO+coHAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07e75d63faa6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:11 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3992'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:10Z'
      request-id:
      - req_016VCzzy5gGkJVh5fV8XoLkK
      via:
      - 1.1 google
      x-cloud-trace-context:
      - d061fc88581aaa72e4e5e1f43b070f5b
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a
      place to eat, but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>"},
      {"role": "assistant", "content": [{"type": "text", "text": "Certainly! I''d
      be happy to help you find an Italian restaurant. Based on your preference for
      pasta dishes and Italian cuisine, I can extract some user preferences. Let me
      use the appropriate tool to capture this information."}, {"type": "tool_use",
      "name": "extract_user_preferences_v1", "input": {"pertinent_user_preferences":
      {"points_of_interest": {"restaurant": {"favourite_cuisine": [{"preference":
      "Italian", "sentence_preference_revealed": "The user expressed a love for pasta
      dishes and specifically requested an Italian restaurant."}]}}}}, "id": "toolu_016a8vkTuWpJamv4imE7X8RN"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n6
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...talian restaurant.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...talian restaurant.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...Italian restaurant.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...Italian restaurant.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...Italian restaurant.''}]}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''points_of_interest'': {''...talian restaurant.''}]}}},
      input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_016a8vkTuWpJamv4imE7X8RN].", "tool_use_id": "toolu_016a8vkTuWpJamv4imE7X8RN"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5yUYU/bMBCG/8rJX7pJKWpLKV2+oYmxMY0xQIJpnaIjvjRWEzv4zild1f8+OVAG
        FZqmfYrse+/x3eW118polaqa59lgOCznJ+WZ4PLq/N3996Pp4fWk+HihEiWrhqKKmHFOKlHeVXED
        mQ0LWlGJqp2mSqUqrzBo6u/3D/rsrCXpjwaj8WAyGqhE5c4KWVHpj/UWKs5VWeBI7UqJ65ANhu/N
        fnt+9GV6E74t3C/8fHp9kt+2KlEW65h3jpKXH4LNxTh7jh5rEvIcMbYJotK14rykGrMX2AlO28VV
        uG5OsW7Hpj4+vJlenMWWCNlZY+cqVVclQeOpNS4wFI9nQI5VBUtkqA2zsXNgasljBZ7ugvGkoTBU
        aQbMc+d1VIgDKQlOL7+eXXbF7MGnXlUBat0FtqTHxKWREmyoKnAeqG5kBS1WgRiWJXkCbBrvGm9Q
        KAG0GhZETQeie8MSScYWztfYFYy3LkgX9sSCwaOV2FdBnmxOe/CRPPW4U7BQ079d9eMXnmaRzuzM
        DvfgSOunWnvehXhU76FqeLNt/+3MjnakuasL5yVjkpjCr+Xs7+QUxlPG0rWw1QeryUOvccYKZ67I
        jBWKTfVeoMY7KI02N3b+n7SDHdrcu5z8KuPSNc2zAfwjbrKDo6gSNLYmKxlandWkDb42opk9xrwE
        V8RfxfTHLlUFtxTdRPov5kGGJYF2tidQYkvADeWmMPnrbqmh8K7uXBGYfI/hLpBf7anN5meiWFyT
        PRgkPgl4n4lbkI0Xrwsx3YXoLpXGWhIVuicjXT9cy604PTgc7yfKBXm+ORyMxpvNbwAAAP//AwA5
        rtFtlAQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07d2dcf6982b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:12 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3992'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:11Z'
      request-id:
      - req_01GSWn3ZsAAo6riwnFfFkFap
      via:
      - 1.1 google
      x-cloud-trace-context:
      - eafd40d2bfdcc90abe5b380ca5a20394
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make the lights yellow
      inside</user>\n<ai>Certainly, changing the interior lighting to yellow now for
      a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>"}, {"role":
      "assistant", "content": [{"type": "text", "text": "Based on the user''s request
      to \"Make the lights yellow inside,\" I can extract a preference for the interior
      lighting color. Let''s use the extract_user_preferences_v1 function to capture
      this preference."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"comfort_settings": {"lighting_and_ambience":
      {"interior_lighting_color_preferences": [{"preference": "yellow", "sentence_preference_revealed":
      "The user requested to make the lights yellow inside."}]}}}}, "id": "toolu_01WjomjsgSLX4kVBwju2T7KQ"}]},
      {"role": "user", "content": [{"type": "tool_result", "content": "Error:\n\n```\n4
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...hts yellow
      inside.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':...ghts yellow
      inside.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...hts yellow
      inside.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...hts yellow
      inside.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_01WjomjsgSLX4kVBwju2T7KQ].", "tool_use_id": "toolu_01WjomjsgSLX4kVBwju2T7KQ"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6xWS28bNxD+KwQvukiO7dgpoJtzaA04KFIkqZvWATEmZ3dp7Q43nFmpgqD/XpDa
        tVaWfGiQk6B5P75vlhvtnZ7rhktzfnHv6GJxv/ib3j7dXK66u1tXvf+N9VTLusVkhcxQop7qGOok
        AGbPAiR6qpvgsNZzbWvoHM7ezq5nHIhQZpfnl1fn7y7P9VTbQIIkev7PZggqIdSm4xQ1l5L+d+b8
        4uuHu/LT7fr6Hq6+vPtqb9aLm9+/X+upJmiS30cQW/3akRUf6CNEaFAwpmo9tZ3o+UazrbABcxD2
        /ik0T1x++vDX1eLP96un7vLzL3d/pJYQOJCnUs/15wpVG3HpQ8eq6HMoC3WtVsCq8cyeSsW4xAi1
        ivi98xGdKjzWjpUnJRWqL4zxY8QCI5JFVuHxCa2cqXtUhOiUBAXOZdMhYh9g5aVS1NW1WkLdIatV
        hRHVCpULNBFVwRIVt2h94a3yVITYQKrxTN1ixAnnoCzYzh7Xs/SrntubP9ADXZyp1OMkhk48lZNd
        YuX3vQG5575SyZO6ztV62VWHTStrxd3jbNcWnz3QZR/V1r4BQZO2HUN9InpHDqOa2NAUIYphlFQG
        T05lGs3h7IHe9jna4EnYhMJ4EozI8pOauOoTYAor4KlBEgPkTIPOw0/K8kCfK2RUtgIq04J9XSsk
        7iIqqUBUwtpLXEHMsGQkGTDGEjsrXcSpwiWS8oXi0KAKRVI3J/HSMcYUZwDmmZ7qNrEJORMztIna
        zu3ElZ7rNy1G8ZQGkZzNyPlNDyE91XlHiXctxEUm0kbvLCM60wvNjvZpqVO9j2OKEI0NSxyZ7q28
        RcNI7MUvvayzcQv+hOVBvCFl2oJhtF30sh5sEwWzVQXkvIW2RWfAWmT2jzW+DO3yobNo0qZyH8Gs
        oF6YIoZm31wwDlk8ZTbufLfpXO5mNN9oCTVGGCqUCEXh7ZAElsG7rAyFGfZlYgCXx8ajiYQ4DIKr
        EAVZjPgGzVgw1PxcR58uo9kGcj5VybmsXjO6JYZDFy2Olz3k72dAyJxaFligqQOVGE1qFZMw93LY
        4Ha7nf5feL08EW9eHJcx7gqgNLWEoOOa90gUbFqMkFgzKBlBTIWQUpxyBh+LOqyM8xHzx+DY6Ad6
        O75h427Sf+hi+rrm3pYh4ReN7Tx7wj0wUSCuR4GfNcg+0ynzJ6ZDM6gKYDFFCO6E25iy63z8GpQq
        uGP9vsIRq7dTXfiIhqXnwEY/eiqDwX/zKBhfQZELBHKiisNofYrEkrSrUZa9x6AklFWIi+d5HPqY
        kA4KGmiQvPiTSFm3mYqD56ryNSZML7E+OjunHEBMeiOsHazNbtvPHZQxWIzrxNa2PbqW3LUYG4gL
        FGMr8PTKiauDhdrsDNkUEBvOJ2Dv/uPUe+ULOMZo03Ei9w6eGZ0cqOQ9zHppiRTxWAwJD5IrfgRy
        JzaQExiWiNDk3WFc+tFFi+B8yLW1wVngzJUSKb3LDOGK+yt2lLo3T+Nf8avaw7pHyM9pD0G53X7b
        br9NNUtoze65dfi8zQrG792YbV1+Uc83u1erkbDAdJGvr99dT3XoZCy8OL+42m7/AwAA//8DAGC7
        UfKzCwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07dd4a26985b-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:14 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3992'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:14Z'
      request-id:
      - req_01AyJCCByLQZgyi36SDpDtZY
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 1db62091079dc1b06ea6efd6512941a0
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 1024, "messages": [{"role": "user", "content": "<conversations>\n<conversation
      idx=0>\n<user id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting
      to something warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting
      the interior lighting to a warm ambience. You should notice a cozier atmosphere
      now.</ai>\n</conversation>\n</conversations>"}, {"role": "assistant", "content":
      [{"type": "text", "text": "Certainly! I understand that you''d like to change
      the interior lighting to a warmer tone. Let''s extract this preference and update
      your vehicle settings accordingly. I''ll use the extract_user_preferences_v1
      function to capture this information."}, {"type": "tool_use", "name": "extract_user_preferences_v1",
      "input": {"pertinent_user_preferences": {"comfort_settings": {"lighting_and_ambience":
      {"interior_lighting_color_preferences": [{"preference": "warm tones", "sentence_preference_revealed":
      "The user prefers warm tones for interior lighting and dislikes cool tones."}]}}}},
      "id": "toolu_01VrgZXegR4uuk9y8rM71bDs"}]}, {"role": "user", "content": [{"type":
      "tool_result", "content": "Error:\n\n```\n4 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...slikes cool
      tones.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':...islikes cool
      tones.''}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...slikes cool
      tones.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...slikes cool
      tones.''}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[toolu_01VrgZXegR4uuk9y8rM71bDs].", "tool_use_id": "toolu_01VrgZXegR4uuk9y8rM71bDs"}]}],
      "model": "claude-3-5-sonnet-20240620", "system": "Extract the relevant user
      preferences from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "temperature": 0.0, "tool_choice": {"type": "tool", "name": "PatchFunctionParameters"},
      "tools": [{"name": "PatchFunctionParameters", "description": "Respond with all
      JSONPatch operations required to update the previous function call.\n\nUse to
      correct all validation errors in non-compliant function calls,\nor to extend
      or update existing structured data in the presence of new information.", "input_schema":
      {"type": "object", "properties": {"schema_id": {"description": "The ID of the
      function you are patching.", "type": "string"}, "reasoning": {"description":
      "Think step-by-step, listing each validation error and the JSONPatch operation
      needed to correct it. Cite the fields in the JSONSchema you referenced in developing
      this plan.", "type": "string"}, "patches": {"description": "A list of JSONPatch
      operations to be applied to the previous tool call''s response.", "type": "array",
      "items": {"description": "A JSON Patch document represents an operation to be
      performed on a JSON document.\n\nNote that the op and path are ALWAYS required.
      Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}]}'
    headers: {}
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RU3WvbMBD/Vw695MUJTpp2rd8GzQiUQulC95VhFPtsa5VPru6ULAv534ecpFu3
        l8Hok9BJ9/tAv9NOmVJlquU6T8c3+iG0Jf8wVzfb+7K4eViY6vFWJUq2HcZbyKxrVInyzsaCZjYs
        mkQlqnUlWpWpwupQ4vBseD5kR4QynKSTaXoxSVWiCkeCJCr7sjuBinM2DxxReylxH/J0/DBp3Ozt
        7NNifd2E+Ww21e/nT5cqUaTb2HenpWjeBSrEOLrTXrco6DnCUBdEZTvFRYOtzl/C+vrzR6zvpyE8
        Xm0v/e2b8eo6dnnU7MhQrTK1aBA6j2vjAkN15IBCWwsbzdAaZkM1MK7Rawsen4LxWEJl0JYMhkAi
        AnoxhCTRns87jxV6pAIZ3OobFjKCDwiEWII40GXZd53Aj1gbIw1QsBbW2gZk2DToETYIpaOBQKPX
        CNxhYSpTgKHK+Vb3civv2h4xso9gjh4H3BdYsBuutsO4wrPvbElLGo8gmh94F8RQPTjIAPPLtKby
        2XA0MLC2127kb62V82CEgcPqYGe0pMmRoXBt5bzkjBKZeFRY02rBPGbEO/t/1KMlnR2JOmdIOHdV
        bkjQI8sruJoeyTBSiDbUxnfXVOYtlka/AuOSFg0yxh4T3ztGxVpA4uARpNECMa9/ZlP7PtqMJKec
        svhQSPCYAK6RwFT/FC/nY3f7MmeDmP4uyEjt918TxeK6/JCw+H/o77m4R6Q4b/0R41OIE6GyaDdR
        of9fst1hhk+Xs/OLNE2UC/J7cZxOpvv9TwAAAP//AwDfVuM4wQQAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c07dd5c8b175e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:16 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      anthropic-ratelimit-requests-limit:
      - '4000'
      anthropic-ratelimit-requests-remaining:
      - '3992'
      anthropic-ratelimit-requests-reset:
      - '2024-07-09T23:18:54Z'
      anthropic-ratelimit-tokens-limit:
      - '400000'
      anthropic-ratelimit-tokens-remaining:
      - '402000'
      anthropic-ratelimit-tokens-reset:
      - '2024-07-09T23:18:15Z'
      request-id:
      - req_01MJD6H1vV5axcvsCLai2UV2
      via:
      - 1.1 google
      x-cloud-trace-context:
      - 556de28e5e7e38ab73237bd301af9075
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve
      been craving some good Italian food lately, can you suggest a nice Italian restaurant
      nearby?</user>\n<ai>Certainly, there''s an Italian restaurant called La Cucina,
      4 kilometers away with excellent reviews. Shall I navigate there?</ai>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>La Cucina sounds perfect, please turn
      on the navigation.</user>\n<ai>Navigation to La Cucina is now active. You will
      arrive in approximately 12 minutes. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFZNc+M2DP0rOzw73ThfTn3eQ+/t9NLscGASslBThApCclyP/3uHjGRb
        jp3pzSIegAfwAebekDdLAy+rys1ff71bPD34u6fHhbsDP6/uHl/883z+8vo6949mZnj1Nzo1S+Nq
        0F8cN21AJY5mZpwgKHqznC8e7p9fFveL+cw07DHk8M5xFzV9r0hwy7JJ34vp46DqostR7vqHHKhm
        cpjM8q+9oejx3SzvZ6bBlGCNZrk3wgFzzJQoKUQ1M6PMwToI4dKtFJcN9o/dPz/+fOq1B/rXVY2m
        gPer33/7kb13bQ440jCz08/l3kRoshXfVcCp7RKKbQUrFIwOk+3nZmZA1l2DUZNZmv2baVGUIsbP
        8Dez/LZ/M8KdUlwPXy3I5uyroAW9Hc5tJpiNsQth9m1E5Hi2YrGOezyDT5Hk0CaMiZR60l1xaIFu
        oCdxx/Rb0tomdJ2Q7s7xEdEXZA3Rk4O2RW/BOUyJVgGvpfDlzhzaLYVQamO7hbCxlXBzKpitx6QU
        Id/C6H/IAaadUw4oMBJWgaoid54PeiZfAFzZ1KKjipwVBl+6mi6axTL2KNUsikmtUoP2/GAsYUJr
        SG0heus4esrEx9sejRQrlqbUZBN34vBSGiOVoTsRU8rNUNigDRzXKDY3APNhKe2y5kNh47ipWNQm
        1NyskYcL1IBiJqjCYTitIObOZAFdJ3MSpGLTooB2MtFjQlBbI+Rct4IASRV4az0Jltm6BizkA63r
        Ein3EpoV4dDs/ZuhqJhvyR5BjgPLraSf4R/x9P87rCT/KhdxjXBh3DJFTVlhxR+TjmOOSaETiHrs
        dc95jNC6jhJFnM4GKsjuLM/EionKlJeRFojribmCpLZi9jfcz7fKLq8q26DW7K9jTsQny6dUm1e2
        TXoczf2bWVFcs8X3svcSfqFkzxH0BrHLwMeMeYDzXUyTnhxHe0TNfy6Trk1dLedNiBYajKR0U+e7
        tiyM0XtbU8A8aj2GqzvzmhOoxR5l52FnPxQyKWot7FB2ea+07bXtn7oWpQHZoFpXA8UvVnVgB8F+
        gJOtQJpUdtYpxFSxmHWqQLEoIQ9ag55g4NB06WOjDIotgk08LJKT4gbLGqPgdRNkPWjhsoLob7S7
        5LNJBaEpl4XS08WCFfDEhWnL3sFxxNYYUSDYiNs0LNWrTAav3O5t+hLxuZyzuSgsLjV6OBzM4fDz
        MDMVRUq1FYSUXw/nD5PDz5npxjdMK9y0apU3GJNZPi0eHvMrRiEcz54f7p9m5vTGOoFf54fDfwAA
        AP//AwARbzofuAkAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2989c1682-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.611'
      x-request-id:
      - 43c62004-a55f-4d7b-8261-c2a3e88501c4
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s
      the traffic ahead on this route?</user>\n<ai>The traffic in Mariani is currently
      flowing smoothly with no delays on your route.</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great,
      can we put on some music? I don''t like driving in silence.</user>\n<ai>Of course,
      would you like to choose a radio station or should I select a playlist for you?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm, let''s go with a playlist, something
      upbeat and cheerful, you know the kind that''s always on the radio.</user>\n<ai>I
      have a Pop Hits playlist that fits that description. Shall I play it now?</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That sounds perfect, pop music always
      lifts my spirits.</user>\n<ai>Playing the Pop Hits playlist. Enjoy your drive
      with some uplifting tunes!</ai>\n</conversation>\n</conversations>"}], "n":
      1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFZRjyI3DP4rpzyzvWXZPVh+QO+hp6qqKrWn7ikyiQdcMvHI8cAixH+v
        kp0BhoXVvTHxZ/uz89lkb8ibufny5fn5fvY8uZv5yfjucTGb3T0/Tx/upmOY+PFkgm7xaEaGF/+h
        UzM3bgX6i+O6CajE0YyMEwRFb+bj6cP905fp/XQ8MjV7DGZuwDluo6bPFQluWdbpczG9HVRtdDnK
        3eYhB1oxOUxm/u/eUPT4aub3I1NjSrBEM98b4YA5ZkqUFKKakVHmYB2EcOlWissG+9v3v779/nX5
        7ddXv73/46n58+/1P1+/U5O9d00O2NMwo9PP+d5EqLMVX1XAqW0Tim0EKxSMDpPdjM3IgCzbGqMm
        Mzf7F9OgKEWM7+EvZv5p/2KEW6W47L4akPXZV0ELetud20wwG2MbwuhTj8jxbMViHW/wDD5EkkOb
        MCZS2pDuikMDdAM9iNun35KubELXCunuHB8RfUGuIHpy0DToLTiHKdEi4LUUvtyZQ7ulEEptbLcQ
        1rYSrk8Fs/WYlCLkW+j9DznAsHPKAQV6wipQVeTO88GGyRcAVzY16KgiZ4XBl66mi2ax9D1KKxbF
        pFapRnt+0JcwoNWlthC9dRw9ZeL9bfdGihVLXWqyiVtxeCmNnkrXnYgp5WYorNEGjksUmxuA+bCU
        dlnzobBxXFcsahNqblbPwwWqQTETVOHQnVYQc2eygK6TOQlSsW5QQFsZ6DEhqF0h5Fy3ggBJFXhr
        PQmW2boGLOQDLVclUu4l1AvCrtn7F0NRMd+SPYIcB5ZbSd/D3+LpzzssJP8qF3GNcGHcMEVNWWHF
        H5P2Y45JoRWIeuz1hvMYoXUtJYo4nA1UkN1ZnoEVE5UpLyMtEJcDcwVJbcXsb7ifb5VdXlW2Rl2x
        v445ER8sn1JtXtk26XE09y9mQXHJFl/L3kv4gZI9R9AbxC4DHzPmAc53MUx6cuztETX/uQy6NnS1
        nDchWqgxktJNne+asjB67+2KAuZR22C4ujOvOYFa3KDsPOzsm0IGRS2FHcou75Wmubb9U9ug1CBr
        VOtWQPGDVR3YQbBv4GQrkDqVnXUKMVQsZp0qUCxKyINWoyfoONRtetsonWKLYBN3i+SkuM6yxCh4
        3QRZD1q4LCD6G+0u+WxSQajLZaFs6GLBCnjiwrRh7+A4YkuMKBBsxG3qlupVJp1Xbvc2fYh4X87Z
        XBQWlxo9HA7mcPhxGJmKIqWVFYSUXw/nD5PDj5Fp+zdMI1w3apXXGJOZP84m0/yKUQjHs6fJeDYy
        pzfWGXh8OPwPAAD//wMACPO3A7gJAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2b8ea9456-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.589'
      x-request-id:
      - 0389a494-533c-4bc4-a788-382a345fd6e4
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>I
      could really go for some Italian food right now.</user>\n<ai>I located several
      Italian restaurants nearby. The closest one is La Bella Vita, 4 kilometers away.
      Would you like to navigate there?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Yes,
      that sounds perfect. Please set it as our destination.</user>\n<ai>Destination
      set to La Bella Vita. The route is clear with minimal traffic. We should arrive
      in approximately 10 minutes. Would you like to start the navigation?</ai>\n<user
      id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Start the navigation and can you also
      adjust the temperature to something warmer?</user>\n<ai>Navigation started,
      and the cabin temperature is now set to a warmer setting. Is there anything
      else I can assist you with on the way?</ai>\n<user id=b9059c2f-0fe3-4a66-8c06-225953f2fa11>Maybe
      some Italian music to set the mood?</user>\n<ai>Playing classic Italian music.
      Enjoy the drive and your meal at La Bella Vita.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbBjiI5DP2VUc70TjMNTQ9fsLddzWovuz2KTOKiPKTikuOCRoh/XyVU
        NRQNrb1R8bP97NiPHAx5szQO3cvs+8w/uNn8+8NssXp5WOH0+WH+/LSo/HzuHx+/mYnh1S90mvE1
        6G+OmzagEkczMU4QFL1ZThffHufPi8fFdGIa9hjM0oBz3EVNXysS3LFs0tdiOh1UXXQ5ysM253A1
        k8Nklv8eDEWPb2b5ODENpgRrNMuDEQ6YY6ZESSGqmRhlDtZBCNdup+IgBLv68bv36c8/fv39Iy7w
        r/0/NU5jHZ+y977NAQcaZnL+uTyYCE224psKOLVdQrGtYIWC0WGy26mZGJB112DUZJbm8GpaFKWI
        8SP81Sy/HF6NcKcU1/1XC7K5+CpoQW/7c5sJZmPsQph8GRA5nq1YrOMtXsDHSHJoE8ZESlvSfXFo
        ge6gR3GH9DvS2iZ0nZDuL/ER0RdkDdGTg7ZFb8E5TIlWAW+l8OXOHNodhVBqY7uDsLGVcHMumK3H
        pBQh38Lgf8wBxp1TDigwEFaBqiJ3mQ+2TL4AuLKpRUcVOSsMvnQ1XTWLZehRqlkUk1qlBu3lwVDC
        iFaf2kL01nH0lIkPtz0YKVYsTanJJu7E4fVoDFT67kRMKTdDYYM2cFyj2NwAzIeltOuaj4WN46Zi
        UZtQc7MGHi5QA4qZoAqH/rSCmDuTB+g2mfNAKjYtCmgno3lMCGprhJzrXhAgqQLvrCfBslu3gIV8
        oHVdIuVeQrMi7Jt9eDUUFfMt2XeQ48ByL+lH+Cme/n+HleRf5SJuES6MW6aoKU9Y8cekw5pjUugE
        or73est5jdC6jhJFHO8GKsj+Is/IionKlpeVFojrkbmCpLZi9nfcL1Vln6XKNqg1+9uYM/GR+JRq
        s2TbpO+reXg1K4prtvhWdC/hJ5PsOYLeIXYd+D1jXuB8F+OkZ8fBHlHzn8uoa2NXy1kJ0UKDkZTu
        zvm+LYIxeO9qCphXbYvhpmbecgK1uEXZe9jb04SMiloLO5R91pW2vaX+qWtRGpANqnU1UPxEqgM7
        CPYETrYCaVLRrHOI8cRinlMFimUS8qI16Al6Dk2XTorST2wZ2MS9kJwnrresMQreNkGeBy1cVhD9
        nXaXfDapIDTlslC2dCWwAp64MG3ZO3hfsTVGFAg24i71onqTSe+V271LnyI+lnOxF4XF9Ywej0dz
        PP48TkxFkVJtBSHl18Plw+T4c2K64Q3TCjetWuUNxmSWs5fn5/yKUQjvZ/On2WJizm+sC/D0ePwP
        AAD//wMA+SUpP7gJAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a29f58cf05-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.643'
      x-request-id:
      - 37079576-5ae2-4c17-9030-a53a800cebdd
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can
      you help me find a place to eat, but make sure it''s an Italian restaurant,
      I just love pasta dishes.</user>\n<ai>Certainly! There is a well-rated Italian
      restaurant called ''La Dolce Vita'' about 10 minutes from our current location
      in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFZNjyI5DP0rKGd6pr+7l+scRnta7WGllYZWZBIXuEnFNY4LGiH++yqh
        CigaWnuD+Ov5xc+VrSFvJgZeH28fZg5v/P3s5eaxmt3evL66x5vZQ+WenioP9w+PZmx49o5OzcS4
        Beg3x3UTUImjGRsnCIreTO5e7m+fnl9uX+7GpmaPIad3jtuo6XtFgmuWZfpeTPuDqo0uZ7lZ3edE
        CyaHyUx+bQ1Fjx9mcjs2NaYEczSTrREOmHOmREkhqhkbZQ7WQQjnYaW5bLBxU0H1HH8+/fznneNf
        v3/8/e+P37B5z9GbJifsYZjx8edkayLU2YofKuDUtgnFNoIVCkaHya7uzNiAzNsaoyYzMdupaVCU
        IsbP7lMzGW2nRrhVivPuXwOyPPlXvAW97c5tBpiNsQ1hPOo9cj5bsVjHKzxxH3qSQ5swJlJakW5K
        QAN0xXuQty+/Jl3YhK4V0s2pf0T0xXMB0ZODpkFvwTlMiWYBL5Xw5c4c2jWFUHpju4awtJVwfWyY
        rcekFCHfQh+/ywmGzCkHFOgBq0BVkTutBysmXxy4sqlBRxU5Kwy+sJrOyGLpOUoLFsWkVqlGe3rQ
        tzCA1ZW2EL11HD1l4P1t90aKFUtderKJW3F4Pho9lI6diCllMhSWaAPHOYrNBGA+LK2d97wraBzX
        FYvahJrJ6nG4QDUoZoAqHLrTCmJmJg/QZTDHgVSsGxTQVgbzmBDULhByrWtJgKQKvLaeBIu2LjkW
        8IHmi5Ipcwn1jLAjezs1FBXzLdmDk+PAcq3oZ/d9Pv3/ATPJv8pFXAJcEDdMUVOesBKPSXuZY1Jo
        BaIeuF5xlhFa11KiWPr6tT2VXj6Zmj8VAkGcmj2/UYsqTwQquEII6Dv30XubdBR4haMGksLIU1pg
        +jY1u7e97lBBNnZY56BKTFQ2SFkXAnE+MFeQ1FbM/kr46cba5DVoa9QF+8s+R1IGi60wmT8HNulB
        9tupmVGcs8WPslMTfqESzxH0CrDzxIeKeTnkex4WPQb29oiaP1wD1oahlvOWRQs1RlK6qqFNU5ZR
        H71eUMAs4xWGi/v4UhCoxRXKxsPG7qdv0NRc2KFs8s5qmktfltQ2KDXIEtW6BVD84jMQ2EGwe+dk
        K5A6lX14TDFUQx5WUaBYJiGLuEZP0GGo27TfVp0aihgSd0vqOHGdZY5R8LIJ8jxowTKD6K/QXerZ
        pIJQl8tCWdHZ8hbwxAVpw97BQb5zjCgQbMR16hb2RSRdVKZ7nb70+NzOiS4KivMZ3e12Zrd7241N
        RZHSwgpCyi+T00fP7m1s2v591AjXjVrlJcZkJo/Pz6/5haQQDmdPd89/jM3x/XY03N7tdv8BAAD/
        /wMAkZBCIxQKAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2a9ca6899-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.529'
      x-request-id:
      - e9814002-5228-4c8e-b521-a74c79f51020
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=0a1708e8-1956-4f6b-aa23-f1698ecd6427>Make
      the lights yellow inside</user>\n<ai>Certainly, changing the interior lighting
      to yellow now for a warm and cozy atmosphere.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//fFZNjyI3EP0rI5+ZLMxnluNGOeQQZaUop2VkFXY1XYPb1SpXwyDEf49s
        aKAZmBu4vl49V7321pA3U/P8OJm7ySvef4fn3++fAJ7u5+NXf//o5vA09w68/25Ghufv6NRMjatB
        f3PctAGVOJqRcYKg6M108vowfn55Hb9ORqZhj8FMDTjHXdT0rSLBNcsyfSum/UHVRZez3K8ecqKa
        yWEy019bQ9Hjh5mOR6bBlGCBZro1wgFzzpQoKUQ1I6PMwToI4TKsNJcNdjz/67368+cf/Dxe//dv
        2vzz80e9eXl6z9GbNifsYZjR6ed0ayI02YofKuDUdgnFtoIVCkaHya4mZmRAFl2DUZOZmu3MtChK
        EeNn95mZ3m1nRrhTiovDvxZkefaveAt6ezi3GWA2xi6E0V3vkfPZisU6XuGZ+9CTHNqEMZHSinRT
        AlqgG96DvH35NWltE7pOSDfn/hHRF88aoicHbYvegnOYEs0DXivhy505tGsKofTGdg1haSvh5tQw
        W49JKUK+hT5+lxMMmVMOKNADVoGqIndeD1ZMvjhwZVOLjipyVhh8YTVdkMXSc5RqFsWkVqlBe37Q
        tzCAdShtIXrrOHrKwPvb7o0UK5am9GQTd+LwcjR6KAd2IqaUyVBYog0cFyg2E4D5sLR22fOuoHHc
        VCxqE2omq8fhAjWgmAGqcDicVhAzM3mAroM5DaRi06KAdjKYx4SgtkbItW4lAZIq8Np6Eiy7dc2x
        gA+0qEumzCU0c8ID2duZoaiYb8kenRwH/rRhv7bnw5xPZmaDIfB6ZvaAo5YxP5t4wRVCQL/3/huW
        eKc13pVC6W4ffUcxkceZ2b3lNJ/R7OHqLRI+B8wl/yr3fI2PQkjLFDXlAS7xmLRXEUwKnUDU41Wu
        OG8pWtdRoojD1UMF2dghMUcrJioiUhRDIC4G5gqS2orZ3wg/F61NVkLboNbsr/ucgA+0rXSbvwg2
        6XHztzMzp7hgix9FVhN+sSieI+gNYJeJjxWzPuS7GBY9Bfb2iJq/XQPWhqGWs9CihQYjKd1co01b
        9KiPXtcUMG/yCsNVSb4WBGpxhbLxsLH7CRk0tRB2KJssW2177eOSuhalAVmiWlcDxS++BIEdBLt3
        TrYCaVKRxFOK4cTm9RIFimUS8h436AkOGJou7QXrMLFlYBMfdOo0cQfLAqPgdRPkedCCZQ7R36C7
        1LNJBaEpl4Wyogv9FvDEBWnL3sFxxRYYUSDYiOt00OyrSA5Rme51+tLjcztne1FQXM7obrczu93b
        bmQqipRqKwgpP07O3z27t5Hp+idSK9y0apWXGJOZPr08PuRHkkI4nj1PHh9H5vSEOxnGk93ufwAA
        AP//AwAMmNSbFwoAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2b8e49e68-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.507'
      x-request-id:
      - 05d5beb2-e194-4a10-8132-15b1069f97fa
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start
      navigation to Applebees</user>\n<ai>Navigating to Applebees on Maple Street,
      Sherwood. It will take approximately 15 minutes to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any
      traffic on the route</user>\n<ai>The route to Applebees is clear with no reported
      traffic delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something
      upbeat</user>\n<ai>Sure, starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFZRbyI5DP4rqzzT26WF0vK2D3fSPt/D6XRdRSbxMF4y8cjxQBHiv5+S
        zhSGQrVvTPzZ/ux8NjkY8mZpEGZP85XDu3v3ML2bPbvHu6fZzN25uX+Y3c+f/cN8YSaGV7/QqVka
        V4P+4bhpAypxNBPjBEHRm+V0cf9t/rj4tphOTMMeg1kacI67qOlrRYI7lk36WkxvB1UXXY5yt73P
        gWomh8ks/zsYih5fzfLbxDSYEqzRLA9GOGCOmRIlhahmYpQ5WAchXLqV4rLBdn79/fXX99d//4ny
        +NT+9fef03rmfvzI3vs2BxxomMnp5/JgIjTZiq8q4NR2CcW2ghUKRofJbqdmYkDWXYNRk1maw4tp
        UZQixo/wF7P8cngxwp1SXPdfLcjm7KugBb3tz20mmI2xC2HyZUDkeLZisY63eAYfI8mhTRgTKW1J
        98WhBbqBHsUd0u9Ia5vQdUK6P8dHRF+QNURPDtoWvQXnMCVaBbyWwpc7c2h3FEKpje0OwsZWws2p
        YLYek1KEfAuD/zEHGHdOOaDAQFgFqorceT7YMvkC4MqmFh1V5Kww+NLVdNEslqFHqWZRTGqVGrTn
        B0MJI1p9agvRW8fRUyY+3PZgpFixNKUmm7gTh5fSGKj03YmYUm6GwgZt4LhGsbkBmA9LaZc1Hwsb
        x03Fojah5mYNPFygBhQzQRUO/WkFMXcmC+g6mZMgFZsWBbSTkR4TgtoaIee6FQRIqsA760mwzNY1
        YCEfaF2XSLmX0KwI+2YfXgxFxXxL9h3kOLDcSvoR/hZPf99hJflXuYhrhAvjlilqygor/ph0GHNM
        Cp1A1PdebzmPEVrXUaKI49lABdmf5RlZMVGZ8jLSAnE9MleQ1FbM/ob7+VbZ51VlG9Sa/XXMifho
        +ZRq88q2Sd9H8/BiVhTXbPG17L2EnyjZcwS9Qewy8HvGPMD5LsZJT46DPaLmP5dR18aulvMmRAsN
        RlK6qfN9WxbG4L2rKWAetS2GqzvzmhOoxS3K3sPevilkVNRa2KHs815p22vbP3UtSgOyQbWuBoqf
        rOrADoJ9AydbgTSp7KxTiLFiMetUgWJRQh60Bj1Bz6Hp0ttG6RVbBJu4XyQnxfWWNUbB6ybIetDC
        ZQXR32h3yWeTCkJTLgtlSxcLVsATF6YtewfvI7bGiALBRtylfqleZdJ75Xbv0qeIj+WczUVhcanR
        4/Fojsefx4mpKFKqrSCk/Ho4f5gcf05MN7xhWuGmVau8wZjMcrZ4fsivGIXwfja/X8wm5vTGOoGf
        psfj/wAAAP//AwAdPxVvuAkAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2b942270e-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.669'
      x-request-id:
      - 8baebb57-9916-406f-a171-b9641975c134
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find
      me a place to buy fresh apples</user>\n<ai>There are several grocery stores
      nearby. The closest one is ''Meyve Emporium'' which specializes in fresh fruits.</ai>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>No supermarkets, I prefer local market
      stands</user>\n<ai>Understood. The nearest local market stand with fresh apples
      is ''Akhisar Farmers'' Market'', 10 minutes away from our current location.</ai>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set navigation to that market</user>\n<ai>Navigation
      to ''Akhisar Farmers'' Market'' is now set. Would you like to start the route
      guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes, and can you
      check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar Farmers''
      Market'' is clear with no traffic delays. Starting route guidance now.</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFZNj+M2DP0rC50z3cl87MzkVhQo0EWBXnpo0VkIjETbbGTRpehk0yD/
        vZDGTuJMMugtFh/JR+qR0c6QNwszv3/58vI4r24e7pfPNw8P8HwDL/f3N+AeHx04D0v/YmaGl3+j
        U7MwrgH9wXHbBVTiaGbGCYKiN4v5093t45en26f5zLTsMZiFAee4j5o+VyS4YVmlz8X0dlD10eUo
        N+u7HKhhcpjM4q+doejxu1nczkyLKUGNZrEzwgFzzJQoKUQ1M6PMwToI4dytFJcNdnP7a131+u8f
        Tf07/Pb1p18ef5Y/v/7zY/bedjngSMPMjj8XOxOhzVb8rgJObZ9QbCdYoWB0mOx6bmYGpO5bjJrM
        wuxeTYeiFDG+h7+axafdqxHulWI9fHUgq5Ovghb0dji3mWA2xj6E2acRkePZisU6XuMJfIokhzZh
        TKS0Jt0Whw7oCnoSd0y/IW1sQtcL6fYUHxF9QTYQPTnoOvQWnMOUaBnwUgpf7syh3VAIpTa2Gwgr
        Wwm3x4LZekxKEfItjP77HGDaOeWAAiNhFagqcqf5YM3kC4Armzp0VJGzwuBLV9NZs1jGHqWGRTGp
        VWrRnh6MJUxoDaktRG8dR0+Z+Hjbo5FixdKWmmziXhyeS2OkMnQnYkq5GQortIFjjWJzAzAfltLO
        a94XNo7bikVtQs3NGnm4QC0oZoIqHIbTCmLuTBbQZTJHQSq2HQpoLxM9JgS1DULOdS0IkFSBN9aT
        YJmtS8BCPlDdlEi5l9AuCYdm714NRcV8S/YAchxYriV9D3+Lp//fYSn5V7mIS4QL444pasoKK/6Y
        dBxzTAq9QNRDr9ecxwit6ylRxOlsoIJsT/JMrJioTHkZaYFYT8wVJLUVs7/ifrpVtnlV2Ra1YX8Z
        cyQ+WT6l2ryybdLDaO5ezZJizRa/l72X8AMle46gV4idBz5kzAOc72Ka9Og42iNq/nOZdG3qajlv
        QrTQYiSlqzrfdmVhjN6bhgLmUVtjuLgzLzmBWlyjbD1s7ZtCJkXVwg5lm/dK113a/qnvUFqQFap1
        DVD8YFUHdhDsGzjZCqRNZWcdQ0wVi1mnChSLEvKgtegJBg5tn942yqDYItjEwyI5Km6w1BgFL5sg
        60ELlyVEf6XdJZ9NKghtuSyUNZ0tWAFPXJh27B0cRqzGiALBRtykYaleZDJ45XZv0oeI9+WczEVh
        ca7R/X5v9vtv+5mpKFJqrCCk/Ho4fZjsv81MP75hOuG2U6u8wpjM4uH54Sm/YhTC4ezx/u55Zo5v
        rBPwfL//DwAA//8DAItcaIe4CQAA
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2be76cff5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.588'
      x-request-id:
      - 787b018c-d4f4-4aec-a781-79d6e0745cc6
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate
      to Applebees</user>\n<ai>Setting navigation to Applebees in Sherwood. You''ll
      be there in 15 minutes, and traffic is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFZNbyM3DP0rC52dbpxN1onvObUoUKDoR5qFQEscD2uNOKA4dgzD/72Q
        MmN7HDvozSM+ko/UI62dIW/mZvb0WN256v7m8f4Rbu6n3/Bm8YSLm9uZxyeHs4cnXJiJ4cW/6NTM
        jatBf3LctAGVOJqJcYKg6M18Oru7ffg+u51NJ6Zhj8HMDTjHXdT0tSLBDcsqfS2m94Oqiy5HuVnf
        5UA1k8Nk5v/sDEWPb2Z+OzENpgRLNPOdEQ6YY6ZESSGqmRhlDtZBCOdupbhssL+9rH5/efn5m/59
        O5399cvz86/t8/Ttzz+y97bNAQcaZnL8Od+ZCE224psKOLVdQrGtYIWC0WGy66mZGJBl12DUZOZm
        92paFKWI8SP81cy/7F6NcKcUl/1XC7I6+SpoQW/7c5sJZmPsQph8GRA5nq1YrOM1nsDHSHJoE8ZE
        SmvSbXFoga6gR3GH9BvS2iZ0nZBuT/ER0RdkDdGTg7ZFb8E5TIkWAS+l8OXOHNoNhVBqY7uBsLKV
        cHMsmK3HpBQh38Lgv88Bxp1TDigwEFaBqiJ3mg/WTL4AuLKpRUcVOSsMvnQ1nTWLZehRqlkUk1ql
        Bu3pwVDCiFaf2kL01nH0lIkPtz0YKVYsTanJJu7E4bk0Bip9dyKmlJuhsEIbOC5RbG4A5sNS2nnN
        +8LGcVOxqE2ouVkDDxeoAcVMUIVDf1pBzJ3JArpM5ihIxaZFAe1kpMeEoLZGyLmuBQGSKvDGehIs
        s3UJWMgHWtYlUu4lNAvCvtm7V0NRMd+SPYAcB5ZrST/C3+Pp/3dYSP5VLuIS4cK4ZYqassKKPyYd
        xhyTQicQ9dDrNecxQus6ShRxPBuoINuTPCMrJipTXkZaIC5H5gqS2orZX3E/3SrbvKpsg1qzv4w5
        Eh8tn1JtXtk26WE0d69mQXHJFt/K3kv4iZI9R9ArxM4DHzLmAc53MU56dBzsETX/uYy6Nna1nDch
        WmgwktJVnW/bsjAG701NAfOorTFc3JmXnEAtrlG2Hrb2XSGjopbCDmWb90rbXtr+qWtRGpAVqnU1
        UPxkVQd2EOw7ONkKpEllZx1DjBWLWacKFIsS8qA16Al6Dk2X3jdKr9gi2MT9IjkqrrcsMQpeNkHW
        gxYuC4j+SrtLPptUEJpyWShrOluwAp64MG3ZOziM2BIjCgQbcZP6pXqRSe+V271JnyI+lnMyF4XF
        uUb3+73Z73/sJ6aiSKm2gpDy6+H0YbL/MTHd8IZphZtWrfIKYzLz++/30/yKUQiHs4fp3d3EHN9Y
        R/DjdL//DwAA//8DAD3uwse4CQAA
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a29bbe67bb-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.665'
      x-request-id:
      - 2bd647cb-0ad0-4962-bc53-81659f7a035f
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust
      interior lighting.</user>\n<ai>Sure, I can change the brightness or color. Which
      would you like to adjust?</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness,
      set it low.</user>\n<ai>Setting the interior lighting to low brightness now.</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep this brightness level for my future
      rides.</user>\n<ai>I''ll ensure the lighting is low for the duration of this
      ride, but I''m unable to store settings for future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s
      fine, just make sure it stays this way now.</user>\n<ai>Understood. The low
      brightness setting will be maintained. If you need any more adjustments, just
      let me know.</ai>\n</conversation>\n</conversations>"}], "n": 1, "temperature":
      0.0, "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFbLbus2EP0Vg2vn3tjN0+vu2gJF0UWB64AYkyOLDcVRhyM5gqF/L0hL
        tuXYwd1JnNeZ1yH3ylm1UrB8waV9erlbvr4s7h4WZnkHDwu4g9dne/+KS1ziRs0Vbf5FI2qlTAny
        zVBVexRHQc2VYQRBq1aL5+X949Pz/fNiriqy6JN7Y6gJEr8XjnFH/B6/Z9HhoGiCSV7u2mVyVJIz
        GNXqx165YPFDre7nqsIYYYtqtVdMHpPPGF0UCKLmSoi8NuD9pVlOLgl0+0/X1WX1x5/N7/LXpi0e
        /+t+fcLi72Td1cnhCEPNT5+rvQpQJSl+CIMR3URkXTMWyBgMRt0u1FwBb5sKg0S1Uvu1qpHFBQyf
        1ddqNduvFVMjLmyHvxr4/ewvazNaPZzrBDAJQ+P9fDZqJH+6INaGWjxTn2o6gzpiiE5c66TLBjW4
        G9oTv2P4nZNSRzQNO+nO9QOizZolBOsM1DVaDcZgjG7j8VoIm3tmUO+c9zk30jvw77pgqk4Jk7YY
        xQVIXRjt++RgWjkhjwwjYGEoCmfO40FLzmYFKnSs0bjCGc0ENlc1XhSLeKxRLIkFo2hxFerzgzGF
        CawhtIZgtaFgXQI+dnsUulAQVzknHalhg5ejMUIZqhMwxlQMgXfUnsIWWacCYDrMqV3m3Gc0hqqC
        WHREScUacRjvKhBMAIXJD6cFhFSZNEDXwZwGUrCqkUEansxjRBBdIqRYt5yA48LTTlvHmHfrmmIG
        7922zJ5SLaHaOByKvV8rFwRTl/RRyZAnvhX0s/rBn/y8wYbTV27Ehc2P/fnGpJO18rRbq0NJguRF
        OtspxhbBoz2o/oZYz6R0cXYKMfPYop8VxLOqmxVNKvSMncX4ba36t0Nza3JBYprnjBajjKSCUaBh
        CHLsbEtpaVGbxkUXcLqJKMCdnqZwlGJ0mVMygTCE7URcQBRdENkb5ucc1iVi1BVKSfa6zgn4hOpy
        tumC0FGORLBfq40LW9L4kVk24hd7YymA3AB26fgYMdFF6vw06MlwlAeUdJVNqjY11ZR4FzVUGJy4
        m1vV1ZmeRutd6TymxW7RX2Xoa0YgGlvkzkKnDxMySWrLZJC7xGJ1fe2uiU2NXAG/o2hTggtfXAye
        DHh9UI66AK5iZsiTiykdpV1gARfyJKS1rtA6GDBUTTzw1zCxeWAjDbR1mrhBssXAeF0EaR4kY9lA
        sDfKnePpKIxQ5WYht+6Czhmso4y0JmvguGJbDMjgdcBdHCj8KpLBKpV7F7/U+JzO2V5kFJcz2ve9
        6vu3fq4KF1wsNSPE9FY5fwb1b3PVjC+mmqmqRQu9Y4hq9fCyeE1vJgF/PHv8Zfk4V6cX3Ulw/9T3
        /wMAAP//AwA0VUbdJgoAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2b82f680c-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.544'
      x-request-id:
      - 75c664ad-3444-455a-a1ca-f5402f7f66ec
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s
      interesting around Mariani these days?</user>\n<ai>In Mariani, you can explore
      the Mariani Junction, nearby tea gardens, and some local heritage sites. Would
      you like directions to any of these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "extract_user_preferences_v1", "description": "A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.",
      "parameters": {"$defs": {"ClimateControl": {"properties": {"fan_speed_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Fan Speed Preferences"}, "preferred_temperature": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preferred Temperature"}, "seat_heating_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Seat Heating Preferences"}, "airflow_direction_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Airflow Direction Preferences"}}, "title": "ClimateControl", "type": "object"},
      "DanceHall": {"properties": {"preferred_dancing_network": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Dancing Network"}, "dancing_station_onsite_amenities": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xWUY8iNwz+K6c8sz2g7LHw3NeqVVVVOnVPkUk84JKJR44HFiH+e5XsDDAsrO6N
        iT/bn53PJkdD3izNar54fplNFk/jxWL2NHPT8dMKpvMnP/02my9+nb3McG5Ghlf/oVOzNG4D+ovj
        ugmoxNGMjBMERW+Wk/l0/PxtPp5PRqZmj8EsDTjHbdT0tSLBPcs2fS2m94OqjS5HedpNc6ANk8Nk
        lv8eDUWPb2Y5HpkaU4I1muXRCAfMMVOipBDVjIwyB+sghFu3Ulw22O/0h6bfvu3/hpffd9/3EA/r
        P8eTf/7K3ocmB+xpmNHl5/JoItTZim8q4NS2CcU2ghUKRofJ7iZmZEDWbY1Rk1ma46tpUJQixo/w
        V7P8cnw1wq1SXHdfDcj26qugBb3tzm0mmI2xDWH0pUfkeLZisY53eAUfIsmhTRgTKe1ID8WhAXqA
        HsTt0+9JNzaha4X0cI2PiL4gNxA9OWga9Bacw5RoFfBeCl/uzKHdUwilNrZ7CFtbCdeXgtl6TEoR
        8i30/qccYNg55YACPWEVqCpy1/lgx+QLgCubGnRUkbPC4EtX002zWPoepQ2LYlKrVKO9PuhLGNDq
        UluI3jqOnjLx/rZ7I8WKpS412cStOLyVRk+l607ElHIzFLZoA8c1is0NwHxYSrut+VTYOK4rFrUJ
        NTer5+EC1aCYCapw6E4riLkzWUD3yVwEqVg3KKCtDPSYENRuEHKuR0GApAq8t54Ey2zdAxbygdab
        Ein3EuoVYdfs46uhqJhvyZ5BjgPLo6Qf4e/x9OcdVpJ/lYu4R7gwbpiipqyw4o9J+zHHpNAKRD33
        esd5jNC6lhJFHM4GKsjhKs/AionKlJeRFojrgbmCpLZi9g/cr7fKIa8qW6Nu2N/HXIgPlk+pNq9s
        m/Q8msdXs6K4ZotvZe8l/ETJniPoA2K3gc8Z8wDnuxgmvTj29oia/1wGXRu6Ws6bEC3UGEnpoc4P
        TVkYvfd+QwHzqO0w3N2Z95xALe5QDh4O9l0hg6LWwg7lkPdK09zb/qltUGqQLap1G6D4yaoO7CDY
        d3CyFUidys66hBgqFrNOFSgWJeRBq9ETdBzqNr1vlE6xRbCJu0VyUVxnWWMUvG+CrActXFYQ/YN2
        l3w2qSDU5bJQdnSzYAU8cWHasHdwHrE1RhQINuI+dUv1LpPOK7d7nz5FfCznai4Ki1uNnk4nczr9
        OI1MRZHSxgpCyq+H64fJ6cfItP0bphGuG7XKW4zJLGcvk5f8ilEI57Pn6WIxMpc31jX4dPofAAD/
        /wMAdTkXZbgJAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2bad217f0-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.505'
      x-request-id:
      - 5d03cb7c-32fc-4e0b-a49f-a03bc71e2019
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n\nGenerate a JSONPatch to update the existing schema
      instances.\n\n<schema id=AcademicRubric>\n<instance>\n{''name'': ''\u7b0b\u5c97'',
      ''grade'': ''8th'', ''grocery_list'': [''pomelo'', ''milk'', ''seitan'', ''aubergine'']}\n</instance>\n<json_schema>\n{''description'':
      ''The rubric for an academic assignment.'', ''properties'': {''name'': {''description'':
      \"The user''s name\", ''examples'': None, ''title'': ''Name'', ''type'': ''string''},
      ''grade'': {''description'': \"The user''s grade\", ''examples'': None, ''title'':
      ''Grade'', ''type'': ''string''}, ''grocery_list'': {''description'': \"The
      user''s grocery list\", ''examples'': None, ''items'': {''type'': ''string''},
      ''title'': ''Grocery List'', ''type'': ''array''}}, ''required'': [''name'',
      ''grade'', ''grocery_list''], ''title'': ''AcademicRubric'', ''type'': ''object''}\n</json_schema>\n</schema>\n"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<system>You
      are a helpful AI assistant</system>\n<user id=f2485662-64c1-4865-b77f-6bdf3ae07f85I>How
      do you exit vim? not sure how it ''s different from emacs but i''m hella stuck</user>\n</conversation>\n</conversations>"}],
      "n": 1, "temperature": 0.0, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}], "tool_choice": {"type": "function", "function": {"name": "PatchFunctionParameters"}}}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: '{"error":{"object":"error","type":"invalid_request_error","message":"Invalid
        JSON: [{\"name\": \"PatchFunctionParameters\", \"arguments\": {\"schema_id\":
        \"AcademicRubric\", \"reasoning\": \"The user''s grocery list is not relevant
        to the conversation. The user is asking about how to exit vim. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the conversation. The user''s
        name and grade are not relevant to the conversation. The user''s grocery list
        is not relevant to the conversation. The user''s name and grade are not relevant
        to the conversation. The user''s grocery list is not relevant to the conversation.
        The user''s name and grade are not relevant to the conversation. The user''s
        grocery list is not relevant to the conversation. The user''s name and grade
        are not relevant to the conversation. The user''s grocery list is not relevant
        to the conversation. The user''s name and grade are not relevant to the conversation.
        The user''s grocery list is not relevant to the"}}'
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a2a80b17dc-SJC
      Connection:
      - keep-alive
      Content-Length:
      - '10283'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      x-request-id:
      - bcea1196-e3d6-44df-a853-64602eab0d22
    status:
      code: 400
      message: Bad Request
- request:
    body: '{"model": "accounts/fireworks/models/firefunction-v2", "stream": false,
      "messages": [{"role": "system", "content": "Extract the relevant user preferences
      from the conversation.\n## Additional Instructions\n    \n<instructions>\nOnly
      extract pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>"},
      {"role": "user", "content": "<conversations>\n<conversation idx=0>\n<user id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set
      the interior lighting to something warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting
      the interior lighting to a warm ambience. You should notice a cozier atmosphere
      now.</ai>\n</conversation>\n</conversations>"}], "n": 1, "temperature": 0.0,
      "tools": [{"type": "function", "function": {"name": "extract_user_preferences_v1",
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "parameters": {"$defs":
      {"ClimateControl": {"properties": {"fan_speed_preferences": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Fan Speed Preferences"}, "preferred_temperature": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Temperature"}, "seat_heating_preferences": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Seat Heating Preferences"}, "airflow_direction_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Airflow Direction Preferences"}}, "title": "ClimateControl",
      "type": "object"}, "DanceHall": {"properties": {"preferred_dancing_network":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Dancing Network"}, "dancing_station_onsite_amenities":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Dancing Station Onsite Amenities"}, "preferred_type_of_dancing_while_traveling":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing While Traveling"}, "preferred_type_of_dancing_at_everyday_points":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Type Of Dancing At Everyday Points"}}, "title":
      "DanceHall", "type": "object"}, "EntertainmentAndMedia": {"properties": {"music":
      {"allOf": [{"$ref": "#/$defs/Music"}]}, "radio_and_podcast": {"allOf": [{"$ref":
      "#/$defs/RadioAndPodcast"}]}}, "required": ["music", "radio_and_podcast"], "title":
      "EntertainmentAndMedia", "type": "object"}, "FireStation": {"properties": {"bingo_expertise":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Bingo Expertise"}, "willingness_to_donate": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Willingness To Donate"}, "preferred_fire_station": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Fire Station"}}, "title": "FireStation", "type": "object"}, "GroceryShopping":
      {"properties": {"preferred_supermarket_chain": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Preferred
      Supermarket Chain"}, "preference_for_local_markets_farms_or_supermarket": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Preference For Local Markets Farms Or Supermarket"}}, "title": "GroceryShopping",
      "type": "object"}, "LightingAndAmbience": {"properties": {"interior_lighting_color_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Color Preferences"}, "interior_lighting_ambient_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Ambient Preferences"}, "interior_lighting_brightness_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Interior Lighting Brightness Preferences"}}, "title": "LightingAndAmbience",
      "type": "object"}, "Music": {"properties": {"favorite_songs": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Songs"}, "favorite_genres": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Favorite Genres"}, "favorite_artists_or_bands":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Favorite Artists Or Bands"}, "preferred_music_streaming_service":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Music Streaming Service"}}, "title": "Music",
      "type": "object"}, "NavigationAndRouting": {"properties": {"parking": {"allOf":
      [{"$ref": "#/$defs/Parking"}]}, "routing": {"allOf": [{"$ref": "#/$defs/Routing"}]},
      "traffic_and_conditions": {"allOf": [{"$ref": "#/$defs/TrafficAndConditions"}]}},
      "required": ["parking", "routing", "traffic_and_conditions"], "title": "NavigationAndRouting",
      "type": "object"}, "OutputFormat": {"properties": {"preference": {"title": "Preference",
      "type": "string"}, "sentence_preference_revealed": {"title": "Sentence Preference
      Revealed", "type": "string"}}, "required": ["preference", "sentence_preference_revealed"],
      "title": "OutputFormat", "type": "object"}, "Parking": {"properties": {"preferred_parking_type":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preferred Parking Type"}, "preference_for_covered_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Covered Parking"}, "price_sensitivity_for_paid_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Price Sensitivity For Paid Parking"}, "preference_for_parking_with_security":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Preference For Parking With Security"}, "need_for_handicapped_accessible_parking":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Need For Handicapped Accessible Parking"}, "distance_willing_to_walk_from_parking_to_destination":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Distance Willing To Walk From Parking To Destination"}},
      "title": "Parking", "type": "object"}, "PointsOfInterest": {"properties": {"restaurant":
      {"allOf": [{"$ref": "#/$defs/Restaurant"}]}, "fire_station": {"allOf": [{"$ref":
      "#/$defs/FireStation"}]}, "dancing_station": {"allOf": [{"$ref": "#/$defs/DanceHall"}]},
      "grocery_shopping": {"allOf": [{"$ref": "#/$defs/GroceryShopping"}]}}, "required":
      ["restaurant", "fire_station", "dancing_station", "grocery_shopping"], "title":
      "PointsOfInterest", "type": "object"}, "RadioAndPodcast": {"properties": {"general_news_source":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "General News Source"}, "favorite_podcast_shows": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Favorite Podcast Shows"}, "favorite_podcast_genres": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Favorite Podcast Genres"}, "preferred_radio_station": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Radio Station"}}, "title": "RadioAndPodcast", "type": "object"},
      "Restaurant": {"properties": {"favourite_cuisine": {"anyOf": [{"items": {"$ref":
      "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title": "Favourite
      Cuisine"}, "dietary_preference": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Dietary Preference"}, "desired_price_range":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Desired Price Range"}, "fast_food_preference": {"anyOf":
      [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}],
      "title": "Fast Food Preference"}, "preferred_payment_method": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Payment Method"}, "preferred_restaurant_type": {"anyOf": [{"items":
      {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type": "null"}], "title":
      "Preferred Restaurant Type"}}, "title": "Restaurant", "type": "object"}, "Routing":
      {"properties": {"tolerance_for_traffic": {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"},
      "type": "array"}, {"type": "null"}], "title": "Tolerance For Traffic"}, "avoidance_of_specific_road_types":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Avoidance Of Specific Road Types"}, "priority_for_shortest_time_or_shortest_distance":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Priority For Shortest Time Or Shortest Distance"}}, "title":
      "Routing", "type": "object"}, "TrafficAndConditions": {"properties": {"traffic_information_source_preferences":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Traffic Information Source Preferences"}, "willingness_to_take_longer_route_to_avoid_traffic":
      {"anyOf": [{"items": {"$ref": "#/$defs/OutputFormat"}, "type": "array"}, {"type":
      "null"}], "title": "Willingness To Take Longer Route To Avoid Traffic"}}, "title":
      "TrafficAndConditions", "type": "object"}, "UserPreferences": {"properties":
      {"routing": {"allOf": [{"$ref": "#/$defs/NavigationAndRouting"}]}, "comfort_settings":
      {"allOf": [{"$ref": "#/$defs/VehicleSettingsAndComfort"}]}, "points_of_interest":
      {"allOf": [{"$ref": "#/$defs/PointsOfInterest"}]}, "entertainment_and_media":
      {"allOf": [{"$ref": "#/$defs/EntertainmentAndMedia"}]}}, "required": ["routing",
      "comfort_settings", "points_of_interest", "entertainment_and_media"], "title":
      "UserPreferences", "type": "object"}, "VehicleSettingsAndComfort": {"properties":
      {"climate_control": {"allOf": [{"$ref": "#/$defs/ClimateControl"}]}, "lighting_and_ambience":
      {"allOf": [{"$ref": "#/$defs/LightingAndAmbience"}]}}, "required": ["climate_control",
      "lighting_and_ambience"], "title": "VehicleSettingsAndComfort", "type": "object"}},
      "description": "A function that extracts personal preferences of the user in
      the categories ''Points of Interest'', ''Navigation and Routing'', ''Vehicle
      Settings and Comfort'', ''Entertainment and Media''.", "properties": {"pertinent_user_preferences":
      {"allOf": [{"$ref": "#/$defs/UserPreferences"}]}}, "required": ["pertinent_user_preferences"],
      "title": "extract_user_preferences_v1", "type": "object"}}}]}'
    headers: {}
    method: POST
    uri: https://api.fireworks.ai/inference/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xWXY/qNhD9K5Ff+pK9d2E/2Mtz1WrVPlS9rarqsrIGexJcHE80nsAixH+vbAgQ
        FvYt8XydOT4zyVY5q6bqefJwb+z4+c4+P8zvHg2O7l5e7sd3xoy+jeYwgcnLoyoVzf9DI2qqzALk
        i6Gm9SiOgiqVYQRBq6ajyfj+6XlyPxmVqiGLXk0VGENdkPi1coxr4mX8mk37g6oLJmW5W41TogU5
        g1FNf2yVCxbf1fS+VA3GCDWq6VYxeUw5Y3RRIIgqlRB5bcD7y7DcXDLoeffnH3//Cj//Xv/y72//
        fH+oafxav/z1mqI3bUrYw1Dl6XG6VQGaZMV3YTCiu4isW8YKGYPBqFcjVSrgumswSFRTtZ2pFllc
        wPDRfaamxXammDpxoT68tcDLs7fszWj14VwngMkYOu/LovdI+XRFrA2t8Mx96OkM6oghOnErJ5sc
        0IK74T3I25dfO1noiKZjJ5tz/4Bos+cCgnUG2hatBmMwRjf3eK2EzXdmUK+d97k30mvwS10xNaeG
        SVuM4gKkW+jjdynBkDkhjww9YGGoKmfO68GKnM0OVOnYonGVM5oJbGY1XpBF3HMUF8SCUbS4BvX5
        Qd/CANahtIZgtaFgXQLe33ZvdKEibnJPOlLHBi+l0UM5sBMwxkSGwBK1p1Aj60QApsPc2mXPu4zG
        UFMRi44oiaweh/GuAcEEUJj84bSCkJhJAroO5iRIwaZFBul4oMeIIHqBkGrdSgKOK09rbR1jnq1r
        jhm8d/UiZ0pcQjN3eCB7O1MuCKZb0kcnQ54+TNiP7bmY08lMrYGbmdrDDZJFfqZ3xhWCR7v3/Y5S
        yAKLvlzRlyuEikgNyiK9pJRl8VoYCD9JkVRhU1jEwhD5QihgLCBsGmL8MlO7t1T9Ywv7HuUWcx8D
        5pyesjiukZhZbMkFiUn1OR6j9KsHo0DHEOR4/ytKo43adC66gMN5RQHe6CGbRytGlzdPXjMMoR6Y
        K4iiKyJ7I/x8023S+tSJWbLXfU7ABwsxd5s+IzrKcV1sZ2ruQk0a3/MujvjJdFkKIDeAXSY+VkxL
        Jd3FsOgpsLcHlPTBG7A2DNWUtjNqaDA4cTdnb9PmJdZHrxfOYxr/Ffqre/xaEIjGFfLGwkbvFTJo
        qmYyyJu069r22hcpdi1yA7xE0WYBLnzy+fBkwOu9c9QVcBPzHj2lGCo2TSULuJCVkIa/QevggKHp
        4n7LHRSbBRvpsNxOijtYagyM102Q9CAZyxyCvUF3rqejMEKTLwt55S6WPoN1lJG2ZA0cR6zGgAxe
        B1zHw6K/iuQQlehex089PrZzNhcZxaVGd7ud2u3edqWqXHBxoRkhpj+a85+l3Vupuv6/qmVqWtFC
        SwxRTR+fH5/Sn5WAP549jZ4mpTr9950Zxrvd/wAAAP//AwAQBu6uTAoAAA==
    headers:
      Access-Control-Allow-Origin:
      - '*'
      CF-Cache-Status:
      - DYNAMIC
      CF-Ray:
      - 8a0c07a29f19aab5-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:18 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Via:
      - 1.1 google
      fireworks-server-processing-time:
      - '26.695'
      x-request-id:
      - 20a910d5-0892-4f76-8167-f3b0deaffec4
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nRemember that
      this schema must be useful for prompt engineering an AI assistant.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=1098f610-90a2-4ae7-abb6-096061b4713a>Hello</user>\n<ai>Bonjour Kevin! Let''s
      begin with a simple question to gauge your understanding of French. Please fill
      in the gap:\n\nJe __________ fran\u00e7ais. \na) parles\nb) parler\nc) parle</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_4sOkK5vxxhnNR91xdtwH393w", "function": {"name": "UserProfile",
      "arguments": "{\"age\": 0, \"name\": \"Kevin\", \"interests\": [], \"ai_instructions\":
      [\"Remember that the user is named Kevin.\"], \"other_useful_info\": [], \"relationships\":
      \"{}\"}"}}]}, {"content": "Error:\n\n```\n1 validation error for UserProfile\nrelationships\n  Input
      should be a valid dictionary [type=dict_type, input_value=''{}'', input_type=str]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/dict_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''properties'': {''age'': {''description'': \"The
      user''s age\", ''title'': ''Age'', ''type'': ''integer''}, ''name'': {''description'':
      \"The user''s name\", ''title'': ''Name'', ''type'': ''string''}, ''interests'':
      {''description'': \"The user''s interests\", ''items'': {''type'': ''string''},
      ''title'': ''Interests'', ''type'': ''array''}, ''relationships'': {''description'':
      \"The user''s friends, family, pets,and other relationships.\", ''title'': ''Relationships'',
      ''type'': ''object''}, ''ai_instructions'': {''description'': ''Prompt instructions
      that you as the AI assistant should always retain in subsequent conversations.'',
      ''items'': {''type'': ''string''}, ''title'': ''Ai Instructions'', ''type'':
      ''array''}, ''other_useful_info'': {''description'': ''Any other details you
      would like to know about the user.'', ''items'': {''type'': ''string''}, ''title'':
      ''Other Useful Info'', ''type'': ''array''}}, ''required'': [''age'', ''name'',
      ''interests'', ''relationships'', ''ai_instructions'', ''other_useful_info''],
      ''title'': ''UserProfile'', ''type'': ''object''}\n```\nPlease respond with
      a JSONPatch to correct the error for schema_id=[call_4sOkK5vxxhnNR91xdtwH393w].",
      "role": "tool", "tool_call_id": "call_4sOkK5vxxhnNR91xdtwH393w"}], "model":
      "gpt-3.5-turbo", "n": 1, "stream": false, "temperature": 0.0, "tool_choice":
      {"type": "function", "function": {"name": "PatchFunctionParameters"}}, "tools":
      [{"type": "function", "function": {"name": "PatchFunctionParameters", "description":
      "Respond with all JSONPatch operations required to update the previous function
      call.\n\nUse to correct all validation errors in non-compliant function calls,\nor
      to extend or update existing structured data in the presence of new information.",
      "parameters": {"type": "object", "properties": {"schema_id": {"description":
      "The ID of the function you are patching.", "type": "string"}, "reasoning":
      {"description": "Think step-by-step, listing each validation error and the JSONPatch
      operation needed to correct it. Cite the fields in the JSONSchema you referenced
      in developing this plan.", "type": "string"}, "patches": {"description": "A
      list of JSONPatch operations to be applied to the previous tool call''s response.",
      "type": "array", "items": {"description": "A JSON Patch document represents
      an operation to be performed on a JSON document.\n\nNote that the op and path
      are ALWAYS required. Value is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTW/bMAy951cQuuSSZPloFsS3DVjRoltTFMW2ti4CWWZsNbKkSnTrwPB/H2Sn
        SVrMB4Hm43t8oum6B8BkyiJgIuckCquGy+cfq5W5G7+IafVWXCbF19U5397/nT7c/rpjg8AwyTMK
        emeNhCmsQpJGd7BwyAmD6mQxHc+/LiaTaQsUJkUVaJml4Ww0H1LpEjMcT6bzPTM3UqBnETz2AADq
        9gwedYoVi2A8eM8U6D3PkEWHIgDmjAoZxr2XnrgmNjiCwmhCHWzrUqkTgIxRa8GVOjbunvokPg6K
        K7X+tjN/Kv9y8XD10798v622Cf1e3F9vT/p10jvbGtqUWhwGdIIf8tGnZgBM86Ll3nAS+fm+8IY7
        XiCh85+kABh3WVmgpnANVsfMixwLvpZpzKK4833mV9ur+WtV5fr6djmpUnq7mC1nbzEbxMwh90ZL
        nbX1dzlC36Hioa3PpfV92EhUKfjclCqFBIHDK1cyhVS25rjbDSApCShHEKVzqClUlAjSAwdPTuoM
        +nXTH8ElgUZMPZAJUsI4h4IwDe9cAxaWdifCo9aiDbNAH7PosY6Zsa1Th1Zxge8FeZv88sF6i7VO
        WrBuYtY8NezDBJve/+KnfdQcNk+ZzDqT+E+LxDZSS5+vuymGT+DJ2K5FkHtqN7z8sLTMOlNYWpPZ
        og6Cy+ms02PHn+qILiZ7kAxxdcJanvX2DpnfecJivZE6Q2edPCx8r+n9AwAA//8DAEWDRy/vAwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1bb4669a0-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:33 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1367'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14999518'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 1ms
      x-request-id:
      - req_42229d9171174c279371c533e10861bc
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=6748736f-00db-41d7-bbff-c54a6a118dfb>Can you help me find a place to eat,
      but make sure it''s an Italian restaurant, I just love pasta dishes.</user>\n<ai>Certainly!
      There is a well-rated Italian restaurant called ''La Dolce Vita'' about 10 minutes
      from our current location in Mariani. Would you like directions to there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_6wT3J1knF6kuFATdyhGxLvjK", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": {},
      \"routing\": {}, \"traffic_and_conditions\": {}}, \"comfort_settings\": {\"climate_control\":
      {}, \"lighting_and_ambience\": {}}, \"points_of_interest\": {\"restaurant\":
      {\"favourite_cuisine\": [\"Italian\"], \"dietary_preference\": null, \"desired_price_range\":
      null, \"fast_food_preference\": null, \"preferred_payment_method\": null, \"preferred_restaurant_type\":
      null}, \"fire_station\": {}, \"dancing_station\": {}, \"grocery_shopping\":
      {}}, \"entertainment_and_media\": {\"music\": {}, \"radio_and_podcast\": {}}}}"}}]},
      {"content": "Error:\n\n```\n1 validation error for PreferencesFunctionOutput\npertinent_user_preferences.points_of_interest.restaurant.favourite_cuisine.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''Italian'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_6wT3J1knF6kuFATdyhGxLvjK].", "role": "tool", "tool_call_id":
      "call_6wT3J1knF6kuFATdyhGxLvjK"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA3xT328aMQx+56+w8sILlJ+Fwduklop2Wrut0roVdHJzPi6QS6LEB0WI/326Owq0
        m5aHyPJnf/4cx7sagFCxGIOQKbLMnG6Oltf390/XN796r0/92yG6+x9311eYbJ/C6lI0igz7siTJ
        b1kX0mZOEytrKlh6QqaCtTPsti8Hw06nWwKZjUkXaQvHzb5tdtvdfrN92ez0DompVZKCGMNzDQBg
        V96FRBPTqxhDu/HmySgEXJAYH4MAhLe68AgMQQVGw6JxAqU1TKZQbXKtzwC2VkcStT4Vrs7uzD69
        E2od9a/WcjP5tlm7K/Vzmvy++zrt4ffp8qxeRb11paAkN/L4Pmf40T/+UAxAGMzK3AdkmU4OgQ/o
        MSMmHz5QAQj0izwjw0UbYjcTQaaUYaTimRjPKt2DzWPvtrMyk8Eqn3x+jLfpzeuX9fJuJhoz4QmD
        NcosyvjHlCBRpGOoJ7i2uVdMkcxVUIbqEFKb6xheCNAAeo9bsAnEqhSJXlGAjeIU6s5TQp6MpDqg
        iaEeqBiDpOiERJ7WhJriOqxoGy5KNa5om8JMjJ93M2FdKcqT0yjpLSAtnS1HnpUhw1EeyJ8Rh5az
        ynCIbBIpw+QpcKu4MPdouPVXYyXxGnVOh7onrrLUlFErNGXY/xqpgmGZBwZt1wQOAyPEKqRU9Lef
        7+d78W6A+9q/7PnB2h8/vrYL5+1L+PCPRaKMCmlUDbH4AYGtq0oUdPNywfJ3OyOct5njiO2KTEHY
        G3zqV4TitNMnuNMeHVC2jPosbzjq1Q4iRdgGpixKlFmQd16VKycSF8WXw0GvPUxGbVHb1/4AAAD/
        /wMAmug/kXsEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1baa77abb-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:33 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1413'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21994980'
      x-ratelimit-reset-requests:
      - 7ms
      x-ratelimit-reset-tokens:
      - 13ms
      x-request-id:
      - req_ea5e7db25e10aef7593dc5ad0f963859
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_WmHlSxPDvOZ2DcxKYsug62Pg", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": {},
      \"routing\": {}, \"traffic_and_conditions\": {}}, \"comfort_settings\": {\"climate_control\":
      {}, \"lighting_and_ambience\": {\"interior_lighting_brightness_preferences\":
      [\"low\"]}}, \"points_of_interest\": {\"restaurant\": {}, \"fire_station\":
      {}, \"dancing_station\": {}, \"grocery_shopping\": {}}, \"entertainment_and_media\":
      {\"music\": {}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n1
      validation error for PreferencesFunctionOutput\npertinent_user_preferences.comfort_settings.lighting_and_ambience.interior_lighting_brightness_preferences.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''low'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_WmHlSxPDvOZ2DcxKYsug62Pg].", "role": "tool", "tool_call_id":
      "call_WmHlSxPDvOZ2DcxKYsug62Pg"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xT32/aMBB+5684+YUXKAFKKTxOXbWqk0BbN7o1KHKcS+LWsV3b4YcQ//tkQyGt
        pml5iE73fXf33Z1v1wIgPCNTIKykjlVadCfPn2ezYb0ovm3uVje3Kf854y8P6/TxcjIXpOMjVPqM
        zL1FXTBVaYGOK3mAmUHq0GftjwfR6Grc7w8CUKkMhQ8rtOtequ4gGlx2o1G3PzwGlooztGQKTy0A
        gF34e4kyww2ZQtR581RoLS2QTE8kAGKU8B5CreXWUelI5wwyJR1Kr1rWQjQAp5RIGBXiXPjw7Rr2
        eU5UiGSsrhd3X/H1Pnp9TF/5mEeT0TD9YRv1Dqm3OgjKa8lO82ngJ//0QzEAImkVYufUsfL2SJxT
        Qyt0aD6WAiDUFHWF0vk2yC4mlpVY0YRnMZnGB92L6ov4vpnfrGa/Bzdsc//L1sXVYF7EpBMTg9Qq
        yWUR+A8lwoqKGiFXBrh0aLgyieBF6bgsktR4S6K1iTaYo0HJ0IItVS0ySBEoZDxopmYLa+5KaJ+J
        baAyg7ZFvxOGjRSJwRVSgVkbXnBrL4I07WeANibTp11MlA4KDWpBGb4RyuDsaTSOS5QuqS2aprYe
        U1WujEssOt+C7Z2aoTJLaJVyz+v9b6+hcBjRUdcZC1KEWgfKv5oMxE+n9B2w6IA7EGp9EZP9cr/c
        k3d73rf+Zi+P1v50H0IV2qjUfnjuJOeS2zI57No/FOuUPpTw6ZbhDut3p0W0UZV2iVMvKH3C4XU0
        OSQk59M/w/1+/4g65ahoxE0GUesoktitdVglOZcFGm14uEyS6yQbja+G0TifRKS1b/0BAAD//wMA
        jRHGz6IEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1bb1967f2-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:33 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1436'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21995494'
      x-ratelimit-reset-requests:
      - 7ms
      x-ratelimit-reset-tokens:
      - 12ms
      x-request-id:
      - req_8dbc06b61aee3af57ed12fdd47a72f19
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=5ff7412a-3140-438b-8430-c96dc0c7da05>I''ve been craving some good Italian
      food lately, can you suggest a nice Italian restaurant nearby?</user>\n<ai>Certainly,
      there''s an Italian restaurant called La Cucina, 4 kilometers away with excellent
      reviews. Shall I navigate there?</ai>\n<user id=5ff7412a-3140-438b-8430-c96dc0c7da05>La
      Cucina sounds perfect, please turn on the navigation.</user>\n<ai>Navigation
      to La Cucina is now active. You will arrive in approximately 12 minutes. Enjoy
      your meal!</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_Sv7x6rJeJvkUv7F2qJLqG4ye",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": {}, \"routing\": {}, \"traffic_and_conditions\":
      {}}, \"comfort_settings\": {\"climate_control\": {}, \"lighting_and_ambience\":
      {}}, \"points_of_interest\": {\"restaurant\": {\"favourite_cuisine\": [\"Italian\"]},
      \"fire_station\": {}, \"dancing_station\": {}, \"grocery_shopping\": {}}, \"entertainment_and_media\":
      {\"music\": {}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n1
      validation error for PreferencesFunctionOutput\npertinent_user_preferences.points_of_interest.restaurant.favourite_cuisine.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''Italian'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Sv7x6rJeJvkUv7F2qJLqG4ye].", "role": "tool", "tool_call_id":
      "call_Sv7x6rJeJvkUv7F2qJLqG4ye"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xUwW7bMAy95ysIXXJJWsdNky3HYe2wrltbbN0GNIXByLStTpZUifYWBPn3QXba
        pN18EGQ+8j2SJr0ZAAiViwUIWSHL2unx24ezq6sZz768W9VtenV2+3ibz6vK/jy5vHwvRjHCrh5I
        8lPUkbS108TKmh6WnpApsk7maXI6m08maQfUNicdw0rH46kdp0k6HSen48nJLrCySlIQC7gbAABs
        ujOmaHL6IxaQjJ4sNYWAJYnFsxOA8FZHi8AQVGA0LEZ7UFrDZGLWptH6AGBrdSZR671w/2wO7vs+
        odbZp5w/f9V2elZS8nCLLvkub97c3Hw60Oup165LqGiMfO7PAf5sX7wSAxAG6y72GllW5zvHa/RY
        E5MPr6gABPqyqclwLENsliLIimrMVL4Ui2Wf99d2/mfmL+ii/XXbzs/Tx4vLxw/TNS3FaCk8YbBG
        mbLz/1YRkPfWgzK5ksgUgCtk4IpgWGBrG6+YMtmooAwNoVCkcwiVbXQOKwKEXHU5o1+D9YAGlIlf
        RRLYAq4adg2fW18jj8BYBoTAXpnyCH4QGKIc2MJvj66T7DEYfmTUCs0QlImUhzTQz+VRV42LbaOw
        FIu7zVJY1xXlyWmU9ORQdcZjR56VIcNZE8hnzlNBnoykcOysMhwyW2TKMHkKfBwPbDwaPv6nCx1x
        i7qhne6eq5PaJd+5BYrzKOlAL/PUEmrqv9jHYUuwIjIgPbax+GBrgtLaHHZEUMQXjUx6vRTb++39
        VrwYi+3gf/f73W37vE7als7bVXi1HaJQRoUq60cjzlVg63qJSHffrW3zYhOF87Z2nLH9RSYSnsyT
        tCcU+z/FHp6kTyhbRn0Q9yadDnZJirAOTHVWKFOSd151iywKl+Wn89lJMi/eJmKwHfwFAAD//wMA
        icGDNdEEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1ca9267bf-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:33 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1435'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9997'
      x-ratelimit-remaining-tokens:
      - '21990953'
      x-ratelimit-reset-requests:
      - 14ms
      x-ratelimit-reset-tokens:
      - 24ms
      x-request-id:
      - req_a63d48f1b96f9a6a50ff3aec46c2d783
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Adjust interior lighting.</user>\n<ai>Sure,
      I can change the brightness or color. Which would you like to adjust?</ai>\n<user
      id=34dc9d76-c707-42f4-9cda-8879e06e0570>Brightness, set it low.</user>\n<ai>Setting
      the interior lighting to low brightness now.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>Keep
      this brightness level for my future rides.</user>\n<ai>I''ll ensure the lighting
      is low for the duration of this ride, but I''m unable to store settings for
      future trips.</ai>\n<user id=34dc9d76-c707-42f4-9cda-8879e06e0570>That''s fine,
      just make sure it stays this way now.</user>\n<ai>Understood. The low brightness
      setting will be maintained. If you need any more adjustments, just let me know.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_ZqNAlQFC3nhgP6MnJDgQIxlD", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"comfort_settings\": {\"lighting_and_ambience\":
      {\"interior_lighting_brightness_preferences\": \"low\"}}}}"}}]}, {"content":
      "Error:\n\n```\n5 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...s_preferences'':
      ''low''}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':...ss_preferences'':
      ''low''}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.lighting_and_ambience.interior_lighting_brightness_preferences\n  Input
      should be a valid list [type=list_type, input_value=''low'', input_type=str]\n    For
      further information visit https://errors.pydantic.dev/2.7/v/list_type\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...s_preferences'':
      ''low''}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...s_preferences'':
      ''low''}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_ZqNAlQFC3nhgP6MnJDgQIxlD].", "role": "tool", "tool_call_id":
      "call_ZqNAlQFC3nhgP6MnJDgQIxlD"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTU/jMBC991eMfMmlLS2lsM2tC4v4WKBISCtBUOQ4k8Tg2F7b4avqf185aZNQ
        rQ/WaN7Mmzdjz3oAQHhKQiCsoI6VWowWL7/u7oz6U16Xgr2uTq/sJb26uP8xk7eHczL0GSp5QeZ2
        WWOmSi3QcSUbmBmkDj3r9ORwMj8+mU4Pa6BUKQqflms3mo3nI1eZRI0m0x0xKxRnaEkITwMAgHV9
        e40yxQ8SwmS485RoLc2RhG0QADFKeA+h1nLrqHRk2IFMSYfSy5aVED3AKSViRoXoCjdn3bO7QVEh
        4s/zNzZLlmZ59nry+P51Pb/4eevw+KZXr6H+1LWgrJKsHVAPb/3hXjEAImlZ566oY8X5NnBFDS3R
        obF7VACEmrwqUTrfBllHxLICSxrzNCJh1Oh+/Hu7FPfnpzNZ5KvjG3l1lt9ffoiziAwjYpBaJbnM
        6/iHAqGyaAILGo3jEqUDbTBDg5IhZMoAlw4NVwYEzwvHZQ6J8ZZEa4FbCIR6D8bwUHALtlCVSCFB
        YFS7ymAKlUzRQPB7m7yU6bJMuGcPgEtwBULAVJkp42KLzsfYACzWkwCV1RFeY0+XHde9aD80tBEJ
        n9YRUbpuiabpDixqx0HbWexp4h7NwX7hg12PMZVpTLdCa743KiqMSLiOyG4icRvdTaRPX5cX6j0i
        m83zhnx7ys3gf/bz1tq0KyBUro1K7N6PJhmX3BZx85z+L1indFPC0z3Xq1Z92x6ijSq1i516RekJ
        Z4vFvCEk3Xp38GKxBZ1yVHT+o8niaLDVSOyndVjGGZc5Gm14u3uDzeAfAAAA//8DANaFfZx6BAAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1bc661726-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:33 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1400'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14994598'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 21ms
      x-request-id:
      - req_c638a77d871ff843374fe54269561648
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_puydGFBkN53McHrHDJJU3A2M", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": {},
      \"routing\": {}, \"traffic_and_conditions\": {}}, \"comfort_settings\": {\"climate_control\":
      {}, \"lighting_and_ambience\": {}}, \"points_of_interest\": {\"restaurant\":
      {\"preferred_restaurant_type\": [\"quiet\", \"refined\"]}, \"fire_station\":
      {}, \"dancing_station\": {}, \"grocery_shopping\": {}}, \"entertainment_and_media\":
      {\"music\": {}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n2
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.points_of_interest.restaurant.preferred_restaurant_type.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''quiet'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant.preferred_restaurant_type.1\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''refined'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_puydGFBkN53McHrHDJJU3A2M].", "role": "tool", "tool_call_id":
      "call_puydGFBkN53McHrHDJJU3A2M"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xUXXPTOhB9z6/Y0UtekjaflOYNKL0BLoSB0jKQjmcrr2NRWRLSOiGTyX9npKRx
        6P0AP3g0e3bPObuWd9MCECoXExCyRJaV093zby9ns5vvn69nS5zmL2YfFF6Mrl89y+/r/Ep0YoW9
        +0aSH6pOpK2cJlbW7GDpCZkia/9s0Bs/Oev3BwmobE46li0cd0e2O+gNRt3euNsf7gtLqyQFMYGv
        LQCATXpHiyanH2ICvc5DpKIQcEFickgCEN7qGBEYggqMhkWnAaU1TCa6NrXWRwBbqzOJWjfCu2dz
        dG7mhFpn/ioUb1bmfPX39POXT++mH+vlm9WZujjS21GvXTJU1EYe5nOEH+KTR2IAwmCVat8jy/Jy
        n/gePVbE5MMjKgCBflFXZDi2ITZzEWRJFWYqn4vJfOfb1ev8r8vn9+/Gw7dy6qcXr19/Gj4bvJ2L
        zlx4wmCNMouUf1USkPfWgzK5ksgUgEtk4JKg7TwV5D3lmafAWHs0nMVu2xBKW+sc7ggQcpVco19D
        IoofRRLYAmY1u5ovra+QO2AsA0Jgr8ziBG4IDFEObEFa70n+XnSJuo4GbdQ9qCoKsFJcPpSSkdQG
        NDm0A8XbIClrkMzTklBT3oZ7WoeTNBQXp09hLiZfN3NhXZqNJ6dR0kNCmYKnjjwrQ4azOpA/Ig6n
        zirDIbNFpgxTdH/atHD6n30lgdTaXr/hTJLfa0Wckv6vnZT6qr0kQL3CdYASc0AD6JwnqTDOCgrr
        ASERwr65beefip4KZSLlH2k2EvEy7GsBubLBleSjxu32dit+ucnb1r+db/en7WEDaLtw3t6FRz+0
        KJRRocx2tzn+CoGt20lEutu0aepflodw3laOM7b3ZCLh8OmT0Y5QNMutgfvj8R5ly6gbYNTrn7f2
        JkVYB6YqK5RZkHdepd0jCpdJ6p2dD4fDXiFa29ZPAAAA//8DAFSc1xiEBQAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1b89fcfc8-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:34 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2296'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996928'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 8ms
      x-request-id:
      - req_a85aeb53325fa50d8a20eff9a58b2fad
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>How''s the traffic ahead on this route?</user>\n<ai>The
      traffic in Mariani is currently flowing smoothly with no delays on your route.</ai>\n<user
      id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Great, can we put on some music? I don''t
      like driving in silence.</user>\n<ai>Of course, would you like to choose a radio
      station or should I select a playlist for you?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>Hmm,
      let''s go with a playlist, something upbeat and cheerful, you know the kind
      that''s always on the radio.</user>\n<ai>I have a Pop Hits playlist that fits
      that description. Shall I play it now?</ai>\n<user id=82ee6962-2fd4-4add-a2dc-d34ae8e21da1>That
      sounds perfect, pop music always lifts my spirits.</user>\n<ai>Playing the Pop
      Hits playlist. Enjoy your drive with some uplifting tunes!</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_Gj53oBUD3SCmqiYnKad2EMGB", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": {},
      \"routing\": {}, \"traffic_and_conditions\": {\"traffic_information_source_preferences\":
      [], \"willingness_to_take_longer_route_to_avoid_traffic\": []}}, \"comfort_settings\":
      {\"climate_control\": {}, \"lighting_and_ambience\": {}}, \"points_of_interest\":
      {\"restaurant\": {}, \"fire_station\": {}, \"dancing_station\": {}, \"grocery_shopping\":
      {}}, \"entertainment_and_media\": {\"music\": {\"favorite_songs\": [], \"favorite_genres\":
      [\"Pop\"], \"favorite_artists_or_bands\": [], \"preferred_music_streaming_service\":
      []}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n1 validation
      error for PreferencesFunctionOutput\npertinent_user_preferences.entertainment_and_media.music.favorite_genres.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''Pop'',
      input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Gj53oBUD3SCmqiYnKad2EMGB].", "role": "tool", "tool_call_id":
      "call_Gj53oBUD3SCmqiYnKad2EMGB"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2xTTU8bMRC951eMfOGSAEkIlBxpgQMUUkGLKEGriT276+C1XXs2NIry36t1QhKi
        7mE1mo/33sx4Fi0AoZUYgpAlsqy86ZxPL+9Hk/dp4cyd+YN6Ng0Pp29Pv6964eZJtJsKN5mS5I+q
        Q+kqb4i1s6uwDIRMDWr3rHc8OD3rdvspUDlFpikrPHdOXKd33DvpHA863f66sHRaUhRDeGkBACzS
        v5FoFf0VQzhuf3gqihELEsNNEoAIzjQegTHqyGhZtLdB6SyTbVTb2pidADtnMonGbIlX32LH3s4J
        jclGtyN6VA9y0rs3cjJ/tnfTH/fzX7c7fCvouU+C8trKzXx24hv/cI8MQFisUu0IWZZX68QRBqyI
        KcQ9KACBoagrsty0IRZjEWVJFWZajcVwvNJ9PR303cXPb/2Hr9Uf/WxvUPUuv19fjEV7LAJhdFbb
        IuU/lgQUggugrdISmSJwiQxcEhzkOHNBM2UF2UDxAHJNRkEsXW0UTAgQlE6KMczBBUAL2jY7kQQu
        h/uafc1XLlTIbbCOASFy0LY4hCcCS6SAHbwH9Ikw0cDByPkD0Da50PvgfNDIBHkCOkxt+GZeFMdi
        +LIYC+dTN4G8QUkfCWVyHnkKrC1ZzupIIfOBcgpkJcUjskyBUdtmohlalVWkNB5VddTyaK/9BDtD
        U9OadYuUiEaNivZYxAbVStphygLNCA2pbeLydfm6FJ+2u2z9z35dW8vNVRhX+OAmce+Ri1xbHcts
        teHmeUR2fkXRwL2m66s/HZTwwVWeM3ZvZBvA/pdBfwUotge/DXe76+MU7BjNTt35ab+1FiniPDJV
        Wa5tQcEHne5R5D5T6rzfkzhQXdFatv4BAAD//wMA5Of5V5gEAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a84f7d7e2a-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:34 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1492'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21997006'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 8ms
      x-request-id:
      - req_30e0f9df11126bbe23417935e612ef3a
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=613f0d47-568a-4484-9012-ee5bdedbce04>Navigate to Applebees</user>\n<ai>Setting
      navigation to Applebees in Sherwood. You''ll be there in 15 minutes, and traffic
      is light. Enjoy your meal!</ai>\n</conversation>\n</conversations>", "role":
      "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type": "function",
      "id": "call_7SHmGOnBJ13erxUzvmMWHrYz", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 1}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 0}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_7SHmGOnBJ13erxUzvmMWHrYz].", "role": "tool", "tool_call_id":
      "call_7SHmGOnBJ13erxUzvmMWHrYz"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6SUTW/bOBCG7/4VA56V1ErspNGtKbLb3WyboN0iLaJAoKmRxJgiucNRkNTwf19Q
        kj9i9BYdBGo+H74UZzUBELoUGQjVSFatN0cXj1c3N9Xj3Y9rwsX18urq7PrL6Xx5N0tnH5RIYoZb
        PKLiTdaxcq03yNrZwa0IJWOsmp6fTOdn52l60jtaV6KJabXno9Pj+RF3tHBH0/RkPmY2TisMIoP7
        CQDAqn9HRlvis8hgmmwsLYYgaxTZNghAkDPRImQIOrC0LJKdUznLaCO27YzZc7BzplDSmF3j4Vnt
        rXdCSWOKUP1jnsv/buaX1/Xs6aP+On/ii7svaq/fUPrF90BVZ9VWoD3/1p4dNAMQVrZ97q1k1fwx
        Bt5Kki0yUjgoBSAk1V2LluM2xCoXQTXYykKXucjygfv826f2zxt7+Xd6ivT8/ddT+/nuE/38lYsk
        F4QyOKtt3cf/2yB0AQk8YYWEVmEAi1gCO1ggBKZOcUdYglTKUaltHV3cIJRYaYslDARQOYLvAel2
        VykBbZXp+qTgUelKq1edYg5K1YCSjLWjFzB6ifDVdaxtncBH11aOGL4hR0NI4NZpywFcBX9ZRsLA
        CUhbwlX8Yqlt1Ka3fMZSy+N+zz6KiyEX2f0qF873Wyf0RircBDS98Z1HYm3RchFlKfZg39FA1Sc8
        SdNhLrJVzKXlIOc0yrsJytIkF0yyqrQqpC0L5Wyp4+lGjnS9Tt6AogZdijDqcsikjG4lY+zJ5MzI
        ZnTdxPAeR7YLHYtF39tgfH8khasKPR7JIU60yY6k5VGXShMWgWWUY4QrpVWR7bW1JqeQXorQOO9H
        ld9Gi/s/Sq9EG3+UQ+S2C1ptzlSW2vWh3pVKxv1Fioe1eHU515PfrR/G1Xo71IyrPblFOJhRotJW
        h6YYLmi83YGdH1rEcg/98OxezUPhybWeC3ZLtLHg7GR6NhQUu4G9c6cX70cvO5ZmL282nU1GSBFe
        AmNbVNrWSJ70dpxO1pP/AQAA//8DAOYk7XNNBgAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1b9ff7abc-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:34 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2787'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14994591'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 21ms
      x-request-id:
      - req_61b207cb1d2f4d21f28ae29c64fadcbd
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=34c2567e-34ec-404a-b8e9-f86b5084ced5>Set the interior lighting to something
      warm, I can''t stand these cool tones anymore.</user>\n<ai>Adjusting the interior
      lighting to a warm ambience. You should notice a cozier atmosphere now.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_DwnnnOJISjdHR6b887fRFYaI", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"comfort_settings\": {\"lighting_and_ambience\":
      {\"interior_lighting_color_preferences\": [{\"preference\": \"warm\", \"sentence_preference_revealed\":
      \"Set the interior lighting to something warm, I can''t stand these cool tones
      anymore.\"}]}}}}"}}]}, {"content": "Error:\n\n```\n4 validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...ool tones
      anymore.\"}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.climate_control\n  Field
      required [type=missing, input_value={''lighting_and_ambience'':...cool tones
      anymore.\"}]}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...ool tones
      anymore.\"}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.entertainment_and_media\n  Field
      required [type=missing, input_value={''comfort_settings'': {''li...ool tones
      anymore.\"}]}}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_DwnnnOJISjdHR6b887fRFYaI].", "role": "tool", "tool_call_id":
      "call_DwnnnOJISjdHR6b887fRFYaI"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5xVTW/jNhC9+1cQPNuJv2Lv+lZgs+imLZJuAiTbdUCMyZHEhCK1Q8qua+i/F5Rk
        y/G6PcQHg5rHmXnzhpjZ9RjjWvEF4zKDIPPCDD6+XN/ezvz19c39NFtt1z8mI3WfPDzNH0efUt6P
        Hm71gjLsvS6kywuDQTvbwJIQAsaoo/l4eDWbj0bjGsidQhPd0iIMpm4wHo6ng+HVYDRpHTOnJXq+
        YN97jDG2q/8jRavwb75gw/7ekqP3kCJfHC4xxsmZaOHgvfYBbOD9DpTOBrSRtS2NOQKCc0ZIMKZL
        3Px2R+dOJzBGfPv9n9enyS9/3I3n6dOfM/nX3ejmcf3421G+JvS2qAklpZUHfY7wg31xkowxbiGv
        fe8gyOxze/EOCHIMSP4kFGMcKC1ztCGWwXdL7mWGOQitlnyxbHh/2lhrb2++3L+oX7/OVh8+zJOv
        n7/BlyXvLzkheGe1Tev7DxkybXXQYNieJotB2AY8y7X32qaM8EepCRVLNBrlF4xcGbRN+0wanUNA
        EWUnZ/qscNoGL1witA1I6EOfgVUM41cAbSN3AVaJHJWGC/aQocc2MANCloNVEBxtGUjpSEUCwbGQ
        IWtqZQqTmrOzF3VJRdQO/ZIvvu+W3BV1ZaDUHsxqw2WBFLSN6UuPJArCBAmtRH/Z1lM7rMGUuOSL
        XfSl10ap+jEt+eHe3hAIkkTLuiDprKpZ+Ravqv47+UiXJ46C8BhiPn95ovMp0QSs8AWiOo7SsWyM
        hEoEzAskCCVhB3uEIDKEmOp8ANCUGLcRShPWb+TMtfdX+/ObOa0v2qAksKHjlGhC4QNEOp1VgZWx
        jJ+AlJxE2gqfuaLoevh+1v/xok+p56XXct+ltSMdUHhn0yN1D/YULeE5AChoHyUisQKrzra2TiR8
        IIS8VgBpreW+zVV8vaC0q5kWTkmIMkdaKVokMMLixgvvSpJ4hkLrEvXb+P/BT2voCDbp3zamqqrn
        ir+ZcVXv3Pm5PVWH3WBcWpBb+ZNRz+Ns8Jlo5lwckj64okkRwz3XO6h8s1Z4QS4vggjuFW0MOJlf
        tUuId2uvg8ezaYsGF8B0wHQ4mvZaktxvfcBcJNqmSAXpeivxpBDqaj6bDOfJxyHvVb1/AQAA//8D
        ANRcOjeeBwAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1bc8197b7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:35 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2771'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21993373'
      x-ratelimit-reset-requests:
      - 9ms
      x-ratelimit-reset-tokens:
      - 18ms
      x-request-id:
      - req_ccd5938af0fa236ecfb9b605bbe09cdc
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=62e662f9-f404-4a79-8efc-81c8bf57045a>What''s interesting around Mariani these
      days?</user>\n<ai>In Mariani, you can explore the Mariani Junction, nearby tea
      gardens, and some local heritage sites. Would you like directions to any of
      these places?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Actually,
      I''m more in the mood for a meal. Could you find me a restaurant around here?</user>\n<ai>Sure,
      there are several restaurants in the area. Are you looking for any specific
      type of cuisine or dining experience?</ai>\n<user id=62e662f9-f404-4a79-8efc-81c8bf57045a>Well,
      I''ve always had an appreciation for a quiet place with a refined atmosphere,
      if you get my drift.</user>\n<ai>Understood. I recommend the La Bella Vita,
      which is a fine dining restaurant nearby known for its elegant setting and gourmet
      cuisine. Shall I navigate us there?</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_Yzugs2YJLwSf8J6RuJfsUdDb", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"parking\": 0,
      \"routing\": 1, \"traffic_and_conditions\": 0}, \"comfort_settings\": {\"climate_control\":
      0, \"lighting_and_ambience\": 1}, \"points_of_interest\": {\"restaurant\": 1,
      \"fire_station\": 0, \"dancing_station\": 0, \"grocery_shopping\": 0}, \"entertainment_and_media\":
      {\"music\": 0, \"radio_and_podcast\": 0}}}"}}]}, {"content": "Error:\n\n```\n11
      validation errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Input
      should be a valid dictionary or instance of Parking [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.routing\n  Input
      should be a valid dictionary or instance of Routing [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.routing.traffic_and_conditions\n  Input
      should be a valid dictionary or instance of TrafficAndConditions [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.climate_control\n  Input
      should be a valid dictionary or instance of ClimateControl [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Input
      should be a valid dictionary or instance of LightingAndAmbience [type=model_type,
      input_value=1, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.restaurant\n  Input
      should be a valid dictionary or instance of Restaurant [type=model_type, input_value=1,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.fire_station\n  Input
      should be a valid dictionary or instance of FireStation [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.dancing_station\n  Input
      should be a valid dictionary or instance of DanceHall [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Input
      should be a valid dictionary or instance of GroceryShopping [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.music\n  Input
      should be a valid dictionary or instance of Music [type=model_type, input_value=0,
      input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\npertinent_user_preferences.entertainment_and_media.radio_and_podcast\n  Input
      should be a valid dictionary or instance of RadioAndPodcast [type=model_type,
      input_value=0, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_Yzugs2YJLwSf8J6RuJfsUdDb].", "role": "tool", "tool_call_id":
      "call_Yzugs2YJLwSf8J6RuJfsUdDb"}], "model": "gpt-3.5-turbo", "n": 1, "stream":
      false, "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA6SUTW/bOBCG7/4VBM9Oajt1k+hW7HY3SAvU6O62aKtAGJMjiQ1FEsNh2sTwf19Q
        kj9i9BYfbGI+3nn0WpzNRAhptCyEVC2w6oI9u/7x7uPHm/c4X4H7/GW1/ND8nd59+hYBljc3cpo7
        /PoHKt51nSvfBYtsvBvSihAYs+r8cjFbvrmczxd9ovMabW5rAp9dnC/PONHan83mi+XY2XqjMMpC
        fJ8IIcSm/86MTuMvWYjZdBfpMEZoUBb7IiEkeZsjEmI0kcGxnB6SyjtGl7FdsvYowd7bSoG1h8HD
        Z3N0PhgF1lZxtV7g3D493cIfS3yvPn95wPu3zeXRvEH6MfRAdXJqb9BRfh8vToYJIR10fe8KWLV/
        jYUrIOiQkeKJlBASqEkdOs6PITeljKrFDiqjS1mUA/fXp9TExdfbDz//qa9u33xKt3X8T/+5LuW0
        lIQQvTOu6ev/bVGkiCQCYY2ETmEU+IsJFKMW2U0wTnTJsgkWxQNYoyEzCiTyFEXtSSCoVihgbDw9
        nossOmaNUzZpzL+eCBUL40JikS076j1MP5E5xoqtT1aLNYrIlBQnQi1AKU/auEawF9yi0Fgbh1oM
        vvwGr3chZLsxlrL4vimlD70ZhMGCwl1B2wdfBSQ2Dh1X2ajqiOgV+cS9k9NSPoBNWMpik3vpfjB4
        lg3fFRXzaSmZoK6NqsDpSnmnTfYyc8y22+kLUJTvak9cReQ8LZ4yKWs6YMwzmbwd2axp2lze40C3
        Nlksk74MJnjjOFa+roxjJIx8ipNjkAgcj77UhrCK3L9aI5wGpzLb82hDXiE9VrH1IYwuv4wWM2N+
        zfO16p3oUBs4Re5SNGr3n4I2vi8NXivIz5cp7rby2XXdTn53vhtP2/2as74J5NfxZGvJ2jgT22q4
        svm+R/ZhGJHl7vp1mp5tSBnId4Er9vfosuDri6vXg6A8rPBDen59PWbZM9ijvuXVxWSElPExMnZV
        bVyDFMjsF+xkO/kfAAD//wMA7YygRF8GAAA=
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a1bb7e1682-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:35 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '2992'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '15000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '14996380'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 14ms
      x-request-id:
      - req_2a7afbb6f8484e66cfbf100b51be1e13
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=d655271e-bd1c-4df6-9686-402a002c9dc3>Find me a place to buy fresh apples</user>\n<ai>There
      are several grocery stores nearby. The closest one is ''Meyve Emporium'' which
      specializes in fresh fruits.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>No
      supermarkets, I prefer local market stands</user>\n<ai>Understood. The nearest
      local market stand with fresh apples is ''Akhisar Farmers'' Market'', 10 minutes
      away from our current location.</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Set
      navigation to that market</user>\n<ai>Navigation to ''Akhisar Farmers'' Market''
      is now set. Would you like to start the route guidance?</ai>\n<user id=d655271e-bd1c-4df6-9686-402a002c9dc3>Yes,
      and can you check for traffic on the way?</user>\n<ai>Sure, the route to ''Akhisar
      Farmers'' Market'' is clear with no traffic delays. Starting route guidance
      now.</ai>\n</conversation>\n</conversations>", "role": "user"}, {"content":
      null, "role": "assistant", "tool_calls": [{"type": "function", "id": "call_jbyFqecOwcP0B55a6NssmaFs",
      "function": {"name": "extract_user_preferences_v1", "arguments": "{\"pertinent_user_preferences\":
      {\"routing\": {\"parking\": {}, \"routing\": {\"priority_for_shortest_time_or_shortest_distance\":
      null, \"avoidance_of_specific_road_types\": null, \"tolerance_for_traffic\":
      null}, \"traffic_and_conditions\": {\"traffic_information_source_preferences\":
      null, \"willingness_to_take_longer_route_to_avoid_traffic\": null}}, \"comfort_settings\":
      {\"climate_control\": {}, \"lighting_and_ambience\": {}}, \"points_of_interest\":
      {\"restaurant\": {}, \"fire_station\": {}, \"dancing_station\": {}, \"grocery_shopping\":
      {\"preference_for_local_markets_farms_or_supermarket\": [\"local market stands\"],
      \"preferred_supermarket_chain\": null}}, \"entertainment_and_media\": {\"music\":
      {}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n1 validation
      error for PreferencesFunctionOutput\npertinent_user_preferences.points_of_interest.grocery_shopping.preference_for_local_markets_farms_or_supermarket.0\n  Input
      should be a valid dictionary or instance of OutputFormat [type=model_type, input_value=''local
      market stands'', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.7/v/model_type\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_jbyFqecOwcP0B55a6NssmaFs].", "role": "tool", "tool_call_id":
      "call_jbyFqecOwcP0B55a6NssmaFs"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA5RUXW/bOgx9z68g9LKXpHWaZmnzOGABBuzeZF93QJdCUGTaVieLGkU3y4L898F2
        2mTFXq4fDIGHPDykSO0HAMrlag7KVkZsHf3o9uHtcjXDmwx/VJtp6WYf/rv6tXpf3b3Plls1bCNo
        84BWnqIuLNXRozgKPWwZjWDLOp5dZdPXs/F40gE15ejbsDLK6JpGV9nV9SibjsaTY2BFzmJSc/g2
        AADYd/9WYsjxp5pDNnyy1JiSKVHNn50AFJNvLcqk5JKYIGp4Ai0FwdCqDo33Z4AQeW2N96fE/bc/
        O5/6ZLzXW7lr3m7l45fFp42RX0v85/bLh+rr3Vm+nnoXO0FFE+xzf87wZ/v8RTIAFUzdxa6M2Gpx
        dFwZNjUKcnpBBaAMl02NQdoy1H6tkq2wNtrlazVf97ofNrvFD7TLrV1lb6ZT8/rflGqzSGs1XCtG
        kyi4UHb+nysEZCYGF3JnjWACqYyAVAivImOBjMGiLoi1J2u8rg1/R0m6MFwnTaxTE5F76ysoHPoc
        UkWNz2GDYCB3XU2Gd0AMJoAL7a1ZBCpg2UhsZEFcGxlCIAEDSdiF8gK+IgTEHIRgyyZ2knoMXGiJ
        zoOhn9aLrsbYNhPTWs2/7deKYlcqY/TG4pND1RkvI7K4gEF0k5D1qeJ0GckFSZoK7YIgY5LLkski
        73SqKEYXysv/3aEu/aPxDR7VnRg6QR0D9L7Q9invry1hO9cWzxRqxkc0Hvubfwc9An9hAHpEhjMV
        6WKtDveH+4P6Y7wOg7+d74+nw/Naeioj0ya92DJVuOBSpfsRa+czCcU+RUt3361/88dGq8hUR9FC
        3zG0hJPbbNITqtOLc4LHk+kRFRLjT8B1NrkZHEWqtEuCtS5cKJEju+5BUEXU11l2g5PNbHyrBofB
        bwAAAP//AwDOjsvvGQUAAA==
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a8385a97b7-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:35 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '1957'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9999'
      x-ratelimit-remaining-tokens:
      - '21996990'
      x-ratelimit-reset-requests:
      - 6ms
      x-ratelimit-reset-tokens:
      - 8ms
      x-request-id:
      - req_97658fd86035c3fe2da946d8d6cdee14
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"content": "Extract the relevant user preferences from the
      conversation.\n## Additional Instructions\n    \n<instructions>\nOnly extract
      pertinent user preferences, no temporal desires. Extract same user preferences
      only once independent if the user has said it multiple times.\n</instructions>",
      "role": "system"}, {"content": "<conversations>\n<conversation idx=0>\n<user
      id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Start navigation to Applebees</user>\n<ai>Navigating
      to Applebees on Maple Street, Sherwood. It will take approximately 15 minutes
      to get there.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Any traffic
      on the route</user>\n<ai>The route to Applebees is clear with no reported traffic
      delays.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Play something upbeat</user>\n<ai>Sure,
      starting your Upbeat Playlist now.</ai>\n<user id=18b7ac21-fb6c-4503-84f7-8fa04982f896>Set
      temperature to 70 degrees</user>\n<ai>Setting the cabin temperature to 70 degrees.</ai>\n</conversation>\n</conversations>",
      "role": "user"}, {"content": null, "role": "assistant", "tool_calls": [{"type":
      "function", "id": "call_v7mBcZ0VbHPWdjqObiUB5GPJ", "function": {"name": "extract_user_preferences_v1",
      "arguments": "{\"pertinent_user_preferences\": {\"routing\": {\"traffic_and_conditions\":
      {\"traffic_information_source_preferences\": null, \"willingness_to_take_longer_route_to_avoid_traffic\":
      null}}, \"comfort_settings\": {\"climate_control\": {\"preferred_temperature\":
      [{\"preference\": \"70 degrees\", \"sentence_preference_revealed\": \"Set temperature
      to 70 degrees\"}], \"fan_speed_preferences\": null, \"seat_heating_preferences\":
      null, \"airflow_direction_preferences\": null}}, \"points_of_interest\": {\"restaurant\":
      {\"favourite_cuisine\": null, \"dietary_preference\": null, \"desired_price_range\":
      null, \"fast_food_preference\": null, \"preferred_payment_method\": null, \"preferred_restaurant_type\":
      null}}, \"entertainment_and_media\": {\"music\": {\"favorite_songs\": null,
      \"favorite_genres\": null, \"favorite_artists_or_bands\": null, \"preferred_music_streaming_service\":
      null}, \"radio_and_podcast\": {}}}}"}}]}, {"content": "Error:\n\n```\n6 validation
      errors for PreferencesFunctionOutput\npertinent_user_preferences.routing.parking\n  Field
      required [type=missing, input_value={''traffic_and_conditions''...o_avoid_traffic'':
      None}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.routing.routing\n  Field
      required [type=missing, input_value={''traffic_and_conditions''...o_avoid_traffic'':
      None}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.comfort_settings.lighting_and_ambience\n  Field
      required [type=missing, input_value={''climate_control'': {''pre...ion_preferences'':
      None}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.fire_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...restaurant_type'':
      None}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.dancing_station\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...restaurant_type'':
      None}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\npertinent_user_preferences.points_of_interest.grocery_shopping\n  Field
      required [type=missing, input_value={''restaurant'': {''favourit...restaurant_type'':
      None}}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.7/v/missing\n```\nExpected
      Parameter Schema:\n\n```json\n{''$defs'': {''ClimateControl'': {''properties'':
      {''fan_speed_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fan Speed Preferences''},
      ''preferred_temperature'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Temperature''},
      ''seat_heating_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Seat Heating Preferences''},
      ''airflow_direction_preferences'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Airflow Direction
      Preferences''}}, ''title'': ''ClimateControl'', ''type'': ''object''}, ''DanceHall'':
      {''properties'': {''preferred_dancing_network'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Dancing Network''}, ''dancing_station_onsite_amenities'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Dancing Station Onsite Amenities''}, ''preferred_type_of_dancing_while_traveling'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Type Of Dancing While Traveling''},
      ''preferred_type_of_dancing_at_everyday_points'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Type Of Dancing At Everyday Points''}}, ''title'': ''DanceHall'',
      ''type'': ''object''}, ''EntertainmentAndMedia'': {''properties'': {''music'':
      {''allOf'': [{''$ref'': ''#/$defs/Music''}]}, ''radio_and_podcast'': {''allOf'':
      [{''$ref'': ''#/$defs/RadioAndPodcast''}]}}, ''required'': [''music'', ''radio_and_podcast''],
      ''title'': ''EntertainmentAndMedia'', ''type'': ''object''}, ''FireStation'':
      {''properties'': {''bingo_expertise'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Bingo Expertise''},
      ''willingness_to_donate'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Willingness To Donate''},
      ''preferred_fire_station'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Fire Station''}},
      ''title'': ''FireStation'', ''type'': ''object''}, ''GroceryShopping'': {''properties'':
      {''preferred_supermarket_chain'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Supermarket
      Chain''}, ''preference_for_local_markets_farms_or_supermarket'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Preference For Local Markets Farms Or Supermarket''}},
      ''title'': ''GroceryShopping'', ''type'': ''object''}, ''LightingAndAmbience'':
      {''properties'': {''interior_lighting_color_preferences'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Interior Lighting Color Preferences''}, ''interior_lighting_ambient_preferences'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Interior Lighting Ambient Preferences''},
      ''interior_lighting_brightness_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Interior Lighting Brightness Preferences''}}, ''title'': ''LightingAndAmbience'',
      ''type'': ''object''}, ''Music'': {''properties'': {''favorite_songs'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Songs''}, ''favorite_genres'': {''anyOf'':
      [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'':
      ''null''}], ''title'': ''Favorite Genres''}, ''favorite_artists_or_bands'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Artists Or Bands''}, ''preferred_music_streaming_service'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Music Streaming Service''}}, ''title'':
      ''Music'', ''type'': ''object''}, ''NavigationAndRouting'': {''properties'':
      {''parking'': {''allOf'': [{''$ref'': ''#/$defs/Parking''}]}, ''routing'': {''allOf'':
      [{''$ref'': ''#/$defs/Routing''}]}, ''traffic_and_conditions'': {''allOf'':
      [{''$ref'': ''#/$defs/TrafficAndConditions''}]}}, ''required'': [''parking'',
      ''routing'', ''traffic_and_conditions''], ''title'': ''NavigationAndRouting'',
      ''type'': ''object''}, ''OutputFormat'': {''properties'': {''preference'': {''title'':
      ''Preference'', ''type'': ''string''}, ''sentence_preference_revealed'': {''title'':
      ''Sentence Preference Revealed'', ''type'': ''string''}}, ''required'': [''preference'',
      ''sentence_preference_revealed''], ''title'': ''OutputFormat'', ''type'': ''object''},
      ''Parking'': {''properties'': {''preferred_parking_type'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Preferred Parking Type''}, ''preference_for_covered_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Covered Parking''}, ''price_sensitivity_for_paid_parking'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Price Sensitivity For Paid Parking''}, ''preference_for_parking_with_security'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preference For Parking With Security''},
      ''need_for_handicapped_accessible_parking'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Need For Handicapped Accessible Parking''}, ''distance_willing_to_walk_from_parking_to_destination'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Distance Willing To Walk From Parking To
      Destination''}}, ''title'': ''Parking'', ''type'': ''object''}, ''PointsOfInterest'':
      {''properties'': {''restaurant'': {''allOf'': [{''$ref'': ''#/$defs/Restaurant''}]},
      ''fire_station'': {''allOf'': [{''$ref'': ''#/$defs/FireStation''}]}, ''dancing_station'':
      {''allOf'': [{''$ref'': ''#/$defs/DanceHall''}]}, ''grocery_shopping'': {''allOf'':
      [{''$ref'': ''#/$defs/GroceryShopping''}]}}, ''required'': [''restaurant'',
      ''fire_station'', ''dancing_station'', ''grocery_shopping''], ''title'': ''PointsOfInterest'',
      ''type'': ''object''}, ''RadioAndPodcast'': {''properties'': {''general_news_source'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''General News Source''}, ''favorite_podcast_shows'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Shows''}, ''favorite_podcast_genres'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Favorite Podcast Genres''}, ''preferred_radio_station'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Preferred Radio Station''}}, ''title'':
      ''RadioAndPodcast'', ''type'': ''object''}, ''Restaurant'': {''properties'':
      {''favourite_cuisine'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Favourite Cuisine''},
      ''dietary_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Dietary Preference''},
      ''desired_price_range'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Desired Price Range''},
      ''fast_food_preference'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Fast Food Preference''},
      ''preferred_payment_method'': {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''},
      ''type'': ''array''}, {''type'': ''null''}], ''title'': ''Preferred Payment
      Method''}, ''preferred_restaurant_type'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Preferred Restaurant Type''}}, ''title'': ''Restaurant'', ''type'': ''object''},
      ''Routing'': {''properties'': {''tolerance_for_traffic'': {''anyOf'': [{''items'':
      {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}],
      ''title'': ''Tolerance For Traffic''}, ''avoidance_of_specific_road_types'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Avoidance Of Specific Road Types''}, ''priority_for_shortest_time_or_shortest_distance'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Priority For Shortest Time Or Shortest Distance''}},
      ''title'': ''Routing'', ''type'': ''object''}, ''TrafficAndConditions'': {''properties'':
      {''traffic_information_source_preferences'': {''anyOf'': [{''items'': {''$ref'':
      ''#/$defs/OutputFormat''}, ''type'': ''array''}, {''type'': ''null''}], ''title'':
      ''Traffic Information Source Preferences''}, ''willingness_to_take_longer_route_to_avoid_traffic'':
      {''anyOf'': [{''items'': {''$ref'': ''#/$defs/OutputFormat''}, ''type'': ''array''},
      {''type'': ''null''}], ''title'': ''Willingness To Take Longer Route To Avoid
      Traffic''}}, ''title'': ''TrafficAndConditions'', ''type'': ''object''}, ''UserPreferences'':
      {''properties'': {''routing'': {''allOf'': [{''$ref'': ''#/$defs/NavigationAndRouting''}]},
      ''comfort_settings'': {''allOf'': [{''$ref'': ''#/$defs/VehicleSettingsAndComfort''}]},
      ''points_of_interest'': {''allOf'': [{''$ref'': ''#/$defs/PointsOfInterest''}]},
      ''entertainment_and_media'': {''allOf'': [{''$ref'': ''#/$defs/EntertainmentAndMedia''}]}},
      ''required'': [''routing'', ''comfort_settings'', ''points_of_interest'', ''entertainment_and_media''],
      ''title'': ''UserPreferences'', ''type'': ''object''}, ''VehicleSettingsAndComfort'':
      {''properties'': {''climate_control'': {''allOf'': [{''$ref'': ''#/$defs/ClimateControl''}]},
      ''lighting_and_ambience'': {''allOf'': [{''$ref'': ''#/$defs/LightingAndAmbience''}]}},
      ''required'': [''climate_control'', ''lighting_and_ambience''], ''title'': ''VehicleSettingsAndComfort'',
      ''type'': ''object''}}, ''description'': \"A function that extracts personal
      preferences of the user in the categories ''Points of Interest'', ''Navigation
      and Routing'', ''Vehicle Settings and Comfort'', ''Entertainment and Media''.\",
      ''properties'': {''pertinent_user_preferences'': {''allOf'': [{''$ref'': ''#/$defs/UserPreferences''}]}},
      ''required'': [''pertinent_user_preferences''], ''title'': ''extract_user_preferences_v1'',
      ''type'': ''object''}\n```\nPlease respond with a JSONPatch to correct the error
      for schema_id=[call_v7mBcZ0VbHPWdjqObiUB5GPJ].", "role": "tool", "tool_call_id":
      "call_v7mBcZ0VbHPWdjqObiUB5GPJ"}], "model": "gpt-4o", "n": 1, "stream": false,
      "temperature": 0.0, "tool_choice": {"type": "function", "function": {"name":
      "PatchFunctionParameters"}}, "tools": [{"type": "function", "function": {"name":
      "PatchFunctionParameters", "description": "Respond with all JSONPatch operations
      required to update the previous function call.\n\nUse to correct all validation
      errors in non-compliant function calls,\nor to extend or update existing structured
      data in the presence of new information.", "parameters": {"type": "object",
      "properties": {"schema_id": {"description": "The ID of the function you are
      patching.", "type": "string"}, "reasoning": {"description": "Think step-by-step,
      listing each validation error and the JSONPatch operation needed to correct
      it. Cite the fields in the JSONSchema you referenced in developing this plan.",
      "type": "string"}, "patches": {"description": "A list of JSONPatch operations
      to be applied to the previous tool call''s response.", "type": "array", "items":
      {"description": "A JSON Patch document represents an operation to be performed
      on a JSON document.\n\nNote that the op and path are ALWAYS required. Value
      is required for ALL operations except ''remove''.\n\nExamples:\n```json\n{\"op\":
      \"add\", \"path\": \"/a/b/c\", \"patch_value\": 1}\n{\"op\": \"replace\", \"path\":
      \"/a/b/c\", \"patch_value\": 2}\n{\"op\": \"remove\", \"path\": \"/a/b/c\"}\n```",
      "type": "object", "properties": {"op": {"description": "The operation to be
      performed. Must be one of ''add'', ''remove'', ''replace''.", "enum": ["add",
      "remove", "replace"], "type": "string"}, "path": {"description": "A JSON Pointer
      path that references a location within the target document where the operation
      is performed.", "type": "string"}, "value": {"description": "The value to be
      used within the operation. REQUIRED for ''add'', ''replace'', and ''test'' operations.",
      "anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}]}}, {"type": "object", "additionalProperties":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "array", "items": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}},
      {"type": "object", "additionalProperties": {"anyOf": [{"type": "string"}, {"type":
      "integer"}, {"type": "boolean"}, {"type": "number"}, {"type": "array", "items":
      {"anyOf": [{"type": "string"}, {"type": "integer"}, {"type": "boolean"}, {"type":
      "number"}]}}, {"type": "object", "additionalProperties": {"anyOf": [{"type":
      "string"}, {"type": "integer"}, {"type": "boolean"}, {"type": "number"}]}}]}}]}},
      "required": ["op", "path", "value"]}}}, "required": ["schema_id", "reasoning",
      "patches"]}}}]}'
    headers: {}
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA7RW25IaNxB95ytUetkX1gt7Y5dHV8V2bjZO1pfEbKk0Us+MFo16LDVgssW/p6QZ
        YGDZqlSc8ABCffqoT6tb0mOPMW40HzOuSkmqqu3p7cMP7yZvwuC1pL8m1n/+7Y+3d4vqFt7+ih8z
        3o8emD2Aoo3XC4VVbYEMusasPEiCyDocnQ+urkfD4UUyVKjBRreiptNLPD0fnF+eDq5OhxetY4lG
        QeBj9qXHGGOP6TuG6DR842M26G9mKghBFsDHWxBj3KONM1yGYAJJR7y/Myp0BC5G7ebWdgyEaIWS
        1u4Wbj6PnfEuT9JaMfz5w+LVZ61sVry/+X2mfvzlJnOfrled9RrqVZ0CyudObfPTsW/nxweLMcad
        rJLvRJIqX7XAifSyAgIfDqgY49IX8wocRRn8ccqDKqGSwugpH0+buBej6qX6c/AxezP5pB++vsvM
        h5dXryc/TXl/yj3IgM64IuHvSmDGGTLSsjDPKhOCQceWMrA0dgXz8HVuPGiWG7A6vGB3yBR6D4oY
        lSb02RKYA9CMkEmtmYZczi2xhbRzCCxHz6iELV9DM2YntfQz44qTPjvxOKd2aE1RxrGQTgtZZQac
        gmjIjQcRSMYExf9aOhVxuynpNDspPCrwKxFKrOvI+SLJrmN+IUz5+MvjlGOd1EutN8YyTZzV4Mk4
        cCTmAbyoPeTgYwThrI3xrA07OSaJUz5+nPIG6kGLFiBiWUz5ONXhxh6pRI5eKFxAB9zFGQUigAuG
        zMLQKsFraY5i9zg3Cy8NlSKAmntDqx067lHCldJpo2RdgxZSKQjBZBae0uvUXgrE0libFKFYSjsT
        ucdqJxOFhkDGpW1ovdfr/nemuf09TDOhBS83isnLPDdqF7JcoNHJjLkINSiTGyU8Sp22I+zlGf0m
        vaFETxBIkKlAdCc2OfhuXQqrHD2JABR1hbOjhX4o1ziCGKjYohVa3GPeSXoKbmjpn8IzH0cOQjji
        8e+l12gchbgjaUkIdNZt5kPNmXEFCviWGEOnhdoyTPHFqkMn6UmHxabaZ//voz84ep4/CjZAB7RE
        P+u01j6DwNjuIGQF8TDer9MNWSzgGMbGd1kaC7EFFmCPHAvHXCQJWIBfabkSja7/Iz2HR/Dz+Qnz
        Gnwl/QxIqFIa9+zZZlFJKxpoELn0VUh9uiPYKrlf871Lc907Nr5vR+vtY8NiUXvMwsHbgefGmVCK
        5uKMt24grJslIt19etTM994pvPZY1SQIZ+Ai4eXw8qYh5Lt3VNd821oJSdqO4ep61GuD5GEVCCqR
        G1eAr71Jzxye10Jfja4vBqP8dsB7697fAAAA//8DAIKKM6zvCQAA
    headers:
      CF-Cache-Status:
      - DYNAMIC
      CF-RAY:
      - 8a0c08a84d93aaa6-SJC
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Jul 2024 23:18:39 GMT
      Server:
      - cloudflare
      Transfer-Encoding:
      - chunked
      alt-svc:
      - h3=":443"; ma=86400
      openai-organization:
      - langchain
      openai-processing-ms:
      - '5784'
      openai-version:
      - '2020-10-01'
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ratelimit-limit-requests:
      - '10000'
      x-ratelimit-limit-tokens:
      - '22000000'
      x-ratelimit-remaining-requests:
      - '9998'
      x-ratelimit-remaining-tokens:
      - '21993937'
      x-ratelimit-reset-requests:
      - 11ms
      x-ratelimit-reset-tokens:
      - 16ms
      x-request-id:
      - req_0192d0a9dedfebe15125705ba67cc084
    status:
      code: 200
      message: OK
version: 1
